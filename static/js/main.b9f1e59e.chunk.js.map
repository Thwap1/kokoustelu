{"version":3,"sources":["Components/Auth/Sessions.js","Components/Auth/PrivateRoute.js","Components/Shared/Navbar.js","Components/UusiKokous/Esityslista/CheckboxArea.js","Components/UusiKokous/Esityslista/Esityslista.js","Views/Home.js","Components/Shared/HttpRequests.js","Components/Shared/HelpPop.js","Views/Auth/Login.js","Components/Auth/FbRegister.js","Components/Auth/AppRegister.js","Components/Shared/Loading.js","Views/Auth/Register.js","Components/User/JoinAssoc.js","Components/User/AssocTable.js","Views/User/UserPage.js","Components/UusiKokous/Esityslista/Kalenteri.js","Components/Assoc/KokousTable.js","Components/Assoc/Kokouslistat.js","Components/Assoc/Jasenlista.js","Components/Assoc/AssocContent.js","Views/Assoc/AssocMain.js","Components/UusiKokous/Perustiedot.js","Components/UusiKokous/Osallistujat.js","Components/UusiKokous/Paatosvaltaisuus.js","Components/Document/TextEditor.js","Components/UusiKokous/Yhteenveto.js","Components/UusiKokous/Esityslista/ResizeTextArea.js","Components/UusiKokous/Esityslista/Paatos.js","Components/UusiKokous/Esityslista/Kannata.js","Components/UusiKokous/Esityslista/Kommentit.js","Components/UusiKokous/Esityslista/Mielipide.js","Components/UusiKokous/Esityslista/Hyvaksy.js","Components/UusiKokous/Esityslista/Henkilovalinta.js","Components/UusiKokous/Esityslista/Sisalto.js","Components/UusiKokous/Esityslista/EsitysKohta.js","Views/Kokous/UusiKokous.js","Components/Document/DocumentReadOnly.js","Components/Kokous/KokousDocs.js","Components/Kokous/KokousOsallistujat.js","Components/Kokous/Kokousaika.js","Components/Kokous/KokousPaatosvalta.js","Components/Kokous/KokousPoytakirja.js","Views/Kokous/KokousDetails.js","App.js","serviceWorker.js","index.js","../node_modules/pdfjs-dist/build sync"],"names":["setUserSession","user","accessToken","localStorage","setItem","JSON","stringify","getSessionRole","userrole","getItem","parse","getUser","userStr","PrivateRoute","Component","component","rest","render","props","to","pathname","state","from","location","Navbar","menuItems","useState","showMenu","setShowMenu","history","useHistory","toggleMenu","px","document","getElementById","style","height","color","width","className","onClick","window","confirm","push","removeItem","reload","cursor","navbar","size","id","overlay","summa","timer","marginTop","fontFamily","position","zIndex","top","left","backgroundColor","transition","padding","marginLeft","Home","url","process","body","axios","post","withCredentials","then","res","HelpPop","text","placement","heading","btnText","variant","OverlayTrigger","trigger","key","Popover","Title","as","Content","Button","Login","email","setEmail","password","setPassword","handleInputChange","ev","target","name","value","onSubmit","preventDefault","alert","login","call","request","firstname","data","lastname","token","catch","err","console","log","response","message","type","onChange","appId","autoLoad","fields","callback","fbres","fb_id","first_name","last_name","renderProps","lineHeight","marginBottom","FbRegister","fbRes","setFirstname","setLastname","AppRegister","password2","setPassword2","Loading","Register","regSelect","setRegSelect","setFbRes","JoinAssoc","yhdistykset","setShowForm","yhdistys","setYhdistys","yhdistysPassword","setYhdistysPassword","setNewMember","includes","length","AssocTable","map","item","textDecoration","UserPage","undefined","isModalOpen","setIsModalOpen","setYhdistykset","showForm","useEffect","maxWidth","TervetuloaModal","visible","onClose","animation","duration","Kalenteri","pvm","alku","kk","pv","Date","getMonth","getDate","kuu","parseInt","KokousTable","kokous","yhdistys_id","pvmYear","year","loading","setLoading","pointerEvents","avoinna","role","id_y","title","kokousnro","startDate","endDate","whiteSpace","otsikko","loppu","Provider","toLocaleDateString","event","openKokous","Kokouslistat","kokoukset","showComponent","tulevat","setTulevat","kaynnissa","setKaynnissa","menneet","setMenneet","status","Jasenlista","members","AssocAdmin","setShowComponent","helpText","handleMenuClick","napit","parentNode","querySelectorAll","i","classList","remove","add","AssocMain","setKokoukset","setMembers","useParams","setRole","member","setSessionRole","filter","x","valmis","req","AssocContent","Perustiedot","handlePerustiedotChange","perustiedot","saveKokousDraft","setPerustiedot","registerLocale","fi","kokousNro","locale","dateFormat","selected","date","selectsStart","minDate","selectsEnd","checked","htmlFor","Osallistujat","puheenjohtaja","osallistujat","setOsallistujat","saveOsallistujat","varalla","setVaralla","handleVaralleClick","vara","concat","handleOsallistuuClick","osallistuja","Paatosvaltaisuus","handlePaatosvaltaChange","paatosvaltaisuus","min","step","esityslista","aktiivisuus","kesto","rows","muu","TextEditor","editorContentChange","teksti","contenteditable","apiKey","onEditorChange","init","plugins","toolbar","insertdatetime_dateformat","setup","ed","on","evt","keyCode","execCommand","stopPropagation","Yhteenveto","esityslista_otsakkeet","pvmForm","month","day","start","end","nimi","osallistuu","join","otsikot","paatosvalta","substring","kokouskutsu","setKokouskutsu","saveNewKokous","uusiKokous","kokousid","saveDocumentKokouskutsu","kokouskutsuDocument","draft","content","kokousosallistujat","rooli","Object","assign","sendInviteEmail","aihe","indexOf","runko","invite","viesti","ResizeTextArea","sisusta","sisus","save","placeholder","edit","Tarea","avaa","useRef","updatethis","current","minHeight","scrollHeight","ref","spellCheck","onInput","tabIndex","paddingBottom","Paatos","pj","kohta_id","kokous_id","tila","paatos","thisdata","nappiBool","setnappibool","_id","delay","Kannata","tyyppi","maara","setMaara","classi","setClassi","tyypit","param","params","URLSearchParams","append","kannata","Kommentit","thread_id","kommenttiBool","setKommenttiBool","kommentti","setKommentti","kommentit","setKommentit","kommenttimaara","this_save","sendi","xmlns","viewBox","fill","stroke-width","stroke","d","kommentti_id","background","aika","julkaise","EditableCheckbox","ruutu","arvo","check","onKeyDown","parseFloat","toFixed","CheckboxArea","options","toggle","flags","arvot","checkValue","uusi","multi","lisaa","this_remove","nnimi","this_check","tekija","click","Checkbox","Mielipide","kuvaus","positio","kohta","setKohta","perustelu","setPerustelu","mbool","setMielibool","laheta_setup","paivitaKohta","addEventListener","sel","getSelection","rangeCount","element","getRangeAt","commonAncestorContainer","anchorOffset","offset","focusOffset","toString","mielipide","onMouseDown","otsake","slice","osa","Hyvaksy","paddingLeft","border","borderBottom","Henkilovalinta","jasenlista","admin","oikeudet","users","setUsers","ei_ehdokkaat","setEiEhdokkaat","ehdokkaat","setEhdokkaat","ehdokasBool","setEhdokasBool","hash","Map","body2","set","has","obj","get","delete","error","Sisalto","valinnat","setValinnat","valintaArvot","setValintaArvot","setKuvaus","k_alku","set_k_Alku","k_valittu","set_k_Valittu","k_loppu","set_k_Loppu","mielipiteet","setMielipiteet","setTyyppi","perustelut","setPerustelut","vid","check_uusi","check_save","check_toggle","flag","s","e","y","querySelector","getBoundingClientRect","pageYOffset","scrollTo","behavior","setTimeout","setti","a","l","EsitysKohta","sisalto","vaihda_tyyppi","alkaa","loppuu","auki","poista","this_avaa","thisvaihda_tyyppi","thisinfo","palaa","elem","innerHTML","nappeja","onMouseEnter","transform","nappit","updateParams","keys","37","38","39","40","preventDefaultForScrollKeys","supportsPassive","defineProperty","raahattavat","raahattava","tar","wheelOpt","passive","wheelEvent","createElement","raahausalku","getElementsByClassName","contains","this","raahausmove","dy","touches","clientY","after","h","y2","y3","parent","insertBefore","nextSibling","raahausloppu","removeEventListener","Esityslista","setEsityslista","items","setItems","Array","setKohdat","axiosSave","updateParams2","thread","n","clearTimeout","id_kohta","lisaa_ja_poista","focus","avaaItem","UusiKokous","setPuheenjohtaja","setPaatosvaltaisuus","setId_y","id_k","setId_k","now","getDraft","avoin","esitys","pv_esityslista","aktiv","pv_aktiivisuus","pv_kesto","pv_muu","delReq","getKokousNro","find","params2","parse_kokousnro","DocumentReadOnly","setShowTable","tinymce","activeEditor","disabled","menubar","selector","KokousDocs","showTable","kokousDocuments","setKokousDocuments","setDocument","uploadedDocs","upload","setUpload","uploadOrNot","setUploadOrNot","handleOpenDocumentClick","handleOpenUploadedDoc","KokousOsallistujat","jasenet","kokousRooli","handleOsallistujatClick","jasen","Kokousaika","handleVaihdaKokousaika","pickerDate","setPickerDate","KokousPaatosvalta","paatosvaltaMaaritys","muuKriteeriTeksti","tila_kesto","tila_esityslista","tila_aktiivisuus","kaikki","avannutEsityslistan","pv_avannut","reduce","v","ollutAktiivinen","pv_aktiivinen","pv_kesto_toteutunut","KokousPoytakirja","paatokset","kokousnumero","ajat","paatostiedot","poytakirja","setPoytakirja","savePoytakirja","handlePaataKokousClick","KokousDetails","kokousId","setKokousRooli","setKokous","setJasenet","setPaatokset","osal","henkilo","runRequest","uusiPvm","toISOString","split","enddate","fontWeight","display","gridTemplateColumns","marginRight","data-toggle","data-target","handlePJPoistuuKokouksesta","syy","body3","PoistuModal","setSyy","aria-labelledby","aria-hidden","data-dismiss","aria-label","App","margin","exact","path","Boolean","hostname","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister","webpackEmptyContext","Error","code","resolve","module","exports"],"mappings":"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","file":"static/js/main.b9f1e59e.chunk.js","sourcesContent":["export const setUserSession = (user, accessToken) => {\r\n    localStorage.setItem('user', JSON.stringify(user))\r\n    localStorage.setItem('token', accessToken)\r\n}\r\nexport const setSessionRole = (role) => {\r\n    localStorage.setItem('role', JSON.stringify(role))    //  yhdistyksen nimi ja rooli {yhdistys:yhdistys, role: role}\r\n}\r\nexport const getSessionRole = () => {\r\n    const userrole = localStorage.getItem('role')\r\n    if(userrole) return JSON.parse(userrole)\r\n    else return null \r\n}\r\nexport const removeRole = () => {   // onko tämä käytössä? \r\n    localStorage.removeItem('role')\r\n}\r\nexport const getToken = () => {\r\n    return localStorage.getItem('token') || null;\r\n}\r\nexport const getUser = () => {\r\n    const userStr = localStorage.getItem('user');\r\n    if (userStr) return JSON.parse(userStr);\r\n    else return null;\r\n}\r\nexport const removeUserSession = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('role');\r\n    window.location.reload()            // reload on workaround console.loggerin erroriin: \"You are overriding current access token, that means some other app is expecting different access token and you will probably break things.\"\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { getToken } from './Sessions'\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }) {\r\n    return (\r\n        <Route {...rest}\r\n            render={(props) => getToken() ? <Component {...props} />\r\n                : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />}\r\n        />\r\n    )\r\n}","import React, { useState } from 'react'\r\nimport * as Icon from 'react-bootstrap-icons';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { getUser, removeUserSession } from '../Auth/Sessions';\r\n\r\nexport default function Navbar() {\r\n\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    let history = useHistory()\r\n\r\n    const toggleMenu = () => {\r\n        let px = \"\";\r\n        if (showMenu) px = \"0\";\r\n        else if (!showMenu && getUser()) px = \"100px\";\r\n        else px = \"150px\"\r\n        document.getElementById(\"dropMenu\").style.height = px;\r\n        setShowMenu(!showMenu);\r\n    }\r\n    const handleLogOut = () => {\r\n        if (window.confirm(`Haluatko kirjautua ulos?`)) {\r\n            history.push('/')\r\n            removeUserSession()\r\n        }\r\n    }\r\n    let menuItems\r\n    if (getUser()) {\r\n        menuItems = (<>\r\n            <Link style={{ color: \"white\", width: '200px' }} className=\"nav-link\" to=\"/userpage\">Omat sivut</Link>\r\n            <p onClick={handleLogOut} style={{ color: \"white\", width: '250px', cursor: 'pointer' }} className=\"nav-link\" >Kirjaudu ulos</p>\r\n        </>)\r\n    } else {\r\n        menuItems = (<>\r\n            <Link style={{ color: \"white\", width: '200px' }} className=\"nav-link\" to=\"/\">Etusivu</Link>\r\n            <Link style={{ color: \"white\", width: '200px' }} className=\"nav-link\" to=\"/login\">Kirjaudu</Link>\r\n            <Link style={{ color: \"white\", width: '100px' }} className=\"nav-link\" to=\"/register\">Rekisteröidy</Link>\r\n        </>)\r\n    }\r\n    return (\r\n        <div className=\"navbar navbar-expand\" style={navbar} onClick={toggleMenu}>\r\n            <p className=\"MenuText mt-2 ml-5\" >\r\n                Menu\r\n                <Icon.Justify size={30} className=\"ml-3 fa-5x\" />\r\n            </p>\r\n            <div id=\"dropMenu\" style={overlay} onClick={toggleMenu}>\r\n                {showMenu\r\n                    ? <>\r\n                        {menuItems}\r\n                    </>\r\n                    : <></>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nconst overlay = {\r\n    marginTop: '75px',\r\n    fontFamily: 'Lato, sans-serif',\r\n    height: '0%',\r\n    width: '100%',\r\n    position: 'absolute',\r\n    zIndex: '1',\r\n    top: '0',\r\n    left: '0',\r\n    backgroundColor: 'rgba(44,62,80, 0.9)',\r\n    // overflow: 'hidden',\r\n    transition: '0.5s',\r\n}\r\nconst navbar = {\r\n    color: 'white',\r\n    backgroundColor: 'rgba(44,62,80, 0.9)',\r\n    height: '75px',\r\n    padding: '10px',\r\n    position: 'relative',\r\n    width: '100vw !important',\r\n /*   marginRight: '-50vw',*/\r\n    marginLeft: 'calc(-50vw + 50%)' \r\n}\r\n","import React, { useState  } from 'react';\r\nimport '../../../Style/CheckboxArea.css';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport Kommentit from './Kommentit';\r\n\r\n\r\nvar summa;\r\nconst CheckboxArea = ({options=false, toggle, flags, kohta_id, kokous_id, edit=true, arvot=[], checkValue=[], check, remove, save, uusi,multi=0,type=\"3\",tila}) => {\r\n    summa=0; \r\n    arvot.map(x=> summa+=parseInt(x.maara))\r\n    \r\n    \r\n    \r\n    \r\n    const thisuusi = () => {\r\n        \r\n        uusi(0)\r\n    }\r\n    \r\n    const this_remove = (id) => {if(tila!=\"3\")remove(id)}\r\n    const this_save = (id,nnimi) => {if(tila!=\"3\")save(id,nnimi)}\r\n    const this_check = (id) => {if(tila!=\"3\")check(id,multi)}\r\n\r\n    edit=false;\r\n\r\n    let lisaa;\r\n    if (type==\"3\" && tila !=\"3\" && (options || flags&2 )) lisaa = <button className=\"uusi add\" onClick={()=>thisuusi()}>Valinta</button>\r\n\r\n    return (\r\n        <div style={{zIndex:\"100\"}}>\r\n            {arvot.map(arvot => \r\n                 <div><EditableCheckbox\r\n                 arvo={(checkValue && checkValue.includes(arvot.id))} \r\n                 summa={summa} \r\n                 tila={tila}\r\n                 maara={arvot.maara} \r\n                 edit={arvot.tekija}\r\n                 remove={this_remove}\r\n                 save={this_save}\r\n                 check={this_check}\r\n                 nimi={arvot.nimi}\r\n                 key={arvot.id}\r\n                 id={arvot.id} />\r\n                 <div><Kommentit\r\n                    tyyppi=\"valinta\"\r\n                    thread_id={arvot.id}\r\n                    kohta_id={kohta_id}\r\n                    kokous_id={kokous_id}\r\n                    maara={arvot.kommentit}/>\r\n                </div>\r\n                </div>\r\n                  )}    \r\n            {lisaa}\r\n            {options?<div><hr/>\r\n            <Checkbox check={flags&1} click={()=>toggle(kohta_id,1)} nimi={\"Sallimonta valintaa\"}/>\r\n            <Checkbox check={flags&2} click={()=>toggle(kohta_id,2)} nimi={\"Kaikki voi ehdottaa\"}/>\r\n            </div>:\"\"}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst EditableCheckbox = ({tila,maara=0,edit,id,nimi,arvo,check,remove,save,summa=0}) => {\r\n    \r\n    const thischeck = () => {if(tila==23 || tila == 3)return;check(id)}\r\n    const thisremove = () => {if(tila==23 || tila == 3)return;remove(id)}\r\n    const this_save = (event) => {if(tila==23 || tila == 3)return;save(id,event.target.value)}\r\n    const thiskey = (event) => {\r\n        if (event.key === ' '){\r\n            event.preventDefault();\r\n            check(id);\r\n        }\r\n    }\r\n   let ruutu;\r\n   ruutu = <div tabIndex=\"0\" onKeyDown={thiskey} className={(arvo)?\"green ruutu\":\"ruutu\"} onClick={thischeck}></div>\r\n    \r\n    return (\r\n        <div className={((tila==\"3\" || tila==\"23\"))?\"\":\"valintahover\"}>\r\n        <div className=\"valinta\" >\r\n            \r\n             \r\n             {(summa>0)?<div style={{marginLeft:\"40px\",width:(parseFloat(maara)/parseFloat(summa)*88)+\"%\",maxWidth:\"calc(100% - 40px)\",backgroundColor:\"#ddd\",height:\"5px\",marginTop:\"30px\",position:\"absolute\"}}></div>:\"\"}\r\n            {ruutu}\r\n            {(edit==0 && maara ==0)?\r\n            \r\n            <input onChange={this_save} spellCheck=\"false\" className=\"ruutuvalinta\" type=\"text\" value={nimi} ></input>:\r\n            \r\n            <div spellCheck=\"false\" className=\"ruutuvalinta\">{nimi} \r\n            {(maara>0)?<div className=\"valinta_maara\">{(parseFloat(maara)/parseFloat(summa)*100).toFixed(1)}% ({maara})</div>:\"\"}</div>}\r\n \r\n            {(edit==0 && maara==0)?<div className=\"remove\" onClick={thisremove}></div>:\"\"}\r\n            </div>\r\n            \r\n            </div>\r\n            \r\n      )\r\n}\r\n\r\nexport default CheckboxArea\r\nconst Checkbox = ({check,click,nimi}) => {\r\n\r\n   \r\n   \r\n\r\n    return (\r\n        <div className=\"valinta\" onClick={click}>\r\n            <div  className={(check)?\"green ruutu\":\"ruutu\"} ></div>\r\n            <div spellCheck=\"false\" className=\"ruutuvalinta\" >{nimi}</div>\r\n            </div>\r\n      )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport EsitysKohta from './EsitysKohta'\r\nimport '../../../Style/Esityslista.css'\r\n\r\nvar timer;\r\nvar updateParams = new URLSearchParams();\r\nlet auki = new Map();\r\nconst url = process.env.REACT_APP_HOST_URL\r\nconst Esityslista = ({ puheenjohtaja, setEsityslista, esityslista, kokousid = \"-1\", edit = \"true\", saveKokousDraft, setShowComponent = null}) => {\r\n  const [items, setItems] = useState([])\r\n  \r\n  \r\n  const [avaa, setKohdat] = useState(new Array());\r\n  \r\n  useEffect(() => {\r\n    if (kokousid == -1) return;\r\n    let params = new URLSearchParams();\r\n    params.append(\"kokous_id\", kokousid)\r\n    axios.post(url + 'data.php', params, { withCredentials: true }).then((response) => setItems(response.data[0]))}, [kokousid])\r\n\r\n  const axiosSave = () => {      \r\n      let updateParams2 = updateParams;\r\n      updateParams = new URLSearchParams();  \r\n      axios.post(url + 'data.php', updateParams2, { withCredentials: true }).then((response) => {console.log(response.data)}) }\r\n\r\n\r\n  const save = (thread, data, delay, type, kohta) => {\r\n    if (updateParams.get(\"kohta\") !== kohta || updateParams.get(\"type\") !== type) axiosSave();\r\n    if (type === \"flags\")\r\n      setItems(items.map(items => (items.id === kohta) ? { ...items, flags: (items.flags ^ parseInt(data)) } : items))\r\n\r\n    if (type === \"otsake\")\r\n      setItems(items.map(items => (items.id === kohta) ? { ...items, n: data } : items))\r\n    updateParams = new URLSearchParams();\r\n    if (type === \"perustelu\") {\r\n      updateParams.append(\"param\", data[0])\r\n      updateParams.append(\"draft\", data[1])\r\n      \r\n    } else if (type === \"mielipide\") {\r\n      updateParams.append(\"param\", data[0])\r\n      updateParams.append(\"alku\", data[1])\r\n      updateParams.append(\"loppu\", data[2])\r\n      updateParams.append(\"draft\", data[3]) /* 0 = draft , 1= julkaise */\r\n    } else if (type === \"paatos\"){\r\n      setItems(items.map(items => (items.id === kohta) ? { ...items, paatos: data[0],tila:data[1] } : items))\r\n      updateParams.append(\"param\", data[0])\r\n      updateParams.append(\"tila\", data[1])\r\n    } else {  updateParams.append(\"param\", data)\r\n      updateParams.append(\"param\", data)\r\n    }\r\n    updateParams.append(\"thread\", thread);\r\n    updateParams.append(\"kohta\", kohta);\r\n    updateParams.append(\"kokous_id\", kokousid)\r\n    updateParams.append(\"save\", type)\r\n    window.clearTimeout(timer);\r\n    timer = setTimeout(function () { axiosSave() }, delay)\r\n\r\n  }\r\n\r\n\r\n  const vaihda_tyyppi = (id_kohta, param) => {\r\n    var params = new URLSearchParams()\r\n    params.append(\"paatos_valitse\", param)\r\n    params.append(\"kohta\", id_kohta)\r\n    params.append(\"kokous_id\", kokousid)\r\n    axios.post(url + 'data.php', params, { withCredentials: true }).then((response) => {\r\n      setItems(response.data[0])\r\n        \r\n    })\r\n  }\r\n\r\n  const lisaa_ja_poista = (param=\"Uusi\",kohta=\"0\") => {\r\n    axiosSave();\r\n    var params = new URLSearchParams();\r\n    params.append(param, kohta);\r\n    params.append(\"kokous_id\", kokousid)\r\n    axios.post(url + 'data.php', params, { withCredentials: true })\r\n      .then((response) => {\r\n        \r\n        setItems(response.data[0])\r\n        if(param==\"Uusi\")document.getElementById(response.data[0][response.data[0].length - 1].id).focus();\r\n      })}\r\n\r\n  const avaaItem = (id) => {\r\n    axiosSave();\r\n    if (timer) {\r\n      window.clearTimeout(timer);\r\n      axiosSave();\r\n    }\r\n    setKohdat ((avaa.includes(id))?avaa.filter(x=> (x!=id)):[...avaa, id]); // lisää clickattu kohta listaan tai poista se == avataan sen sisältö\r\n  }\r\n  \r\n  let lisaa;\r\n  if (edit) lisaa = <button className=\"lisaa_esitysitem\" onClick={()=>lisaa_ja_poista()}>Asiakohta</button>\r\n  console.log('items', items)\r\n  let admin;\r\n  return (\r\n    <div>\r\n      <div id=\"esitys_container\">\r\n        {items.map(items =>\r\n          <EsitysKohta\r\n            kokous_id={kokousid}\r\n            vaihda_tyyppi={vaihda_tyyppi}\r\n            type={items.type}\r\n            avaa={avaaItem}\r\n            save={save}\r\n            auki={avaa.includes(items.id)}\r\n            oikeudet={items.oikeudet}\r\n            type={items.type}\r\n            pj = {puheenjohtaja}\r\n            title={items.n}\r\n            id={items.id}\r\n            key={items.id}\r\n            alkaa={items.s}\r\n            poista={lisaa_ja_poista}\r\n            tila={items.tila}\r\n            paatos={items.paatos}\r\n            flags={items.flags}\r\n             />\r\n    \r\n             )}\r\n        {lisaa}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar keys = { 37: 1, 38: 1, 39: 1, 40: 1 };\r\n\r\nfunction preventDefault(e) {\r\n  e.preventDefault();\r\n}\r\n\r\nfunction preventDefaultForScrollKeys(e) {\r\n  if (keys[e.keyCode]) {\r\n    preventDefault(e);\r\n    return false;\r\n  }\r\n}\r\n\r\n\r\nvar supportsPassive = false;\r\ntry {\r\n  window.addEventListener(\"test\", null, Object.defineProperty({}, 'passive', {\r\n    get: function () { supportsPassive = true; }\r\n  }));\r\n} catch (e) { }\r\n\r\nvar wheelOpt = supportsPassive ? { passive: false } : false;\r\nvar wheelEvent = 'onwheel' in document.createElement('div') ? 'wheel' : 'mousewheel';\r\n\r\n// call this to Disable\r\nfunction disableScroll() {\r\n  window.addEventListener('DOMMouseScroll', preventDefault, false); // older FF\r\n  window.addEventListener(wheelEvent, preventDefault, wheelOpt); // modern desktop\r\n  window.addEventListener('touchmove', preventDefault, wheelOpt); // mobile\r\n  window.addEventListener('keydown', preventDefaultForScrollKeys, false);\r\n}\r\n\r\n// call this to Enable\r\nfunction enableScroll() {\r\n  window.removeEventListener('DOMMouseScroll', preventDefault, false);\r\n  window.removeEventListener(wheelEvent, preventDefault, wheelOpt);\r\n  window.removeEventListener('touchmove', preventDefault, wheelOpt);\r\n  window.removeEventListener('keydown', preventDefaultForScrollKeys, false);\r\n}\r\nvar raahattavat, raahattava, tar;\r\nwindow.addEventListener('touchstart', raahausalku);\r\nwindow.addEventListener('mousedown', raahausalku);\r\nwindow.addEventListener('touchend', raahausloppu);\r\nwindow.addEventListener('mouseup', raahausloppu);\r\nwindow.addEventListener('mousemove', raahausmove);\r\nwindow.addEventListener('touchmove', raahausmove);\r\nfunction raahausalku(event) {\r\n\r\n  if (raahattava) return;\r\n  tar = -1;\r\n  raahattavat = document.getElementsByClassName(\"raahaa\");\r\n  for (var i = 0; i < raahattavat.length; i++) {\r\n    if (raahattavat[i].contains(event.target)) {\r\n      disableScroll();\r\n      raahattava = raahattavat[i];\r\n      window.setTimeout(() => {\r\n        if (raahattava != null) raahattava.parentNode.classList.add(\"harmaa\");\r\n      }, 100, this);\r\n      document.body.classList.add(\"disable-select\");\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nfunction raahausmove(event) {\r\n  if (raahattava != null) {\r\n    var dy = (event.touches) ? event.touches[0].clientY : event.clientY;\r\n    var after = false;\r\n    var h = raahattava.parentNode.getBoundingClientRect().height;\r\n    for (var i = 0; i < raahattavat.length; i++) {\r\n      if (raahattavat[i] === raahattava)\r\n        after = true;\r\n      else {\r\n        var y2 = raahattavat[i].parentNode.getBoundingClientRect().y;\r\n        var y3 = raahattavat[i].parentNode.getBoundingClientRect().height\r\n        if (y3 > h) y3 = h;\r\n        if (dy >= y2 && y3 + y2 > dy) {\r\n\r\n          var parent = raahattava.parentNode.parentNode;\r\n          if (after) {\r\n            tar = i + 1;\r\n            parent.insertBefore(raahattava.parentNode, raahattavat[i].parentNode.nextSibling);\r\n          }\r\n          else {\r\n            tar = i + 1;\r\n            parent.insertBefore(raahattava.parentNode, raahattavat[i].parentNode);\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction raahausloppu(event) {\r\n  enableScroll();\r\n  if (raahattava != null) {\r\n    if (tar !== -1) {\r\n      var params = new URLSearchParams();\r\n      params.append('NODE', raahattava.id);\r\n      params.append('KOHDE', tar);\r\n\r\n      axios.post(url + 'data.php', params)\r\n        .then((response) => {\r\n\r\n\r\n        });\r\n    }\r\n\r\n\r\n\r\n    raahattava.parentNode.classList.remove(\"harmaa\");\r\n    raahattava = null;\r\n    document.body.classList.remove(\"disable-select\");\r\n  }\r\n}\r\n\r\nexport default Esityslista","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst Home = () => {\r\n    return (\r\n        <div className=\"col-md-10 mx-auto mt-5\">\r\n            <div className=\"jumbotron\">\r\n                <h1 className=\"display-3\">Hello, world!</h1>\r\n                <p className=\"lead\">Tähän tulisi tehdä sovelluksen etusivu.</p>\r\n                <hr className=\"my-4\" />\r\n                <p>Se voi kuvailla projektin ideaa, syitä miksi se on tehty, mitä sillä voi tehdä ja mitä sen toteutuksessa on käytetty. Voisin laittaa vaikka linkin myös kirjautumiseen ja ehkä myös rekisteröitymiseen.</p>\r\n                <hr/>\r\n                <Link to=\"/login\" className=\"btn btn-outline-primary\">Kirjaudu</Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Home\r\n","import axios from 'axios'\r\n\r\nconst url = process.env.REACT_APP_HOST_URL\r\n\r\n\r\nconst fbUser = body => axios.post(`${url}auth.php`, body).then(res => res)\r\nconst appUser = body => axios.post(`${url}auth.php`, body, {withCredentials: true}).then(res => res)\r\nconst assoc = body => axios.post(`${url}assoc.php`, body).then(res => res)\r\nconst kokous = body => axios.post(`${url}kokous.php`, body).then(res => res)\r\nconst osallistujat = body => axios.post(`${url}osallistujat.php`, body).then(res => res)\r\nconst documents = body => axios.post(`${url}documents.php`, body).then(res => res)\r\n/*const esityslista = body => axios.post(`${url}data.php`, body).then(res => res)*/\r\nconst data = body => axios.post(`${url}data.php`, body, {withCredentials: true} ).then(res => res)\r\n\r\nexport default { data, fbUser, appUser, assoc, kokous, osallistujat, documents }","import React from 'react'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Popover from 'react-bootstrap/Popover'\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nconst HelpPop = ({ text, placement, heading, btnText, variant, style }) => {\r\n\r\n\r\n    return (\r\n        <>\r\n            <OverlayTrigger\r\n                trigger=\"click\"\r\n                key={placement}\r\n                placement={placement}\r\n                overlay={\r\n                    <Popover id={`popover-positioned-${placement}`}>\r\n                        <Popover.Title as=\"h3\">{heading}</Popover.Title>\r\n                        <Popover.Content className=\"text-justify p-3\">\r\n                            {text}\r\n                        </Popover.Content>\r\n                    </Popover>\r\n                }\r\n            >\r\n                <Button variant={variant} style={style}>{btnText}</Button>\r\n            </OverlayTrigger>\r\n        </>\r\n    )\r\n}\r\nexport default HelpPop\r\n","import React, { useState } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { FaFacebook } from 'react-icons/fa';\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\r\nimport { setUserSession } from '../../Components/Auth/Sessions'\r\nimport request from '../../Components/Shared/HttpRequests'\r\nimport HelpPop from '../../Components/Shared/HelpPop'\r\n\r\nconst Login = () => {\r\n\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n\r\n    const appId = process.env.REACT_APP_FB_APP_ID\r\n    let history = useHistory()\r\n\r\n    const FaceBookResponse = (fbres) => {\r\n\r\n        if (fbres) {\r\n            const body = JSON.stringify({ call: 'fblogin', email: fbres.email, fb_id: fbres.id })\r\n\r\n            request.fbUser(body).then(res => {\r\n                const user = {\r\n                    firstname: fbres.first_name,\r\n                    lastname: fbres.last_name,\r\n                    email: fbres.email,\r\n                }\r\n                setUserSession(user, res.data.token)\r\n                history.push({pathname:'/userpage', state:{login:true}})\r\n\r\n            }).catch(err => {\r\n                console.log(\"Error: \", err.response)\r\n                alert(err.response.data.message)\r\n            })\r\n        } else {\r\n            alert('Kirjautuminen epäonnistui')\r\n        }\r\n    }\r\n    const handleInputChange = (ev) => {\r\n        if (ev.target.name === 'email') setEmail(ev.target.value)\r\n        else if (ev.target.name === 'password') setPassword(ev.target.value)\r\n    }\r\n    const handleLoginSubmit = (ev) => {\r\n\r\n        ev.preventDefault()\r\n\r\n        if (email === '' || password === '') alert(\"Anna käyttäjätunnus ja salasana!\")\r\n        else {\r\n            const login = JSON.stringify({ call: 'applogin', email, password })\r\n\r\n            request.appUser(login)\r\n                .then(res => {\r\n           \r\n                    const user = {\r\n                        firstname: res.data.firstname,\r\n                        lastname: res.data.lastname,\r\n                        email: email,\r\n                    }\r\n                    setUserSession(user, res.data.token)\r\n                    history.push({pathname:'/userpage', state:{login:true}})\r\n\r\n                }).catch((err) => {\r\n                    console.log(\"Error: \", err.response)\r\n                    alert(err.response.data.message)\r\n                })\r\n        }\r\n    }\r\n\r\n    const helpText = \"Kirjaudu järjestelmään sähköpostin ja salasanan avulla mikäli käytit niitä rekisteröityessäsi. Jos rekisteröidyit Facebook-tunnuksilla, käytä niitä myös kirjautumiseen. Mikäli unohdit tunnuksesi, voit saada ne paikasta x.\"\r\n\r\n    return (\r\n        <div className=\"col-md-6 m-auto\">\r\n            <div className=\"card card-body mt-5\">\r\n                <h2 className=\"text-center\">Kirjaudu</h2>\r\n                <form className=\"ml-2 mt-4\" onSubmit={handleLoginSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <label>Sähköposti</label>\r\n                        <input type=\"email\" className=\"form-control\" name=\"email\" onChange={handleInputChange} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Salasana</label>\r\n                        <input type=\"password\" className=\"form-control\" name=\"password\" onChange={handleInputChange} />\r\n                    </div>\r\n                    <div className=\"form-group text-right\">\r\n                        <button type=\"submit\" className=\"btn btn-outline-primary mt-3\">Kirjaudu</button>\r\n                    </div>\r\n                </form>\r\n\r\n                <div className=\"text-right\">\r\n                    <p>\r\n                        <FacebookLogin\r\n                            appId={appId}\r\n                            autoLoad={false}\r\n                            fields=\"first_name, last_name,email,picture\"\r\n                            callback={FaceBookResponse} render={renderProps => (\r\n                                <button onClick={renderProps.onClick} className=\"btn btn-outline\">Kirjaudu Facebook-tunnuksilla <FaFacebook /></button>\r\n                            )}\r\n                        />\r\n                    </p>\r\n                    <hr />\r\n                    <p className=\"mr-3\" style={{ lineHeight: '25px' }}>\r\n                        Haluatko rekisteröityä käyttäjäksi? <Link to=\"/register\" className=\"ml-1\">Rekisteröidy</Link><br />  </p>\r\n                    <p style={{ marginTop: \"-20px\" }}> Tarvitsetko apua? <HelpPop heading=\"Kirjautuminen\" text={helpText} btnText=\"Klikkaa tästä!\" placement=\"left\" variant=\"link\" style={{ marginBottom: \"3px\", marginLeft: \"-10px\" }} /> </p>\r\n                    <p className=\"mr-3\"></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Login\r\n","import React, { useState } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport request from '../Shared/HttpRequests'\r\n\r\nconst FbRegister = ({ fbRes }) => {\r\n\r\n    const [firstname, setFirstname] = useState(fbRes.first_name)\r\n    const [lastname, setLastname] = useState(fbRes.last_name)\r\n    const [email, setEmail] = useState(fbRes.email)\r\n    let history = useHistory()\r\n\r\n    const handleInputChange = (ev) => {\r\n        if (ev.target.name === 'firstname') setFirstname(ev.target.value)\r\n        else if (ev.target.name === 'lastname') setLastname(ev.target.value)\r\n        else if (ev.target.name === 'email') setEmail(ev.target.value)\r\n    }\r\n\r\n    const handleSubmit = (ev) => {\r\n\r\n        ev.preventDefault()\r\n        const fb_id = fbRes.id\r\n        if (firstname !== '' && lastname !== '' && email !== '' && fb_id !== '') {\r\n\r\n            let user = JSON.stringify({ call: 'fbreg', firstname, lastname, email, fb_id })\r\n            \r\n            request.fbUser(user).then(res => {\r\n                alert('Rekisteröityminen onnistui! Kirjauduttuasi voit liittyä yhdistyksen alueelle ja tarkastella yhdistyksen kokousasioita.')\r\n                history.push('/login')\r\n            }).catch(err => {\r\n                alert(err.response.data.message)\r\n                window.location.reload() \r\n            })\r\n\r\n        } else {\r\n            alert('Tarkasta että kaikki kentät on täytetty!')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"col-md-8 mx-auto mt-5\">\r\n            <h4>Terve {firstname}!</h4>\r\n            <p>Tarkasta ennen rekisteröitymistä ovatko henkilötietosi ja sähköpostiosoitteesi oikein.</p>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label>Etunimi</label>\r\n                    <input type=\"text\" className=\"form-control\" name=\"firstname\" onChange={handleInputChange} value={firstname} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Sukunimi</label>\r\n                    <input type=\"text\" className=\"form-control\" name=\"lastname\" onChange={handleInputChange} value={lastname} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Sähköposti</label>\r\n                    <input type=\"email\" className=\"form-control\" name=\"email\" onChange={handleInputChange} value={email} />\r\n                </div>\r\n                <div className=\"form-group text-right\">\r\n                    <button type=\"submit\" className=\"btn btn-outline-primary mt-3\">Rekisteröidy</button>\r\n                </div>\r\n                <p className=\"text-right\">\r\n                    Haluatko valita rekisteröitymistavan uudelleen?<Link className=\"ml-1\" to='/register' onClick={() => window.location.reload()}>Takaisin</Link><br />\r\n                    Onko sinulla jo käyttäjä tili?<Link to=\"/login\" className=\"ml-1\">Kirjaudu</Link>\r\n                </p>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FbRegister\r\n","import React, { useState } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport request from '../Shared/HttpRequests'\r\n\r\nconst AppRegister = () => {\r\n\r\n    const [firstname, setFirstname] = useState('')\r\n    const [lastname, setLastname] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [password2, setPassword2] = useState('')\r\n    let history = useHistory()\r\n\r\n    const handleInputChange = (ev) => {\r\n        if (ev.target.name === 'firstname') setFirstname(ev.target.value)\r\n        else if (ev.target.name === 'lastname') setLastname(ev.target.value)\r\n        else if (ev.target.name === 'email') setEmail(ev.target.value)\r\n        else if (ev.target.name === 'password') setPassword(ev.target.value)\r\n        else if (ev.target.name === 'password2') setPassword2(ev.target.value)\r\n    }\r\n    const handleSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        if (firstname === '' || lastname === '' || email === '' || password === '' || password2 === '') {\r\n            alert(\"Täytä kaikki kentät!\")\r\n        } else if (password !== password2) {\r\n            alert(\"Tarkasta salasanat!\")\r\n        } else {\r\n\r\n            const user = JSON.stringify({ call: 'appreg', firstname, lastname, email, password })\r\n            \r\n            request.appUser(user)\r\n                .then(res => {\r\n                    alert('Rekisteröityminen onnistui! Kirjauduttuasi voit liittyä yhdistyksen alueelle ja tarkastella yhdistyksen kokousasioita.')\r\n                    history.push('/login')\r\n                }).catch(err => {\r\n                    alert(err.response.data.message)\r\n                    window.location.reload() \r\n                })\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"col-md-6 m-auto\">\r\n            <div className=\"card card-body mt-5\">\r\n                <h4 className=\"text-center mb-4\">Rekisteröidy käyttäjäksi</h4>\r\n                <p>Lisää alle henkilötietosi, sähköpostiosoitteesi ja salasana.</p>\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <label>Etunimi</label>\r\n                        <input type=\"text\" className=\"form-control\" name=\"firstname\" onChange={handleInputChange} value={firstname} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Sukunimi</label>\r\n                        <input type=\"text\" className=\"form-control\" name=\"lastname\" onChange={handleInputChange} value={lastname} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Sähköposti</label>\r\n                        <input type=\"email\" className=\"form-control\" name=\"email\" onChange={handleInputChange} value={email} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Salasana</label>\r\n                        <input type=\"password\" className=\"form-control\" name=\"password\" onChange={handleInputChange} value={password} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Salasana uudelleen</label>\r\n                        <input type=\"password\" className=\"form-control\" name=\"password2\" onChange={handleInputChange} value={password2} />\r\n                    </div>\r\n                    <div className=\"form-group text-right\">\r\n                        <button type=\"submit\" className=\"btn btn-outline-primary mt-3\">Rekisteröidy</button>\r\n                    </div>\r\n                    <p className=\"text-right\">\r\n                        Haluatko valita rekisteröitymistavan uudelleen?<Link className=\"ml-1\" to='/register' onClick={() => window.location.reload()}>Takaisin</Link><br />\r\n                        Onko sinulla jo käyttäjä tili? <Link to=\"/login\" className=\"ml-1\">Kirjaudu</Link>\r\n                    </p>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default AppRegister\r\n","import React from 'react'\r\n\r\nconst Loading = () => {\r\n    return (\r\n        <div style={{marginTop:\"15%\"}} className=\"row h-100 justify-content-center\">\r\n             <div className=\"loader\"></div>   \r\n        </div>\r\n    )\r\n}\r\nexport default Loading","import React, { useState } from 'react'\r\nimport FbRegister from '../../Components/Auth/FbRegister'\r\nimport AppRegister from '../../Components/Auth/AppRegister'\r\nimport { FaFacebook } from 'react-icons/fa';\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\r\nimport { Link } from 'react-router-dom'\r\nimport Loading from '../../Components/Shared/Loading';\r\n\r\n\r\nconst Register = () => {\r\n    const appId = process.env.REACT_APP_FB_APP_ID\r\n    const [regSelect, setRegSelect] = useState()\r\n    const [fbRes, setFbRes] = useState({})\r\n\r\n    const handleClick = (ev) => {\r\n        if (ev.target.id === 'app') setRegSelect('app')\r\n    }\r\n    const handleFbClick = (res) => {\r\n        setFbRes(res)\r\n        setRegSelect('fb')\r\n    }\r\n    if (!regSelect) {\r\n        return (\r\n            <div className=\"col-md-6 mx-auto mt-5\">\r\n                <div className=\"card card-body mt-5\">\r\n                    <h4 className=\"text-center mb-4\">Rekisteröidy käyttäjäksi</h4>\r\n                    <p className=\" text-justify \">Palvelua voi käyttää luomalla sovelluskohtaisen tunnuksen tai rekisteröitymällä Facebook-tunnuksien avulla.\r\n                    <br/><br/>Jos olet jo rekisteröitynyt ja haluat kirjautua, pääset kirjautumissivulle  <Link to=\"/login\">tästä.</Link></p>\r\n                    <hr />\r\n                    <div className=\"row\">\r\n                        <button onClick={handleClick} id='app' className=\"btn btn-outline mr-2\">Rekisteröi sovelluskohtainen tunnus</button>\r\n                        <FacebookLogin\r\n                            appId={appId}\r\n                            autoLoad={false}\r\n                            fields=\"first_name, last_name,email,picture\"\r\n                            callback={handleFbClick}\r\n                            render={renderProps => (\r\n                                <button onClick={renderProps.onClick} className=\"btn btn-outline\">Rekisteröidy Facebook-tunnuksilla  <FaFacebook /></button>\r\n                            )}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    } else if (regSelect) {\r\n        return (\r\n            <> {regSelect === 'fb'\r\n                ? <FbRegister fbRes={fbRes} />\r\n                : <AppRegister />}</>)\r\n    } else {\r\n        return <Loading />\r\n    }\r\n}\r\nexport default Register","import React, { useState } from 'react'\r\nimport request from '../Shared/HttpRequests'\r\nimport { getUser } from '../Auth/Sessions'\r\n\r\nconst JoinAssoc = ({ yhdistykset, setShowForm }) => {\r\n    const [yhdistys, setYhdistys] = useState('')\r\n    const [yhdistysPassword, setYhdistysPassword] = useState('')\r\n\r\n    const handleInputChange = (ev) => {\r\n        if (ev.target.name === 'yhdistys') setYhdistys(ev.target.value)\r\n        else if (ev.target.name === 'password') setYhdistysPassword(ev.target.value)\r\n    }\r\n\r\n    const handleSubmit = (ev) => {\r\n\r\n        ev.preventDefault()\r\n\r\n        if (yhdistys && yhdistysPassword) {\r\n            const body = JSON.stringify({ call: 'checkyhdistystiedot', name: yhdistys, password: yhdistysPassword })\r\n            request.assoc(body)\r\n                .then((res) => { \r\n                    setNewMember()\r\n                })\r\n                .catch((err) => {\r\n                    alert(err.response.data.message)\r\n                })\r\n        } else {\r\n            alert(\"Täytä molemmat kentät!\")\r\n        }\r\n    }\r\n\r\n    const setNewMember = () => {\r\n\r\n        const user = getUser()\r\n        const body = JSON.stringify({ call: 'joinyhdistys', email: user.email, yhdistys: yhdistys })\r\n\r\n        request.assoc(body).then((res) => {\r\n            alert(res.data.message)\r\n            window.location.reload()\r\n        }).catch(err => {\r\n            alert(err.response.data.message)  \r\n            if(err.response.data.message.includes('Olet jo yhdistyksen')) window.location.reload() \r\n        })\r\n    }\r\n    return (\r\n        <div>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label>Yhdistyksen nimi</label>\r\n                    <input type=\"text\" className=\"form-control\" name=\"yhdistys\" onChange={handleInputChange} value={yhdistys} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Yhdistyksen tunnus</label>\r\n                    <input type=\"password\" className=\"form-control\" name=\"password\" onChange={handleInputChange} value={yhdistysPassword} />\r\n                </div>\r\n                <div className=\"form-group text-right\">\r\n                    {yhdistykset.length > 0 ? <button type=\"button\" onClick={() => setShowForm(true)} className=\"btn btn-outline-secondary mt-3 mx-2\">Palaa takaisin</button> : <></>}\r\n                    <button type=\"submit\" className=\"btn btn-outline-primary mt-3\">Rekisteröidy</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\nexport default JoinAssoc","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\n\r\n\r\n\r\nconst AssocTable = ({yhdistykset, setShowForm}) => {\r\n    return (\r\n        <div>\r\n            <button className=\"mb-4 btn btn-outline-primary mx-3\" onClick={() => setShowForm(false)}>Liity yhdistykseen</button>\r\n            <table className=\"table table-hover mt-4\">\r\n                <thead>\r\n                    <tr className=\"table-primary\"><th>Yhdistys</th></tr>\r\n                </thead>\r\n                <tbody>\r\n                    {yhdistykset.map((item) =>\r\n                        <div key={item.id} >\r\n                            {/*<td className=\"mr-5\">{item.name}</td><td className=\"text-right\"><Link className=\"btn btn-outline-primary btn-sm\" to={`/assoc/${item.name}`}>Siirry yhdistyksen sivuille</Link></td>*/}\r\n                            <Link className=\"mt-4 text-left text-dark\" style={{textDecoration:\"none\"}} to={{pathname:`/assoc/${item.name}`, state:{id:item.id}}}>\r\n                                <div className=\"yhdistysLink\">{item.name}</div>\r\n                            </Link>\r\n                        </div>)}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\nexport default AssocTable\r\n","import React, { useState, useEffect } from 'react'\r\nimport Rodal from 'rodal'\r\nimport 'rodal/lib/rodal.css';\r\nimport JoinAssoc from '../../Components/User/JoinAssoc'\r\nimport AssocTable from '../../Components/User/AssocTable'\r\nimport { getUser } from '../../Components/Auth/Sessions'\r\nimport request from '../../Components/Shared/HttpRequests'\r\n\r\nconst UserPage = (props) => {\r\n\r\n    const user = getUser()\r\n    const [isModalOpen, setIsModalOpen] = useState(props.location.state !== undefined && props.location.state.login ? true : false)\r\n    const [yhdistykset, setYhdistykset] = useState([])\r\n    const [showForm, setShowForm] = useState(true)\r\n\r\n    useEffect(() => {\r\n\r\n        const body = JSON.stringify({ call: 'getmemberships', email: user.email })\r\n        request.assoc(body).then(res => {\r\n            setYhdistykset(res.data)\r\n        }).catch(err => {\r\n            if (err.response.data) console.log('err.response.data', err.response.data)\r\n        })\r\n\r\n    }, [user.email])\r\n\r\n    let text\r\n    if (yhdistykset.length > 0 && showForm) text = \"Alla näet yhdistykset, joiden kokoustilaan olet liittynyt. Painamalla nappia saat näkyviisi kaavakkeen, jolla voit lisätä itsesi yhdistyksen kokoustilan käyttäjäksi.\"\r\n    else if (yhdistykset.length > 0 && !showForm) text = \"Voit liittää itsesi yhdistyksen kokoustilaan antamalla yhdistyksen nimen ja sovelluskohtaisen salasanan. Saat tarvittavan tunnuksen sovelluksen pääkäyttäjältä.\"\r\n    else text = \"Et ole vielä rekisteröitynyt yhdistysten kokoustilan käyttäjäksi. Alla olevan kentän avulla voit liittää itsesi yhdistyksen kokoustilaan antamalla yhdistyksen nimen ja sovelluskohtaisen salasanan. Saat tarvittavan tunnuksen sovelluksen pääkäyttäjältä.\"\r\n\r\n    return (\r\n        <div style={{ width: \"100%\", maxWidth: \"1100px\", padding: \"0\", marginTop: \"50px\" }}>\r\n            <h4 className=\"px-3\">Moi {user.firstname}!</h4>\r\n            <hr />\r\n            <p className=\"px-3\">\r\n                {text}\r\n            </p>\r\n            <hr />\r\n\r\n            {yhdistykset.length > 0 && showForm\r\n                ? <AssocTable yhdistykset={yhdistykset} setShowForm={setShowForm} />\r\n                : <JoinAssoc yhdistykset={yhdistykset} setShowForm={setShowForm} />\r\n            }\r\n            <TervetuloaModal isModalOpen={isModalOpen} setIsModalOpen={setIsModalOpen} />\r\n        </div>\r\n    )\r\n}\r\nexport default UserPage\r\n\r\n\r\nconst TervetuloaModal = ({ isModalOpen, setIsModalOpen }) => {\r\n\r\n    const user = getUser()\r\n\r\n    return (\r\n        <Rodal visible={isModalOpen} onClose={() => setIsModalOpen(false)} animation={'door'} duration={400} height={150} width={300}>\r\n            <div style={{width:\"100%\", height:\"100%\", position:\"relative\"}} onClick={() => setIsModalOpen(false)}>\r\n                <h5  style={{position:\"absolute\", top:\"40%\", left:\"25%\"}}>Tervetuloa {user.firstname}! </h5>\r\n            </div>\r\n        </Rodal>\r\n    )\r\n}\r\n","import React from 'react';\r\n\r\nconst Kalenteri = ({pvm=null, alku=\"false\",kk=\"1\",pv=\"1\"}) => {\r\n    if (pvm!=null){\r\n      pvm = new Date(pvm);\r\n      kk = pvm.getMonth()+1;\r\n      pv = pvm.getDate();\r\n    }\r\n    const kuu = [\"Tammi\",\"Helmi\",\"Maalis\",\"Huhti\",\"Touko\",\"Kesä\",\"Heinä\",\"Elo\",\"Syys\",\"Loka\",\"Marras\",\"Joulu\"][parseInt(kk-1)]+\"kuu\"\r\n    return (\r\n      <div className={(alku)?\"paivays_alku paivays\":\"paivays_loppu paivays\"}>\r\n        <div className=\"kk\">{kuu}</div>\r\n        <div className=\"paivays_nro\">{pv}</div>\r\n      </div>\r\n    )\r\n    \r\n  }\r\n\r\n  export default Kalenteri","import React, { useState } from 'react'\r\nimport request from '../Shared/HttpRequests'\r\nimport { Link } from 'react-router-dom'\r\nimport { FaKey, FaCheck } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons'\r\nimport Kalenteri from '../UusiKokous/Esityslista/Kalenteri'\r\n\r\nconst KokousTable = ({ kokous, yhdistys, yhdistys_id }) => {\r\n\r\n    const pvmYear = { year: 'numeric' };\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const openKokous = (id) => {\r\n\r\n        if (window.confirm('Haluatko avata kokoustilan osallistujille?')) {\r\n            setLoading(true)\r\n            const body = JSON.stringify({ call: 'openkokous', id: id })\r\n            request.kokous(body).then(res => {\r\n                alert(res.data.message)\r\n                window.location.reload()\r\n            }).catch(err => {\r\n                alert(err.response.data.message)\r\n            })\r\n            // TODO luo asiakohta nimeltään ”Avaus” - ”Puheenjohtaja etunimi sukunimi avasi kokouksen pp.kk.vvvvv, klo hh:mm.”\r\n            // axios.post --> id_k, user.firstname, user.lastname, timestamp\r\n            // huom: kokous aukeaa myös automaattisesti jolloin speksien teksti on hieman harhaanjohtava? Vaihtoehtoisesti: \"Kokoustila avattiin käyttäjille pp.kk.vvvv, klo hh:mm\" ???  \r\n        }\r\n    }\r\n\r\n\r\n    if (!loading) {\r\n        return (\r\n            <div className=\"bg\">\r\n                <div >\r\n                    {kokous.map((item) =>\r\n                        <Link key={item.id} className=\"text-primary\" style={{ pointerEvents: (item.avoinna === '1' || item.role === 'puheenjohtaja') ? \"auto\" : \"none\", textDecoration: \"none\" }}\r\n                            to={{ pathname: `/kokous/${yhdistys}/${item.id}`, state: { id_y: yhdistys_id } }}\r\n                            title=\"Tarkastele kokouksen tietoja\">\r\n                            <div className={(item.avoinna === '1' || item.role === 'puheenjohtaja') ? \"taulu\" : \"taulu disable\"} key={item.kokousnro}>\r\n                                <Kalenteri pvm={item.startDate} alku={false} />\r\n                                <Kalenteri pvm={item.endDate} alku={false} />\r\n                                <div className=\"tauluAlku tauluotsikko\" style={{ whiteSpace: \"nowrap\" }}>{item.otsikko} {item.loppu === \"1\" ? <IconContext.Provider value={{ color: 'rgba(44,62,80)', size: '15px' }}><FaCheck title=\"Kokous on päättynyt\" /></IconContext.Provider> : <></>}</div>\r\n\r\n                                <div className=\"taulukokousnro\">{item.kokousnro}/{(new Date(item.endDate)).toLocaleDateString('fi-FI', pvmYear)}</div>\r\n\r\n                                {item.avoinna === '1'\r\n                                    ? <></>\r\n                                    : <>\r\n                                        <div className=\"taulutila\">kokoustila on suljettu</div>\r\n                                        <div className=\"taulunapit\">\r\n                                            <div style={{ whiteSpace: \"nowrap\" }}>\r\n                                                {item.role === 'puheenjohtaja' ? <button onClick={(event) => { event.preventDefault(); openKokous(item.id) }} id={item.id} title=\"Avaa kokoustila\" className=\"btn btn-outline-primary\" style={{ marginLeft: '5px' }}><FaKey /></button> : <></>}\r\n                                            </div>\r\n                                        </div></>\r\n                                }\r\n\r\n                            </div>\r\n                        </Link>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        )\r\n    } else {\r\n        return <p className=\"mt-4 mx-4\">Ladataan tietoja .... </p>\r\n    }\r\n}\r\nexport default KokousTable\r\n","import React, { useState, useEffect } from 'react'\r\nimport KokousTable from './KokousTable'\r\n\r\nconst Kokouslistat = ({ kokoukset, showComponent, yhdistys, yhdistys_id }) => {\r\n\r\n    const [tulevat, setTulevat] = useState([]);\r\n    const [kaynnissa, setKaynnissa] = useState([]);\r\n    const [menneet, setMenneet] = useState([]);\r\n    \r\n    useEffect(() => {\r\n  \r\n        if (kokoukset) {\r\n            kokoukset.map((item) => {\r\n                if (Date.parse(item.endDate) < new Date() || item.loppu === \"1\") setMenneet(menneet => [...menneet, item])\r\n                else if (Date.parse(item.endDate) > new Date() && Date.parse(item.startDate) < new Date()) {\r\n                    setKaynnissa(kaynnissa => [...kaynnissa, item])\r\n                }\r\n                else setTulevat(tulevat => [...tulevat, item])\r\n                return null;\r\n            })\r\n        }\r\n    }, [kokoukset])\r\n\r\n    let component\r\n\r\n    if (showComponent === 'kaynnissa') {\r\n        component =\r\n            (<>\r\n                {kaynnissa.length === 0\r\n                    ? <><h5>Yhdistyksellä ei ole käynnissä olevia kokouksia</h5></>\r\n                    : <>{/*<h5>Käynnissä olevat kokoukset</h5>*/}\r\n                        <KokousTable kokous={kaynnissa} yhdistys={yhdistys} status=\"kaynnissa\" yhdistys_id={yhdistys_id} />\r\n                    </>}\r\n            </>)\r\n    } else if (showComponent === 'menneet') {\r\n        component =\r\n            (<>\r\n                {menneet.length === 0\r\n                    ? <><h5>Yhdistyksellä ei ole menneitä kokouksia</h5></>\r\n                    : <>\r\n                        <KokousTable kokous={menneet} yhdistys={yhdistys} status=\"paattynyt\" yhdistys_id={yhdistys_id}/>\r\n                    </>}\r\n            </>)\r\n    } else if (showComponent === 'tulevat') {\r\n        component =\r\n            (<>\r\n                {tulevat.length === 0\r\n                    ? <><h5>Yhdistyksellä ei ole tulevia kokouksia</h5></>\r\n                    : <>\r\n                        <KokousTable kokous={tulevat}  yhdistys={yhdistys} status=\"tuleva\" yhdistys_id={yhdistys_id}/>\r\n                    </>}\r\n            </>)\r\n    } else component = <></>\r\n\r\n    return <div className=\"mt-2\">{component}</div>\r\n\r\n}\r\n\r\nexport default Kokouslistat\r\n\r\n","import React from 'react'\r\n\r\nconst Jasenlista = ({members}) => {\r\n    return (   \r\n        <div style={{marginTop:\"4px\"}} >\r\n            <table className=\"table table-hover\">\r\n                <thead>\r\n                    <tr className=\"table-primary\"><td>Etunimi</td><td>Sukunimi</td><td>Sähköpostiosoite</td></tr>\r\n                </thead>\r\n                <tbody>\r\n                    {members.map((item, key) =>\r\n                        <tr key={key + item.firstname}>\r\n                            <td>{item.firstname}</td>\r\n                            <td>{item.lastname}</td>\r\n                            <td>{item.email}</td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\nexport default Jasenlista\r\n","import React, { useState} from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport Kokouslistat from './Kokouslistat'\r\nimport Jasenlista from './Jasenlista'\r\nimport HelpPop from '../Shared/HelpPop'\r\nimport { getSessionRole } from '../Auth/Sessions'\r\n\r\nconst AssocAdmin = ({ kokoukset, members, yhdistys, yhdistys_id }) => {\r\n    \r\n    let history = useHistory()\r\n    const [showComponent, setShowComponent] = useState('kaynnissa')\r\n    const helpText = <p >Valikon kautta voit valita haluamasi näkymän. Voit luoda uuden kokouksen painamalla uusi kokous -näppäintä. Näet myös tulevat ja käynnissä olevat kokoukset sekä menneiden kokouksien asiat valikon näppäimien kautta. Palveluun rekisteröityneet jäsenet saat näkyville yhdistyksen jäsenet -näppäintä painamalla. </p>\r\n\r\n    const handleMenuClick = (ev) => {\r\n        let napit = ev.target.parentNode.querySelectorAll(\"button\");\r\n        for (let i = 0; i < napit.length; i++) {\r\n            napit[i].classList.remove(\"valittu_menu\");\r\n          }\r\n        setShowComponent(ev.target.name)\r\n        ev.target.classList.add(\"valittu_menu\");\r\n    }\r\n\r\n    let component\r\n    if (showComponent === 'tulevat' || showComponent === 'menneet' || showComponent === 'kaynnissa') component = <Kokouslistat kokoukset={kokoukset} showComponent={showComponent} yhdistys={yhdistys} yhdistys_id={yhdistys_id} />\r\n    else if (showComponent === 'jasenet') component = <Jasenlista members={members} />\r\n    else component = <></>\r\n\r\n    if (getSessionRole() && getSessionRole().yhdistys === yhdistys && kokoukset)  {\r\n\r\n        return (\r\n            <div >\r\n                    <div className=\"d-sm-flex justify-content-center second_nav\">\r\n                        <button className=\"text-primary valittu_menu\" name=\"kaynnissa\" onClick={handleMenuClick}>Kokoukset</button>\r\n                        <button className=\"text-primary \" name=\"tulevat\" onClick={handleMenuClick}>Tulevat kokoukset</button>\r\n                        <button className=\"text-primary \" name=\"menneet\" onClick={handleMenuClick}>Päättyneet kokoukset</button>\r\n                        <button className=\"text-primary \" name=\"jasenet\" onClick={handleMenuClick}>Jäsenlista</button> \r\n                        <HelpPop heading=\"Yhdistyksen etusivu\" text={helpText} btnText=\"Selitystä\" placement=\"left\" variant=\"btn btn-outline-danger btn-sm mx-1\" />\r\n                    </div>    \r\n                {component}\r\n            </div>\r\n        )\r\n    } else if (!getSessionRole()) {\r\n        return <p className=\"mt-4 mx-4\">Ladataan tietoja .... </p>\r\n    }\r\n    else {\r\n        history.push('/userpage')\r\n        return null\r\n    }\r\n}\r\nexport default AssocAdmin","import React, { useState, useEffect } from 'react'\r\nimport { useParams, useHistory, Link } from 'react-router-dom'\r\nimport { getUser } from '../../Components/Auth/Sessions'\r\nimport request from '../../Components/Shared/HttpRequests'\r\nimport AssocContent from '../../Components/Assoc/AssocContent'\r\nimport { setSessionRole, getSessionRole } from '../../Components/Auth/Sessions'\r\n\r\nconst AssocMain = (props) => {\r\n\r\n    const [kokoukset, setKokoukset] = useState()\r\n    const [members, setMembers] = useState([])\r\n    const { yhdistys } = useParams()\r\n\r\n    const [role, setRole] = useState('')\r\n    const user = getUser()\r\n    let history = useHistory()\r\n    let yhdistys_id\r\n    if (props.location.state === undefined) history.push('/userpage')\r\n    else yhdistys_id = props.location.state.id_y;\r\n\r\n    useEffect(() => {\r\n\r\n        const member = JSON.stringify({ call: 'checkmember', email: user.email, name: yhdistys })\r\n\r\n        request.assoc(member).then(res => {\r\n            setRole(res.data.role)\r\n            const userRole = { yhdistys: yhdistys, role: res.data.role }\r\n            setSessionRole(userRole)\r\n        }).catch(() => history.push('/userpage'))\r\n\r\n        if (role) {\r\n\r\n            const body = JSON.stringify({ call: 'getkokoukset', yhdistys: yhdistys, email: user.email });\r\n            request.kokous(body).then(res => {\r\n                setKokoukset(res.data.filter(x => x.valmis === \"1\"))\r\n            }).catch(err => console.log('err.response', err.response))\r\n\r\n            const req = JSON.stringify({ call: 'getallmembers', yhdistys: yhdistys })\r\n            request.assoc(req).then(res => {\r\n                setMembers(res.data)\r\n            }).catch(err => console.log('err.response', err.response))\r\n\r\n        }\r\n\r\n    }, [history, user.email, yhdistys, role]); /* tekee monta kertaa*/\r\n\r\n    if (getSessionRole() && kokoukset) {\r\n        let component\r\n        return (\r\n            <div style={{ width: \"100%\", maxWidth: \"1100px\", padding: \"0\", marginTop: \"50px\" }}>\r\n                {/*<div className=\"mx-auto mt-5\">*/}\r\n                <h2 className=\"px-3\">{yhdistys}</h2>\r\n                <h4 className=\"px-3\">Yhdistyksen sivu</h4>\r\n                {getSessionRole().role === 'admin' ? <Link className=\"px-3\"\r\n                    to={{ pathname: `/uusikokous/${yhdistys}`, state: { id_y: yhdistys_id } }}>Luo uusi kokous</Link> : <></>}\r\n                <hr />\r\n                <AssocContent kokoukset={kokoukset} members={members} yhdistys={yhdistys} yhdistys_id={yhdistys_id} />\r\n            </div>\r\n        )\r\n    } else {\r\n        return <p className=\"mt-4 mx-4\">Ladataan tietoja .... </p>\r\n    }\r\n}\r\n\r\nexport default AssocMain\r\n","import React from 'react'\r\nimport DatePicker, { registerLocale } from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport fi from 'date-fns/locale/fi';\r\n\r\nconst Perustiedot = ({ setShowComponent, handlePerustiedotChange, saveKokousDraft, perustiedot, setPerustiedot }) => {\r\n\r\n    registerLocale('fi', fi)\r\n    let x = perustiedot.avoinna ? \"Avoinna\" : \"Kiinni\"\r\n    if (perustiedot) {\r\n        return (\r\n            <div className=\"col-md-6  m-auto\">\r\n                <h5 className=\"mb-4\">Kokouksen perustiedot</h5>\r\n                <div >\r\n                    <div className=\"form-group\">\r\n                        <label>Otsikko</label>\r\n                        <input type=\"text\" className=\"form-control\" name=\"otsikko\" onChange={handlePerustiedotChange} value={perustiedot.otsikko} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Kokouksen numero</label>\r\n                        <input type=\"text\" className=\"form-control\" name=\"kokousnro\" onChange={handlePerustiedotChange} value={perustiedot.kokousNro || ''} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Kokous alkaa</label><br />\r\n                        <DatePicker\r\n                            name='startdate'\r\n                            locale=\"fi\"\r\n                            dateFormat=\"dd/MM/yyyy\"\r\n                            className=\"form-control\"\r\n                            selected={perustiedot.startDate}\r\n                            onChange={date => setPerustiedot({ ...perustiedot, startDate: date })}\r\n                            selectsStart\r\n                            startDate={perustiedot.startDate}\r\n                            endDate={perustiedot.endDate}\r\n                            minDate={new Date()}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Kokous päättyy</label><br />\r\n                        <DatePicker\r\n                            locale=\"fi\"\r\n                            dateFormat=\"dd/MM/yyyy\"\r\n                            className=\"form-control\"\r\n                            selected={perustiedot.endDate}\r\n                            onChange={date => setPerustiedot({ ...perustiedot, endDate: date })}\r\n                            selectsEnd\r\n                            startDate={perustiedot.startDate}\r\n                            endDate={perustiedot.endDate}\r\n                            minDate={perustiedot.startDate}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group custom-control custom-switch\">\r\n                        <input type=\"checkbox\" className=\"custom-control-input\" onChange={handlePerustiedotChange} id=\"avaa\" value={perustiedot.avoinna} checked={perustiedot.avoinna} />\r\n                        <label className=\"custom-control-label\" htmlFor=\"avaa\">Avaa kokoustila heti osallistujille</label>\r\n                    </div><p>Tila: {x}</p>\r\n                    {/* <div className=\"text-right\">\r\n                        <button onClick={() => { setShowComponent('esityslista'); saveKokousDraft() }} className=\"btn btn-outline-primary mt-3\">Seuraava</button>\r\n                    </div> */}\r\n                </div>\r\n                <hr />\r\n            </div>\r\n        )\r\n    }else {\r\n        return <p className=\"mt-4 mx-4\">Ladataan tietoja .... </p>\r\n    }\r\n}\r\nexport default Perustiedot\r\n","import React, { useEffect } from 'react'\r\n\r\nconst Osallistujat = ({ puheenjohtaja, osallistujat, setOsallistujat, saveOsallistujat, varalla, setVaralla, setShowComponent }) => {\r\n\r\n    useEffect(() => {\r\n        saveOsallistujat()\r\n    }, [osallistujat])\r\n\r\n    const handleVaralleClick = (ev) => {\r\n        const vara = osallistujat.filter(x => x.email === ev.target.name)\r\n        setVaralla(varalla.concat(vara))\r\n        setOsallistujat(osallistujat.filter(x => x.email !== ev.target.name))\r\n    }\r\n    const handleOsallistuuClick = (ev) => {\r\n        const osallistuja = varalla.filter(x => x.email === ev.target.name)\r\n        setOsallistujat(osallistujat.concat(osallistuja))\r\n        setVaralla(varalla.filter(x => x.email !== ev.target.name))\r\n    }\r\n\r\n    return (\r\n        <div className=\"mt-5 mx-auto col-md-10\">\r\n            <h5 className=\"mb-4\">Osallistujat</h5>\r\n            <h6>Puheenjohtaja:{' '} {puheenjohtaja[0].firstname} {puheenjohtaja[0].lastname} ({puheenjohtaja[0].email})</h6>\r\n            <div className=\"mt-1\">\r\n                {osallistujat.length > 0\r\n                    ? <>\r\n                        <h5 className=\"mt-4\">Kokousosallistujat</h5>\r\n                        < table className=\"table table-hover\">\r\n                            <thead>\r\n                                <tr className=\"table-primary\"><th>Etunimi</th><th>Sukunimi</th><th>Sähköpostiosoite</th><th></th></tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {osallistujat.map((item, key) =>\r\n                                    <tr key={key + item.firstname}>\r\n                                        <td>{item.firstname}</td>\r\n                                        <td>{item.lastname}</td>\r\n                                        <td>{item.email}</td>\r\n                                        <td><button onClick={handleVaralleClick} className=\"btn btn-outline-primary btn-sm\" name={item.email}>Poista osallistujalistalta</button></td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table></>\r\n                    :\r\n                    <h6>Kokouksessa ei ole osallistujia</h6>\r\n                }\r\n                {varalla.length > 1\r\n                    ? <>\r\n                        <h5 className=\"mt-4\">Muut yhdistyksen jäsenet</h5>\r\n                        < table className=\"table table-hover\">\r\n                            <thead>\r\n                                <tr className=\"table-primary\"><th>Etunimi</th><th>Sukunimi</th><th>Sähköpostiosoite</th><th></th></tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {varalla.filter(x => x.email !== puheenjohtaja[0].email).map((item, key) =>\r\n                                    <tr key={key + item.firstname}>\r\n                                        <td>{item.firstname}</td>\r\n                                        <td>{item.lastname}</td>\r\n                                        <td>{item.email}</td>\r\n                                        <td><button onClick={handleOsallistuuClick} className=\"btn btn-outline-primary btn-sm\" name={item.email} >Siirrä kokousosallistujaksi</button></td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table></>\r\n                    :\r\n                    <h6>Kaikki yhdistyksen jäsenet ovat osallistujalistalla</h6>\r\n                }\r\n            </div>\r\n            {/* <div className=\"form-group text-right\">\r\n                <button onClick={() => { setShowComponent('paatosvaltaisuus'); saveOsallistujat() }} type=\"submit\" className=\"btn btn-outline-primary mt-3\">Seuraava</button>\r\n            </div> */}\r\n            <hr />\r\n        </div >\r\n\r\n    )\r\n}\r\nexport default Osallistujat\r\n","import React from 'react'\r\nimport HelpPop from '../Shared/HelpPop'\r\n\r\nconst Paatosvaltaisuus = ({ setShowComponent, handlePaatosvaltaChange, saveKokousDraft, paatosvaltaisuus }) => {\r\n\r\n    const helpText = \"Kokouksen päätösvaltaisuuden voi määritellä täyttämällä valitsemasi kentät. Tyhjäksi jätettyä kenttää ei huomioida kokouksen päätösvaltaisuuden määrittelyssä.\"\r\n    const handleClick =() => {\r\n       setShowComponent('yhteenveto')\r\n       saveKokousDraft() \r\n    }\r\n\r\n    return (\r\n        <div className=\"mt-5\">\r\n            <div className=\"col-md-6  m-auto\">\r\n                <div className=\"mb-2\">\r\n                    <h5>Kokouksen päätösvaltaisuus</h5>\r\n                    <p style={{ marginTop: \"-5px\" }}>\r\n                        <HelpPop heading=\"Päätösvaltaisuus\" text={helpText} btnText=\"Selite\" placement=\"bottom\" variant=\"link\" style={{ marginBottom: \"3px\", marginLeft: \"-10px\" }} />\r\n                    </p>\r\n                </div>\r\n                <form>\r\n                    <div className=\"form-group\">\r\n                        <label>Esityslista</label>\r\n                        <input type=\"number\" min=\"0\" step=\"1\" className=\"form-control\" name=\"esityslista\" onChange={handlePaatosvaltaChange} value={paatosvaltaisuus.esityslista} />\r\n                        <small className=\"form-text text-muted\">Kuinka monen kokousosallistujan on avattava esityslista kokouksen päätösvaltaisuuden täyttymiseksi?</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Aktiivisuus</label>\r\n                        <input type=\"number\" min=\"0\" step=\"1\" className=\"form-control\" name=\"aktiivisuus\" onChange={handlePaatosvaltaChange} value={paatosvaltaisuus.aktiivisuus} />\r\n                        <small className=\"form-text text-muted\">Kuinka monen käyttäjän on kommentoitava jotakin kohtaa tai kannatettava jotakin, jotta kokouksen päätösvaltaisuus täyttyy?</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Kesto</label>\r\n                        <input type=\"number\" min=\"0\" step=\"1\" className=\"form-control\" name=\"kesto\" onChange={handlePaatosvaltaChange} value={paatosvaltaisuus.kesto} />\r\n                        <small className=\"form-text text-muted\">Kuinka monta vuorokautta kokouksen on kestettävä, jotta kokous on päätösvaltainen?</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Muu kriteeri</label>\r\n                        <textarea className=\"form-control\" rows=\"3\" name=\"muu\" onChange={handlePaatosvaltaChange} value={paatosvaltaisuus.muu} />\r\n                        <small className=\"form-text text-muted\">Kirjoita haluamasi päätösvaltaisuuskriteeri kenttään</small>\r\n                    </div>\r\n                </form>\r\n                {/* <div className=\"form-group text-right\">\r\n                <button onClick={() => { setShowComponent('yhteenveto'); saveKokousDraft() }} type=\"submit\" className=\"btn btn-outline-primary mt-3\" >Seuraava</button>\r\n                </div> */}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Paatosvaltaisuus","import React from 'react'\r\nimport { Editor } from \"@tinymce/tinymce-react\"\r\n\r\nexport const TextEditor = ({ editorContentChange, teksti }) => {\r\n\r\n\r\n    return (\r\n        <div style={{ contenteditable: 'true', zIndex: '100 !important' }}>\r\n\r\n            <Editor apiKey={process.env.REACT_APP_TINYAPI_KEY}\r\n                onEditorChange={editorContentChange}\r\n                value={teksti}\r\n                init={{\r\n                    height: 750,\r\n                    plugins: [\r\n                        'advlist lists link image print',\r\n                        'charmap print preview anchor help',\r\n                        'searchreplace visualblocks',\r\n                        'insertdatetime table paste preview'\r\n                    ],\r\n                    toolbar: [\r\n                        'preview print | undo redo | formatselect | bold italic |  alignleft aligncenter alignright |  bullist numlist outdent indent | help | insertdatetime'],\r\n                    insertdatetime_dateformat: [\"%HH:%M\", \"%d-%m-%Y\"],\r\n\r\n                    setup: function (ed) {\r\n                        ed.on('keydown', function (evt) {\r\n                            if (evt.keyCode === 9) {\r\n                                ed.execCommand('mceInsertRawHTML', false, '&emsp;&emsp;');\r\n                                evt.preventDefault();\r\n                                evt.stopPropagation();\r\n                                return false;\r\n                            }\r\n                        })\r\n\r\n                    }\r\n                }}\r\n            />\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { TextEditor } from '../Document/TextEditor';\r\nimport { getUser } from '../Auth/Sessions'\r\nimport request from '../Shared/HttpRequests'\r\nimport Loading from '../Shared/Loading';\r\n\r\nconst Yhteenveto = ({ perustiedot, esityslista_otsakkeet, osallistujat, paatosvaltaisuus, yhdistys, id_y }) => {\r\n    \r\n    const [loading, setLoading] = useState(false)\r\n    let history = useHistory()\r\n    let user = getUser()\r\n    const pvmForm = { month: 'numeric', day: 'numeric' };\r\n    const start = (new Date(perustiedot.startDate)).toLocaleDateString('fi-FI', pvmForm)\r\n    const end = (new Date(perustiedot.endDate)).toLocaleDateString('fi-FI', pvmForm)\r\n    const nimi = perustiedot.otsikko === '' ? '' : `<h3>${perustiedot.otsikko}</h3>`\r\n    const osallistuu = osallistujat.map(x => '<li>' + x.firstname + ' ' + x.lastname + '</li>').join(' ')\r\n    let otsikot = esityslista_otsakkeet.map(x => x.otsikko !=='' ? '<li>'+ x.otsikko +'</li>' : '<li>Asiakohdalla ei ole otsikkoa</li>').join(' ')\r\n    otsikot = otsikot.length === 0 ? '<p>Kokoukselle ei ole määritelty esityslistaa</p>' : otsikot \r\n    let paatosvalta = ''\r\n    if (paatosvaltaisuus.esityslista === '' && paatosvaltaisuus.aktiivisuus === '' && paatosvaltaisuus.kesto === '' && paatosvaltaisuus.muu === '') paatosvalta += '<p>Kokouksen päätösvaltaisuutta ei ole määritelty.</p>'\r\n    else {\r\n        if (paatosvaltaisuus.esityslista !== '') paatosvalta += `<p>Kokous on päätösvaltainen jos vähintään ${paatosvaltaisuus.esityslista} kpl kokousosallistujista on avannut esityslistan.</p>`\r\n        if (paatosvaltaisuus.aktiivisuus !== '') paatosvalta += `<p>Kokous on päätösvaltainen jos vähintään ${paatosvaltaisuus.aktiivisuus} kpl kokousosallistujista on ottanut asioihin kantaa.</p>`\r\n        if (paatosvaltaisuus.kesto !== '') paatosvalta += `<p>Kokous on päätösvaltainen jos kokous kestää vähintään ${paatosvaltaisuus.kesto} vuorokautta.</p>`\r\n        if (paatosvaltaisuus.muu !== '') paatosvalta += `<p>${paatosvaltaisuus.muu}</p>`\r\n    }\r\n    // substringit sekoo jos jaat useammalle riville pelkällä enter+spacella\r\n    const [kokouskutsu, setKokouskutsu] = useState(`<h3>Esityslista ${perustiedot.kokousNro} kokous alkaa ${start} ja päättyy ${end}</h3>${nimi}<h4>Kokouksen avaus ${start}</h4><h4>Esityslista</h4><ol>${otsikot}</ol><h4>Osallistujat</h4><ul>${osallistuu.substring(0, osallistuu.length - 5)}</ul><h4>Kokouksen päätösvaltaisuus</h4>${paatosvalta}<h4>Kokous päättyy ${end}</h4><p>Terveisin <br/>${user.firstname} ${user.lastname}<br/><small>${yhdistys}</small></p>`)\r\n\r\n\r\n    const editorContentChange = (kokouskutsu) => {\r\n        setKokouskutsu(kokouskutsu)\r\n    }\r\n    const handleClickSaveAndSend = () => {\r\n        if (window.confirm('Haluatko tallentaa kokouksen ja lähettää kutsun osallistujille?')) {\r\n            setLoading(true)\r\n            saveNewKokous() // POST:t \"ketjutettu\" koska muuten bäkkipuoli ei toiminut toivotusti\r\n        }\r\n    }\r\n    const saveNewKokous = () => {\r\n\r\n        const uusiKokous = JSON.stringify({\r\n            call: 'luokokous',\r\n            id_y: id_y,\r\n            kokousid: perustiedot.kokousid,\r\n            otsikko: perustiedot.otsikko,\r\n            kokousnro: perustiedot.kokousNro.substring(0, perustiedot.kokousNro.length - 5),\r\n            startDate: perustiedot.startDate,\r\n            endDate: perustiedot.endDate,\r\n            avoinna: perustiedot.avoinna,\r\n            paatosvaltaisuus: paatosvaltaisuus,\r\n            valmis: true\r\n        })\r\n        request.kokous(uusiKokous).then(res => {\r\n            saveDocumentKokouskutsu()   /// ks yllä\r\n        }).catch(err => {\r\n            alert(err.response.data.message)\r\n            setLoading(false)\r\n        })\r\n    }\r\n    const saveDocumentKokouskutsu = () => {\r\n\r\n        const kokouskutsuDocument = JSON.stringify({\r\n            call: 'postdoc',\r\n            id_y: id_y,\r\n            kokousnro: perustiedot.kokousNro.substring(0, perustiedot.kokousNro.length - 5),\r\n            type: 'kokouskutsu',\r\n            draft: 'false',\r\n            content: kokouskutsu\r\n        })\r\n\r\n        request.documents(kokouskutsuDocument).then((res) => {\r\n            saveOsallistujat() /// ks yllä\r\n        }).catch(err => {\r\n            alert(err.response.data.message)\r\n        })\r\n    }\r\n    const saveOsallistujat = () => {\r\n\r\n        let kokousosallistujat\r\n        kokousosallistujat = osallistujat.map(x => ({ rooli: 'osallistuja', ...x }))\r\n        user = Object.assign({ rooli: 'puheenjohtaja' }, user)\r\n        const call = { call: 'postosallistujat', id_y: id_y, kokousid: perustiedot.kokousid }\r\n        kokousosallistujat = [user].concat(kokousosallistujat)\r\n        kokousosallistujat = [call].concat(kokousosallistujat)\r\n        const body = JSON.stringify(kokousosallistujat)\r\n \r\n        request.osallistujat(body).then(res => {\r\n            sendInviteEmail();\r\n        }).catch(err => alert(err.response.data.message))\r\n\r\n    }\r\n    const sendInviteEmail = () => {\r\n\r\n        const aihe = kokouskutsu.substring(4, kokouskutsu.indexOf(\"</h3>\"))\r\n        const runko = kokouskutsu.substring(kokouskutsu.indexOf(\"</h3>\") + 5)\r\n        const kokousosallistujat = [user].concat(osallistujat)\r\n        const invite = JSON.stringify({ call: 'sendkokousinvite', yhdistys: yhdistys, aihe: aihe, viesti: runko, osallistujat: kokousosallistujat })\r\n    \r\n        request.kokous(invite).then(res => {\r\n            alert(res.data.message)\r\n            setLoading(false)\r\n            history.push({pathname:`/assoc/${yhdistys}`, state:{id_y}})\r\n        }).catch(err => alert(err.response.data.message))\r\n    }\r\n\r\n    if (!perustiedot.startDate || !perustiedot.endDate) {\r\n        return (\r\n            <div className=\"mt-5 mx-auto col-md-10\">\r\n                <h5 className=\"mb-4\">Päivämäärätiedot ovat puutteelliset. Täytä tarvittavat tiedot perustiedot-välilehdellä.</h5>\r\n            </div>\r\n        )\r\n    } else if (osallistujat.length === 0) {\r\n        return (\r\n            <div className=\"mt-5 mx-auto col-md-10\">\r\n                <h5 className=\"mb-4\">Kokouksessa ei ole osallistujia. Lisää kokousosallistujat osallistujat-välilehdellä.</h5>\r\n            </div>\r\n        )\r\n    } else if (!loading) {\r\n        return (\r\n            <div className=\"mt-5 mx-auto col-md-10\">\r\n                <h5 className=\"mb-4\">Yhteenveto</h5>\r\n                <p className=\"mb-4\">Tarkasta kokouksen tiedot. Painamalla ruudun pohjalla olevaa näppäintä kokous tallentuu ja järjestelmä lähettää kutsun osallistujille kokoukseen s-postitse.</p>\r\n                <TextEditor editorContentChange={editorContentChange} teksti={kokouskutsu} />\r\n                <div className=\"form-group text-right\">\r\n                    <button className=\"btn btn-outline-primary mt-3\" onClick={handleClickSaveAndSend}>Tallenna ja lähetä kokouskutsu</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    } else if (loading) {\r\n        return (\r\n            <div className=\"mt-5 mx-auto col-md-10\">\r\n                <h5 className=\"mb-4\">Pyyntöä käsitellään, odota hetki....</h5>\r\n                <Loading/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Yhteenveto\r\n","import React, { useEffect, useRef } from 'react';\r\n\r\nconst ResizeTextArea = ({sisus,id=0,save,placeholder=\"\",edit=false,avaa,alku=0,loppu=0}) => {\r\n    const Tarea = useRef(null); \r\n    const updatethis = (event) => {     \r\n      save(id,event.target.value,500,\"otsake\")\r\n      /*event.target.style.minHeight = 'auto'\r\n      event.target.style.minHeight = (event.target.scrollHeight-15)+'px'*/\r\n    }\r\n\r\n    useEffect(() => {\r\n    \r\n      Tarea.current.style.minHeight = 'auto'\r\n      Tarea.current.style.minHeight = (Tarea.current.scrollHeight-15)+'px'}, [sisus,edit])  \r\n\r\n      let sisusta;\r\n\r\n      if (edit) sisusta = <textarea ref={Tarea} className=\"areaText\" id={id} spellCheck=\"false\" onChange = {updatethis} onInput= {updatethis} value={sisus} placeholder={placeholder}></textarea>\r\n      else sisusta = <div \r\n                      ref={Tarea} tabIndex=\"0\"\r\n                       style={{paddingBottom:15}}\r\n                       className=\"areaText\" id={id}\r\n                       spellCheck=\"false\" >{sisus}</div>\r\n\r\n    return (\r\n      <div>{sisusta}</div>\r\n      \r\n    )\r\n  }\r\n  \r\n  export default ResizeTextArea","import React, { useState, useEffect } from 'react';\r\nimport '../../../Style/Paatos.css'\r\nimport { FaGavel } from 'react-icons/fa';\r\nimport ResizeTextArea from './ResizeTextArea'\r\nimport EsitysKohta from './EsitysKohta';\r\n/**\r\n * tila: 5 -> \r\n * tila: \r\n * \r\n * \r\n * \r\n * \r\n * \r\n * \r\n * \r\n */\r\n\r\n\r\n\r\nexport const Paatos = ({pj=false, type,kokous_id,kohta_id,tila,paatos,save}) => {\r\n    var thisdata =\"\"\r\n    const [nappiBool, setnappibool] = useState(false) \r\n    thisdata = paatos;\r\n    const this_save = (_id,data,delay) => {\r\n        thisdata = data;\r\n        save(kohta_id,[data,2],500)\r\n      } \r\n    \r\n    const naytavalinnat = () => {\r\n        \r\n        setnappibool(!nappiBool);\r\n    }\r\n\r\n    return (\r\n        \r\n        <div className={\"paatos\"+tila}>\r\n            {pj?<div className=\"nuija\" onClick={()=>naytavalinnat()}><div className=\"nuija2\"><FaGavel/></div> </div>:\"\"}\r\n            <div className=\"paatos_editori\"><ResizeTextArea placeholder=\"Päätos\" edit={tila!=3 && pj} id={kohta_id} sisus={paatos} save={this_save}/></div>\r\n            {nappiBool?\r\n            (tila==3)?<div  className=\"paatos_valinnat\"><div className=\"avaa\" onClick={()=>{setnappibool(false);save(kohta_id,[paatos,2],100)}}>AVAA</div></div>:\r\n            <div  className=\"paatos_valinnat\"><div onClick={()=>{setnappibool(false);save(kohta_id,[thisdata,3],100)}}>Hyväksy!</div></div>:\"\"}\r\n        </div>\r\n       \r\n        \r\n    )\r\n}\r\n\r\nexport default Paatos","import React, { useState, useEffect } from 'react';\r\nimport {  FaThumbsUp } from 'react-icons/fa';\r\nimport axios from 'axios';\r\nconst url = process.env.REACT_APP_HOST_URL\r\nconst Kannata = ({kokous_id,kohta_id,id,teksti=\"\",tyyppi=\"mielipide\"}) => {\r\n    const [maara, setMaara] = useState(\"\")\r\n    const [classi, setClassi] = useState(0)\r\n   \r\n    const tyypit = (param) => {\r\n        switch(param){\r\n            case \"mielipide\":\r\n                return 1;\r\n            case \"kommentti_mielipide\":                \r\n                return 2;\r\n            case \"kommentti_valinta\":\r\n                return 3;\r\n            case \"kommentti_perustelu\":\r\n                return 4;\r\n            case \"perustelu\":\r\n                return 5;\r\n\r\n        }\r\n    }\r\n    const kannata = () => {\r\n        var params = new URLSearchParams()\r\n        params.append (\"kannata\", id)\r\n        params.append (\"tyyppi\",tyypit(tyyppi))\r\n        params.append (\"kohta_id\",kohta_id)\r\n        params.append (\"kokous_id\",kokous_id)\r\n        axios.post(url+'data.php', params, {withCredentials: true}).then((response) => {\r\n            \r\n            reload(1)})    \r\n    }      \r\n    useEffect(() => {\r\n        reload();\r\n        \r\n    }, [])\r\n    const reload = (param=0) => {\r\n        \r\n            var params = new URLSearchParams()\r\n            params.append (\"hae_liket\", id)\r\n            params.append (\"tyyppi\", tyypit(tyyppi))\r\n            params.append (\"kohta_id\",kohta_id)\r\n            axios.post(url+'data.php', params, {withCredentials: true}).then((response) => {\r\n                if(param==1)console.log(response.data);\r\n               if(param==1 && tyypit(tyyppi)==2) console.log(response.data);\r\n              setMaara(response.data[0])\r\n               \r\n              setClassi(parseInt(response.data[1]));\r\n               /*setKommentit(response.data[0]);*/\r\n               /*setMaara(response.data[0].length)*/\r\n            })}\r\n    \r\n    return (\r\n        <div className=\"kannata\">\r\n           <div className=\"kannata_maara\">{maara}</div>\r\n              <div className={[\"kannatan_harmaa\",\"kannatan_sininen\"][classi]} onClick={() => kannata()}>\r\n                   <div className=\"kannata_thumbsi\" ><FaThumbsUp/></div>\r\n\r\n                <div className=\"kannatan_teksti\">{teksti}</div>\r\n                \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Kannata\r\n","import React, { useState} from 'react';\r\nimport ResizeTextArea from './ResizeTextArea'\r\nimport axios from 'axios';\r\nimport Kannata from './Kannata';\r\n\r\nconst url = process.env.REACT_APP_HOST_URL\r\nconst Kommentit = ({tila,thread_id,kohta_id,maara,kokous_id,tyyppi=\"mielipide\"}) => {\r\n    const [kommenttiBool,setKommenttiBool] = useState(false);\r\n    const [kommentti,setKommentti] = useState(\"\")\r\n    const [kommentit,setKommentit] = useState([]);\r\n    const [kommenttimaara,setMaara] = useState(maara);\r\n    const this_save = (_id,data) => {\r\n        \r\n        setKommentti(data);\r\n        let sendi = document.getElementById(\"send_kommentti\"+thread_id);\r\n        if(sendi !=null){\r\n            \r\n            if (data.length > 0)\r\n                sendi.classList.add(\"sendilite\")\r\n            else\r\n                sendi.classList.remove(\"sendilite\")\r\n        }\r\n        \r\n        \r\n    }\r\n    const reload = () => {\r\n        var params = new URLSearchParams()\r\n        params.append (\"hae_kommentit\", tyyppi)\r\n        params.append (\"kokous_id\", kokous_id)\r\n        params.append (\"kohta\", kohta_id)\r\n        params.append (\"thread\", thread_id)\r\n        axios.post(url+'data.php', params, {withCredentials: true}).then((response) => {\r\n        \r\n           setKommentit(response.data[0]);\r\n           setMaara(response.data[0].length)\r\n        })}\r\n    const julkaise = () => {\r\n        \r\n        if(kommentti.length==0)return;\r\n        var params = new URLSearchParams()\r\n        params.append (\"save\", \"kommentti_\"+tyyppi)  \r\n        params.append(\"param\", kommentti)\r\n        params.append (\"kohta\", kohta_id)\r\n        params.append(\"kokous_id\", kokous_id)\r\n        params.append (\"thread\",thread_id)\r\n        this_save(0,\"\");\r\n        axios.post(url+'data.php', params, {withCredentials: true}).then((response) => {\r\n        console.log(\"julkaisu\",tyyppi,response.data)\r\n        reload()}\r\n        )  \r\n    \r\n    }\r\n\r\n    const vari = (txt) => {\r\n        \r\n        return \"#dddddd77\";\r\n        \r\n    }\r\n\r\n    return (\r\n        \r\n        <div className=\"kommentti\" >\r\n            \r\n            <div className=\"kommenttimaara\" onClick={() => {reload();setKommenttiBool(!kommenttiBool)}}>\r\n            {kommenttimaara} &nbsp;\r\n            <svg style={{height:\"15px\",width:\"15px\"}} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" fill=\"none\" stroke-width=\"4\" stroke=\"#000\"><path  d=\"M66.72,12.5H33.28C17.66,12.5,5,24.91,5,40.22H5A27.93,27.93,0,0,0,30.25,67.77l-7,19.73,24-19.57H66.72C82.34,67.93,95,55.52,95,40.22h0C95,24.91,82.34,12.5,66.72,12.5Z\" /></svg> \r\n            \r\n            </div>\r\n        {kommenttiBool?\r\n        <div>\r\n        {kommentit.map(x => <div key={x.kommentti_id} className=\"kommentti_container\"><div>\r\n            \r\n         <div className=\"kommentoija\" style={{background: vari(x.firstname+x.lastname),color:\"black\" }} >{x.firstname[0]}{x.lastname[0]}</div>\r\n         <div className=\"KommentoijaFullname\"><b>{x.firstname} {x.lastname}</b></div>\r\n         <div className=\"kommenttiaika\">{x.aika} </div>\r\n         <div className=\"kommenttikommentti\">{x.kommentti}</div></div>\r\n         <div className=\"kommenttipeukut\"><Kannata kokous_id={kokous_id} id={x.kommentti_id} tyyppi={\"kommentti_\"+tyyppi} kohta_id={kohta_id} /></div>\r\n         </div>)}\r\n        {(tila!=23)?<div>\r\n        <ResizeTextArea edit={true} placeholder=\"kirjoita kommentti\" sisus={kommentti} save={this_save}/>\r\n        \r\n        <div className=\"sendibutton\" id={\"send_kommentti\"+thread_id} onClick={()=>julkaise()}>send</div></div>:\"\"}\r\n        </div>:\"\"}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Kommentit\r\n","import React, { useRef, useEffect, useState} from 'react';\r\nimport ResizeTextArea from './ResizeTextArea'\r\nimport '../../../Style/Mielipide.css';\r\nimport Kommentit from './Kommentit';\r\nimport Kannata from './Kannata';\r\n\r\n\r\nvar alku=0;\r\nvar loppu=0;\r\nvar thisdata =\"\"\r\nconst Mielipide = ({kokous_id,kohta_id,tila,save,edit=false, arvot=[],kuvaus,positio}) => {\r\n    const [kohta,setKohta] = useState(\"\")\r\n    const [perustelu,setPerustelu] = useState(\"\")\r\n    const [mbool,setMielibool] =useState(false);\r\n    \r\n    \r\n    const laheta_setup = () => {\r\n        let sendi = document.getElementById(\"send_mielipide\"+kohta_id);\r\n        if(sendi !=null){\r\n            if (thisdata.length >0)\r\n                sendi.classList.add(\"sendilite\")\r\n            else\r\n                sendi.classList.remove(\"sendilite\")\r\n        }\r\n    }\r\n\r\n    const this_save = (_id,data) => {\r\n        setPerustelu(data);\r\n        thisdata = data;\r\n        save(_id,[data,alku,loppu,0])\r\n        laheta_setup();    \r\n    }\r\n\r\n    const julkaise = () => {\r\n        save(kohta_id,[thisdata,alku,loppu,1])\r\n        alku=0;loppu=0;\r\n        thisdata =\"\"\r\n        setPerustelu(\"\");\r\n        positio(alku,loppu)\r\n        setMielibool(alku!=loppu);\r\n    }\r\n    \r\n    useEffect((paivitaKohta) => {\r\n        document.addEventListener('selectionchange', function(event) {\r\n            let sel = window.getSelection();\r\n            if (sel.rangeCount) {\r\n                let element = sel.getRangeAt(0).commonAncestorContainer;\r\n                if(element && element.parentNode !==null && element.parentNode.id === (\"kuvaus\"+kohta_id)){\r\n                    alku = sel.anchorOffset;\r\n                    let offset = sel.focusOffset;\r\n                    if(offset < alku ){\r\n                        loppu = alku\r\n                        alku = offset;\r\n                    } else {\r\n                        loppu = offset;\r\n                    }\r\n                    laheta_setup()\r\n                    setMielibool(alku!=loppu);\r\n                    setKohta(window.getSelection().toString());\r\n                } \r\n            }\r\n        })\r\n        }, [])  \r\n    const osa = (alku,loppu) => {\r\n        let otsake = kuvaus.toString().substring(alku,loppu)\r\n        if (otsake.length > 100) return otsake.slice(0,80)+\"...\"\r\n        else return otsake;\r\n        \r\n    }\r\n    \r\n    let mielipide = \"\"\r\n    if(mbool && tila!=3) mielipide = <div>\r\n        <div className=\"mteksti  disable-select\">Mielipide asiasta:<br></br><b> {kohta} </b></div>\r\n        <div className=\"perustelu\" onMouseDown={()=>{positio(alku,loppu)}}><ResizeTextArea  edit={true} sisus={perustelu} save={this_save}/></div>\r\n        <div className=\"sendibutton disable-select\" id={\"send_mielipide\"+kohta_id} onClick={() => julkaise()}>Lähetä</div></div>\r\n    \r\n    return (<div>\r\n          \r\n        {mielipide}\r\n        {(arvot.length > 0)?<div className=\"MielipideHeader disable-select\">Mielipiteet({arvot.length})</div>:\"\"}\r\n        \r\n        {arvot.map(arvot =>\r\n        <div>\r\n            <div key={arvot.id} className=\"mielipide_container\" onClick={(ev)=>{setMielibool(false);positio(arvot.alku,arvot.loppu)}}>\r\n                <div className=\"kelloaika\">{arvot.aika}</div>\r\n                <div className=\"nimipallo\" style={{background: \"#ddd\",color:\"black\" }}>{arvot.firstname[0]}{arvot.lastname[0]}</div>\r\n                <div className=\"mielipide_otsake\" ><b>{osa(arvot.alku,arvot.loppu)}</b></div>\r\n                \r\n                <div className=\"mielipide_teksti\">{arvot.mielipide}\r\n             </div>   \r\n                \r\n               <div className=\"mielipide_like\"><Kannata teksti={\"kannatan\"} kokous_id={kokous_id} id={arvot.id} kohta_id={kohta_id}/></div>\r\n                <Kommentit \r\n                    thread_id={arvot.id}\r\n                    kohta_id={kohta_id}\r\n                    kokous_id={kokous_id}\r\n                    maara={arvot.kommentit}/>\r\n                </div></div>\r\n             \r\n                                ) }    \r\n        </div>)\r\n}\r\n\r\n\r\nexport default Mielipide\r\n\r\n\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport ResizeTextArea from './ResizeTextArea';\r\nimport '../../../Style/Hyvaksy.css';\r\nimport axios from 'axios';\r\nimport Kommentit from './Kommentit';\r\nimport Kannata from './Kannata';\r\nimport { Outline } from 'react-pdf';\r\nconst url = process.env.REACT_APP_HOST_URL\r\nvar thisdata=\"\";\r\nconst Hyvaksy = ({arvot=[],tila,kohta_id,kokous_id,save,edit=true}) => {\r\n    \r\n    const [perustelu,setPerustelu] = useState(\"\")\r\n    const this_save = (_id,data) => {\r\n        setPerustelu(data);\r\n        thisdata = data;\r\n        save(_id,[data,0],\"perustelu\")\r\n        \r\n        let sendi = document.getElementById(\"send_perustelu\"+kohta_id);\r\n        if(sendi !=null){\r\n            if (data.length > 0)\r\n                sendi.classList.add(\"sendilite\")\r\n            else\r\n                sendi.classList.remove(\"sendilite\")\r\n        }\r\n    }\r\n    const reload = () => {\r\n        var params = new URLSearchParams()\r\n        params.append (\"hae_perustelut\", kohta_id)\r\n        params.append (\"kokous_id\", kokous_id)\r\n        axios.post(url+'data.php', params, {withCredentials: true}).then((response) => {\r\n        })}\r\n    const julkaise = () => {\r\n        if(thisdata.length==0)return;\r\n        save(kohta_id,[thisdata,1],\"perustelu\")\r\n        \r\n        \r\n        let sendi = document.getElementById(\"send_perustelu\"+kohta_id);\r\n        if(sendi !=null){\r\n            sendi.classList.remove(\"sendilite\")\r\n        }\r\n        setPerustelu(\"\");\r\n        thisdata=\"\";\r\n        \r\n        \r\n    \r\n    }\r\n    return (\r\n        <div >\r\n            \r\n            {(tila!=3 && tila!=23)?\r\n                <div><ResizeTextArea edit={tila!=23 } placeholder=\"Ehdota muutosta\" sisus={perustelu} save={this_save}/>\r\n                <div className=\"sendibutton\" id={\"send_perustelu\"+kohta_id} onClick={()=>julkaise()}>send</div>\r\n                </div>:\"\"}\r\n                {(arvot.length > 0)?<div style={{paddingLeft:\"40px\"}} className=\"disable-select\"><b>Muutos ehdotukset({arvot.length})</b></div>:\"\"}  \r\n        <div >\r\n        \r\n        {arvot.map(arvot =>\r\n        <div>\r\n            <div key={arvot.id} style={{border:\"1px solid #eee\",borderBottom:\"1px solid #f0f0f0\",backgroundColor:\"#f9f9f9\"}}  className=\"asiakohta_hyvaksy\">\r\n                \r\n                \r\n                \r\n                \r\n                <div >{arvot.perustelu}\r\n             </div>   \r\n                \r\n               <div className=\"mielipide_like\"><Kannata teksti={\"kannatan\"} tyyppi=\"perustelu\" kokous_id={kokous_id} id={arvot.id} kohta_id={kohta_id}/></div>\r\n                <Kommentit \r\n                    tyyppi={\"perustelu\"}\r\n                    thread_id={arvot.id}\r\n                    kohta_id={kohta_id}\r\n                    kokous_id={kokous_id}\r\n                    maara={arvot.kommentit}/>\r\n                </div></div>\r\n             \r\n                                ) } \r\n                                </div>\r\n          \r\n\r\n                 \r\n\r\n        \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Hyvaksy\r\n","import React, {useEffect, useState} from 'react'\r\nimport request from \"../../Shared/HttpRequests\"\r\nimport '../../../Style/Henkilovalinta.css'\r\nimport CheckboxArea from './CheckboxArea'\r\n\r\n\r\n\r\nconst Henkilovalinta = ({kohta_id, admin=false, kokous_id,edit=false, arvot, oikeudet=\"1\",checkValue=[], check, remove, save, uusi, type=\"5\", tila}) => {\r\n    const [users, setUsers] = useState([])\r\n    const [ei_ehdokkaat,setEiEhdokkaat] = useState([])\r\n    const [ehdokkaat,setEhdokkaat] = useState([])\r\n    \r\n    const [ehdokasBool,setEhdokasBool] = useState(false);\r\n    \r\n        let hash = new Map();\r\n    \r\n    useEffect(() => {\r\n        const body2 = JSON.stringify({ call: 'getosallistujat', id: kokous_id })\r\n        request.osallistujat(body2).then(res => {\r\n            setUsers(res.data);\r\n            let aania = 0;\r\n            users.map(x => {hash.set(x.id,x.firstname+\" \"+x.lastname)})\r\n            setEhdokkaat((arvot.filter(x => hash.has(x.nimi))).map(x => {\r\n                let obj = {}\r\n                obj[\"id\"]=x.id;\r\n                obj[\"maara\"]=x.maara;\r\n                aania+=parseInt(x.maara);\r\n                obj['kommentit']=x.kommentit;\r\n                obj[\"nimi\"] = hash.get(x.nimi)\r\n                hash.delete(x.nimi)\r\n                return obj;}))\r\n            setEiEhdokkaat(users.filter(x => hash.has(x.id) ))\r\n           \r\n            \r\n            \r\n    }).catch(error => alert(error))\r\n    }, [arvot]\r\n    )\r\n    let jasenlista;\r\n    if (tila!=\"3\") jasenlista =\r\n    <div>{ei_ehdokkaat.length>0?<button onClick={()=>setEhdokasBool(!ehdokasBool)} className=\"pj_ehdota\" >{!ehdokasBool?\"Lisää ehdokas\":\"pienennä\"}</button>:\"\"}   \r\n    {ehdokasBool?ei_ehdokkaat.map(x=>  <div className=\"pj_ehdokkaita\" key={x.id} onClick={()=>uusi(x.id)}>{x.firstname} {x.lastname}</div>):\"\"}</div>\r\n\r\n    \r\n    return (\r\n        <div className=\"PJ\">       \r\n            {ehdokkaat.length>0?\r\n            <CheckboxArea type=\"6\" kohta_id={kohta_id} kokous_id={kokous_id} tila={tila} edit={false} arvot={ehdokkaat} check={check} checkValue={checkValue} remove={remove} save={save} uusi={uusi}/>:\"\"}\r\n           \r\n           {jasenlista}\r\n            \r\n        </div>\r\n        \r\n        \r\n    )\r\n}\r\n\r\n\r\nexport default Henkilovalinta","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport CheckboxArea from './CheckboxArea'\r\nimport ResizeTextArea from './ResizeTextArea'\r\nimport Mielipide from './Mielipide'\r\nimport Hyvaksy from './Hyvaksy'\r\nimport Henkilovalinta from './Henkilovalinta'\r\nimport '../../../Style/Sisalto.css'\r\nimport DatePicker, { registerLocale } from \"react-datepicker\";\r\n\r\nconst url = process.env.REACT_APP_HOST_URL\r\n\r\nconst Sisalto = ({flags,pj=false,oikeudet=\"2\",id,save,type,kokous_id,edit=false,tila}) => {\r\n  \r\n  const [pickerDate, setPickerDate] = useState()\r\n  \r\n\r\n  \r\n  const [valinnat,setValinnat] =useState([])\r\n  const [valintaArvot,setValintaArvot] = useState([])\r\n  const [kuvaus,setKuvaus] = useState([])\r\n  const [k_alku,set_k_Alku] = useState([])\r\n  const [k_valittu,set_k_Valittu] = useState([])\r\n  const [k_loppu,set_k_Loppu] = useState([])\r\n  const [mielipiteet,setMielipiteet] = useState([]);\r\n  const [tyyppi,setTyyppi] = useState((type==2 && edit==false)?1:0);\r\n  const [perustelut,setPerustelut] = useState ([])\r\n  const kuvaus_save = (id,data) => {\r\n    save(id,data,500,\"kuvaus\")\r\n    setKuvaus(data)\r\n\r\n  }\r\n \r\n\r\n  \r\n  const check = (vid) => {\r\n      var params = new URLSearchParams()\r\n      params.append (\"check_valitse\", vid)\r\n      params.append (\"kokous_id\", kokous_id)   \r\n      params.append (\"kohta\", id)\r\n      params.append (\"multi\",(flags&1))\r\n      axios.post(url+'data.php', params, {withCredentials: true}).then((response) => reload())    \r\n  }\r\n  const check_uusi = (data) => {\r\n    var params = new URLSearchParams()\r\n    params.append (\"check_uusi\", data)       \r\n    params.append (\"kohta\", id)\r\n    params.append (\"kokous_id\", kokous_id)\r\n    axios.post(url+'data.php', params, {withCredentials: true}).then((response) => reload())\r\n  }\r\n  const check_remove = (vid) => {\r\n    var params = new URLSearchParams();      \r\n    params.append (\"check_remove\", vid)\r\n    params.append (\"kohta\", id);\r\n    params.append (\"kokous_id\", kokous_id)\r\n    axios.post(url+'data.php', params, {withCredentials: true}).then((response) => {\r\n      reload();\r\n    })    \r\n  }\r\n  const check_save = (id,nnimi, delay) => {\r\n     \r\n      save(id,nnimi,500,\"check\");\r\n      \r\n      setValinnat(valinnat.map(arvot => (arvot.id === id)?{ ...arvot, nimi:nnimi}:arvot))\r\n     \r\n    \r\n  }\r\n  const check_toggle = (id,flag) => {\r\n    \r\n    save(id,flag,0,\"flags\");\r\n    \r\n  }\r\n\r\n  const mielipide_save = (_id,data) => {\r\n    if(data[3]==0)\r\n      save(_id,data,500,\"mielipide\")\r\n    else {\r\n      \r\n      var params = new URLSearchParams()\r\n      params.append(\"param\", data[0])\r\n      params.append(\"save\", \"mielipide\")\r\n      params.append(\"alku\", data[1])\r\n      params.append(\"loppu\", data[2])\r\n      params.append(\"draft\", 1) \r\n      params.append(\"thread\", _id);\r\n      params.append(\"kohta\", id);\r\n      params.append(\"kokous_id\", kokous_id)\r\n      axios.post(url+'data.php', params, {withCredentials: true}).then((response) =>reload());    \r\n    }\r\n  }\r\n    const teksti_save = (_id,data,type) => {\r\n      \r\n      \r\n      \r\n      if(data[1]==0)\r\n        save(_id,data,500,type)\r\n      else {\r\n          var params = new URLSearchParams()\r\n          params.append(\"param\", data[0])\r\n          params.append(\"save\", \"perustelu\")\r\n          params.append(\"draft\", 1) \r\n          params.append(\"thread\", _id);\r\n          params.append(\"kohta\", id);\r\n          params.append(\"kokous_id\", kokous_id)\r\n          axios.post(url+'data.php', params, {withCredentials: true}).then((response) =>reload());    \r\n    }\r\n       \r\n        \r\n    }\r\n\r\n\r\n\r\n  \r\n\r\n  const reload = () => {\r\n    var params = new URLSearchParams()\r\n    params.append (\"avaakohta\", id)\r\n    params.append (\"kokous_id\", kokous_id)\r\n    axios.post(url+'data.php', params, {withCredentials: true}).then((response) => {\r\n      \r\n      if(response.data[4]!=-1)setPerustelut(JSON.parse(response.data[4]))\r\n        else setPerustelut([])\r\n      if(response.data[2]!=-1)setValintaArvot(JSON.parse(response.data[2]))\r\n        else setValintaArvot([])\r\n      if(response.data[1]!=-1){\r\n        setValinnat(JSON.parse(response.data[1]))   \r\n      }\r\n        else setValinnat([])\r\n      if(response.data[0]!=-1){\r\n        setKuvaus(JSON.parse(response.data[0]))\r\n      }\r\n        else {\r\n          setKuvaus(\"\");\r\n        }\r\n      set_k_Loppu(\"\");\r\n      set_k_Valittu(\"\");\r\n      if(response.data[3]!=-1){setMielipiteet(JSON.parse(response.data[3]))\r\n        setTyyppi(1);\r\n      }\r\n        else setMielipiteet([]);\r\n     \r\n       \r\n    })}\r\n  \r\n  const osa = (s,e) => {\r\n     return kuvaus.toString().substring(s,e);\r\n   }\r\n\r\n  const setPositio = (a,l) => {\r\n    set_k_Alku(osa(0,a));set_k_Valittu(osa(a,l));set_k_Loppu(osa(l,parseInt(kuvaus.toString().length)));setTyyppi(2);\r\n  }  \r\n\r\n  useEffect(() => {\r\n      reload()\r\n      const element = document.getElementById(\"s\"+id).parentNode.querySelector(\".nro\");\r\n        if(true || element.getBoundingClientRect().top<0){\r\n            const y = element.getBoundingClientRect().top + window.pageYOffset;\r\n            window.scrollTo({top: y, behavior: 'smooth'})}\r\n      window.setTimeout(function(){\r\n        const yOffset = -40; \r\n        const element = document.getElementById(\"s\"+id).parentNode.parentNode.querySelector(\".nro\");\r\n        if(true || element.getBoundingClientRect().top<0){\r\n            const y = element.getBoundingClientRect().top + window.pageYOffset + yOffset;\r\n            window.scrollTo({top: y, behavior: 'smooth'})}\r\n        },100)\r\n        \r\n  }, [])  \r\n\r\n\r\n  \r\n  let setti = [\"\",\r\n              \"\", /*tiedoksi*/\r\n              <div><Mielipide tila={tila} edit={edit} kohta_id={id} kokous_id={kokous_id} arvot={mielipiteet} save={mielipide_save} positio={setPositio} kuvaus={kuvaus}/></div>,\r\n              <div><Hyvaksy save={teksti_save} kokous_id={kokous_id} kohta_id={id} tila={tila} arvot={perustelut}/></div>,\r\n              <div><CheckboxArea options={(parseInt(tila)===0 && parseInt(oikeudet)===0) || (pj && tila!=3)} toggle={check_toggle} flags={flags} kokous_id={kokous_id} kohta_id={id} tila={tila} edit={true} arvot={valinnat} check={check} checkValue={valintaArvot} remove={check_remove} save={check_save} uusi={check_uusi}/></div>,\r\n              <div><Henkilovalinta tila={tila} kohta_id={id} kokous_id={kokous_id}  arvot={valinnat} check={check} checkValue={valintaArvot} save={check_save} uusi={check_uusi}/></div>,\r\n              <div><Henkilovalinta toggle={check_toggle} tila={tila} type={6} kohta_id={id} kokous_id={kokous_id}  arvot={valinnat} check={check} checkValue={valintaArvot} save={check_save} uusi={check_uusi}/></div>]\r\n              [type]\r\n\r\n    return (\r\n      <div id={\"s\"+id}>\r\n      <div id=\"sisalto\">  \r\n    \r\n         {\r\n            [<div className=\"kuvaus\"><ResizeTextArea edit={(parseInt(tila)===0 && parseInt(oikeudet)===0) ||( pj && type!=2)} id={\"id\"} sisus={kuvaus} save={kuvaus_save} placeholder=\"kuvaus\"/></div>,\r\n              <div className=\"kuvaus\"><div  id={\"kuvaus\"+id} className=\"areaText\">{kuvaus}</div></div>,\r\n              <div className=\"kuvaus\"><div  id={\"kuvaus\"+id} onMouseDown={()=>setTyyppi(1)}className=\"areaText\">\r\n                {k_alku}<span className='korostus'>{k_valittu}</span>{k_loppu}</div></div>]\r\n              [tyyppi]\r\n\r\n         }\r\n\r\n        {setti}\r\n\r\n\r\n           \r\n         \r\n      </div>\r\n      \r\n      </div>\r\n    )\r\n  \r\n  }\r\n\r\n\r\n\r\n  export default Sisalto","import React, { useState } from 'react'\r\nimport Kalenteri from './Kalenteri'\r\nimport Paatos from './Paatos'\r\nimport Sisalto from './Sisalto'\r\nimport ResizeTextArea from './ResizeTextArea'\r\nimport '../../../Style/Paatos.css'\r\nimport DatePicker, { registerLocale } from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport fi from 'date-fns/locale/fi';\r\nimport { FaHandshake,FaUserCheck,FaComment,FaComments,FaGavel, FaTrashAlt } from 'react-icons/fa';\r\nconst url = process.env.REACT_APP_HOST_URL\r\nconst EsitysKohta = ({flags,pj=false,oikeudet=\"2\",vaihda_tyyppi,kokous_id,type,title,id,alkaa,loppuu,auki=false,avaa,save,poista,paatos,tila}) => {\r\n  \r\n  const [startDate, setStartDate] = useState((alkaa!==\"0000-00-00\")?new Date(alkaa):\"\")\r\n  \r\n  var sisalto\r\n  let alku\r\n  let loppu\r\n  registerLocale('fi', fi)\r\n\r\n  const this_save = (_id,data,delay,type) => {\r\n    save(_id,data,delay,type,id)\r\n  }  \r\n  \r\n  const this_avaa = () => {\r\n    avaa(id)\r\n  }\r\n\r\n  const thisvaihda_tyyppi = (param) => {\r\n    if(parseInt(tila)==23) return;\r\n    if (type==param) param=0;\r\n    vaihda_tyyppi(id,param)\r\n  } \r\n\r\n  const thisinfo = (param,palaa=0) => {\r\n    if(parseInt(tila)==23) return;\r\n    let teksti;\r\n    let elem = document.getElementById(\"info\"+id);\r\n    switch(param){\r\n      case 3: teksti = \"Hyväksy asiakohta\";break;\r\n      case 4: teksti = \"Äänestys</b>\";break;\r\n      case 2: teksti = \"Mielipiteitä asiasta\";break;\r\n      case 5: teksti = \"Nimitys\";break;\r\n      case 6: teksti = \"Puheenjohtajan valinta\";break;\r\n      default: teksti = \"Tiedoksi\";break;\r\n    }\r\n    if(palaa==1) return teksti;\r\n    elem.innerHTML=teksti;\r\n  }\r\n\r\n  const paatos_save = (_id,data,delay) => {\r\n    \r\n    save(id,data,delay,\"paatos\",id)\r\n\r\n  }\r\n\r\n  const vaihda_aika = () => {\r\n    \r\n  }\r\n\r\n  const poista_kohta = () => {\r\n    if (window.confirm('Poista asiakohta?')) {\r\n      poista(\"poista_kohta\",id)\r\n    } \r\n      \r\n  }\r\n\r\n{/*\r\n  if(tila!=3 && startDate!=null && startDate !==\"\") alku = <div tabIndex=\"0\" onClick={()=>vaihda_aika()}>\r\n    <Kalenteri pv={startDate.getDate()} kk = {startDate.getMonth()+1} alku={false}/>\r\n       /* <div className=\"paivaysspicker\">\r\n       <DatePicker\r\n            \r\n                            locale=\"fi\"\r\n                            dateFormat=\"dd/MM/yyyy\"\r\n                            className=\"form-control\"\r\n                            selected={startDate}\r\n                            onChange={date => setStartDate(date)}\r\n                            selectsStart/></div> \r\n    </div>\r\n*/}\r\n  let nappeja = [ \"\",\r\n                  <FaComment onMouseEnter={()=>thisinfo(1)}  onClick={()=>thisvaihda_tyyppi(1)} className ={(type==1)?\"kohta_valittu p_k\":\"p_k\"}/>,\r\n                  <FaComments onMouseEnter={()=>thisinfo(2)}  onClick={()=>thisvaihda_tyyppi(2)} className ={(type==2)?\"kohta_valittu p_k\":\"p_k\"}/>,\r\n                  <FaHandshake  onMouseEnter={()=>thisinfo(3)}    onClick={()=>thisvaihda_tyyppi(3)} className ={(type==3)?\"kohta_valittu p_k\":\"p_k\"}/>, \r\n                  <svg onMouseEnter={()=>thisinfo(4)} className={(type==4)?\"kohta_valittu p_k\":\"p_k\"} onClick={()=>thisvaihda_tyyppi(4)} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-100 -100 700 700\">\r\n                   <path d=\"M26.42,180.11v350h350v-350Zm130.83,290.6L73.7,363.27l18.6-13.76,66.42,83.93L306.18,258.7l18.05,16Z\" transform=\"translate(-21.42 -25.11)\"/><path  d=\"M101.42,105.11v0h350v350h0v-350Z\" transform=\"translate(-21.42 -25.11)\"/><path  d=\"M176.42,30.11v0h350v350h0v-350Z\" transform=\"translate(-21.42 -25.11)\"/></svg>,\r\n                  <FaUserCheck onMouseEnter={()=>thisinfo(5)} onClick={()=>thisvaihda_tyyppi(5)} className ={(type==5)?\"kohta_valittu p_k\":\"p_k\"}/>,\r\n                  <FaGavel onMouseEnter={()=>thisinfo(6)} className =\"kohta_valittu p_k\"/>]\r\n  \r\n  let nappit = ((parseInt(tila)!=23) && (type==0 && /* && tila != 3 && */parseInt(oikeudet)===0))?\r\n  <div className=\"valinta_iconit\">{nappeja[1]}{nappeja[2]}{nappeja[3]}{nappeja[4]}{nappeja[5]}<div className=\"kohta_info\" id={\"info\"+id}>{thisinfo(type,1)}</div></div>:\r\n  <div className=\"valinta_iconit2\">{nappeja[type]}<div className=\"kohta_info\" id={\"info\"+id}>{thisinfo(type,1)}</div></div>;\r\n  sisalto = (auki)?<Sisalto flags={flags} key={id} pj={((parseInt(tila)!=23) && (pj==true))} oikeudet={(parseInt(tila)!=23) && oikeudet}  kokous_id={kokous_id} id={id} type={type} save={this_save} tila={tila}/>:\"\"; \r\n\r\n  return (\r\n    <div className=\"esitys_item\" >\r\n      {loppu}\r\n      \r\n      <div onClick= {this_avaa} className=\"otsake\">{alku}<ResizeTextArea placeholder={\"Uusi kohta\"} edit={(parseInt(tila)!=23) && ((parseInt(tila) ===0 && parseInt(oikeudet)===0) || pj)} id={id} sisus={title} save={this_save}/></div>\r\n      <div>\r\n        {nappit}\r\n        \r\n        {(parseInt(tila)==3 || (pj && parseInt(tila)!==0))?\r\n          <Paatos pj={(parseInt(tila)!=23) && pj} tila={tila} kokous_id={kokous_id} kohta_id={id} paatos={paatos} save={paatos_save}/>:\"\"}      \r\n        \r\n        <div className={\"nro\"}/>\r\n        {(parseInt(tila)==3 || parseInt(tila)==23)?<div className=\"nro_3\"></div>:\"\"}\r\n        {sisalto}\r\n        \r\n      </div>\r\n      {(parseInt(tila)!=3 && pj )?<div  onClick= {this_avaa} className=\"raahaa\" id={\"r\"+id}></div>:\"\"}\r\n      {((parseInt(tila)!=23) && ((parseInt(tila) ===0 && parseInt(oikeudet)===0) || (pj && parseInt(tila)!=3)))?<div className=\"esityskohta_roskis\" onClick={()=>poista_kohta()}><FaTrashAlt/></div> :\"\"}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default EsitysKohta","import React, { useState, useEffect } from 'react'\r\nimport { useParams, useHistory } from 'react-router-dom'\r\nimport { Link } from 'react-router-dom'\r\nimport request from '../../Components/Shared/HttpRequests'\r\nimport HelpPop from '../../Components/Shared/HelpPop'\r\nimport Perustiedot from '../../Components/UusiKokous/Perustiedot'\r\nimport Osallistujat from '../../Components/UusiKokous/Osallistujat'\r\nimport Paatosvaltaisuus from '../../Components/UusiKokous/Paatosvaltaisuus'\r\nimport Yhteenveto from '../../Components/UusiKokous/Yhteenveto'\r\nimport { getSessionRole, getUser } from '../../Components/Auth/Sessions'\r\nimport Esityslista from '../../Components/UusiKokous/Esityslista/Esityslista';\r\n\r\nconst UusiKokous = (props) => {\r\n\r\n    let user = getUser()\r\n    const { yhdistys } = useParams()\r\n    const [members, setMembers] = useState()\r\n\r\n    const [showComponent, setShowComponent] = useState('perustiedot')\r\n    let history = useHistory()\r\n\r\n    const [perustiedot, setPerustiedot] = useState({ otsikko: '', kokousNro: '', kokousid: '', startDate: '', endDate: '', avoinna: false })\r\n    const [esityslista_otsakkeet, setEsityslista] = useState()\r\n    const [osallistujat, setOsallistujat] = useState()\r\n    const [puheenjohtaja, setPuheenjohtaja] = useState()\r\n    const [varalla, setVaralla] = useState([])\r\n    const [paatosvaltaisuus, setPaatosvaltaisuus] = useState({ esityslista: '', aktiivisuus: '', kesto: '', muu: '' })\r\n    const [id_y, setId_y] = useState(props.location.state.id_y);\r\n    const [id_k, setId_k] = useState(-1);\r\n\r\n    useEffect(() => {\r\n        const pvmYear = { year: 'numeric' };\r\n        const now = Date();\r\n        const getDraft = JSON.stringify({ call: 'getkokousdraft', name: yhdistys })\r\n\r\n        if (!perustiedot.kokousNro && !members) {\r\n            request.kokous(getDraft).then(res => {\r\n                if (res.data.message !== 'Ei kesken olevia kokouskutsuja') {\r\n                    if (window.confirm('Yhdistyksellä on tallentamaton kokous. Haluatko jatkaa kokoustietojen täyttämistä vai aloittaa uudelleen?')) {\r\n\r\n                        const avoin = res.data.avoinna === \"0\" ? false : true\r\n                        const alkaa = res.data.startDate === \"1970-01-01\" ? '' : new Date(res.data.startDate)\r\n                        const loppuu = res.data.endDate === \"1970-01-01\" ? '' : new Date(res.data.endDate)\r\n\r\n                        setPerustiedot({\r\n                            otsikko: res.data.otsikko,\r\n                            kokousNro: res.data.kokousnro + \"/\" + (new Date(now)).toLocaleDateString('fi-FI', pvmYear),\r\n                            kokousid: res.data.id,\r\n                            startDate: alkaa,\r\n                            endDate: loppuu,\r\n                            avoinna: avoin\r\n                        })\r\n\r\n                        const esitys = res.data.pv_esityslista === \"0\" ? '' : res.data.pv_esityslista\r\n                        const aktiv = res.data.pv_aktiivisuus === \"0\" ? '' : res.data.pv_aktiivisuus\r\n                        const kesto = res.data.pv_kesto === \"0\" ? '' : res.data.pv_kesto\r\n\r\n                        setPaatosvaltaisuus({ esityslista: esitys, aktiivisuus: aktiv, kesto: kesto, muu: res.data.pv_muu })\r\n                        setId_y(res.data.id_y)\r\n\r\n                        const body2 = JSON.stringify({ call: 'getosallistujat', id: res.data.id })\r\n                        request.osallistujat(body2).then(res => {\r\n                            setOsallistujat(res.data)\r\n                            setPuheenjohtaja(res.data.filter(x => x.role === 'puheenjohtaja'))\r\n                        }).catch(err => console.log('err.response', err.response))\r\n\r\n                        const req = JSON.stringify({ call: 'getallmembers', yhdistys: yhdistys })\r\n                        request.assoc(req).then(res => {\r\n                            setMembers(res.data)\r\n                        }).catch(err => console.log('err.response', err.response))\r\n\r\n                    } else {\r\n                        const delReq = JSON.stringify({ call: \"deletedraft\", kokousid: res.data.id })\r\n                        request.kokous(delReq)\r\n                            .then(res => {\r\n                                setId_k(res.data['id'])\r\n                                getKokousNro()\r\n                                return;\r\n                            }).catch(err => console.log('err.response', err.response))\r\n                    }\r\n                } else {\r\n                    getKokousNro()\r\n                }\r\n            }).catch(err => console.log('err.response.data', err.response.data))\r\n        }\r\n        if (members && osallistujat && puheenjohtaja) {\r\n            setVaralla(members.filter(vara => !osallistujat.find(({ email }) => vara.email === email)))\r\n            setOsallistujat(osallistujat.filter(x => x.role !== 'puheenjohtaja'))\r\n\r\n        } else if (!members && varalla.length === 0 && !puheenjohtaja) {\r\n            const req = JSON.stringify({ call: 'getallmembers', yhdistys: yhdistys })\r\n            request.assoc(req).then(res => {\r\n                setMembers(res.data)\r\n                setOsallistujat(res.data.filter(x => x.email !== getUser().email))\r\n                setPuheenjohtaja(res.data.filter(x => x.email === getUser().email))\r\n            }).catch(err => console.log('err.response', err.response))\r\n        }\r\n    }, [members, perustiedot])  // missing dependencies, mutta seurauksena looppi ... refaktoroi? \r\n    // 'getKokousNro', 'osallistujat', 'puheenjohtaja', 'varalla.length', and 'yhdistys'\r\n\r\n    const helpText = \"Aloita kokous antamalla sille otsikko sekä alku- ja loppupäivämäärät. Kun olet valmis, paina seuraava-näppäintä, niin voit luoda esityslistan ja päättää voiko yhdistyksen jäsenet liittää omia esityksiään esityslistalle. Seuraavaksi voit määritellä kokouksen osallistujat ja päätösvaltaisuuden. Lopuksi näet kutsu kokous -välilehdeltä luomasi kokouksen tiedot, missä voit tallentaa ja lähettää kutsun kokoukseen osallistujille.\"\r\n\r\n    const getKokousNro = () => {\r\n        const pvmYear = { year: 'numeric' };\r\n        const now = Date();\r\n        const body = JSON.stringify({ call: 'kokousnro', yhdistys: yhdistys })\r\n     \r\n        request.kokous(body).then(res => {\r\n            setPerustiedot({ ...perustiedot, kokousNro: res.data.kokousnro + \"/\" + (new Date(now)).toLocaleDateString('fi-FI', pvmYear) })\r\n            setId_y(res.data.id_y)\r\n        })\r\n    }\r\n    const handleMenuClick = (ev) => {\r\n\r\n        saveKokousDraft(showComponent);\r\n\r\n        if (ev.target.name === \"yhteenveto\") { // esityslistan otsakkeet tarvitaan yhteenvetoa varten /loput saadaan stateista.\r\n            let x = ev.target.name\r\n            let params2 = new URLSearchParams();\r\n            params2.append(\"otsakkeet\", perustiedot.kokousid)\r\n            request.data(params2).then(res => {\r\n                setEsityslista(res.data)\r\n                setShowComponent(x)\r\n            })\r\n        } else {\r\n            setShowComponent(ev.target.name)      \r\n        }\r\n        let napit = ev.target.parentNode.querySelectorAll(\"button\");\r\n        for (let i = 0; i < napit.length; i++) {\r\n            napit[i].classList.remove(\"valittu_menu\");\r\n        }\r\n        ev.target.classList.add(\"valittu_menu\");\r\n    }\r\n\r\n    const parse_kokousnro = () => {\r\n        let i = perustiedot.kokousNro.indexOf('/')\r\n        if (i === -1) return perustiedot.kokousNro\r\n        else return perustiedot.kokousNro.substring(0, i);\r\n    }\r\n\r\n    const saveKokousDraft = (param) => { // -- TODO estä tallennus jos ei muuta dataa kuin kokousnro \r\n\r\n        const uusiKokous = JSON.stringify({\r\n            call: 'luokokous',\r\n            id_y: id_y,\r\n            kokousid: perustiedot.kokousid,\r\n            otsikko: perustiedot.otsikko,\r\n            kokousnro: parse_kokousnro(),\r\n            startDate: perustiedot.startDate,\r\n            endDate: perustiedot.endDate,\r\n            avoinna: perustiedot.avoinna,\r\n            paatosvaltaisuus: paatosvaltaisuus,\r\n            valmis: false\r\n        })\r\n\r\n        request.kokous(uusiKokous).then(res => {\r\n            setPerustiedot({ ...perustiedot, kokousid: res.data.kokousid })\r\n            saveOsallistujat()\r\n            setId_k(res.data.kokousid);\r\n        }).catch(err => {\r\n            alert(err.response.data.message)\r\n        })\r\n\r\n    }\r\n\r\n    const saveOsallistujat = () => {\r\n\r\n        if (perustiedot.kokousid !== '') {\r\n            let kokousosallistujat\r\n            kokousosallistujat = osallistujat.map(x => ({ rooli: 'osallistuja', ...x }))\r\n            user = Object.assign({ rooli: 'puheenjohtaja' }, user)\r\n            const call = { call: 'postosallistujat', id_y: id_y, kokousid: perustiedot.kokousid }\r\n            kokousosallistujat = [user].concat(kokousosallistujat)\r\n            kokousosallistujat = [call].concat(kokousosallistujat)\r\n            const body = JSON.stringify(kokousosallistujat)\r\n\r\n            request.osallistujat(body).then(res => {\r\n                console.log('res.data', res.data)\r\n            }).catch(err => console.log('Error res ', err.response))\r\n        }\r\n    }\r\n    const handlePerustiedotChange = (ev) => {\r\n        if (ev.target.name === 'otsikko') setPerustiedot({ ...perustiedot, otsikko: ev.target.value })\r\n        else if (ev.target.name === 'kokousnro') setPerustiedot({ ...perustiedot, kokousNro: ev.target.value })\r\n        else if (ev.target.id === 'avaa') setPerustiedot({ ...perustiedot, avoinna: !perustiedot.avoinna })\r\n    }\r\n    const handlePaatosvaltaChange = (ev) => {\r\n        if (ev.target.name === 'esityslista') setPaatosvaltaisuus({ ...paatosvaltaisuus, esityslista: ev.target.value })\r\n        else if (ev.target.name === 'aktiivisuus') setPaatosvaltaisuus({ ...paatosvaltaisuus, aktiivisuus: ev.target.value })\r\n        else if (ev.target.name === 'kesto') setPaatosvaltaisuus({ ...paatosvaltaisuus, kesto: ev.target.value })\r\n        else if (ev.target.name === 'muu') setPaatosvaltaisuus({ ...paatosvaltaisuus, muu: ev.target.value })\r\n    }\r\n\r\n    let component\r\n    if (showComponent === 'perustiedot') component = <Perustiedot setShowComponent={setShowComponent} handlePerustiedotChange={handlePerustiedotChange} saveKokousDraft={saveKokousDraft} perustiedot={perustiedot} setPerustiedot={setPerustiedot} />\r\n    else if (showComponent === 'esityslista') component = <Esityslista puheenjohtaja={true} setShowComponent={setShowComponent} setEsityslista={setEsityslista} esityslista={esityslista_otsakkeet} kokousid={id_k} setShowComponent={setShowComponent} saveKokousDraft={saveKokousDraft} />\r\n    else if (showComponent === 'osallistujat') component = <Osallistujat puheenjohtaja={puheenjohtaja} osallistujat={osallistujat} setOsallistujat={setOsallistujat} saveOsallistujat={saveOsallistujat} varalla={varalla} setVaralla={setVaralla} setShowComponent={setShowComponent} />\r\n    else if (showComponent === 'paatosvaltaisuus') component = <Paatosvaltaisuus setShowComponent={setShowComponent} handlePaatosvaltaChange={handlePaatosvaltaChange} paatosvaltaisuus={paatosvaltaisuus} saveKokousDraft={saveKokousDraft} />\r\n    else if (showComponent === 'yhteenveto') component = <Yhteenveto esityslista_otsakkeet={esityslista_otsakkeet} perustiedot={perustiedot} osallistujat={osallistujat} paatosvaltaisuus={paatosvaltaisuus} yhdistys={yhdistys} id_y={id_y} />\r\n    else component = <></>\r\n\r\n\r\n    if (getSessionRole() && getSessionRole().role === 'admin' && getSessionRole().yhdistys === yhdistys) {\r\n        return (\r\n            <div style={{ width: \"100%\", maxWidth: \"1100px\", padding: \"0\", marginTop: \"50px\" }}>\r\n                <div className=\"px-3\">\r\n                    <h2>{yhdistys}</h2>\r\n                    <h4>Luo uusi kokous</h4>\r\n                    {/* //  onClick={()=> saveKokousDraft()} --- TODO muokkaa siten ettei tallenusta tapahdu, jos muuta kuin kokousid ei ole asetettu  */}\r\n                    <Link to={{ pathname: `/assoc/${yhdistys}`, state: { id: id_y } }}>Yhdistyksen pääsivu</Link>\r\n                </div>\r\n                <hr />\r\n                <div>\r\n                    <div className=\"d-sm-flex justify-content-center second_nav\">\r\n                        <button className=\"text-primary valittu_menu\" name=\"perustiedot\" onClick={handleMenuClick}>Perustiedot</button>\r\n                        <button className=\"text-primary \" name=\"esityslista\" onClick={handleMenuClick}>Esityslista</button>\r\n                        <button className=\"text-primary \" name=\"osallistujat\" onClick={handleMenuClick}>Osallistujat</button>\r\n                        <button className=\"text-primary \" name=\"paatosvaltaisuus\" onClick={handleMenuClick}>Päätösvaltaisuus</button>\r\n                        <button className=\"text-primary \" name=\"yhteenveto\" onClick={handleMenuClick}>Kutsu kokous</button>\r\n                        <HelpPop heading=\"Kokouksen luominen\" text={helpText} btnText=\"Selitystä\" placement=\"left\" variant=\"btn btn-outline-danger btn-sm mx-1\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"mt-5\">\r\n                    {component}\r\n                </div>\r\n            </div>\r\n        )\r\n    } else {\r\n        history.push('/userpage')\r\n        return <></>\r\n    }\r\n}\r\nexport default UusiKokous","import React from 'react'\r\nimport { Editor } from \"@tinymce/tinymce-react\"\r\n\r\nconst DocumentReadOnly = ({ setShowTable, document }) => {\r\n\r\n    const print = () => window.tinymce.activeEditor.execCommand(\"mcePrint\", true)\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"text-right\">\r\n                {document.draft === \"0\" ? <></> : <button className=\"btn btn-outline-primary btn-sm\">Muokkaa</button>}\r\n                <button className=\"btn btn-outline-primary btn-sm\" onClick={print}>Tulosta</button>\r\n                <button className=\"btn btn-outline-primary btn-sm\" onClick={() => setShowTable(true)}>Sulje</button>\r\n            </div>\r\n            <div style={{ zIndex: '100 !important' }}>\r\n                <Editor apiKey={process.env.REACT_APP_TINYAPI_KEY}\r\n                    disabled={true}\r\n                    value={document.content}\r\n                    init={{\r\n                        menubar: false,\r\n                        toolbar: false,\r\n                        selector: \"textarea\",\r\n                        plugins: [\"autoresize print\"]\r\n                    }}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default DocumentReadOnly\r\n","import React, { useState, useEffect } from 'react'\r\nimport DocumentReadOnly from '../../Components/Document/DocumentReadOnly'\r\nimport request from '../Shared/HttpRequests'\r\n// import { getUser } from '../Auth/Sessions'\r\nimport UploadedDocs from '../Document/UploadedDocs'\r\n\r\nconst KokousDocs = ({ kokous, yhdistys, setShowTable, showTable }) => {\r\n\r\n    const [kokousDocuments, setKokousDocuments] = useState([])\r\n    const [document, setDocument] = useState([])\r\n    const [uploadedDocs, setUploadedDocs] = useState([])\r\n    const [upload, setUpload] = useState([])\r\n    const [uploadOrNot, setUploadOrNot] = useState(true)\r\n    // const [loading, setLoading] = useState(0)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        const body = JSON.stringify({ call: 'getdocuments', kokousid: kokous.id })\r\n        request.documents(body).then(res => {\r\n            setKokousDocuments(res.data)\r\n        }).catch(err => {\r\n            console.log('error: ', err.response)\r\n        })\r\n        // const body2 = JSON.stringify({ call: \"getuploads\", kokousid: kokous.id, yhdistys: yhdistys })  // voiko php-metodin tehdä siten että se toimii myös vain yhdistyksen nimellä? \r\n        // request.documents(body2).then(res => {\r\n        //     setUploadedDocs(res.data)\r\n        // }).catch(err => console.log('getuploads error: ', err))\r\n    }, [kokous.id, yhdistys])\r\n\r\n    const handleOpenDocumentClick = (item) => {\r\n        setDocument(item)\r\n        setShowTable(!showTable)\r\n        setUploadOrNot(false)\r\n    }\r\n    const handleOpenUploadedDoc = (item) => {\r\n        setUpload(item)\r\n        setShowTable(!showTable)\r\n        setUploadOrNot(true)\r\n    }\r\n    // const handleFileUpload = (ev) => {\r\n    //     if (ev.target.files[0].type === 'application/pdf') {\r\n    //         if (window.confirm(`Haluatko lisätä tiedoston \"${ev.target.files[0].name}\" tietokantaan?`)) {\r\n    //             saveDocument(ev.target.files[0])\r\n    //         }\r\n    //     } else {\r\n    //         alert(\"Tiedoston tulee olla pdf-muodossa\")\r\n    //     }\r\n    // }\r\n    // const saveDocument = (file) => {\r\n\r\n    //     let data = new FormData()\r\n    //     data.append('kokousid', kokous.id)\r\n    //     data.append('user', getUser().email)\r\n    //     data.append('yhdistys', yhdistys)\r\n    //     data.append('file', file)\r\n\r\n    //     request.documents(data).then(() => {\r\n    //         alert('Tiedosto tallennettu!')\r\n    //         window.location.reload() \r\n    //     }).catch(err => console.log('savedocument error: ', err))\r\n    // }\r\n\r\n    let component\r\n    if (uploadOrNot) {\r\n        component = (\r\n            < table className=\"table table-hover table-borderless mt-2\">\r\n                <tbody>\r\n                    {kokousDocuments.map(item =>\r\n                        <tr key={item.id} onClick={() => handleOpenDocumentClick(item)} style={{ cursor: \"pointer\" }}>\r\n                            <td>{item.type}</td>\r\n                        </tr>)}\r\n                </tbody>\r\n            </table>\r\n\r\n        )\r\n    } else if (!uploadOrNot) {\r\n        component = (\r\n            <>< table className=\"table table-hover table-borderless mt-2\">\r\n                <tbody>\r\n                    {uploadedDocs.map(item =>\r\n                        <tr key={item.id} onClick={() => handleOpenUploadedDoc(item)} style={{ cursor: \"pointer\" }}>\r\n                            <td>{item.nimi.substring(10)}</td>\r\n                        </tr>)}\r\n                </tbody>\r\n            </table>\r\n            </>\r\n        )\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"m-auto\">\r\n            {showTable\r\n                ?\r\n                < table className=\"table table-hover table-borderless mt-2\">\r\n                    <tbody>\r\n                        {kokousDocuments.map(item =>\r\n                            <tr key={item.id} onClick={() => handleOpenDocumentClick(item)} style={{ cursor: \"pointer\" }}>\r\n                                <td>{item.type}</td>\r\n                            </tr>)}\r\n                    </tbody>\r\n                </table>\r\n                : uploadOrNot ? <></> : <DocumentReadOnly setShowTable={setShowTable} document={document} />}\r\n\r\n            {showTable\r\n                ? <>< table className=\"table table-hover table-borderless mt-2\">\r\n                    <tbody>\r\n                        {uploadedDocs.map(item =>\r\n                            <tr key={item.id} onClick={() => handleOpenUploadedDoc(item)} style={{ cursor: \"pointer\" }}>\r\n                                <td>{item.nimi.substring(10)}</td>\r\n                            </tr>)}\r\n                    </tbody>\r\n                </table>\r\n                </>\r\n                : uploadOrNot ? <UploadedDocs setShowTable={setShowTable} upload={upload} /> : <></>}\r\n\r\n            {/* {showTable\r\n                ? <div class=\"float-right mx-2\">\r\n                    <form method=\"POST\" >\r\n                        <label for=\"inputFile\" className=\"btn btn-outline-primary\">Lisää asiakirja</label>\r\n                        <input type=\"file\" name=\"file\" class=\"form-control-file\" id=\"inputFile\" aria-describedby=\"fileHelp\" onChange={handleFileUpload} style={{ display: 'none' }} />\r\n                        <small id=\"fileHelp\" class=\"form-text text-muted\">Lataa haluamasi asiakirja pdf-muodossa.</small>\r\n                    </form>\r\n                </div>\r\n                : <></>\r\n            } */}\r\n            {/* // TODO tämä ei saisi näkyä kuin pj:lle ja vain kun table on näkyvissä: */}\r\n\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default KokousDocs\r\n","import React from 'react'\r\n\r\nconst KokousOsallistujat = ({ osallistujat, jasenet, puheenjohtaja, kokousRooli, handleOsallistujatClick, kokous }) => {\r\n\r\n    jasenet = jasenet.filter(jasen => !osallistujat.find(({ email }) => jasen.email === email))\r\n    jasenet = jasenet.filter(jasen => !puheenjohtaja.find(({ email }) => jasen.email === email))\r\n\r\n    return (\r\n        <div style={{ marginTop: \"4px\" }} >\r\n            < table className=\"table table-hover table-responsive-sm\">\r\n                <thead>\r\n                    <tr className=\"table-primary\"><th>Etunimi</th><th>Sukunimi</th><th>Sähköpostiosoite</th><th></th></tr>\r\n                </thead>\r\n                <tbody>\r\n                    {osallistujat.map((item, key) =>\r\n                        <tr key={key + item.firstname}>\r\n                            <td>{item.firstname}</td>\r\n                            <td>{item.lastname}</td>\r\n                            <td>{item.email}</td>\r\n                            {kokousRooli === 'puheenjohtaja' && kokous.loppu === \"0\" ? <td><button className=\"btn btn-outline-danger btn-sm\" name={item.email} id=\"varalle\" onClick={handleOsallistujatClick}>Poista kokouksesta</button></td> : <td></td>}\r\n                        </tr>)}\r\n                </tbody>\r\n            </ table>\r\n            {jasenet.length !== 0\r\n                ? <>\r\n                    <h5 className=\"mx-2\">Muut yhdistyksen jäsenet</h5>\r\n                    < table className=\"table table-hover  table-responsive-sm\">\r\n                        <thead>\r\n                            <tr className=\"table-primary\"><th>Etunimi</th><th>Sukunimi</th><th>Sähköpostiosoite</th><th></th></tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {jasenet.map((item, key) =>\r\n                                <tr key={key + item.firstname}>\r\n                                    <td>{item.firstname}</td>\r\n                                    <td>{item.lastname}</td>\r\n                                    <td>{item.email}</td>\r\n                                    {kokousRooli === 'puheenjohtaja' && kokous.loppu === \"0\" ? <td><button className=\"btn btn-outline-success btn-sm\" name={item.email} id=\"osallistujaksi\" onClick={handleOsallistujatClick}>Siirrä kokoukseen</button></td> : <td></td>}\r\n                                </tr>)}\r\n\r\n                        </tbody>\r\n                    </ table> </>\r\n                : <><hr /><p className=\"ml-2\">Kaikki yhdistyksen jäsenet osallistuvat kokoukseen.</p></>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default KokousOsallistujat\r\n    // PJ: Voi siirtää kokousosallistujan tilaan “Estynyt” ja voi nostaa nimeämänsä varakokousosallistujan varsinaiseksi kokousosallistujaksi  ????\r\n    // Kokousosallistuja: Voi ilmoittaa esteellisyydestä yksittäiseen kokoukseen ja nimetä varakokousedustajan kokousosallistujaksi tilalleen  ????\r\n","import React, { useState } from 'react'\r\nimport DatePicker, { registerLocale } from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport fi from 'date-fns/locale/fi';\r\n\r\nconst Kokousaika = ({ kokous,  handleVaihdaKokousaika }) => {\r\n\r\n    const [pickerDate, setPickerDate] = useState(Date.parse(kokous.endDate))\r\n    const start = Date.parse(kokous.startDate)\r\n    registerLocale('fi', fi)\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col-md-5 m-auto\">\r\n                <div className=\"card card-body mt-3\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"mb-3\">Vaihda kokouksen päättymisajankohta: </label><br />\r\n                        <DatePicker\r\n                            locale=\"fi\"\r\n                            dateFormat=\"dd/MM/yyyy\"\r\n                            className=\"form-control\"\r\n                            selected={pickerDate}\r\n                            onChange={date => setPickerDate(date)}\r\n                            selectsEnd\r\n                            endDate={pickerDate}\r\n                            minDate={start}\r\n                        /><br />\r\n                        <button onClick={() => handleVaihdaKokousaika(pickerDate)} className=\"btn btn-outline-primary btn-sm mt-4\">Tallenna</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Kokousaika","import React from 'react'\r\n\r\nconst KokousPaatosvalta = ({ kokous, osallistujat, puheenjohtaja }) => {\r\n\r\n    let tila_kesto = \"Ei päätösvaltainen.\"\r\n    let tila_esityslista = \"Ei Päätösvaltainen.\"\r\n    let tila_aktiivisuus = \"Ei Päätösvaltainen.\"\r\n \r\n    const kaikki = puheenjohtaja.concat(osallistujat)\r\n    const avannutEsityslistan = kaikki.map(x => x.pv_avannut).reduce((a, v) => (v ===\"1\" ? a + 1 : a), 0)\r\n    const ollutAktiivinen = kaikki.map(x => x.pv_aktiivinen).reduce((a, v) => (v === '1' ? a + 1 : a), 0)\r\n\r\n    if (kokous.pv_kesto !== '0') {\r\n        if (kokous.pv_kesto_toteutunut === 'true') tila_kesto = \"Päätösvaltainen.\"\r\n    } \r\n    if(kokous.pv_esityslista !== '0') {\r\n        if( kokous.pv_esityslista <= avannutEsityslistan) tila_esityslista = \"Päätösvaltainen.\"\r\n    }\r\n    if(kokous.pv_aktiivisuus !== '0') {\r\n        if(kokous.pv_aktiivisuus <= ollutAktiivinen) tila_aktiivisuus = \"Päätösvaltainen.\"\r\n    }\r\n\r\n\r\n    let paatosvaltaMaaritys\r\n    let muuKriteeriTeksti\r\n\r\n    if (kokous.pv_esityslista === '0' && kokous.pv_aktiivisuus === '0' && kokous.pv_kesto === '0' && kokous.pv_muu === '') {\r\n        paatosvaltaMaaritys = \"Ei päätösvaltaisuuskriteerejä.\"\r\n        muuKriteeriTeksti = \"\"\r\n    } else {\r\n        if (kokous.pv_esityslista === '0' && kokous.pv_aktiivisuus === '0' && kokous.pv_kesto === '0' && kokous.pv_muu !== '') {\r\n            paatosvaltaMaaritys = \"\"\r\n            muuKriteeriTeksti = \"Päätösvaltaisuuskriteeri\"\r\n        } else {\r\n            paatosvaltaMaaritys = \"Kokous on päätösvaltainen,\"\r\n            muuKriteeriTeksti = \"Muut kokouksen päätösvaltaisuudelle asetetut kriteerit:\"\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"col-sm-10 mt-3 mx-auto\">\r\n            <h6>{paatosvaltaMaaritys}</h6>\r\n            {kokous.pv_esityslista === '0' ? <></>\r\n                : <li className=\"text-sm-nowrap\">jos vähintään {kokous.pv_esityslista} osallistujista on avannut esityslistan.<span>&nbsp;</span>Tila: {tila_esityslista}</li>\r\n            }\r\n            {kokous.pv_aktiivisuus === '0' ? <></>\r\n                : <li className=\"text-sm-nowrap\">jos vähintään {kokous.pv_aktiivisuus} osallistujista on ottanut asioihin kantaa.<span>&nbsp;&nbsp;</span>Tila: {tila_aktiivisuus}</li>\r\n            }\r\n            {kokous.pv_kesto === '0' ? <></>\r\n                : <li className=\"text-sm-nowrap\">jos kokous kestää vähintään  {kokous.pv_kesto} vuorokautta. <span>&nbsp;&nbsp;</span>Tila: {tila_kesto}</li>\r\n            }\r\n            {kokous.pv_muu === '' ? <></>\r\n                : <><h6 className=\"mt-3\">{muuKriteeriTeksti}</h6>\r\n                    <li>{kokous.pv_muu}</li>\r\n                </>}\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default KokousPaatosvalta\r\n\r\n\r\n/*\r\n\r\n  <div className=\"col-md-10 m-auto\">\r\n            <div className=\"mt-4\">\r\n\r\n\r\n                {paatosvaltaMaaritys}\r\n                <p></p>\r\n\r\n\r\n                {kokous.pv_esityslista === '0' ? <></>\r\n                    : <><p>jos vähintään {kokous.pv_esityslista} osallistujista on avannut esityslistan.</p>\r\n                        <p><span>&nbsp;</span>Tila: {tila}</p>\r\n                    </>}\r\n\r\n\r\n                {kokous.pv_aktiivisuus === '0' ? <></>\r\n                    : <div style={{ whiteSpace: 'nowrap' }}>\r\n                        <p>jos vähintään {kokous.pv_aktiivisuus} osallistujista on ottanut asioihin kantaa.<span>&nbsp;&nbsp;</span>Tila: {tila}</p>\r\n                    </div>}\r\n\r\n\r\n\r\n                {kokous.pv_kesto === '0' ? <></>\r\n                    : <div style={{ whiteSpace: 'nowrap' }}><p>jos kokous kestää vähintään  {kokous.pv_kesto} vuorokautta. <span>&nbsp;&nbsp;</span>Tila: {tila_kesto}</p>\r\n                    </div>}\r\n\r\n\r\n\r\n                {kokous.pv_muu === '' ? <></>\r\n                    : <>{muuKriteeriTeksti}\r\n                        <li>{kokous.pv_muu}</li>\r\n                    </>}\r\n            </div>\r\n            <hr />\r\n        </div>\r\n\r\n\r\nKokous on päätösvaltainen,\r\njos vähintään n kpl kokousosallistujista on avannut esityslistan. Tila: Päätösvaltainen / Ei päätösvaltainen\r\njos vähintään n kpl kokousosallistujista on ottanut asioihin kantaa. Tila: Päätösvaltainen / Ei päätösvaltainen\r\njos kokous kestää vähintään n vuorokautta. Tila: Päätösvaltainen / Ei päätösvaltainen\r\nKohdan tai kohtien tila vaihtuu Ei päätösvaltaisesta Päätösvaltaiseksi automaattisesti, kun asetettu kriteeri täyttyy.\r\n*/","import React, { useState, useEffect } from 'react'\r\nimport { TextEditor } from '../Document/TextEditor';\r\nimport request from '../Shared/HttpRequests'\r\n\r\nconst KokousPoytakirja = ({ kokous, yhdistys, osallistujat, puheenjohtaja, paatokset }) => {\r\n\r\n    const kaikki = puheenjohtaja.concat(osallistujat)\r\n    const avannutEsityslistan = kaikki.map(x => x.pv_avannut).reduce((a, v) => (v === \"1\" ? a + 1 : a), 0)\r\n    const ollutAktiivinen = kaikki.map(x => x.pv_aktiivinen).reduce((a, v) => (v === '1' ? a + 1 : a), 0)\r\n\r\n    const pvmForm = { month: 'numeric', day: 'numeric', year: 'numeric' };\r\n    const pvmYear = { year: 'numeric' }\r\n    const kokousnumero = kokous.kokousnro + \"/\" + (new Date(kokous.startDate)).toLocaleDateString('fi-FI', pvmYear)\r\n    const otsikko = kokous.otsikko !== '' ? `<h2>${kokous.otsikko}</h2>` : ''\r\n    const ajat = (new Date(kokous.startDate)).toLocaleDateString('fi-FI', pvmForm) + \" - \" + (new Date(kokous.endDate)).toLocaleDateString('fi-FI', pvmForm)\r\n    const osallistuu = osallistujat.map(x => '<li>' + x.firstname + ' ' + x.lastname + '</li>').join(' ')\r\n    let paatosvalta = ''\r\n    if (kokous.pv_aktiivisuus === '0' && kokous.pv_esityslista === '0' && kokous.pv_kesto === '0' && kokous.pv_muu === '') paatosvalta += '<p>Kokouksen päätösvaltaisuutta ei ole määritelty.</p>'\r\n    else { // TODO keston lisäksi muut päätösvalta kriteerit !!! ---------------------------\r\n        if (kokous.pv_esityslista !== '0') paatosvalta += kokous.pv_esityslista <= avannutEsityslistan ? `Kokouksen asialistan avasi vaadittu ${kokous.pv_esityslista} kpl osallistujista.` : `<p>Kokouksen esityslistaa ei avannut riittävä määrä (${kokous.pv_esityslista} kpl) osallistujista.</p>`\r\n        if (kokous.pv_aktiivisuus !== '0') paatosvalta += kokous.pv_aktiivisuus <= ollutAktiivinen ?  `<p>Kokousosallistujista ${kokous.pv_aktiivisuus} kpl on ottanut kantaa.</p>` : `<p>Kokouksen osallistujista ei ollut riittävä määrä (${kokous.pv_aktiivisuus} kpl) aktiivisia.</p>`\r\n        if (kokous.pv_kesto !== '0') paatosvalta += kokous.pv_kesto_toteutunut === \"true\" ? `<p>Kokoukselle määritelty minimikesto ${kokous.pv_kesto} vuorokautta toteutui.</p>` : `<p>Kokoukselle määritelty minimikesto ${kokous.pv_kesto} vuorokautta ei toteutunut.</p>`\r\n        if (kokous.pv_muu !== '') paatosvalta += `<p>${kokous.pv_muu}</p>`\r\n    }\r\n    paatokset = paatokset.filter(x => x.tila === \"3\" || x.tila === \"23\")\r\n    const paatostiedot = paatokset.length !== 0 ? paatokset.map(x => x.paatos !== '' ? '<h3>' + x.title + '</h3>' + '<p style=\"margin-top: -10px;\">' + x.paatos + '</p>' : '<h3>' + x.title + '</h3>').join(' ') : 'Kokouksessa ei tehty päätöksiä.'\r\n    const pj = puheenjohtaja.length !== 0 ? puheenjohtaja[0].firstname + \" \" + puheenjohtaja[0].lastname : \"kokouksessa ei ole puheenjohtajaa\"\r\n    const [poytakirja, setPoytakirja] = useState(`<h1>${yhdistys}</h1>${otsikko}<h2>Kokous ${kokousnumero}</h2><h2>${ajat}</h2><h2>Osallistujat</h2><ul>${osallistuu}</ul><p>Puheenjohtaja: ${pj}<h2>Päätösvaltaisuus</h2>${paatosvalta}<h2>Asiakohdat</h2>${paatostiedot}`)\r\n\r\n    const editorContentChange = (poytakirja) => {\r\n        setPoytakirja(poytakirja)\r\n    }\r\n    const handlePaataKokousClick = () => {\r\n        if (window.confirm('Haluatko päättää kokouksen? Tietojen muuttaminen ei ole enää kokouksen päätettyäsi mahdollista')) {\r\n            const body = JSON.stringify({ call: 'paatakokous', kokousid: kokous.id })\r\n            request.kokous(body).then(res => {\r\n                savePoytakirja()\r\n            }).catch(err => console.log('err.response', err.response))\r\n        }\r\n    }\r\n    const savePoytakirja = () => {\r\n\r\n        const body = JSON.stringify({ call: 'postdoc', id_y: kokous.id_y, kokousnro: kokous.kokousnro, type: 'poytakirja', content: poytakirja, draft: 0 })\r\n        request.documents(body).then(res => {\r\n            alert(\"Kokous on päätetty ja pöytäkirja tallennettu!\")\r\n            window.location.reload()\r\n        }).catch(err => console.log('err.response', err.response))\r\n\r\n    }\r\n    if (poytakirja) {\r\n        return (\r\n            <div className=\"mt-5 mx-auto col-md-10\">\r\n                <TextEditor editorContentChange={editorContentChange} teksti={poytakirja} className=\"mb-2\" />\r\n                <button className=\"float-right btn btn-outline-primary mt-1\" onClick={() => handlePaataKokousClick()}>Päätä kokous ja tallenna pöytäkirja</button>\r\n                <br></br>\r\n            </div>\r\n        )\r\n    } else {\r\n        return <p>Loading....</p>\r\n    }\r\n}\r\n\r\nexport default KokousPoytakirja\r\n\r\n// Pöytäkirjaan tulostuvat automaattisesti:\r\n//  Yhdistyksen nimi\r\n//  Kokouksen järjestysnumero / vuosi\r\n//  Kokousajat\r\n//  Kokouksen osallistujat\r\n//  Kokouksen päätösvaltaisuus\r\n//  Asiakohtien otsikot\r\n//  Asiakohtien sisältökentät \r\n\r\n","import React, { useState, useEffect } from 'react'\r\nimport { useParams, useHistory, Link } from 'react-router-dom'\r\nimport { getSessionRole, getUser } from '../../Components/Auth/Sessions'\r\nimport request from '../../Components/Shared/HttpRequests'\r\nimport KokousDocs from '../../Components/Kokous/KokousDocs'\r\nimport KokousOsallistujat from '../../Components/Kokous/KokousOsallistujat'\r\nimport Kokousaika from '../../Components/Kokous/Kokousaika'\r\nimport KokousPaatosvalta from '../../Components/Kokous/KokousPaatosvalta';\r\nimport Esityslista from '../../Components/UusiKokous/Esityslista/Esityslista';\r\nimport KokousPoytakirja from '../../Components/Kokous/KokousPoytakirja'\r\n\r\n\r\nconst KokousDetails = (props) => {\r\n\r\n    let history = useHistory()\r\n    const user = getUser()\r\n    const pvmForm = { month: 'numeric', day: 'numeric', year: 'numeric' };\r\n    const pvmYear = { year: 'numeric' };\r\n    const { yhdistys } = useParams()\r\n    const { kokousId } = useParams()\r\n    const [kokousRooli, setKokousRooli] = useState()\r\n    const [kokous, setKokous] = useState()\r\n    const [puheenjohtaja, setPuheenjohtaja] = useState()\r\n    const [osallistujat, setOsallistujat] = useState()\r\n    const [jasenet, setJasenet] = useState()\r\n    const [paatokset, setPaatokset] = useState()\r\n    const [showComponent, setShowComponent] = useState(\"asiat\")\r\n    const [showTable, setShowTable] = useState(true)\r\n\r\n    let yhdistys_id\r\n    if (props.location.state === undefined) history.push(`/assoc/${yhdistys}`)\r\n    else yhdistys_id = props.location.state.id_y\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if (getSessionRole()) {\r\n            const body = JSON.stringify({ call: 'getkokous', id: kokousId })\r\n            request.kokous(body).then(res => {\r\n                setKokous(res.data)\r\n            }).catch(err => console.log('err.response', err.response))\r\n\r\n            const body2 = JSON.stringify({ call: 'getosallistujat', id: kokousId, email: user.email })\r\n            request.osallistujat(body2).then(res => {\r\n                setOsallistujat(res.data.filter(x => x.role === 'osallistuja'))\r\n                setPuheenjohtaja(res.data.filter(x => x.role === 'puheenjohtaja'))\r\n                const osal = res.data.filter(x => x.email === user.email)\r\n                if (osal[0]) {\r\n                    setKokousRooli(osal[0].role)\r\n                } else history.push({ pathname: `/assoc/${yhdistys}`, state: { yhdistys_id } })\r\n            }).catch(err => console.log('err.response', err.response))\r\n\r\n            const req = JSON.stringify({ call: 'getallmembers', yhdistys: yhdistys })\r\n            request.assoc(req).then(res => {\r\n                setJasenet(res.data)\r\n            }).catch(err => console.log('err.response', err.response))\r\n\r\n        }\r\n\r\n    }, [kokousId, yhdistys, user.email, history])\r\n\r\n    const handlePoytakirjaMenuClick = (ev) => {\r\n        const body3 = JSON.stringify({ call: 'getpaatokset', kokousid: kokousId })\r\n        request.kokous(body3).then(res => {\r\n            setPaatokset(res.data)\r\n        }).catch(err => console.log('err.response', err.response))\r\n\r\n        const body2 = JSON.stringify({ call: 'getosallistujat', id: kokousId, email: user.email })\r\n        request.osallistujat(body2).then(res => {\r\n            setOsallistujat(res.data.filter(x => x.role === 'osallistuja'))\r\n            setPuheenjohtaja(res.data.filter(x => x.role === 'puheenjohtaja'))\r\n        }).then(() => {\r\n            handleMenuClick('poytakirja')\r\n\r\n        }).catch(err => console.log('error response: ', err.response))\r\n        \r\n        let napit = ev.target.parentNode.querySelectorAll(\"button\");\r\n        for (let i = 0; i < napit.length; i++) {\r\n            napit[i].classList.remove(\"valittu_menu\");\r\n        }\r\n        ev.target.classList.add(\"valittu_menu\");\r\n    }\r\n    const handleMenuClick = (ev) => {\r\n\r\n        if (ev === 'poytakirja') {\r\n            setShowComponent('poytakirja')\r\n        }\r\n        if(ev.target.name === 'paatosvaltaisuus') {\r\n            const body2 = JSON.stringify({ call: 'getosallistujat', id: kokousId, email: user.email })\r\n            request.osallistujat(body2).then(res => {\r\n                setOsallistujat(res.data.filter(x => x.role === 'osallistuja'))\r\n                setPuheenjohtaja(res.data.filter(x => x.role === 'puheenjohtaja'))   \r\n            }).catch(err => console.log('err.response', err.response))\r\n            setShowComponent('paatosvaltaisuus')\r\n            let napit = ev.target.parentNode.querySelectorAll(\"button\");\r\n            for (let i = 0; i < napit.length; i++) {\r\n                napit[i].classList.remove(\"valittu_menu\");\r\n            }\r\n            ev.target.classList.add(\"valittu_menu\");\r\n\r\n        } else {\r\n            let napit = ev.target.parentNode.querySelectorAll(\"button\");\r\n            for (let i = 0; i < napit.length; i++) {\r\n                napit[i].classList.remove(\"valittu_menu\");\r\n            }\r\n            ev.target.classList.add(\"valittu_menu\");\r\n            setShowComponent(ev.target.name)\r\n            if (ev.target.name === 'asiakirjat') setShowTable(true)\r\n        }\r\n    }\r\n    const handleOsallistujatClick = (ev) => {\r\n\r\n        const henkilo = jasenet.find(x => x.email === ev.target.name)\r\n        let body\r\n        let runRequest = false\r\n\r\n        if (ev.target.id === 'varalle') {\r\n            if (window.confirm(`Haluatko perua osallistujan ${henkilo.firstname} ${henkilo.lastname} osallistumisoikeuden kokoukseen?`)) {\r\n                setOsallistujat(osallistujat.filter(x => x.email !== ev.target.name))\r\n                body = JSON.stringify({ call: 'poistaosallistuja', kokousid: kokousId, email: ev.target.name })\r\n                runRequest = true\r\n            }\r\n        } else if (ev.target.id === 'osallistujaksi') {\r\n            if (window.confirm(`Haluatko siirtää henkilön ${henkilo.firstname} ${henkilo.lastname} kokousosallistujaksi?`)) {\r\n                setOsallistujat(osallistujat.concat(henkilo))\r\n                body = JSON.stringify({ call: 'lisaaosallistuja', kokousid: kokousId, yhdistys: yhdistys, email: ev.target.name })\r\n                runRequest = true\r\n            }\r\n        } else if (ev.target.id === 'poistu') {     // Kokousosallistuja: Voi ilmoittaa esteellisyydestä yksittäiseen kokoukseen ja nimetä varakokousedustajan kokousosallistujaksi tilalleen  ????\r\n            setOsallistujat(osallistujat.filter(x => x.email !== user.email))\r\n            body = JSON.stringify({ call: 'poistaosallistuja', kokousid: kokousId, email: user.email })\r\n            runRequest = true\r\n            window.location.reload();\r\n        }\r\n        if (runRequest) {\r\n            request.osallistujat(body).then(res => {\r\n                alert(res.data.message)\r\n            }).catch(err => {\r\n                alert(err.response.data.message)\r\n                console.log('err.response', err.response)\r\n            })\r\n        }\r\n    }\r\n    const handlePJPoistuuKokouksesta = (syy) => {\r\n\r\n        setOsallistujat(osallistujat.filter(x => x.email !== user.email))\r\n        const body = JSON.stringify({ call: 'poistaosallistuja', kokousid: kokousId, email: user.email })\r\n\r\n        request.osallistujat(body).then(res => {\r\n            alert(\"Poistuit kokouksesta\")\r\n        }).catch(err => {\r\n            alert(err.response.data.message)\r\n            console.log('err.response', err.response)\r\n        })\r\n\r\n        const body2 = JSON.stringify({ call: 'pjpoistui', kokousid: kokousId, syy: syy, pv: 10 })\r\n        request.osallistujat(body2).then(res => {\r\n            window.location.reload();\r\n        }).catch(err => console.log('err.response', err.response))\r\n\r\n\r\n    }\r\n    const handleVaihdaKokousaika = (date) => {\r\n\r\n        if (typeof date === 'object' && Date.parse(date) !== Date.parse(kokous.endDate)) {\r\n            const pvmForm = { month: 'numeric', day: 'numeric', year: 'numeric' };\r\n            const uusiPvm = date.toISOString().split('T')[0]\r\n            if (window.confirm(`Haluatko vaihtaa kokouksen uudeksi päättymispäiväksi ${(new Date(uusiPvm)).toLocaleDateString('fi-FI', pvmForm)}?`)) {\r\n                setKokous({ ...kokous, endDate: uusiPvm })\r\n                const body = JSON.stringify({ call: 'vaihdapvm', kokousid: kokousId, enddate: date })\r\n                request.kokous(body).then(res => {\r\n                    alert(res.data.message)\r\n                }).catch(err => alert(err.response.data.message))\r\n            }\r\n        } else {\r\n            alert(\"Määritä uusi päättymispäivä ennen tallentamista\")\r\n        }\r\n    }\r\n    const openKokous = (id) => {\r\n\r\n        if (window.confirm('Haluatko avata kokoustilan osallistujille?')) {\r\n            const body = JSON.stringify({ call: 'openkokous', id: kokousId })\r\n            request.kokous(body).then(res => {\r\n                alert(res.data.message)\r\n                window.location.reload()\r\n            }).catch(err => {\r\n                alert(err.response.data.message)\r\n            })\r\n            // TODO luo asiakohta nimeltään ”Avaus” - ”Puheenjohtaja etunimi sukunimi avasi kokouksen pp.kk.vvvvv, klo hh:mm.”\r\n            // axios.post --> id_k, user.firstname, user.lastname, timestamp\r\n            // huom: kokous aukeaa myös automaattisesti jolloin speksien teksti on hieman harhaanjohtava? Vaihtoehtoisesti: \"Kokoustila avattiin käyttäjille pp.kk.vvvv, klo hh:mm\" ???  \r\n        }\r\n    }\r\n    if (getSessionRole() && getSessionRole().yhdistys === yhdistys) {\r\n\r\n        if (kokous && kokousRooli) {\r\n\r\n            if (kokous.avoinna === \"1\" || kokousRooli === \"puheenjohtaja\") {\r\n\r\n                let component\r\n                if (showComponent === 'asiakirjat') component = <KokousDocs kokous={kokous} yhdistys={yhdistys} setShowComponent={setShowComponent} setShowTable={setShowTable} showTable={showTable} />\r\n                else if (showComponent === 'asiat') component = <Esityslista puheenjohtaja={(kokousRooli === \"puheenjohtaja\")} edit={(kokous.loppu !== \"1\")} kokousid={kokousId} />\r\n                else if (showComponent === 'osallistujat') component = <KokousOsallistujat osallistujat={osallistujat} jasenet={jasenet} puheenjohtaja={puheenjohtaja} kokousRooli={kokousRooli} handleOsallistujatClick={handleOsallistujatClick} kokous={kokous} />\r\n                else if (showComponent === 'kokousaika') component = <Kokousaika kokous={kokous} handleVaihdaKokousaika={handleVaihdaKokousaika} />\r\n                else if (showComponent === 'paatosvaltaisuus') component = <KokousPaatosvalta kokous={kokous} osallistujat={osallistujat} puheenjohtaja={puheenjohtaja} />\r\n                else if (showComponent === 'poytakirja') component = <KokousPoytakirja kokous={kokous} yhdistys={yhdistys} osallistujat={osallistujat} puheenjohtaja={puheenjohtaja} paatokset={paatokset} />\r\n                else component = <p>error... </p>\r\n\r\n                let text\r\n                if (Date.parse(kokous.endDate) < new Date() || kokous.loppu === \"1\") text = \"Kokous on päättynyt\"\r\n                else if (Date.parse(kokous.endDate) > new Date() && Date.parse(kokous.startDate) < new Date()) text = \"Kokous on käynnissä\"\r\n                else text = \"Kokous ei ole vielä alkanut\"\r\n\r\n                return (\r\n                    <div className=\"mx-auto mt-5\">\r\n                        <div className=\"mx-3\">\r\n                            <h2 >{yhdistys}</h2>\r\n                            <Link to={{ pathname: `/assoc/${yhdistys}`, state: { id_y: yhdistys_id } }}>Yhdistyksen pääsivu</Link>\r\n                            <hr />\r\n                            <div className=\"mb-3\">\r\n                                <h4>{kokous.otsikko} </h4>\r\n                                {kokous.avoinna === \"1\" ? <></> : <div><h5 style={{ color: 'red', fontWeight: 'bold' }}>Kokoustila on suljettu.</h5><p style={{ marginTop: '-5px', marginBottom: '12px', cursor: 'pointer' }} onClick={() => openKokous()}>Avaa kokoustila osallistujille.</p></div>}\r\n                            </div>\r\n                            <div className=\"float-left\" style={{ display: 'grid', gridTemplateColumns: '1fr 2fr', lineHeight: '8px', whiteSpace: 'nowrap' }}>\r\n                                <p>Puheenjohtaja:</p>\r\n                                {puheenjohtaja.length !== 0\r\n                                    ? <p>{puheenjohtaja[0].firstname} {puheenjohtaja[0].lastname} </p>\r\n                                    : <p>Kokoukselle ei ole asetettu puheenjohtajaa. </p>}\r\n                                <p style={{ marginRight: '10px' }}>Kokouksen numero: </p>\r\n                                <p> {kokous.kokousnro}/{(new Date(kokous.startDate)).toLocaleDateString('fi-FI', pvmYear)}</p>\r\n                                <p>Kokouksen alku:</p>\r\n                                <p>{(new Date(kokous.startDate)).toLocaleDateString('fi-FI', pvmForm)}</p>\r\n                                <p>Kokouksen päätös:</p>\r\n                                <p>{(new Date(kokous.endDate)).toLocaleDateString('fi-FI', pvmForm)}</p>\r\n                                <small>({text})</small>\r\n                            </div>\r\n                            <div className=\"mt-4 float-right\">\r\n                                {kokous.loppu === \"0\" ? <button className=\"btn btn-danger mb-2 ml-2\" type=\"button\" title=\"Peru osallistumisesi kokoukseen\" id=\"poistu\" data-toggle=\"modal\" data-target='#poistuModal' >Peru osallistumisesi</button> : <></>}\r\n                                <PoistuModal handlePJPoistuuKokouksesta={handlePJPoistuuKokouksesta} handleOsallistujatClick={handleOsallistujatClick} kokousRooli={kokousRooli} />\r\n                            </div>\r\n                            <div className=\"clearfix\"></div>\r\n                        </div>\r\n                        <hr />\r\n                        <div className=\"d-sm-flex second_nav\">\r\n                            <button className=\"text-primary valittu_menu\" onClick={handleMenuClick} name=\"asiat\" >Asiakohdat</button>\r\n                            <button className=\"text-primary\" onClick={handleMenuClick} name=\"asiakirjat\">Asiakirjat</button>\r\n                            <button className=\"text-primary\" onClick={handleMenuClick} name=\"osallistujat\">Osallistujat</button>\r\n                            {kokousRooli === 'puheenjohtaja' && kokous.loppu === \"0\"\r\n                                ? <>     <button className=\"text-primary\" onClick={handleMenuClick} name=\"kokousaika\">Kokousaika</button></>\r\n                                : <></>\r\n                            }\r\n                            <button className=\"text-primary\" onClick={handleMenuClick} name=\"paatosvaltaisuus\">Päätösvaltaisuus</button>\r\n                            {/* TODO pöytäkirja näkyville vasta kun päätöksiä on syntynyt ???  */}\r\n                            {kokous.loppu === \"0\" && kokousRooli === 'puheenjohtaja' ? <button className=\"text-primary\" onClick={handlePoytakirjaMenuClick} name=\"poytakirja\" >Pöytäkirja</button> : <></>}\r\n                        </div>\r\n                        {component}\r\n                    </div>\r\n                )\r\n            } else {\r\n                history.push(`/assoc/${yhdistys}`)\r\n                return <></>\r\n            }\r\n        } else {\r\n            return <p className=\"mt-4 mx-4\">Ladataan tietoja .... </p>\r\n        }\r\n    } else {\r\n        history.push(`/assoc/${yhdistys}`)\r\n        return <></>\r\n    }\r\n}\r\n\r\nexport default KokousDetails\r\n\r\n\r\nconst PoistuModal = ({ handlePJPoistuuKokouksesta, handleOsallistujatClick, kokousRooli }) => {\r\n    const [syy, setSyy] = useState('')\r\n    const handleSyyChange = (ev) => {\r\n        setSyy(ev.target.value)\r\n    }\r\n    return (\r\n        <div className=\"modal fade\" id=\"poistuModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"ModalLabel\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog\" role=\"document\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\" id=\"ModalLabel\">Poistu kokouksesta</h5>\r\n                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <p>Haluatko poistua kokouksesta?</p>\r\n                        {kokousRooli === 'puheenjohtaja'\r\n                            ? <div className=\"form-group\">\r\n                                <textarea className=\"form-control\" rows=\"2\" name=\"syy\" onChange={handleSyyChange} value={syy} />\r\n                                <small className=\"form-text text-muted\">Voit kirjoittaa kenttään syyn kokouksesta poistumiseen.</small>\r\n                            </div>\r\n                            : <></>}\r\n                    </div>\r\n                    <div className=\"modal-footer\">\r\n                        {kokousRooli === 'puheenjohtaja'\r\n                            ? <button type=\"button\" className=\"btn btn-outline-primary\" data-dismiss=\"modal\" id='poistu' onClick={() => handlePJPoistuuKokouksesta(syy)}>Poistu kokouksesta</button>\r\n                            : <button type=\"button\" className=\"btn btn-outline-primary\" data-dismiss=\"modal\" id='poistu' onClick={handleOsallistujatClick}>Poistu kokouksesta</button>}\r\n                        <button type=\"button\" className=\"btn btn-outline-secondary\" data-dismiss=\"modal\">Peruuta</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom'  // BrowserRouter  <--> HashRouter\r\nimport PrivateRoute from './Components/Auth/PrivateRoute'\r\nimport './Style/App.css'\r\nimport 'bootswatch/dist/flatly/bootstrap.min.css'; \r\nimport Navbar from './Components/Shared/Navbar'\r\nimport Home from './Views/Home'\r\nimport Login from './Views/Auth/Login';\r\nimport Register from './Views/Auth/Register'\r\nimport UserPage from './Views/User/UserPage';\r\nimport AssocMain from './Views/Assoc/AssocMain';\r\nimport UusiKokous from './Views/Kokous/UusiKokous';\r\nimport KokousDetails from './Views/Kokous/KokousDetails';\r\n\r\n// import { getSessionRole, getUser } from './Components/Auth/Sessions'\r\n\r\nfunction App() {\r\n  \r\n  return (\r\n    <div>\r\n      <Router>\r\n        <Navbar />\r\n        <div className=\"container\" style={{width:\"1100px\",maxWidth:\"100%\",margin:\"0 auto\",padding:\"0\"}}>\r\n          <Switch >\r\n            <Route exact path='/' component={Home}/>\r\n            <Route path='/login' component={Login}/>\r\n            <Route path='/register' component={Register} />\r\n            <PrivateRoute path='/userpage' component={UserPage}/>\r\n            <PrivateRoute path='/assoc/:yhdistys' component={AssocMain}/>      \r\n            <PrivateRoute path='/uusikokous/:yhdistys' component={UusiKokous} />\r\n            <PrivateRoute path='/kokous/:yhdistys/:kokousId' component={KokousDetails} />\r\n          </Switch>\r\n        </div>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 62;"],"sourceRoot":""}