(this["webpackJsonpkokousfront_0.2"]=this["webpackJsonpkokousfront_0.2"]||[]).push([[0],{112:function(e,t,a){},125:function(e,t){},129:function(e,t,a){e.exports=a(262)},138:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},220:function(e,t){},222:function(e,t){},223:function(e,t){},224:function(e,t){},225:function(e,t){},259:function(e,t,a){},260:function(e,t,a){},261:function(e,t,a){},262:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),s=a(22),i=a.n(s),o=a(9),r=a(14),c=a(128),u=function(e,t){localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("token",t)},m=function(){var e=localStorage.getItem("role");return e?JSON.parse(e):null},d=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null};function k(e){var t=e.component,a=Object(c.a)(e,["component"]);return l.a.createElement(r.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?l.a.createElement(t,e):l.a.createElement(r.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}a(138),a(139);var p=a(5),v=a(272);function h(){var e,t=Object(n.useState)(!1),a=Object(p.a)(t,2),s=a[0],i=a[1],c=Object(r.g)(),u=function(){var e="";e=s?"0":!s&&d()?"100px":"150px",document.getElementById("dropMenu").style.height=e,i(!s)};return e=d()?l.a.createElement(l.a.Fragment,null,l.a.createElement(o.b,{style:{color:"white",width:"200px"},className:"nav-link",to:"/userpage"},"Omat sivut"),l.a.createElement("p",{onClick:function(){window.confirm("Haluatko kirjautua ulos?")&&(c.push("/"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("role"),window.location.reload())},style:{color:"white",width:"250px",cursor:"pointer"},className:"nav-link"},"Kirjaudu ulos")):l.a.createElement(l.a.Fragment,null,l.a.createElement(o.b,{style:{color:"white",width:"200px"},className:"nav-link",to:"/"},"Etusivu"),l.a.createElement(o.b,{style:{color:"white",width:"200px"},className:"nav-link",to:"/login"},"Kirjaudu"),l.a.createElement(o.b,{style:{color:"white",width:"100px"},className:"nav-link",to:"/register"},"Rekister\xf6idy")),l.a.createElement("div",{className:"navbar navbar-expand",style:b,onClick:u},l.a.createElement("p",{className:"MenuText mt-2 ml-5"},"Menu",l.a.createElement(v.a,{size:30,className:"ml-3 fa-5x"})),l.a.createElement("div",{id:"dropMenu",style:y,onClick:u},s?l.a.createElement(l.a.Fragment,null,e):l.a.createElement(l.a.Fragment,null)))}var f,E,y={marginTop:"75px",fontFamily:"Lato, sans-serif",height:"0%",width:"100%",position:"absolute",zIndex:"1",top:"0",left:"0",backgroundColor:"rgba(44,62,80, 0.9)",transition:"0.5s"},b={color:"white",backgroundColor:"rgba(44,62,80, 0.9)",height:"75px",padding:"10px",position:"relative",width:"100vw !important",marginLeft:"calc(-50vw + 50%)"},g=function(){return l.a.createElement("div",{className:"col-md-10 mx-auto mt-5"},l.a.createElement("div",{className:"jumbotron"},l.a.createElement("h1",{className:"display-3"},"Hello, world!"),l.a.createElement("p",{className:"lead"},"T\xe4h\xe4n tulisi tehd\xe4 sovelluksen etusivu."),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("p",null,"Se voi kuvailla projektin ideaa, syit\xe4 miksi se on tehty, mit\xe4 sill\xe4 voi tehd\xe4 ja mit\xe4 sen toteutuksessa on k\xe4ytetty. Voisin laittaa vaikka linkin my\xf6s kirjautumiseen ja ehk\xe4 my\xf6s rekister\xf6itymiseen."),l.a.createElement("hr",null),l.a.createElement(o.b,{to:"/login",className:"btn btn-outline-primary"},"Kirjaudu")))},j=a(15),N=a(66),O=a.n(N),w=a(13),S=a.n(w),_="https://samik.azurewebsites.net/api/",x=function(e){return S.a.post("".concat(_,"data.php"),e,{withCredentials:!0}).then((function(e){return e}))},C=function(e){return S.a.post("".concat(_,"auth.php"),e).then((function(e){return e}))},D=function(e){return S.a.post("".concat(_,"auth.php"),e,{withCredentials:!0}).then((function(e){return e}))},L=function(e){return S.a.post("".concat(_,"assoc.php"),e).then((function(e){return e}))},K=function(e){return S.a.post("".concat(_,"kokous.php"),e).then((function(e){return e}))},F=function(e){return S.a.post("".concat(_,"osallistujat.php"),e).then((function(e){return e}))},I=function(e){return S.a.post("".concat(_,"documents.php"),e).then((function(e){return e}))},P=a(126),T=a(76),J=a(127),M=function(e){var t=e.text,a=e.placement,n=e.heading,s=e.btnText,i=e.variant,o=e.style;return l.a.createElement(l.a.Fragment,null,l.a.createElement(P.a,{trigger:"click",key:a,placement:a,overlay:l.a.createElement(T.a,{id:"popover-positioned-".concat(a)},l.a.createElement(T.a.Title,{as:"h3"},n),l.a.createElement(T.a.Content,{className:"text-justify p-3"},t))},l.a.createElement(J.a,{variant:i,style:o},s)))},R=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)(""),c=Object(p.a)(i,2),m=c[0],d=c[1],k=Object(r.g)(),v=function(e){"email"===e.target.name?s(e.target.value):"password"===e.target.name&&d(e.target.value)};return l.a.createElement("div",{className:"col-md-6 m-auto"},l.a.createElement("div",{className:"card card-body mt-5"},l.a.createElement("h2",{className:"text-center"},"Kirjaudu"),l.a.createElement("form",{className:"ml-2 mt-4",onSubmit:function(e){if(e.preventDefault(),""===a||""===m)alert("Anna k\xe4ytt\xe4j\xe4tunnus ja salasana!");else{var t=JSON.stringify({call:"applogin",email:a,password:m});D(t).then((function(e){var t={firstname:e.data.firstname,lastname:e.data.lastname,email:a};u(t,e.data.token),k.push({pathname:"/userpage",state:{login:!0}})})).catch((function(e){console.log("Error: ",e.response),alert(e.response.data.message)}))}}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"S\xe4hk\xf6posti"),l.a.createElement("input",{type:"email",className:"form-control",name:"email",onChange:v})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Salasana"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:v})),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Kirjaudu"))),l.a.createElement("div",{className:"text-right"},l.a.createElement("p",null,l.a.createElement(O.a,{appId:"1500476053466452",autoLoad:!1,fields:"first_name, last_name,email,picture",callback:function(e){if(e){var t=JSON.stringify({call:"fblogin",email:e.email,fb_id:e.id});C(t).then((function(t){var a={firstname:e.first_name,lastname:e.last_name,email:e.email};u(a,t.data.token),k.push({pathname:"/userpage",state:{login:!0}})})).catch((function(e){console.log("Error: ",e.response),alert(e.response.data.message)}))}else alert("Kirjautuminen ep\xe4onnistui")},render:function(e){return l.a.createElement("button",{onClick:e.onClick,className:"btn btn-outline"},"Kirjaudu Facebook-tunnuksilla ",l.a.createElement(j.d,null))}})),l.a.createElement("hr",null),l.a.createElement("p",{className:"mr-3",style:{lineHeight:"25px"}},"Haluatko rekister\xf6ity\xe4 k\xe4ytt\xe4j\xe4ksi? ",l.a.createElement(o.b,{to:"/register",className:"ml-1"},"Rekister\xf6idy"),l.a.createElement("br",null),"  "),l.a.createElement("p",{style:{marginTop:"-20px"}}," Tarvitsetko apua? ",l.a.createElement(M,{heading:"Kirjautuminen",text:"Kirjaudu j\xe4rjestelm\xe4\xe4n s\xe4hk\xf6postin ja salasanan avulla mik\xe4li k\xe4ytit niit\xe4 rekister\xf6ityess\xe4si. Jos rekister\xf6idyit Facebook-tunnuksilla, k\xe4yt\xe4 niit\xe4 my\xf6s kirjautumiseen. Mik\xe4li unohdit tunnuksesi, voit saada ne paikasta x.",btnText:"Klikkaa t\xe4st\xe4!",placement:"left",variant:"link",style:{marginBottom:"3px",marginLeft:"-10px"}})," "),l.a.createElement("p",{className:"mr-3"}))))},H=function(e){var t=e.fbRes,a=Object(n.useState)(t.first_name),s=Object(p.a)(a,2),i=s[0],c=s[1],u=Object(n.useState)(t.last_name),m=Object(p.a)(u,2),d=m[0],k=m[1],v=Object(n.useState)(t.email),h=Object(p.a)(v,2),f=h[0],E=h[1],y=Object(r.g)(),b=function(e){"firstname"===e.target.name?c(e.target.value):"lastname"===e.target.name?k(e.target.value):"email"===e.target.name&&E(e.target.value)};return l.a.createElement("div",{className:"col-md-8 mx-auto mt-5"},l.a.createElement("h4",null,"Terve ",i,"!"),l.a.createElement("p",null,"Tarkasta ennen rekister\xf6itymist\xe4 ovatko henkil\xf6tietosi ja s\xe4hk\xf6postiosoitteesi oikein."),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=t.id;if(""!==i&&""!==d&&""!==f&&""!==a){var n=JSON.stringify({call:"fbreg",firstname:i,lastname:d,email:f,fb_id:a});C(n).then((function(e){alert("Rekister\xf6ityminen onnistui! Kirjauduttuasi voit liitty\xe4 yhdistyksen alueelle ja tarkastella yhdistyksen kokousasioita."),y.push("/login")})).catch((function(e){alert(e.response.data.message),window.location.reload()}))}else alert("Tarkasta ett\xe4 kaikki kent\xe4t on t\xe4ytetty!")}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Etunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"firstname",onChange:b,value:i})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Sukunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"lastname",onChange:b,value:d})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"S\xe4hk\xf6posti"),l.a.createElement("input",{type:"email",className:"form-control",name:"email",onChange:b,value:f})),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Rekister\xf6idy")),l.a.createElement("p",{className:"text-right"},"Haluatko valita rekister\xf6itymistavan uudelleen?",l.a.createElement(o.b,{className:"ml-1",to:"/register",onClick:function(){return window.location.reload()}},"Takaisin"),l.a.createElement("br",null),"Onko sinulla jo k\xe4ytt\xe4j\xe4 tili?",l.a.createElement(o.b,{to:"/login",className:"ml-1"},"Kirjaudu"))))},A=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)(""),c=Object(p.a)(i,2),u=c[0],m=c[1],d=Object(n.useState)(""),k=Object(p.a)(d,2),v=k[0],h=k[1],f=Object(n.useState)(""),E=Object(p.a)(f,2),y=E[0],b=E[1],g=Object(n.useState)(""),j=Object(p.a)(g,2),N=j[0],O=j[1],w=Object(r.g)(),S=function(e){"firstname"===e.target.name?s(e.target.value):"lastname"===e.target.name?m(e.target.value):"email"===e.target.name?h(e.target.value):"password"===e.target.name?b(e.target.value):"password2"===e.target.name&&O(e.target.value)};return l.a.createElement("div",{className:"col-md-6 m-auto"},l.a.createElement("div",{className:"card card-body mt-5"},l.a.createElement("h4",{className:"text-center mb-4"},"Rekister\xf6idy k\xe4ytt\xe4j\xe4ksi"),l.a.createElement("p",null,"Lis\xe4\xe4 alle henkil\xf6tietosi, s\xe4hk\xf6postiosoitteesi ja salasana."),l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),""===a||""===u||""===v||""===y||""===N)alert("T\xe4yt\xe4 kaikki kent\xe4t!");else if(y!==N)alert("Tarkasta salasanat!");else{var t=JSON.stringify({call:"appreg",firstname:a,lastname:u,email:v,password:y});D(t).then((function(e){alert("Rekister\xf6ityminen onnistui! Kirjauduttuasi voit liitty\xe4 yhdistyksen alueelle ja tarkastella yhdistyksen kokousasioita."),w.push("/login")})).catch((function(e){alert(e.response.data.message),window.location.reload()}))}}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Etunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"firstname",onChange:S,value:a})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Sukunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"lastname",onChange:S,value:u})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"S\xe4hk\xf6posti"),l.a.createElement("input",{type:"email",className:"form-control",name:"email",onChange:S,value:v})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Salasana"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:S,value:y})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Salasana uudelleen"),l.a.createElement("input",{type:"password",className:"form-control",name:"password2",onChange:S,value:N})),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Rekister\xf6idy")),l.a.createElement("p",{className:"text-right"},"Haluatko valita rekister\xf6itymistavan uudelleen?",l.a.createElement(o.b,{className:"ml-1",to:"/register",onClick:function(){return window.location.reload()}},"Takaisin"),l.a.createElement("br",null),"Onko sinulla jo k\xe4ytt\xe4j\xe4 tili? ",l.a.createElement(o.b,{to:"/login",className:"ml-1"},"Kirjaudu")))))},B=function(){return l.a.createElement("div",{style:{marginTop:"15%"},className:"row h-100 justify-content-center"},l.a.createElement("div",{className:"loader"}))},U=function(){var e=Object(n.useState)(),t=Object(p.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)({}),r=Object(p.a)(i,2),c=r[0],u=r[1];return a?a?l.a.createElement(l.a.Fragment,null," ","fb"===a?l.a.createElement(H,{fbRes:c}):l.a.createElement(A,null)):l.a.createElement(B,null):l.a.createElement("div",{className:"col-md-6 mx-auto mt-5"},l.a.createElement("div",{className:"card card-body mt-5"},l.a.createElement("h4",{className:"text-center mb-4"},"Rekister\xf6idy k\xe4ytt\xe4j\xe4ksi"),l.a.createElement("p",{className:" text-justify "},"Palvelua voi k\xe4ytt\xe4\xe4 luomalla sovelluskohtaisen tunnuksen tai rekister\xf6itym\xe4ll\xe4 Facebook-tunnuksien avulla.",l.a.createElement("br",null),l.a.createElement("br",null),"Jos olet jo rekister\xf6itynyt ja haluat kirjautua, p\xe4\xe4set kirjautumissivulle  ",l.a.createElement(o.b,{to:"/login"},"t\xe4st\xe4.")),l.a.createElement("hr",null),l.a.createElement("div",{className:"row"},l.a.createElement("button",{onClick:function(e){"app"===e.target.id&&s("app")},id:"app",className:"btn btn-outline mr-2"},"Rekister\xf6i sovelluskohtainen tunnus"),l.a.createElement(O.a,{appId:"1500476053466452",autoLoad:!1,fields:"first_name, last_name,email,picture",callback:function(e){u(e),s("fb")},render:function(e){return l.a.createElement("button",{onClick:e.onClick,className:"btn btn-outline"},"Rekister\xf6idy Facebook-tunnuksilla  ",l.a.createElement(j.d,null))}}))))},V=a(123),Y=(a(157),function(e){var t=e.yhdistykset,a=e.setShowForm,s=Object(n.useState)(""),i=Object(p.a)(s,2),o=i[0],r=i[1],c=Object(n.useState)(""),u=Object(p.a)(c,2),m=u[0],k=u[1],v=function(e){"yhdistys"===e.target.name?r(e.target.value):"password"===e.target.name&&k(e.target.value)},h=function(){var e=d(),t=JSON.stringify({call:"joinyhdistys",email:e.email,yhdistys:o});L(t).then((function(e){alert(e.data.message),window.location.reload()})).catch((function(e){alert(e.response.data.message),e.response.data.message.includes("Olet jo yhdistyksen")&&window.location.reload()}))};return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),o&&m){var t=JSON.stringify({call:"checkyhdistystiedot",name:o,password:m});L(t).then((function(e){h()})).catch((function(e){alert(e.response.data.message)}))}else alert("T\xe4yt\xe4 molemmat kent\xe4t!")}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Yhdistyksen nimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"yhdistys",onChange:v,value:o})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Yhdistyksen tunnus"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:v,value:m})),l.a.createElement("div",{className:"form-group text-right"},t.length>0?l.a.createElement("button",{type:"button",onClick:function(){return a(!0)},className:"btn btn-outline-secondary mt-3 mx-2"},"Palaa takaisin"):l.a.createElement(l.a.Fragment,null),l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Rekister\xf6idy"))))}),z=function(e){var t=e.yhdistykset,a=e.setShowForm;return l.a.createElement("div",null,l.a.createElement("button",{className:"mb-4 btn btn-outline-primary mx-3",onClick:function(){return a(!1)}},"Liity yhdistykseen"),l.a.createElement("table",{className:"table table-hover mt-4"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Yhdistys"))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement(o.b,{className:"mt-4 text-left text-dark",style:{textDecoration:"none"},to:{pathname:"/assoc/".concat(e.name),state:{id:e.id}}},l.a.createElement("div",{className:"yhdistysLink"},e.name)))})))))},q=function(e){var t,a=d(),s=Object(n.useState)(!(void 0===e.location.state||!e.location.state.login)),i=Object(p.a)(s,2),o=i[0],r=i[1],c=Object(n.useState)([]),u=Object(p.a)(c,2),m=u[0],k=u[1],v=Object(n.useState)(!0),h=Object(p.a)(v,2),f=h[0],E=h[1];return Object(n.useEffect)((function(){var e=JSON.stringify({call:"getmemberships",email:a.email});L(e).then((function(e){k(e.data)})).catch((function(e){e.response.data&&console.log("err.response.data",e.response.data)}))}),[a.email]),t=m.length>0&&f?"Alla n\xe4et yhdistykset, joiden kokoustilaan olet liittynyt. Painamalla nappia saat n\xe4kyviisi kaavakkeen, jolla voit lis\xe4t\xe4 itsesi yhdistyksen kokoustilan k\xe4ytt\xe4j\xe4ksi.":m.length>0&&!f?"Voit liitt\xe4\xe4 itsesi yhdistyksen kokoustilaan antamalla yhdistyksen nimen ja sovelluskohtaisen salasanan. Saat tarvittavan tunnuksen sovelluksen p\xe4\xe4k\xe4ytt\xe4j\xe4lt\xe4.":"Et ole viel\xe4 rekister\xf6itynyt yhdistysten kokoustilan k\xe4ytt\xe4j\xe4ksi. Alla olevan kent\xe4n avulla voit liitt\xe4\xe4 itsesi yhdistyksen kokoustilaan antamalla yhdistyksen nimen ja sovelluskohtaisen salasanan. Saat tarvittavan tunnuksen sovelluksen p\xe4\xe4k\xe4ytt\xe4j\xe4lt\xe4.",l.a.createElement("div",{style:{width:"100%",maxWidth:"1100px",padding:"0",marginTop:"50px"}},l.a.createElement("h4",{className:"px-3"},"Moi ",a.firstname,"!"),l.a.createElement("hr",null),l.a.createElement("p",{className:"px-3"},t),l.a.createElement("hr",null),m.length>0&&f?l.a.createElement(z,{yhdistykset:m,setShowForm:E}):l.a.createElement(Y,{yhdistykset:m,setShowForm:E}),l.a.createElement(W,{isModalOpen:o,setIsModalOpen:r}))},W=function(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=d();return l.a.createElement(V.a,{visible:t,onClose:function(){return a(!1)},animation:"door",duration:400,height:150,width:300},l.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"},onClick:function(){return a(!1)}},l.a.createElement("h5",{style:{position:"absolute",top:"40%",left:"25%"}},"Tervetuloa ",n.firstname,"! ")))},Z=a(53),$=a(0),G=function(e){var t=e.pvm,a=void 0===t?null:t,n=e.alku,s=void 0===n?"false":n,i=e.kk,o=void 0===i?"1":i,r=e.pv,c=void 0===r?"1":r;null!=a&&(o=(a=new Date(a)).getMonth()+1,c=a.getDate());var u=["Tammi","Helmi","Maalis","Huhti","Touko","Kes\xe4","Hein\xe4","Elo","Syys","Loka","Marras","Joulu"][parseInt(o-1)]+"kuu";return l.a.createElement("div",{className:s?"paivays_alku paivays":"paivays_loppu paivays"},l.a.createElement("div",{className:"kk"},u),l.a.createElement("div",{className:"paivays_nro"},c))},Q=function(e){var t=e.kokous,a=e.yhdistys,s=e.yhdistys_id,i={year:"numeric"},r=Object(n.useState)(!1),c=Object(p.a)(r,2),u=c[0],m=c[1];return u?l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... "):l.a.createElement("div",{className:"bg"},l.a.createElement("div",null,t.map((function(e){return l.a.createElement(o.b,{key:e.id,className:"text-primary",style:{pointerEvents:"1"===e.avoinna||"puheenjohtaja"===e.role?"auto":"none",textDecoration:"none"},to:{pathname:"/kokous/".concat(a,"/").concat(e.id),state:{id_y:s}},title:"Tarkastele kokouksen tietoja"},l.a.createElement("div",{className:"1"===e.avoinna||"puheenjohtaja"===e.role?"taulu":"taulu disable",key:e.kokousnro},l.a.createElement(G,{pvm:e.startDate,alku:!1}),l.a.createElement(G,{pvm:e.endDate,alku:!1}),l.a.createElement("div",{className:"tauluAlku tauluotsikko",style:{whiteSpace:"nowrap"}},e.otsikko," ","1"===e.loppu?l.a.createElement($.b.Provider,{value:{color:"rgba(44,62,80)",size:"15px"}},l.a.createElement(j.a,{title:"Kokous on p\xe4\xe4ttynyt"})):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"taulukokousnro"},e.kokousnro,"/",new Date(e.endDate).toLocaleDateString("fi-FI",i)),"1"===e.avoinna?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"taulutila"},"kokoustila on suljettu"),l.a.createElement("div",{className:"taulunapit"},l.a.createElement("div",{style:{whiteSpace:"nowrap"}},"puheenjohtaja"===e.role?l.a.createElement("button",{onClick:function(t){t.preventDefault(),function(e){if(window.confirm("Haluatko avata kokoustilan osallistujille?")){m(!0);var t=JSON.stringify({call:"openkokous",id:e});K(t).then((function(e){alert(e.data.message),window.location.reload()})).catch((function(e){alert(e.response.data.message)}))}}(e.id)},id:e.id,title:"Avaa kokoustila",className:"btn btn-outline-primary",style:{marginLeft:"5px"}},l.a.createElement(j.g,null)):l.a.createElement(l.a.Fragment,null))))))}))))},X=function(e){var t,a=e.kokoukset,s=e.showComponent,i=e.yhdistys,o=e.yhdistys_id,r=Object(n.useState)([]),c=Object(p.a)(r,2),u=c[0],m=c[1],d=Object(n.useState)([]),k=Object(p.a)(d,2),v=k[0],h=k[1],f=Object(n.useState)([]),E=Object(p.a)(f,2),y=E[0],b=E[1];return Object(n.useEffect)((function(){a&&a.map((function(e){return Date.parse(e.endDate)<new Date||"1"===e.loppu?b((function(t){return[].concat(Object(Z.a)(t),[e])})):Date.parse(e.endDate)>new Date&&Date.parse(e.startDate)<new Date?h((function(t){return[].concat(Object(Z.a)(t),[e])})):m((function(t){return[].concat(Object(Z.a)(t),[e])})),null}))}),[a]),t="kaynnissa"===s?l.a.createElement(l.a.Fragment,null,0===v.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Yhdistyksell\xe4 ei ole k\xe4ynniss\xe4 olevia kokouksia")):l.a.createElement(l.a.Fragment,null,l.a.createElement(Q,{kokous:v,yhdistys:i,status:"kaynnissa",yhdistys_id:o}))):"menneet"===s?l.a.createElement(l.a.Fragment,null,0===y.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Yhdistyksell\xe4 ei ole menneit\xe4 kokouksia")):l.a.createElement(l.a.Fragment,null,l.a.createElement(Q,{kokous:y,yhdistys:i,status:"paattynyt",yhdistys_id:o}))):"tulevat"===s?l.a.createElement(l.a.Fragment,null,0===u.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Yhdistyksell\xe4 ei ole tulevia kokouksia")):l.a.createElement(l.a.Fragment,null,l.a.createElement(Q,{kokous:u,yhdistys:i,status:"tuleva",yhdistys_id:o}))):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{className:"mt-2"},t)},ee=function(e){var t=e.members;return l.a.createElement("div",{style:{marginTop:"4px"}},l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("td",null,"Etunimi"),l.a.createElement("td",null,"Sukunimi"),l.a.createElement("td",null,"S\xe4hk\xf6postiosoite"))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email))})))))},te=function(e){var t,a=e.kokoukset,s=e.members,i=e.yhdistys,o=e.yhdistys_id,c=Object(r.g)(),u=Object(n.useState)("kaynnissa"),d=Object(p.a)(u,2),k=d[0],v=d[1],h=l.a.createElement("p",null,"Valikon kautta voit valita haluamasi n\xe4kym\xe4n. Voit luoda uuden kokouksen painamalla uusi kokous -n\xe4pp\xe4int\xe4. N\xe4et my\xf6s tulevat ja k\xe4ynniss\xe4 olevat kokoukset sek\xe4 menneiden kokouksien asiat valikon n\xe4pp\xe4imien kautta. Palveluun rekister\xf6ityneet j\xe4senet saat n\xe4kyville yhdistyksen j\xe4senet -n\xe4pp\xe4int\xe4 painamalla. "),f=function(e){for(var t=e.target.parentNode.querySelectorAll("button"),a=0;a<t.length;a++)t[a].classList.remove("valittu_menu");v(e.target.name),e.target.classList.add("valittu_menu")};return t="tulevat"===k||"menneet"===k||"kaynnissa"===k?l.a.createElement(X,{kokoukset:a,showComponent:k,yhdistys:i,yhdistys_id:o}):"jasenet"===k?l.a.createElement(ee,{members:s}):l.a.createElement(l.a.Fragment,null),m()&&m().yhdistys===i&&a?l.a.createElement("div",null,l.a.createElement("div",{className:"d-sm-flex justify-content-center second_nav"},l.a.createElement("button",{className:"text-primary valittu_menu",name:"kaynnissa",onClick:f},"Kokoukset"),l.a.createElement("button",{className:"text-primary ",name:"tulevat",onClick:f},"Tulevat kokoukset"),l.a.createElement("button",{className:"text-primary ",name:"menneet",onClick:f},"P\xe4\xe4ttyneet kokoukset"),l.a.createElement("button",{className:"text-primary ",name:"jasenet",onClick:f},"J\xe4senlista"),l.a.createElement(M,{heading:"Yhdistyksen etusivu",text:h,btnText:"Selityst\xe4",placement:"left",variant:"btn btn-outline-danger btn-sm mx-1"})),t):m()?(c.push("/userpage"),null):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... ")},ae=function(e){var t,a=Object(n.useState)(),s=Object(p.a)(a,2),i=s[0],c=s[1],u=Object(n.useState)([]),k=Object(p.a)(u,2),v=k[0],h=k[1],f=Object(r.h)().yhdistys,E=Object(n.useState)(""),y=Object(p.a)(E,2),b=y[0],g=y[1],j=d(),N=Object(r.g)();return void 0===e.location.state?N.push("/userpage"):t=e.location.state.id_y,Object(n.useEffect)((function(){var e=JSON.stringify({call:"checkmember",email:j.email,name:f});if(L(e).then((function(e){g(e.data.role),function(e){localStorage.setItem("role",JSON.stringify(e))}({yhdistys:f,role:e.data.role})})).catch((function(){return N.push("/userpage")})),b){var t=JSON.stringify({call:"getkokoukset",yhdistys:f,email:j.email});K(t).then((function(e){c(e.data.filter((function(e){return"1"===e.valmis})))})).catch((function(e){return console.log("err.response",e.response)}));var a=JSON.stringify({call:"getallmembers",yhdistys:f});L(a).then((function(e){h(e.data)})).catch((function(e){return console.log("err.response",e.response)}))}}),[N,j.email,f,b]),m()&&i?l.a.createElement("div",{style:{width:"100%",maxWidth:"1100px",padding:"0",marginTop:"50px"}},l.a.createElement("h2",{className:"px-3"},f),l.a.createElement("h4",{className:"px-3"},"Yhdistyksen sivu"),"admin"===m().role?l.a.createElement(o.b,{className:"px-3",to:{pathname:"/uusikokous/".concat(f),state:{id_y:t}}},"Luo uusi kokous"):l.a.createElement(l.a.Fragment,null),l.a.createElement("hr",null),l.a.createElement(te,{kokoukset:i,members:v,yhdistys:f,yhdistys_id:t})):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... ")},ne=a(19),le=a(8),se=a(36),ie=a.n(se),oe=(a(60),a(52)),re=function(e){e.setShowComponent;var t=e.handlePerustiedotChange,a=(e.saveKokousDraft,e.perustiedot),n=e.setPerustiedot;Object(se.registerLocale)("fi",oe.a);var s=a.avoinna?"Avoinna":"Kiinni";return a?l.a.createElement("div",{className:"col-md-6  m-auto"},l.a.createElement("h5",{className:"mb-4"},"Kokouksen perustiedot"),l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Otsikko"),l.a.createElement("input",{type:"text",className:"form-control",name:"otsikko",onChange:t,value:a.otsikko})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kokouksen numero"),l.a.createElement("input",{type:"text",className:"form-control",name:"kokousnro",onChange:t,value:a.kokousNro||""})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kokous alkaa"),l.a.createElement("br",null),l.a.createElement(ie.a,{name:"startdate",locale:"fi",dateFormat:"dd/MM/yyyy",className:"form-control",selected:a.startDate,onChange:function(e){return n(Object(le.a)(Object(le.a)({},a),{},{startDate:e}))},selectsStart:!0,startDate:a.startDate,endDate:a.endDate,minDate:new Date})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kokous p\xe4\xe4ttyy"),l.a.createElement("br",null),l.a.createElement(ie.a,{locale:"fi",dateFormat:"dd/MM/yyyy",className:"form-control",selected:a.endDate,onChange:function(e){return n(Object(le.a)(Object(le.a)({},a),{},{endDate:e}))},selectsEnd:!0,startDate:a.startDate,endDate:a.endDate,minDate:a.startDate})),l.a.createElement("div",{className:"form-group custom-control custom-switch"},l.a.createElement("input",{type:"checkbox",className:"custom-control-input",onChange:t,id:"avaa",value:a.avoinna,checked:a.avoinna}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"avaa"},"Avaa kokoustila heti osallistujille")),l.a.createElement("p",null,"Tila: ",s)),l.a.createElement("hr",null)):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... ")},ce=function(e){var t=e.puheenjohtaja,a=e.osallistujat,s=e.setOsallistujat,i=e.saveOsallistujat,o=e.varalla,r=e.setVaralla;e.setShowComponent;Object(n.useEffect)((function(){i()}),[a]);var c=function(e){var t=a.filter((function(t){return t.email===e.target.name}));r(o.concat(t)),s(a.filter((function(t){return t.email!==e.target.name})))},u=function(e){var t=o.filter((function(t){return t.email===e.target.name}));s(a.concat(t)),r(o.filter((function(t){return t.email!==e.target.name})))};return l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Osallistujat"),l.a.createElement("h6",null,"Puheenjohtaja:"," "," ",t[0].firstname," ",t[0].lastname," (",t[0].email,")"),l.a.createElement("div",{className:"mt-1"},a.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"mt-4"},"Kokousosallistujat"),l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,a.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),l.a.createElement("td",null,l.a.createElement("button",{onClick:c,className:"btn btn-outline-primary btn-sm",name:e.email},"Poista osallistujalistalta")))}))))):l.a.createElement("h6",null,"Kokouksessa ei ole osallistujia"),o.length>1?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"mt-4"},"Muut yhdistyksen j\xe4senet"),l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,o.filter((function(e){return e.email!==t[0].email})).map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),l.a.createElement("td",null,l.a.createElement("button",{onClick:u,className:"btn btn-outline-primary btn-sm",name:e.email},"Siirr\xe4 kokousosallistujaksi")))}))))):l.a.createElement("h6",null,"Kaikki yhdistyksen j\xe4senet ovat osallistujalistalla")),l.a.createElement("hr",null))},ue=function(e){e.setShowComponent;var t=e.handlePaatosvaltaChange,a=(e.saveKokousDraft,e.paatosvaltaisuus);return l.a.createElement("div",{className:"mt-5"},l.a.createElement("div",{className:"col-md-6  m-auto"},l.a.createElement("div",{className:"mb-2"},l.a.createElement("h5",null,"Kokouksen p\xe4\xe4t\xf6svaltaisuus"),l.a.createElement("p",{style:{marginTop:"-5px"}},l.a.createElement(M,{heading:"P\xe4\xe4t\xf6svaltaisuus",text:"Kokouksen p\xe4\xe4t\xf6svaltaisuuden voi m\xe4\xe4ritell\xe4 t\xe4ytt\xe4m\xe4ll\xe4 valitsemasi kent\xe4t. Tyhj\xe4ksi j\xe4tetty\xe4 kentt\xe4\xe4 ei huomioida kokouksen p\xe4\xe4t\xf6svaltaisuuden m\xe4\xe4rittelyss\xe4.",btnText:"Selite",placement:"bottom",variant:"link",style:{marginBottom:"3px",marginLeft:"-10px"}}))),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Esityslista"),l.a.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",name:"esityslista",onChange:t,value:a.esityslista}),l.a.createElement("small",{className:"form-text text-muted"},"Kuinka monen kokousosallistujan on avattava esityslista kokouksen p\xe4\xe4t\xf6svaltaisuuden t\xe4yttymiseksi?")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Aktiivisuus"),l.a.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",name:"aktiivisuus",onChange:t,value:a.aktiivisuus}),l.a.createElement("small",{className:"form-text text-muted"},"Kuinka monen k\xe4ytt\xe4j\xe4n on kommentoitava jotakin kohtaa tai kannatettava jotakin, jotta kokouksen p\xe4\xe4t\xf6svaltaisuus t\xe4yttyy?")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kesto"),l.a.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",name:"kesto",onChange:t,value:a.kesto}),l.a.createElement("small",{className:"form-text text-muted"},"Kuinka monta vuorokautta kokouksen on kestett\xe4v\xe4, jotta kokous on p\xe4\xe4t\xf6svaltainen?")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Muu kriteeri"),l.a.createElement("textarea",{className:"form-control",rows:"3",name:"muu",onChange:t,value:a.muu}),l.a.createElement("small",{className:"form-text text-muted"},"Kirjoita haluamasi p\xe4\xe4t\xf6svaltaisuuskriteeri kentt\xe4\xe4n")))))},me=a(73),de=function(e){var t=e.editorContentChange,a=e.teksti;return l.a.createElement("div",{style:{contenteditable:"true",zIndex:"100 !important"}},l.a.createElement(me.a,{apiKey:"125nsf0ndxttm5fjgwyhk2ngplw4q3unbfbd18msydg603bp",onEditorChange:t,value:a,init:{height:750,plugins:["advlist lists link image print","charmap print preview anchor help","searchreplace visualblocks","insertdatetime table paste preview"],toolbar:["preview print | undo redo | formatselect | bold italic |  alignleft aligncenter alignright |  bullist numlist outdent indent | help | insertdatetime"],insertdatetime_dateformat:["%HH:%M","%d-%m-%Y"],setup:function(e){e.on("keydown",(function(t){if(9===t.keyCode)return e.execCommand("mceInsertRawHTML",!1,"&emsp;&emsp;"),t.preventDefault(),t.stopPropagation(),!1}))}}}))},ke=function(e){var t=e.perustiedot,a=e.esityslista_otsakkeet,s=e.osallistujat,i=e.paatosvaltaisuus,o=e.yhdistys,c=e.id_y,u=Object(n.useState)(!1),m=Object(p.a)(u,2),k=m[0],v=m[1],h=Object(r.g)(),f=d(),E={month:"numeric",day:"numeric"},y=new Date(t.startDate).toLocaleDateString("fi-FI",E),b=new Date(t.endDate).toLocaleDateString("fi-FI",E),g=""===t.otsikko?"":"<h3>".concat(t.otsikko,"</h3>"),j=s.map((function(e){return"<li>"+e.firstname+" "+e.lastname+"</li>"})).join(" "),N=a.map((function(e){return""!==e.otsikko?"<li>"+e.otsikko+"</li>":"<li>Asiakohdalla ei ole otsikkoa</li>"})).join(" ");N=0===N.length?"<p>Kokoukselle ei ole m\xe4\xe4ritelty esityslistaa</p>":N;var O="";""===i.esityslista&&""===i.aktiivisuus&&""===i.kesto&&""===i.muu?O+="<p>Kokouksen p\xe4\xe4t\xf6svaltaisuutta ei ole m\xe4\xe4ritelty.</p>":(""!==i.esityslista&&(O+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos v\xe4hint\xe4\xe4n ".concat(i.esityslista," kpl kokousosallistujista on avannut esityslistan.</p>")),""!==i.aktiivisuus&&(O+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos v\xe4hint\xe4\xe4n ".concat(i.aktiivisuus," kpl kokousosallistujista on ottanut asioihin kantaa.</p>")),""!==i.kesto&&(O+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos kokous kest\xe4\xe4 v\xe4hint\xe4\xe4n ".concat(i.kesto," vuorokautta.</p>")),""!==i.muu&&(O+="<p>".concat(i.muu,"</p>")));var w=Object(n.useState)("<h3>Esityslista ".concat(t.kokousNro," kokous alkaa ").concat(y," ja p\xe4\xe4ttyy ").concat(b,"</h3>").concat(g,"<h4>Kokouksen avaus ").concat(y,"</h4><h4>Esityslista</h4><ol>").concat(N,"</ol><h4>Osallistujat</h4><ul>").concat(j.substring(0,j.length-5),"</ul><h4>Kokouksen p\xe4\xe4t\xf6svaltaisuus</h4>").concat(O,"<h4>Kokous p\xe4\xe4ttyy ").concat(b,"</h4><p>Terveisin <br/>").concat(f.firstname," ").concat(f.lastname,"<br/><small>").concat(o,"</small></p>")),S=Object(p.a)(w,2),_=S[0],x=S[1],C=function(){var e=JSON.stringify({call:"luokokous",id_y:c,kokousid:t.kokousid,otsikko:t.otsikko,kokousnro:t.kokousNro.substring(0,t.kokousNro.length-5),startDate:t.startDate,endDate:t.endDate,avoinna:t.avoinna,paatosvaltaisuus:i,valmis:!0});K(e).then((function(e){D()})).catch((function(e){alert(e.response.data.message),v(!1)}))},D=function(){var e=JSON.stringify({call:"postdoc",id_y:c,kokousnro:t.kokousNro.substring(0,t.kokousNro.length-5),type:"kokouskutsu",draft:"false",content:_});I(e).then((function(e){L()})).catch((function(e){alert(e.response.data.message)}))},L=function(){var e;e=s.map((function(e){return Object(le.a)({rooli:"osallistuja"},e)})),f=Object.assign({rooli:"puheenjohtaja"},f);var a={call:"postosallistujat",id_y:c,kokousid:t.kokousid};e=[f].concat(e),e=[a].concat(e);var n=JSON.stringify(e);F(n).then((function(e){P()})).catch((function(e){return alert(e.response.data.message)}))},P=function(){var e=_.substring(4,_.indexOf("</h3>")),t=_.substring(_.indexOf("</h3>")+5),a=[f].concat(s),n=JSON.stringify({call:"sendkokousinvite",yhdistys:o,aihe:e,viesti:t,osallistujat:a});K(n).then((function(e){alert(e.data.message),v(!1),h.push({pathname:"/assoc/".concat(o),state:{id_y:c}})})).catch((function(e){return alert(e.response.data.message)}))};return t.startDate&&t.endDate?0===s.length?l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Kokouksessa ei ole osallistujia. Lis\xe4\xe4 kokousosallistujat osallistujat-v\xe4lilehdell\xe4.")):k?k?l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Pyynt\xf6\xe4 k\xe4sitell\xe4\xe4n, odota hetki...."),l.a.createElement(B,null)):void 0:l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Yhteenveto"),l.a.createElement("p",{className:"mb-4"},"Tarkasta kokouksen tiedot. Painamalla ruudun pohjalla olevaa n\xe4pp\xe4int\xe4 kokous tallentuu ja j\xe4rjestelm\xe4 l\xe4hett\xe4\xe4 kutsun osallistujille kokoukseen s-postitse."),l.a.createElement(de,{editorContentChange:function(e){x(e)},teksti:_}),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{className:"btn btn-outline-primary mt-3",onClick:function(){window.confirm("Haluatko tallentaa kokouksen ja l\xe4hett\xe4\xe4 kutsun osallistujille?")&&(v(!0),C())}},"Tallenna ja l\xe4het\xe4 kokouskutsu"))):l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"P\xe4iv\xe4m\xe4\xe4r\xe4tiedot ovat puutteelliset. T\xe4yt\xe4 tarvittavat tiedot perustiedot-v\xe4lilehdell\xe4."))},pe=(a(112),function(e){var t,a=e.sisus,s=e.id,i=void 0===s?0:s,o=e.save,r=e.placeholder,c=void 0===r?"":r,u=e.edit,m=void 0!==u&&u,d=(e.avaa,e.alku,e.loppu,Object(n.useRef)(null)),k=function(e){o(i,e.target.value,500,"otsake")};return Object(n.useEffect)((function(){d.current.style.minHeight="auto",d.current.style.minHeight=d.current.scrollHeight-15+"px"}),[a,m]),t=m?l.a.createElement("textarea",{ref:d,className:"areaText",id:i,spellCheck:"false",onChange:k,onInput:k,value:a,placeholder:c}):l.a.createElement("div",{ref:d,tabIndex:"0",style:{paddingBottom:15},className:"areaText",id:i,spellCheck:"false"},a),l.a.createElement("div",null,t)}),ve=function(e){var t=e.pj,a=void 0!==t&&t,s=(e.type,e.kokous_id,e.kohta_id),i=e.tila,o=e.paatos,r=e.save,c="",u=Object(n.useState)(!1),m=Object(p.a)(u,2),d=m[0],k=m[1];c=o;return l.a.createElement("div",{className:"paatos"+i},a?l.a.createElement("div",{className:"nuija",onClick:function(){k(!d)}},l.a.createElement("div",{className:"nuija2"},l.a.createElement(j.e,null))," "):"",l.a.createElement("div",{className:"paatos_editori"},l.a.createElement(pe,{placeholder:"P\xe4\xe4tos",edit:3!=i&&a,id:s,sisus:o,save:function(e,t,a){c=t,r(s,[t,2],500)}})),d?3==i?l.a.createElement("div",{className:"paatos_valinnat"},l.a.createElement("div",{className:"avaa",onClick:function(){k(!1),r(s,[o,2],100)}},"AVAA")):l.a.createElement("div",{className:"paatos_valinnat"},l.a.createElement("div",{onClick:function(){k(!1),r(s,[c,3],100)}},"Hyv\xe4ksy!")):"")},he=(a(213),"https://samik.azurewebsites.net/api/"),fe=function(e){var t=e.kokous_id,a=e.kohta_id,s=e.id,i=e.teksti,o=void 0===i?"":i,r=e.tyyppi,c=void 0===r?"mielipide":r,u=Object(n.useState)(""),m=Object(p.a)(u,2),d=m[0],k=m[1],v=Object(n.useState)(0),h=Object(p.a)(v,2),f=h[0],E=h[1],y=function(e){switch(e){case"mielipide":return 1;case"kommentti_mielipide":return 2;case"kommentti_valinta":return 3;case"kommentti_perustelu":return 4;case"perustelu":return 5}};Object(n.useEffect)((function(){b()}),[]);var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new URLSearchParams;t.append("hae_liket",s),t.append("tyyppi",y(c)),t.append("kohta_id",a),S.a.post(he+"data.php",t,{withCredentials:!0}).then((function(t){1==e&&console.log(t.data),1==e&&2==y(c)&&console.log(t.data),k(t.data[0]),E(parseInt(t.data[1]))}))};return l.a.createElement("div",{className:"kannata"},l.a.createElement("div",{className:"kannata_maara"},d),l.a.createElement("div",{className:["kannatan_harmaa","kannatan_sininen"][f],onClick:function(){return function(){var e=new URLSearchParams;e.append("kannata",s),e.append("tyyppi",y(c)),e.append("kohta_id",a),e.append("kokous_id",t),S.a.post(he+"data.php",e,{withCredentials:!0}).then((function(e){b(1)}))}()}},l.a.createElement("div",{className:"kannata_thumbsi"},l.a.createElement(j.h,null)),l.a.createElement("div",{className:"kannatan_teksti"},o)))},Ee=function(e){var t=e.tila,a=e.thread_id,s=e.kohta_id,i=e.maara,o=e.kokous_id,r=e.tyyppi,c=void 0===r?"mielipide":r,u=Object(n.useState)(!1),m=Object(p.a)(u,2),d=m[0],k=m[1],v=Object(n.useState)(""),h=Object(p.a)(v,2),f=h[0],E=h[1],y=Object(n.useState)([]),b=Object(p.a)(y,2),g=b[0],j=b[1],N=Object(n.useState)(i),O=Object(p.a)(N,2),w=O[0],_=O[1],x=function(e,t){E(t);var n=document.getElementById("send_kommentti"+a);null!=n&&(t.length>0?n.classList.add("sendilite"):n.classList.remove("sendilite"))},C=function(){var e=new URLSearchParams;e.append("hae_kommentit",c),e.append("kokous_id",o),e.append("kohta",s),e.append("thread",a),S.a.post("https://samik.azurewebsites.net/api/data.php",e,{withCredentials:!0}).then((function(e){j(e.data[0]),_(e.data[0].length)}))};return l.a.createElement("div",{className:"kommentti"},l.a.createElement("div",{className:"kommenttimaara",onClick:function(){C(),k(!d)}},w," \xa0",l.a.createElement("svg",{style:{height:"15px",width:"15px"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",fill:"none","stroke-width":"4",stroke:"#000"},l.a.createElement("path",{d:"M66.72,12.5H33.28C17.66,12.5,5,24.91,5,40.22H5A27.93,27.93,0,0,0,30.25,67.77l-7,19.73,24-19.57H66.72C82.34,67.93,95,55.52,95,40.22h0C95,24.91,82.34,12.5,66.72,12.5Z"}))),d?l.a.createElement("div",null,g.map((function(e){return l.a.createElement("div",{key:e.kommentti_id,className:"kommentti_container"},l.a.createElement("div",null,l.a.createElement("div",{className:"kommentoija",style:{background:(e.firstname,e.lastname,"#dddddd77"),color:"black"}},e.firstname[0],e.lastname[0]),l.a.createElement("div",{className:"KommentoijaFullname"},l.a.createElement("b",null,e.firstname," ",e.lastname)),l.a.createElement("div",{className:"kommenttiaika"},e.aika," "),l.a.createElement("div",{className:"kommenttikommentti"},e.kommentti)),l.a.createElement("div",{className:"kommenttipeukut"},l.a.createElement(fe,{kokous_id:o,id:e.kommentti_id,tyyppi:"kommentti_"+c,kohta_id:s})))})),23!=t?l.a.createElement("div",null,l.a.createElement(pe,{edit:!0,placeholder:"kirjoita kommentti",sisus:f,save:x}),l.a.createElement("div",{className:"sendibutton",id:"send_kommentti"+a,onClick:function(){return function(){if(0!=f.length){var e=new URLSearchParams;e.append("save","kommentti_"+c),e.append("param",f),e.append("kohta",s),e.append("kokous_id",o),e.append("thread",a),x(0,""),S.a.post("https://samik.azurewebsites.net/api/data.php",e,{withCredentials:!0}).then((function(e){console.log("julkaisu",c,e.data),C()}))}}()}},"send")):""):"")},ye=function(e){var t,a=e.tila,n=e.maara,s=void 0===n?0:n,i=e.edit,o=e.id,r=e.nimi,c=e.arvo,u=e.check,m=e.remove,d=e.save,k=e.summa,p=void 0===k?0:k;return t=l.a.createElement("div",{tabIndex:"0",onKeyDown:function(e){" "===e.key&&(e.preventDefault(),u(o))},className:c?"green ruutu":"ruutu",onClick:function(){23!=a&&3!=a&&u(o)}}),l.a.createElement("div",{className:"3"==a||"23"==a?"":"valintahover"},l.a.createElement("div",{className:"valinta"},p>0?l.a.createElement("div",{style:{marginLeft:"40px",width:parseFloat(s)/parseFloat(p)*88+"%",maxWidth:"calc(100% - 40px)",backgroundColor:"#ddd",height:"5px",marginTop:"30px",position:"absolute"}}):"",t,0==i&&0==s?l.a.createElement("input",{onChange:function(e){23!=a&&3!=a&&d(o,e.target.value)},spellCheck:"false",className:"ruutuvalinta",type:"text",value:r}):l.a.createElement("div",{spellCheck:"false",className:"ruutuvalinta"},r,s>0?l.a.createElement("div",{className:"valinta_maara"},(parseFloat(s)/parseFloat(p)*100).toFixed(1),"% (",s,")"):""),0==i&&0==s?l.a.createElement("div",{className:"remove",onClick:function(){23!=a&&3!=a&&m(o)}}):""))},be=function(e){var t=e.options,a=void 0!==t&&t,n=e.toggle,s=e.flags,i=e.kohta_id,o=e.kokous_id,r=(e.edit,e.arvot),c=void 0===r?[]:r,u=e.checkValue,m=void 0===u?[]:u,d=e.check,k=e.remove,p=e.save,v=e.uusi,h=e.multi,E=void 0===h?0:h,y=e.type,b=void 0===y?"3":y,g=e.tila;f=0,c.map((function(e){return f+=parseInt(e.maara)}));var j,N=function(e){"3"!=g&&k(e)},O=function(e,t){"3"!=g&&p(e,t)},w=function(e){"3"!=g&&d(e,E)};return!1,"3"==b&&"3"!=g&&(a||2&s)&&(j=l.a.createElement("button",{className:"uusi add",onClick:function(){v(0)}},"Valinta")),l.a.createElement("div",{style:{zIndex:"100"}},c.map((function(e){return l.a.createElement("div",null,l.a.createElement(ye,{arvo:m&&m.includes(e.id),summa:f,tila:g,maara:e.maara,edit:e.tekija,remove:N,save:O,check:w,nimi:e.nimi,key:e.id,id:e.id}),l.a.createElement("div",null,l.a.createElement(Ee,{tyyppi:"valinta",thread_id:e.id,kohta_id:i,kokous_id:o,maara:e.kommentit})))})),j,a?l.a.createElement("div",null,l.a.createElement("hr",null),l.a.createElement(ge,{check:1&s,click:function(){return n(i,1)},nimi:"Sallimonta valintaa"}),l.a.createElement(ge,{check:2&s,click:function(){return n(i,2)},nimi:"Kaikki voi ehdottaa"})):"")},ge=function(e){var t=e.check,a=e.click,n=e.nimi;return l.a.createElement("div",{className:"valinta",onClick:a},l.a.createElement("div",{className:t?"green ruutu":"ruutu"}),l.a.createElement("div",{spellCheck:"false",className:"ruutuvalinta"},n))},je=(a(214),0),Ne=0,Oe="",we=function(e){var t=e.kokous_id,a=e.kohta_id,s=e.tila,i=e.save,o=(e.edit,e.arvot),r=void 0===o?[]:o,c=e.kuvaus,u=e.positio,m=Object(n.useState)(""),d=Object(p.a)(m,2),k=d[0],v=d[1],h=Object(n.useState)(""),f=Object(p.a)(h,2),E=f[0],y=f[1],b=Object(n.useState)(!1),g=Object(p.a)(b,2),j=g[0],N=g[1],O=function(){var e=document.getElementById("send_mielipide"+a);null!=e&&(Oe.length>0?e.classList.add("sendilite"):e.classList.remove("sendilite"))};Object(n.useEffect)((function(e){document.addEventListener("selectionchange",(function(e){var t=window.getSelection();if(t.rangeCount){var n=t.getRangeAt(0).commonAncestorContainer;if(n&&null!==n.parentNode&&n.parentNode.id==="kuvaus"+a){je=t.anchorOffset;var l=t.focusOffset;l<je?(Ne=je,je=l):Ne=l,O(),N(je!=Ne),v(window.getSelection().toString())}}}))}),[]);var w="";return j&&3!=s&&(w=l.a.createElement("div",null,l.a.createElement("div",{className:"mteksti  disable-select"},"Mielipide asiasta:",l.a.createElement("br",null),l.a.createElement("b",null," ",k," ")),l.a.createElement("div",{className:"perustelu",onMouseDown:function(){u(je,Ne)}},l.a.createElement(pe,{edit:!0,sisus:E,save:function(e,t){y(t),Oe=t,i(e,[t,je,Ne,0]),O()}})),l.a.createElement("div",{className:"sendibutton disable-select",id:"send_mielipide"+a,onClick:function(){return i(a,[Oe,je,Ne,1]),je=0,Ne=0,Oe="",y(""),u(je,Ne),void N(je!=Ne)}},"L\xe4het\xe4"))),l.a.createElement("div",null,w,r.length>0?l.a.createElement("div",{className:"MielipideHeader disable-select"},"Mielipiteet(",r.length,")"):"",r.map((function(e){return l.a.createElement("div",null,l.a.createElement("div",{key:e.id,className:"mielipide_container",onClick:function(t){N(!1),u(e.alku,e.loppu)}},l.a.createElement("div",{className:"kelloaika"},e.aika),l.a.createElement("div",{className:"nimipallo",style:{background:"#ddd",color:"black"}},e.firstname[0],e.lastname[0]),l.a.createElement("div",{className:"mielipide_otsake"},l.a.createElement("b",null,function(e,t){var a=c.toString().substring(e,t);return a.length>100?a.slice(0,80)+"...":a}(e.alku,e.loppu))),l.a.createElement("div",{className:"mielipide_teksti"},e.mielipide),l.a.createElement("div",{className:"mielipide_like"},l.a.createElement(fe,{teksti:"kannatan",kokous_id:t,id:e.id,kohta_id:a})),l.a.createElement(Ee,{thread_id:e.id,kohta_id:a,kokous_id:t,maara:e.kommentit})))})))},Se=(a(215),a(216),""),_e=function(e){var t=e.arvot,a=void 0===t?[]:t,s=e.tila,i=e.kohta_id,o=e.kokous_id,r=e.save,c=(e.edit,Object(n.useState)("")),u=Object(p.a)(c,2),m=u[0],d=u[1];return l.a.createElement("div",null,3!=s&&23!=s?l.a.createElement("div",null,l.a.createElement(pe,{edit:23!=s,placeholder:"Ehdota muutosta",sisus:m,save:function(e,t){d(t),Se=t,r(e,[t,0],"perustelu");var a=document.getElementById("send_perustelu"+i);null!=a&&(t.length>0?a.classList.add("sendilite"):a.classList.remove("sendilite"))}}),l.a.createElement("div",{className:"sendibutton",id:"send_perustelu"+i,onClick:function(){return function(){if(0!=Se.length){r(i,[Se,1],"perustelu");var e=document.getElementById("send_perustelu"+i);null!=e&&e.classList.remove("sendilite"),d(""),Se=""}}()}},"send")):"",a.length>0?l.a.createElement("div",{style:{paddingLeft:"40px"},className:"disable-select"},l.a.createElement("b",null,"Muutos ehdotukset(",a.length,")")):"",l.a.createElement("div",null,a.map((function(e){return l.a.createElement("div",null,l.a.createElement("div",{key:e.id,style:{border:"1px solid #eee",borderBottom:"1px solid #f0f0f0",backgroundColor:"#f9f9f9"},className:"asiakohta_hyvaksy"},l.a.createElement("div",null,e.perustelu),l.a.createElement("div",{className:"mielipide_like"},l.a.createElement(fe,{teksti:"kannatan",tyyppi:"perustelu",kokous_id:o,id:e.id,kohta_id:i})),l.a.createElement(Ee,{tyyppi:"perustelu",thread_id:e.id,kohta_id:i,kokous_id:o,maara:e.kommentit})))}))))},xe=(a(259),function(e){var t,a=e.kohta_id,s=(e.admin,e.kokous_id),i=(e.edit,e.arvot),o=(e.oikeudet,e.checkValue),r=void 0===o?[]:o,c=e.check,u=e.remove,m=e.save,d=e.uusi,k=(e.type,e.tila),v=Object(n.useState)([]),h=Object(p.a)(v,2),f=h[0],E=h[1],y=Object(n.useState)([]),b=Object(p.a)(y,2),g=b[0],j=b[1],N=Object(n.useState)([]),O=Object(p.a)(N,2),w=O[0],S=O[1],_=Object(n.useState)(!1),x=Object(p.a)(_,2),C=x[0],D=x[1],L=new Map;return Object(n.useEffect)((function(){var e=JSON.stringify({call:"getosallistujat",id:s});F(e).then((function(e){E(e.data);f.map((function(e){L.set(e.id,e.firstname+" "+e.lastname)})),S(i.filter((function(e){return L.has(e.nimi)})).map((function(e){var t={};return t.id=e.id,t.maara=e.maara,parseInt(e.maara),t.kommentit=e.kommentit,t.nimi=L.get(e.nimi),L.delete(e.nimi),t}))),j(f.filter((function(e){return L.has(e.id)})))})).catch((function(e){return alert(e)}))}),[i]),"3"!=k&&(t=l.a.createElement("div",null,g.length>0?l.a.createElement("button",{onClick:function(){return D(!C)},className:"pj_ehdota"},C?"pienenn\xe4":"Lis\xe4\xe4 ehdokas"):"",C?g.map((function(e){return l.a.createElement("div",{className:"pj_ehdokkaita",key:e.id,onClick:function(){return d(e.id)}},e.firstname," ",e.lastname)})):"")),l.a.createElement("div",{className:"PJ"},w.length>0?l.a.createElement(be,{type:"6",kohta_id:a,kokous_id:s,tila:k,edit:!1,arvot:w,check:c,checkValue:r,remove:u,save:m,uusi:d}):"",t)}),Ce=(a(260),"https://samik.azurewebsites.net/api/"),De=function(e){var t=e.flags,a=e.pj,s=void 0!==a&&a,i=e.oikeudet,o=void 0===i?"2":i,r=e.id,c=e.save,u=e.type,m=e.kokous_id,d=e.edit,k=void 0!==d&&d,v=e.tila,h=Object(n.useState)(),f=Object(p.a)(h,2),E=(f[0],f[1],Object(n.useState)([])),y=Object(p.a)(E,2),b=y[0],g=y[1],j=Object(n.useState)([]),N=Object(p.a)(j,2),O=N[0],w=N[1],_=Object(n.useState)([]),x=Object(p.a)(_,2),C=x[0],D=x[1],L=Object(n.useState)([]),K=Object(p.a)(L,2),F=K[0],I=K[1],P=Object(n.useState)([]),T=Object(p.a)(P,2),J=T[0],M=T[1],R=Object(n.useState)([]),H=Object(p.a)(R,2),A=H[0],B=H[1],U=Object(n.useState)([]),V=Object(p.a)(U,2),Y=V[0],z=V[1],q=Object(n.useState)(2==u&&0==k?1:0),W=Object(p.a)(q,2),Z=W[0],$=W[1],G=Object(n.useState)([]),Q=Object(p.a)(G,2),X=Q[0],ee=Q[1],te=function(e){var a=new URLSearchParams;a.append("check_valitse",e),a.append("kokous_id",m),a.append("kohta",r),a.append("multi",1&t),S.a.post(Ce+"data.php",a,{withCredentials:!0}).then((function(e){return ie()}))},ae=function(e){var t=new URLSearchParams;t.append("check_uusi",e),t.append("kohta",r),t.append("kokous_id",m),S.a.post(Ce+"data.php",t,{withCredentials:!0}).then((function(e){return ie()}))},ne=function(e,t,a){c(e,t,500,"check"),g(b.map((function(a){return a.id===e?Object(le.a)(Object(le.a)({},a),{},{nimi:t}):a})))},se=function(e,t){c(e,t,0,"flags")},ie=function(){var e=new URLSearchParams;e.append("avaakohta",r),e.append("kokous_id",m),S.a.post(Ce+"data.php",e,{withCredentials:!0}).then((function(e){-1!=e.data[4]?ee(JSON.parse(e.data[4])):ee([]),-1!=e.data[2]?w(JSON.parse(e.data[2])):w([]),-1!=e.data[1]?g(JSON.parse(e.data[1])):g([]),-1!=e.data[0]?D(JSON.parse(e.data[0])):D(""),B(""),M(""),-1!=e.data[3]?(z(JSON.parse(e.data[3])),$(1)):z([])}))},oe=function(e,t){return C.toString().substring(e,t)};Object(n.useEffect)((function(){ie();var e=document.getElementById("s"+r).parentNode.querySelector(".nro").getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:e,behavior:"smooth"}),window.setTimeout((function(){var e=document.getElementById("s"+r).parentNode.parentNode.querySelector(".nro").getBoundingClientRect().top+window.pageYOffset+-40;window.scrollTo({top:e,behavior:"smooth"})}),100)}),[]);var re=["","",l.a.createElement("div",null,l.a.createElement(we,{tila:v,edit:k,kohta_id:r,kokous_id:m,arvot:Y,save:function(e,t){if(0==t[3])c(e,t,500,"mielipide");else{var a=new URLSearchParams;a.append("param",t[0]),a.append("save","mielipide"),a.append("alku",t[1]),a.append("loppu",t[2]),a.append("draft",1),a.append("thread",e),a.append("kohta",r),a.append("kokous_id",m),S.a.post(Ce+"data.php",a,{withCredentials:!0}).then((function(e){return ie()}))}},positio:function(e,t){I(oe(0,e)),M(oe(e,t)),B(oe(t,parseInt(C.toString().length))),$(2)},kuvaus:C})),l.a.createElement("div",null,l.a.createElement(_e,{save:function(e,t,a){if(0==t[1])c(e,t,500,a);else{var n=new URLSearchParams;n.append("param",t[0]),n.append("save","perustelu"),n.append("draft",1),n.append("thread",e),n.append("kohta",r),n.append("kokous_id",m),S.a.post(Ce+"data.php",n,{withCredentials:!0}).then((function(e){return ie()}))}},kokous_id:m,kohta_id:r,tila:v,arvot:X})),l.a.createElement("div",null,l.a.createElement(be,{options:0===parseInt(v)&&0===parseInt(o)||s&&3!=v,toggle:se,flags:t,kokous_id:m,kohta_id:r,tila:v,edit:!0,arvot:b,check:te,checkValue:O,remove:function(e){var t=new URLSearchParams;t.append("check_remove",e),t.append("kohta",r),t.append("kokous_id",m),S.a.post(Ce+"data.php",t,{withCredentials:!0}).then((function(e){ie()}))},save:ne,uusi:ae})),l.a.createElement("div",null,l.a.createElement(xe,{tila:v,kohta_id:r,kokous_id:m,arvot:b,check:te,checkValue:O,save:ne,uusi:ae})),l.a.createElement("div",null,l.a.createElement(xe,{toggle:se,tila:v,type:6,kohta_id:r,kokous_id:m,arvot:b,check:te,checkValue:O,save:ne,uusi:ae}))][u];return l.a.createElement("div",{id:"s"+r},l.a.createElement("div",{id:"sisalto"},[l.a.createElement("div",{className:"kuvaus"},l.a.createElement(pe,{edit:0===parseInt(v)&&0===parseInt(o)||s&&2!=u,id:"id",sisus:C,save:function(e,t){c(e,t,500,"kuvaus"),D(t)},placeholder:"kuvaus"})),l.a.createElement("div",{className:"kuvaus"},l.a.createElement("div",{id:"kuvaus"+r,className:"areaText"},C)),l.a.createElement("div",{className:"kuvaus"},l.a.createElement("div",{id:"kuvaus"+r,onMouseDown:function(){return $(1)},className:"areaText"},F,l.a.createElement("span",{className:"korostus"},J),A))][Z],re))},Le=function(e){var t,a=e.flags,s=e.pj,i=void 0!==s&&s,o=e.oikeudet,r=void 0===o?"2":o,c=e.vaihda_tyyppi,u=e.kokous_id,m=e.type,d=e.title,k=e.id,v=e.alkaa,h=(e.loppuu,e.auki),f=void 0!==h&&h,E=e.avaa,y=e.save,b=e.poista,g=e.paatos,N=e.tila,O=Object(n.useState)("0000-00-00"!==v?new Date(v):""),w=Object(p.a)(O,2);w[0],w[1];Object(se.registerLocale)("fi",oe.a);var S=function(e,t,a,n){y(e,t,a,n,k)},_=function(){E(k)},x=function(e){23!=parseInt(N)&&(m==e&&(e=0),c(k,e))},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(23!=parseInt(N)){var a,n=document.getElementById("info"+k);switch(e){case 3:a="Hyv\xe4ksy asiakohta";break;case 4:a="\xc4\xe4nestys</b>";break;case 2:a="Mielipiteit\xe4 asiasta";break;case 5:a="Nimitys";break;case 6:a="Puheenjohtajan valinta";break;default:a="Tiedoksi"}if(1==t)return a;n.innerHTML=a}},D=["",l.a.createElement(j.b,{onMouseEnter:function(){return C(1)},onClick:function(){return x(1)},className:1==m?"kohta_valittu p_k":"p_k"}),l.a.createElement(j.c,{onMouseEnter:function(){return C(2)},onClick:function(){return x(2)},className:2==m?"kohta_valittu p_k":"p_k"}),l.a.createElement(j.f,{onMouseEnter:function(){return C(3)},onClick:function(){return x(3)},className:3==m?"kohta_valittu p_k":"p_k"}),l.a.createElement("svg",{onMouseEnter:function(){return C(4)},className:4==m?"kohta_valittu p_k":"p_k",onClick:function(){return x(4)},xmlns:"http://www.w3.org/2000/svg",viewBox:"-100 -100 700 700"},l.a.createElement("path",{d:"M26.42,180.11v350h350v-350Zm130.83,290.6L73.7,363.27l18.6-13.76,66.42,83.93L306.18,258.7l18.05,16Z",transform:"translate(-21.42 -25.11)"}),l.a.createElement("path",{d:"M101.42,105.11v0h350v350h0v-350Z",transform:"translate(-21.42 -25.11)"}),l.a.createElement("path",{d:"M176.42,30.11v0h350v350h0v-350Z",transform:"translate(-21.42 -25.11)"})),l.a.createElement(j.j,{onMouseEnter:function(){return C(5)},onClick:function(){return x(5)},className:5==m?"kohta_valittu p_k":"p_k"}),l.a.createElement(j.e,{onMouseEnter:function(){return C(6)},className:"kohta_valittu p_k"})],L=23!=parseInt(N)&&0==m&&0===parseInt(r)?l.a.createElement("div",{className:"valinta_iconit"},D[1],D[2],D[3],D[4],D[5],l.a.createElement("div",{className:"kohta_info",id:"info"+k},C(m,1))):l.a.createElement("div",{className:"valinta_iconit2"},D[m],l.a.createElement("div",{className:"kohta_info",id:"info"+k},C(m,1)));return t=f?l.a.createElement(De,{flags:a,key:k,pj:23!=parseInt(N)&&1==i,oikeudet:23!=parseInt(N)&&r,kokous_id:u,id:k,type:m,save:S,tila:N}):"",l.a.createElement("div",{className:"esitys_item"},void 0,l.a.createElement("div",{onClick:_,className:"otsake"},void 0,l.a.createElement(pe,{placeholder:"Uusi kohta",edit:23!=parseInt(N)&&(0===parseInt(N)&&0===parseInt(r)||i),id:k,sisus:d,save:S})),l.a.createElement("div",null,L,3==parseInt(N)||i&&0!==parseInt(N)?l.a.createElement(ve,{pj:23!=parseInt(N)&&i,tila:N,kokous_id:u,kohta_id:k,paatos:g,save:function(e,t,a){y(k,t,a,"paatos",k)}}):"",l.a.createElement("div",{className:"nro"}),3==parseInt(N)||23==parseInt(N)?l.a.createElement("div",{className:"nro_3"}):"",t),3!=parseInt(N)&&i?l.a.createElement("div",{onClick:_,className:"raahaa",id:"r"+k}):"",23!=parseInt(N)&&(0===parseInt(N)&&0===parseInt(r)||i&&3!=parseInt(N))?l.a.createElement("div",{className:"esityskohta_roskis",onClick:function(){window.confirm("Poista asiakohta?")&&b("poista_kohta",k)}},l.a.createElement(j.i,null)):"")},Ke=(a(261),new URLSearchParams),Fe=(new Map,"https://samik.azurewebsites.net/api/"),Ie={37:1,38:1,39:1,40:1};function Pe(e){e.preventDefault()}function Te(e){if(Ie[e.keyCode])return Pe(e),!1}var Je=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Je=!0}}))}catch(st){}var Me,Re,He,Ae=!!Je&&{passive:!1},Be="onwheel"in document.createElement("div")?"wheel":"mousewheel";function Ue(e){if(!Re){He=-1,Me=document.getElementsByClassName("raahaa");for(var t=0;t<Me.length;t++)if(Me[t].contains(e.target)){window.addEventListener("DOMMouseScroll",Pe,!1),window.addEventListener(Be,Pe,Ae),window.addEventListener("touchmove",Pe,Ae),window.addEventListener("keydown",Te,!1),Re=Me[t],window.setTimeout((function(){null!=Re&&Re.parentNode.classList.add("harmaa")}),100,this),document.body.classList.add("disable-select");break}}}function Ve(e){if(null!=Re)for(var t=e.touches?e.touches[0].clientY:e.clientY,a=!1,n=Re.parentNode.getBoundingClientRect().height,l=0;l<Me.length;l++)if(Me[l]===Re)a=!0;else{var s=Me[l].parentNode.getBoundingClientRect().y,i=Me[l].parentNode.getBoundingClientRect().height;if(i>n&&(i=n),t>=s&&i+s>t){var o=Re.parentNode.parentNode;a?(He=l+1,o.insertBefore(Re.parentNode,Me[l].parentNode.nextSibling)):(He=l+1,o.insertBefore(Re.parentNode,Me[l].parentNode));break}}}function Ye(e){if(window.removeEventListener("DOMMouseScroll",Pe,!1),window.removeEventListener(Be,Pe,Ae),window.removeEventListener("touchmove",Pe,Ae),window.removeEventListener("keydown",Te,!1),null!=Re){if(-1!==He){var t=new URLSearchParams;t.append("NODE",Re.id),t.append("KOHDE",He),S.a.post(Fe+"data.php",t).then((function(e){}))}Re.parentNode.classList.remove("harmaa"),Re=null,document.body.classList.remove("disable-select")}}window.addEventListener("touchstart",Ue),window.addEventListener("mousedown",Ue),window.addEventListener("touchend",Ye),window.addEventListener("mouseup",Ye),window.addEventListener("mousemove",Ve),window.addEventListener("touchmove",Ve);var ze=function(e){var t=e.puheenjohtaja,a=(e.setEsityslista,e.esityslista,e.kokousid),s=void 0===a?"-1":a,i=e.edit,o=void 0===i?"true":i,r=(e.saveKokousDraft,e.setShowComponent,Object(n.useState)([])),c=Object(p.a)(r,2),u=c[0],m=c[1],d=Object(n.useState)(new Array),k=Object(p.a)(d,2),v=k[0],h=k[1];Object(n.useEffect)((function(){if(-1!=s){var e=new URLSearchParams;e.append("kokous_id",s),S.a.post(Fe+"data.php",e,{withCredentials:!0}).then((function(e){return m(e.data[0])}))}}),[s]);var f,y=function(){var e=Ke;Ke=new URLSearchParams,S.a.post(Fe+"data.php",e,{withCredentials:!0}).then((function(e){console.log(e.data)}))},b=function(e,t,a,n,l){Ke.get("kohta")===l&&Ke.get("type")===n||y(),"flags"===n&&m(u.map((function(e){return e.id===l?Object(le.a)(Object(le.a)({},e),{},{flags:e.flags^parseInt(t)}):e}))),"otsake"===n&&m(u.map((function(e){return e.id===l?Object(le.a)(Object(le.a)({},e),{},{n:t}):e}))),Ke=new URLSearchParams,"perustelu"===n?(Ke.append("param",t[0]),Ke.append("draft",t[1])):"mielipide"===n?(Ke.append("param",t[0]),Ke.append("alku",t[1]),Ke.append("loppu",t[2]),Ke.append("draft",t[3])):"paatos"===n?(m(u.map((function(e){return e.id===l?Object(le.a)(Object(le.a)({},e),{},{paatos:t[0],tila:t[1]}):e}))),Ke.append("param",t[0]),Ke.append("tila",t[1])):(Ke.append("param",t),Ke.append("param",t)),Ke.append("thread",e),Ke.append("kohta",l),Ke.append("kokous_id",s),Ke.append("save",n),window.clearTimeout(E),E=setTimeout((function(){y()}),a)},g=function(e,t){var a=new URLSearchParams;a.append("paatos_valitse",t),a.append("kohta",e),a.append("kokous_id",s),S.a.post(Fe+"data.php",a,{withCredentials:!0}).then((function(e){m(e.data[0])}))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Uusi",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";y();var a=new URLSearchParams;a.append(e,t),a.append("kokous_id",s),S.a.post(Fe+"data.php",a,{withCredentials:!0}).then((function(t){m(t.data[0]),"Uusi"==e&&document.getElementById(t.data[0][t.data[0].length-1].id).focus()}))},N=function(e){y(),E&&(window.clearTimeout(E),y()),h(v.includes(e)?v.filter((function(t){return t!=e})):[].concat(Object(Z.a)(v),[e]))};return o&&(f=l.a.createElement("button",{className:"lisaa_esitysitem",onClick:function(){return j()}},"Asiakohta")),console.log("items",u),l.a.createElement("div",null,l.a.createElement("div",{id:"esitys_container"},u.map((function(e){var a;return l.a.createElement(Le,(a={kokous_id:s,vaihda_tyyppi:g,type:e.type,avaa:N,save:b,auki:v.includes(e.id),oikeudet:e.oikeudet},Object(ne.a)(a,"type",e.type),Object(ne.a)(a,"pj",t),Object(ne.a)(a,"title",e.n),Object(ne.a)(a,"id",e.id),Object(ne.a)(a,"key",e.id),Object(ne.a)(a,"alkaa",e.s),Object(ne.a)(a,"poista",j),Object(ne.a)(a,"tila",e.tila),Object(ne.a)(a,"paatos",e.paatos),Object(ne.a)(a,"flags",e.flags),a))})),f))},qe=function(e){var t,a=d(),s=Object(r.h)().yhdistys,i=Object(n.useState)(),c=Object(p.a)(i,2),u=c[0],k=c[1],v=Object(n.useState)("perustiedot"),h=Object(p.a)(v,2),f=h[0],E=h[1],y=Object(r.g)(),b=Object(n.useState)({otsikko:"",kokousNro:"",kokousid:"",startDate:"",endDate:"",avoinna:!1}),g=Object(p.a)(b,2),j=g[0],N=g[1],O=Object(n.useState)(),w=Object(p.a)(O,2),S=w[0],_=w[1],C=Object(n.useState)(),D=Object(p.a)(C,2),I=D[0],P=D[1],T=Object(n.useState)(),J=Object(p.a)(T,2),R=J[0],H=J[1],A=Object(n.useState)([]),B=Object(p.a)(A,2),U=B[0],V=B[1],Y=Object(n.useState)({esityslista:"",aktiivisuus:"",kesto:"",muu:""}),z=Object(p.a)(Y,2),q=z[0],W=z[1],Z=Object(n.useState)(e.location.state.id_y),$=Object(p.a)(Z,2),G=$[0],Q=$[1],X=Object(n.useState)(-1),ee=Object(p.a)(X,2),te=ee[0],ae=ee[1];Object(n.useEffect)((function(){var e={year:"numeric"},t=Date(),a=JSON.stringify({call:"getkokousdraft",name:s});if(j.kokousNro||u||K(a).then((function(a){if("Ei kesken olevia kokouskutsuja"!==a.data.message)if(window.confirm("Yhdistyksell\xe4 on tallentamaton kokous. Haluatko jatkaa kokoustietojen t\xe4ytt\xe4mist\xe4 vai aloittaa uudelleen?")){var n="0"!==a.data.avoinna,l="1970-01-01"===a.data.startDate?"":new Date(a.data.startDate),i="1970-01-01"===a.data.endDate?"":new Date(a.data.endDate);N({otsikko:a.data.otsikko,kokousNro:a.data.kokousnro+"/"+new Date(t).toLocaleDateString("fi-FI",e),kokousid:a.data.id,startDate:l,endDate:i,avoinna:n});var o="0"===a.data.pv_esityslista?"":a.data.pv_esityslista,r="0"===a.data.pv_aktiivisuus?"":a.data.pv_aktiivisuus,c="0"===a.data.pv_kesto?"":a.data.pv_kesto;W({esityslista:o,aktiivisuus:r,kesto:c,muu:a.data.pv_muu}),Q(a.data.id_y);var u=JSON.stringify({call:"getosallistujat",id:a.data.id});F(u).then((function(e){P(e.data),H(e.data.filter((function(e){return"puheenjohtaja"===e.role})))})).catch((function(e){return console.log("err.response",e.response)}));var m=JSON.stringify({call:"getallmembers",yhdistys:s});L(m).then((function(e){k(e.data)})).catch((function(e){return console.log("err.response",e.response)}))}else{var d=JSON.stringify({call:"deletedraft",kokousid:a.data.id});K(d).then((function(e){ae(e.data.id),ie()})).catch((function(e){return console.log("err.response",e.response)}))}else ie()})).catch((function(e){return console.log("err.response.data",e.response.data)})),u&&I&&R)V(u.filter((function(e){return!I.find((function(t){var a=t.email;return e.email===a}))}))),P(I.filter((function(e){return"puheenjohtaja"!==e.role})));else if(!u&&0===U.length&&!R){var n=JSON.stringify({call:"getallmembers",yhdistys:s});L(n).then((function(e){k(e.data),P(e.data.filter((function(e){return e.email!==d().email}))),H(e.data.filter((function(e){return e.email===d().email})))})).catch((function(e){return console.log("err.response",e.response)}))}}),[u,j]);var se,ie=function(){var e={year:"numeric"},t=Date(),a=JSON.stringify({call:"kokousnro",yhdistys:s});K(a).then((function(a){N(Object(le.a)(Object(le.a)({},j),{},{kokousNro:a.data.kokousnro+"/"+new Date(t).toLocaleDateString("fi-FI",e)})),Q(a.data.id_y)}))},oe=function(e){if(de(f),"yhteenveto"===e.target.name){var t=e.target.name,a=new URLSearchParams;a.append("otsakkeet",j.kokousid),x(a).then((function(e){_(e.data),E(t)}))}else E(e.target.name);for(var n=e.target.parentNode.querySelectorAll("button"),l=0;l<n.length;l++)n[l].classList.remove("valittu_menu");e.target.classList.add("valittu_menu")},me=function(){var e=j.kokousNro.indexOf("/");return-1===e?j.kokousNro:j.kokousNro.substring(0,e)},de=function(e){var t=JSON.stringify({call:"luokokous",id_y:G,kokousid:j.kokousid,otsikko:j.otsikko,kokousnro:me(),startDate:j.startDate,endDate:j.endDate,avoinna:j.avoinna,paatosvaltaisuus:q,valmis:!1});K(t).then((function(e){N(Object(le.a)(Object(le.a)({},j),{},{kokousid:e.data.kokousid})),pe(),ae(e.data.kokousid)})).catch((function(e){alert(e.response.data.message)}))},pe=function(){if(""!==j.kokousid){var e;e=I.map((function(e){return Object(le.a)({rooli:"osallistuja"},e)})),a=Object.assign({rooli:"puheenjohtaja"},a);var t={call:"postosallistujat",id_y:G,kokousid:j.kokousid};e=[a].concat(e),e=[t].concat(e);var n=JSON.stringify(e);F(n).then((function(e){console.log("res.data",e.data)})).catch((function(e){return console.log("Error res ",e.response)}))}};return se="perustiedot"===f?l.a.createElement(re,{setShowComponent:E,handlePerustiedotChange:function(e){"otsikko"===e.target.name?N(Object(le.a)(Object(le.a)({},j),{},{otsikko:e.target.value})):"kokousnro"===e.target.name?N(Object(le.a)(Object(le.a)({},j),{},{kokousNro:e.target.value})):"avaa"===e.target.id&&N(Object(le.a)(Object(le.a)({},j),{},{avoinna:!j.avoinna}))},saveKokousDraft:de,perustiedot:j,setPerustiedot:N}):"esityslista"===f?l.a.createElement(ze,(t={puheenjohtaja:!0,setShowComponent:E,setEsityslista:_,esityslista:S,kokousid:te},Object(ne.a)(t,"setShowComponent",E),Object(ne.a)(t,"saveKokousDraft",de),t)):"osallistujat"===f?l.a.createElement(ce,{puheenjohtaja:R,osallistujat:I,setOsallistujat:P,saveOsallistujat:pe,varalla:U,setVaralla:V,setShowComponent:E}):"paatosvaltaisuus"===f?l.a.createElement(ue,{setShowComponent:E,handlePaatosvaltaChange:function(e){"esityslista"===e.target.name?W(Object(le.a)(Object(le.a)({},q),{},{esityslista:e.target.value})):"aktiivisuus"===e.target.name?W(Object(le.a)(Object(le.a)({},q),{},{aktiivisuus:e.target.value})):"kesto"===e.target.name?W(Object(le.a)(Object(le.a)({},q),{},{kesto:e.target.value})):"muu"===e.target.name&&W(Object(le.a)(Object(le.a)({},q),{},{muu:e.target.value}))},paatosvaltaisuus:q,saveKokousDraft:de}):"yhteenveto"===f?l.a.createElement(ke,{esityslista_otsakkeet:S,perustiedot:j,osallistujat:I,paatosvaltaisuus:q,yhdistys:s,id_y:G}):l.a.createElement(l.a.Fragment,null),m()&&"admin"===m().role&&m().yhdistys===s?l.a.createElement("div",{style:{width:"100%",maxWidth:"1100px",padding:"0",marginTop:"50px"}},l.a.createElement("div",{className:"px-3"},l.a.createElement("h2",null,s),l.a.createElement("h4",null,"Luo uusi kokous"),l.a.createElement(o.b,{to:{pathname:"/assoc/".concat(s),state:{id:G}}},"Yhdistyksen p\xe4\xe4sivu")),l.a.createElement("hr",null),l.a.createElement("div",null,l.a.createElement("div",{className:"d-sm-flex justify-content-center second_nav"},l.a.createElement("button",{className:"text-primary valittu_menu",name:"perustiedot",onClick:oe},"Perustiedot"),l.a.createElement("button",{className:"text-primary ",name:"esityslista",onClick:oe},"Esityslista"),l.a.createElement("button",{className:"text-primary ",name:"osallistujat",onClick:oe},"Osallistujat"),l.a.createElement("button",{className:"text-primary ",name:"paatosvaltaisuus",onClick:oe},"P\xe4\xe4t\xf6svaltaisuus"),l.a.createElement("button",{className:"text-primary ",name:"yhteenveto",onClick:oe},"Kutsu kokous"),l.a.createElement(M,{heading:"Kokouksen luominen",text:"Aloita kokous antamalla sille otsikko sek\xe4 alku- ja loppup\xe4iv\xe4m\xe4\xe4r\xe4t. Kun olet valmis, paina seuraava-n\xe4pp\xe4int\xe4, niin voit luoda esityslistan ja p\xe4\xe4tt\xe4\xe4 voiko yhdistyksen j\xe4senet liitt\xe4\xe4 omia esityksi\xe4\xe4n esityslistalle. Seuraavaksi voit m\xe4\xe4ritell\xe4 kokouksen osallistujat ja p\xe4\xe4t\xf6svaltaisuuden. Lopuksi n\xe4et kutsu kokous -v\xe4lilehdelt\xe4 luomasi kokouksen tiedot, miss\xe4 voit tallentaa ja l\xe4hett\xe4\xe4 kutsun kokoukseen osallistujille.",btnText:"Selityst\xe4",placement:"left",variant:"btn btn-outline-danger btn-sm mx-1"}))),l.a.createElement("div",{className:"mt-5"},se)):(y.push("/userpage"),l.a.createElement(l.a.Fragment,null))},We=function(e){var t=e.setShowTable,a=e.document;return l.a.createElement("div",null,l.a.createElement("div",{className:"text-right"},"0"===a.draft?l.a.createElement(l.a.Fragment,null):l.a.createElement("button",{className:"btn btn-outline-primary btn-sm"},"Muokkaa"),l.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){return window.tinymce.activeEditor.execCommand("mcePrint",!0)}},"Tulosta"),l.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){return t(!0)}},"Sulje")),l.a.createElement("div",{style:{zIndex:"100 !important"}},l.a.createElement(me.a,{apiKey:"125nsf0ndxttm5fjgwyhk2ngplw4q3unbfbd18msydg603bp",disabled:!0,value:a.content,init:{menubar:!1,toolbar:!1,selector:"textarea",plugins:["autoresize print"]}})))},Ze=a(125),$e=a.n(Ze),Ge=function(e){var t=e.kokous,a=e.yhdistys,s=e.setShowTable,i=e.showTable,o=Object(n.useState)([]),r=Object(p.a)(o,2),c=r[0],u=r[1],m=Object(n.useState)([]),d=Object(p.a)(m,2),k=d[0],v=d[1],h=Object(n.useState)([]),f=Object(p.a)(h,2),E=f[0],y=(f[1],Object(n.useState)([])),b=Object(p.a)(y,2),g=b[0],j=b[1],N=Object(n.useState)(!0),O=Object(p.a)(N,2),w=O[0],S=O[1];Object(n.useEffect)((function(){var e=JSON.stringify({call:"getdocuments",kokousid:t.id});I(e).then((function(e){u(e.data)})).catch((function(e){console.log("error: ",e.response)}))}),[t.id,a]);var _=function(e){v(e),s(!i),S(!1)},x=function(e){j(e),s(!i),S(!0)};return w?l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,c.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return _(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.type))})))):w||l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,E.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return x(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.nimi.substring(10)))}))))),l.a.createElement("div",{className:"m-auto"},i?l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,c.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return _(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.type))})))):w?l.a.createElement(l.a.Fragment,null):l.a.createElement(We,{setShowTable:s,document:k}),i?l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,E.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return x(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.nimi.substring(10)))}))))):w?l.a.createElement($e.a,{setShowTable:s,upload:g}):l.a.createElement(l.a.Fragment,null))},Qe=function(e){var t=e.osallistujat,a=e.jasenet,n=e.puheenjohtaja,s=e.kokousRooli,i=e.handleOsallistujatClick,o=e.kokous;return a=(a=a.filter((function(e){return!t.find((function(t){var a=t.email;return e.email===a}))}))).filter((function(e){return!n.find((function(t){var a=t.email;return e.email===a}))})),l.a.createElement("div",{style:{marginTop:"4px"}},l.a.createElement("table",{className:"table table-hover table-responsive-sm"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),"puheenjohtaja"===s&&"0"===o.loppu?l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-outline-danger btn-sm",name:e.email,id:"varalle",onClick:i},"Poista kokouksesta")):l.a.createElement("td",null))})))),0!==a.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"mx-2"},"Muut yhdistyksen j\xe4senet"),l.a.createElement("table",{className:"table table-hover  table-responsive-sm"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,a.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),"puheenjohtaja"===s&&"0"===o.loppu?l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-outline-success btn-sm",name:e.email,id:"osallistujaksi",onClick:i},"Siirr\xe4 kokoukseen")):l.a.createElement("td",null))}))))," "):l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement("p",{className:"ml-2"},"Kaikki yhdistyksen j\xe4senet osallistuvat kokoukseen.")))},Xe=function(e){var t=e.kokous,a=e.handleVaihdaKokousaika,s=Object(n.useState)(Date.parse(t.endDate)),i=Object(p.a)(s,2),o=i[0],r=i[1],c=Date.parse(t.startDate);return Object(se.registerLocale)("fi",oe.a),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5 m-auto"},l.a.createElement("div",{className:"card card-body mt-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"mb-3"},"Vaihda kokouksen p\xe4\xe4ttymisajankohta: "),l.a.createElement("br",null),l.a.createElement(ie.a,{locale:"fi",dateFormat:"dd/MM/yyyy",className:"form-control",selected:o,onChange:function(e){return r(e)},selectsEnd:!0,endDate:o,minDate:c}),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){return a(o)},className:"btn btn-outline-primary btn-sm mt-4"},"Tallenna")))))},et=function(e){var t,a,n=e.kokous,s=e.osallistujat,i="Ei p\xe4\xe4t\xf6svaltainen.",o="Ei P\xe4\xe4t\xf6svaltainen.",r="Ei P\xe4\xe4t\xf6svaltainen.",c=e.puheenjohtaja.concat(s),u=c.map((function(e){return e.pv_avannut})).reduce((function(e,t){return"1"===t?e+1:e}),0),m=c.map((function(e){return e.pv_aktiivinen})).reduce((function(e,t){return"1"===t?e+1:e}),0);return"0"!==n.pv_kesto&&"true"===n.pv_kesto_toteutunut&&(i="P\xe4\xe4t\xf6svaltainen."),"0"!==n.pv_esityslista&&n.pv_esityslista<=u&&(o="P\xe4\xe4t\xf6svaltainen."),"0"!==n.pv_aktiivisuus&&n.pv_aktiivisuus<=m&&(r="P\xe4\xe4t\xf6svaltainen."),"0"===n.pv_esityslista&&"0"===n.pv_aktiivisuus&&"0"===n.pv_kesto&&""===n.pv_muu?(t="Ei p\xe4\xe4t\xf6svaltaisuuskriteerej\xe4.",a=""):"0"===n.pv_esityslista&&"0"===n.pv_aktiivisuus&&"0"===n.pv_kesto&&""!==n.pv_muu?(t="",a="P\xe4\xe4t\xf6svaltaisuuskriteeri"):(t="Kokous on p\xe4\xe4t\xf6svaltainen,",a="Muut kokouksen p\xe4\xe4t\xf6svaltaisuudelle asetetut kriteerit:"),l.a.createElement("div",{className:"col-sm-10 mt-3 mx-auto"},l.a.createElement("h6",null,t),"0"===n.pv_esityslista?l.a.createElement(l.a.Fragment,null):l.a.createElement("li",{className:"text-sm-nowrap"},"jos v\xe4hint\xe4\xe4n ",n.pv_esityslista," osallistujista on avannut esityslistan.",l.a.createElement("span",null,"\xa0"),"Tila: ",o),"0"===n.pv_aktiivisuus?l.a.createElement(l.a.Fragment,null):l.a.createElement("li",{className:"text-sm-nowrap"},"jos v\xe4hint\xe4\xe4n ",n.pv_aktiivisuus," osallistujista on ottanut asioihin kantaa.",l.a.createElement("span",null,"\xa0\xa0"),"Tila: ",r),"0"===n.pv_kesto?l.a.createElement(l.a.Fragment,null):l.a.createElement("li",{className:"text-sm-nowrap"},"jos kokous kest\xe4\xe4 v\xe4hint\xe4\xe4n  ",n.pv_kesto," vuorokautta. ",l.a.createElement("span",null,"\xa0\xa0"),"Tila: ",i),""===n.pv_muu?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"mt-3"},a),l.a.createElement("li",null,n.pv_muu)))},tt=function(e){var t=e.kokous,a=e.yhdistys,s=e.osallistujat,i=e.puheenjohtaja,o=e.paatokset,r=i.concat(s),c=r.map((function(e){return e.pv_avannut})).reduce((function(e,t){return"1"===t?e+1:e}),0),u=r.map((function(e){return e.pv_aktiivinen})).reduce((function(e,t){return"1"===t?e+1:e}),0),m={month:"numeric",day:"numeric",year:"numeric"},d=t.kokousnro+"/"+new Date(t.startDate).toLocaleDateString("fi-FI",{year:"numeric"}),k=""!==t.otsikko?"<h2>".concat(t.otsikko,"</h2>"):"",v=new Date(t.startDate).toLocaleDateString("fi-FI",m)+" - "+new Date(t.endDate).toLocaleDateString("fi-FI",m),h=s.map((function(e){return"<li>"+e.firstname+" "+e.lastname+"</li>"})).join(" "),f="";"0"===t.pv_aktiivisuus&&"0"===t.pv_esityslista&&"0"===t.pv_kesto&&""===t.pv_muu?f+="<p>Kokouksen p\xe4\xe4t\xf6svaltaisuutta ei ole m\xe4\xe4ritelty.</p>":("0"!==t.pv_esityslista&&(f+=t.pv_esityslista<=c?"Kokouksen asialistan avasi vaadittu ".concat(t.pv_esityslista," kpl osallistujista."):"<p>Kokouksen esityslistaa ei avannut riitt\xe4v\xe4 m\xe4\xe4r\xe4 (".concat(t.pv_esityslista," kpl) osallistujista.</p>")),"0"!==t.pv_aktiivisuus&&(f+=t.pv_aktiivisuus<=u?"<p>Kokousosallistujista ".concat(t.pv_aktiivisuus," kpl on ottanut kantaa.</p>"):"<p>Kokouksen osallistujista ei ollut riitt\xe4v\xe4 m\xe4\xe4r\xe4 (".concat(t.pv_aktiivisuus," kpl) aktiivisia.</p>")),"0"!==t.pv_kesto&&(f+="true"===t.pv_kesto_toteutunut?"<p>Kokoukselle m\xe4\xe4ritelty minimikesto ".concat(t.pv_kesto," vuorokautta toteutui.</p>"):"<p>Kokoukselle m\xe4\xe4ritelty minimikesto ".concat(t.pv_kesto," vuorokautta ei toteutunut.</p>")),""!==t.pv_muu&&(f+="<p>".concat(t.pv_muu,"</p>")));var E=0!==(o=o.filter((function(e){return"3"===e.tila||"23"===e.tila}))).length?o.map((function(e){return""!==e.paatos?"<h3>"+e.title+'</h3><p style="margin-top: -10px;">'+e.paatos+"</p>":"<h3>"+e.title+"</h3>"})).join(" "):"Kokouksessa ei tehty p\xe4\xe4t\xf6ksi\xe4.",y=0!==i.length?i[0].firstname+" "+i[0].lastname:"kokouksessa ei ole puheenjohtajaa",b=Object(n.useState)("<h1>".concat(a,"</h1>").concat(k,"<h2>Kokous ").concat(d,"</h2><h2>").concat(v,"</h2><h2>Osallistujat</h2><ul>").concat(h,"</ul><p>Puheenjohtaja: ").concat(y,"<h2>P\xe4\xe4t\xf6svaltaisuus</h2>").concat(f,"<h2>Asiakohdat</h2>").concat(E)),g=Object(p.a)(b,2),j=g[0],N=g[1],O=function(){var e=JSON.stringify({call:"postdoc",id_y:t.id_y,kokousnro:t.kokousnro,type:"poytakirja",content:j,draft:0});I(e).then((function(e){alert("Kokous on p\xe4\xe4tetty ja p\xf6yt\xe4kirja tallennettu!"),window.location.reload()})).catch((function(e){return console.log("err.response",e.response)}))};return j?l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement(de,{editorContentChange:function(e){N(e)},teksti:j,className:"mb-2"}),l.a.createElement("button",{className:"float-right btn btn-outline-primary mt-1",onClick:function(){return function(){if(window.confirm("Haluatko p\xe4\xe4tt\xe4\xe4 kokouksen? Tietojen muuttaminen ei ole en\xe4\xe4 kokouksen p\xe4\xe4tetty\xe4si mahdollista")){var e=JSON.stringify({call:"paatakokous",kokousid:t.id});K(e).then((function(e){O()})).catch((function(e){return console.log("err.response",e.response)}))}}()}},"P\xe4\xe4t\xe4 kokous ja tallenna p\xf6yt\xe4kirja"),l.a.createElement("br",null)):l.a.createElement("p",null,"Loading....")},at=function(e){var t,a=Object(r.g)(),s=d(),i={month:"numeric",day:"numeric",year:"numeric"},c=Object(r.h)().yhdistys,u=Object(r.h)().kokousId,k=Object(n.useState)(),v=Object(p.a)(k,2),h=v[0],f=v[1],E=Object(n.useState)(),y=Object(p.a)(E,2),b=y[0],g=y[1],j=Object(n.useState)(),N=Object(p.a)(j,2),O=N[0],w=N[1],S=Object(n.useState)(),_=Object(p.a)(S,2),x=_[0],C=_[1],D=Object(n.useState)(),I=Object(p.a)(D,2),P=I[0],T=I[1],J=Object(n.useState)(),M=Object(p.a)(J,2),R=M[0],H=M[1],A=Object(n.useState)("asiat"),B=Object(p.a)(A,2),U=B[0],V=B[1],Y=Object(n.useState)(!0),z=Object(p.a)(Y,2),q=z[0],W=z[1];void 0===e.location.state?a.push("/assoc/".concat(c)):t=e.location.state.id_y,Object(n.useEffect)((function(){if(m()){var e=JSON.stringify({call:"getkokous",id:u});K(e).then((function(e){g(e.data)})).catch((function(e){return console.log("err.response",e.response)}));var n=JSON.stringify({call:"getosallistujat",id:u,email:s.email});F(n).then((function(e){C(e.data.filter((function(e){return"osallistuja"===e.role}))),w(e.data.filter((function(e){return"puheenjohtaja"===e.role})));var n=e.data.filter((function(e){return e.email===s.email}));n[0]?f(n[0].role):a.push({pathname:"/assoc/".concat(c),state:{yhdistys_id:t}})})).catch((function(e){return console.log("err.response",e.response)}));var l=JSON.stringify({call:"getallmembers",yhdistys:c});L(l).then((function(e){T(e.data)})).catch((function(e){return console.log("err.response",e.response)}))}}),[u,c,s.email,a]);var Z,$,G=function(e){if("poytakirja"===e&&V("poytakirja"),"paatosvaltaisuus"===e.target.name){var t=JSON.stringify({call:"getosallistujat",id:u,email:s.email});F(t).then((function(e){C(e.data.filter((function(e){return"osallistuja"===e.role}))),w(e.data.filter((function(e){return"puheenjohtaja"===e.role})))})).catch((function(e){return console.log("err.response",e.response)})),V("paatosvaltaisuus");for(var a=e.target.parentNode.querySelectorAll("button"),n=0;n<a.length;n++)a[n].classList.remove("valittu_menu");e.target.classList.add("valittu_menu")}else{for(var l=e.target.parentNode.querySelectorAll("button"),i=0;i<l.length;i++)l[i].classList.remove("valittu_menu");e.target.classList.add("valittu_menu"),V(e.target.name),"asiakirjat"===e.target.name&&W(!0)}},Q=function(e){var t,a=P.find((function(t){return t.email===e.target.name})),n=!1;"varalle"===e.target.id?window.confirm("Haluatko perua osallistujan ".concat(a.firstname," ").concat(a.lastname," osallistumisoikeuden kokoukseen?"))&&(C(x.filter((function(t){return t.email!==e.target.name}))),t=JSON.stringify({call:"poistaosallistuja",kokousid:u,email:e.target.name}),n=!0):"osallistujaksi"===e.target.id?window.confirm("Haluatko siirt\xe4\xe4 henkil\xf6n ".concat(a.firstname," ").concat(a.lastname," kokousosallistujaksi?"))&&(C(x.concat(a)),t=JSON.stringify({call:"lisaaosallistuja",kokousid:u,yhdistys:c,email:e.target.name}),n=!0):"poistu"===e.target.id&&(C(x.filter((function(e){return e.email!==s.email}))),t=JSON.stringify({call:"poistaosallistuja",kokousid:u,email:s.email}),n=!0,window.location.reload()),n&&F(t).then((function(e){alert(e.data.message)})).catch((function(e){alert(e.response.data.message),console.log("err.response",e.response)}))};return m()&&m().yhdistys===c?b&&h?"1"===b.avoinna||"puheenjohtaja"===h?(Z="asiakirjat"===U?l.a.createElement(Ge,{kokous:b,yhdistys:c,setShowComponent:V,setShowTable:W,showTable:q}):"asiat"===U?l.a.createElement(ze,{puheenjohtaja:"puheenjohtaja"===h,edit:"1"!==b.loppu,kokousid:u}):"osallistujat"===U?l.a.createElement(Qe,{osallistujat:x,jasenet:P,puheenjohtaja:O,kokousRooli:h,handleOsallistujatClick:Q,kokous:b}):"kokousaika"===U?l.a.createElement(Xe,{kokous:b,handleVaihdaKokousaika:function(e){if("object"===typeof e&&Date.parse(e)!==Date.parse(b.endDate)){var t=e.toISOString().split("T")[0];if(window.confirm("Haluatko vaihtaa kokouksen uudeksi p\xe4\xe4ttymisp\xe4iv\xe4ksi ".concat(new Date(t).toLocaleDateString("fi-FI",{month:"numeric",day:"numeric",year:"numeric"}),"?"))){g(Object(le.a)(Object(le.a)({},b),{},{endDate:t}));var a=JSON.stringify({call:"vaihdapvm",kokousid:u,enddate:e});K(a).then((function(e){alert(e.data.message)})).catch((function(e){return alert(e.response.data.message)}))}}else alert("M\xe4\xe4rit\xe4 uusi p\xe4\xe4ttymisp\xe4iv\xe4 ennen tallentamista")}}):"paatosvaltaisuus"===U?l.a.createElement(et,{kokous:b,osallistujat:x,puheenjohtaja:O}):"poytakirja"===U?l.a.createElement(tt,{kokous:b,yhdistys:c,osallistujat:x,puheenjohtaja:O,paatokset:R}):l.a.createElement("p",null,"error... "),$=Date.parse(b.endDate)<new Date||"1"===b.loppu?"Kokous on p\xe4\xe4ttynyt":Date.parse(b.endDate)>new Date&&Date.parse(b.startDate)<new Date?"Kokous on k\xe4ynniss\xe4":"Kokous ei ole viel\xe4 alkanut",l.a.createElement("div",{className:"mx-auto mt-5"},l.a.createElement("div",{className:"mx-3"},l.a.createElement("h2",null,c),l.a.createElement(o.b,{to:{pathname:"/assoc/".concat(c),state:{id_y:t}}},"Yhdistyksen p\xe4\xe4sivu"),l.a.createElement("hr",null),l.a.createElement("div",{className:"mb-3"},l.a.createElement("h4",null,b.otsikko," "),"1"===b.avoinna?l.a.createElement(l.a.Fragment,null):l.a.createElement("div",null,l.a.createElement("h5",{style:{color:"red",fontWeight:"bold"}},"Kokoustila on suljettu."),l.a.createElement("p",{style:{marginTop:"-5px",marginBottom:"12px",cursor:"pointer"},onClick:function(){return function(e){if(window.confirm("Haluatko avata kokoustilan osallistujille?")){var t=JSON.stringify({call:"openkokous",id:u});K(t).then((function(e){alert(e.data.message),window.location.reload()})).catch((function(e){alert(e.response.data.message)}))}}()}},"Avaa kokoustila osallistujille."))),l.a.createElement("div",{className:"float-left",style:{display:"grid",gridTemplateColumns:"1fr 2fr",lineHeight:"8px",whiteSpace:"nowrap"}},l.a.createElement("p",null,"Puheenjohtaja:"),0!==O.length?l.a.createElement("p",null,O[0].firstname," ",O[0].lastname," "):l.a.createElement("p",null,"Kokoukselle ei ole asetettu puheenjohtajaa. "),l.a.createElement("p",{style:{marginRight:"10px"}},"Kokouksen numero: "),l.a.createElement("p",null," ",b.kokousnro,"/",new Date(b.startDate).toLocaleDateString("fi-FI",{year:"numeric"})),l.a.createElement("p",null,"Kokouksen alku:"),l.a.createElement("p",null,new Date(b.startDate).toLocaleDateString("fi-FI",i)),l.a.createElement("p",null,"Kokouksen p\xe4\xe4t\xf6s:"),l.a.createElement("p",null,new Date(b.endDate).toLocaleDateString("fi-FI",i)),l.a.createElement("small",null,"(",$,")")),l.a.createElement("div",{className:"mt-4 float-right"},"0"===b.loppu?l.a.createElement("button",{className:"btn btn-danger mb-2 ml-2",type:"button",title:"Peru osallistumisesi kokoukseen",id:"poistu","data-toggle":"modal","data-target":"#poistuModal"},"Peru osallistumisesi"):l.a.createElement(l.a.Fragment,null),l.a.createElement(nt,{handlePJPoistuuKokouksesta:function(e){C(x.filter((function(e){return e.email!==s.email})));var t=JSON.stringify({call:"poistaosallistuja",kokousid:u,email:s.email});F(t).then((function(e){alert("Poistuit kokouksesta")})).catch((function(e){alert(e.response.data.message),console.log("err.response",e.response)}));var a=JSON.stringify({call:"pjpoistui",kokousid:u,syy:e,pv:10});F(a).then((function(e){window.location.reload()})).catch((function(e){return console.log("err.response",e.response)}))},handleOsallistujatClick:Q,kokousRooli:h})),l.a.createElement("div",{className:"clearfix"})),l.a.createElement("hr",null),l.a.createElement("div",{className:"d-sm-flex second_nav"},l.a.createElement("button",{className:"text-primary valittu_menu",onClick:G,name:"asiat"},"Asiakohdat"),l.a.createElement("button",{className:"text-primary",onClick:G,name:"asiakirjat"},"Asiakirjat"),l.a.createElement("button",{className:"text-primary",onClick:G,name:"osallistujat"},"Osallistujat"),"puheenjohtaja"===h&&"0"===b.loppu?l.a.createElement(l.a.Fragment,null,"     ",l.a.createElement("button",{className:"text-primary",onClick:G,name:"kokousaika"},"Kokousaika")):l.a.createElement(l.a.Fragment,null),l.a.createElement("button",{className:"text-primary",onClick:G,name:"paatosvaltaisuus"},"P\xe4\xe4t\xf6svaltaisuus"),"0"===b.loppu&&"puheenjohtaja"===h?l.a.createElement("button",{className:"text-primary",onClick:function(e){var t=JSON.stringify({call:"getpaatokset",kokousid:u});K(t).then((function(e){H(e.data)})).catch((function(e){return console.log("err.response",e.response)}));var a=JSON.stringify({call:"getosallistujat",id:u,email:s.email});F(a).then((function(e){C(e.data.filter((function(e){return"osallistuja"===e.role}))),w(e.data.filter((function(e){return"puheenjohtaja"===e.role})))})).then((function(){G("poytakirja")})).catch((function(e){return console.log("error response: ",e.response)}));for(var n=e.target.parentNode.querySelectorAll("button"),l=0;l<n.length;l++)n[l].classList.remove("valittu_menu");e.target.classList.add("valittu_menu")},name:"poytakirja"},"P\xf6yt\xe4kirja"):l.a.createElement(l.a.Fragment,null)),Z)):(a.push("/assoc/".concat(c)),l.a.createElement(l.a.Fragment,null)):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... "):(a.push("/assoc/".concat(c)),l.a.createElement(l.a.Fragment,null))},nt=function(e){var t=e.handlePJPoistuuKokouksesta,a=e.handleOsallistujatClick,s=e.kokousRooli,i=Object(n.useState)(""),o=Object(p.a)(i,2),r=o[0],c=o[1];return l.a.createElement("div",{className:"modal fade",id:"poistuModal",tabIndex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"ModalLabel"},"Poistu kokouksesta"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("p",null,"Haluatko poistua kokouksesta?"),"puheenjohtaja"===s?l.a.createElement("div",{className:"form-group"},l.a.createElement("textarea",{className:"form-control",rows:"2",name:"syy",onChange:function(e){c(e.target.value)},value:r}),l.a.createElement("small",{className:"form-text text-muted"},"Voit kirjoittaa kentt\xe4\xe4n syyn kokouksesta poistumiseen.")):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"modal-footer"},"puheenjohtaja"===s?l.a.createElement("button",{type:"button",className:"btn btn-outline-primary","data-dismiss":"modal",id:"poistu",onClick:function(){return t(r)}},"Poistu kokouksesta"):l.a.createElement("button",{type:"button",className:"btn btn-outline-primary","data-dismiss":"modal",id:"poistu",onClick:a},"Poistu kokouksesta"),l.a.createElement("button",{type:"button",className:"btn btn-outline-secondary","data-dismiss":"modal"},"Peruuta")))))};var lt=function(){return l.a.createElement("div",null,l.a.createElement(o.a,null,l.a.createElement(h,null),l.a.createElement("div",{className:"container",style:{width:"1100px",maxWidth:"100%",margin:"0 auto",padding:"0"}},l.a.createElement(r.d,null,l.a.createElement(r.b,{exact:!0,path:"/",component:g}),l.a.createElement(r.b,{path:"/login",component:R}),l.a.createElement(r.b,{path:"/register",component:U}),l.a.createElement(k,{path:"/userpage",component:q}),l.a.createElement(k,{path:"/assoc/:yhdistys",component:ae}),l.a.createElement(k,{path:"/uusikokous/:yhdistys",component:qe}),l.a.createElement(k,{path:"/kokous/:yhdistys/:kokousId",component:at})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(lt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=62}},[[129,1,2]]]);
//# sourceMappingURL=main.0c9f0cd0.chunk.js.map