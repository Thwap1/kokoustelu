(this["webpackJsonpkokousfront_0.2"]=this["webpackJsonpkokousfront_0.2"]||[]).push([[0],{108:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){},190:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(19),o=a.n(s),i=a(8),r=a(12),c=a(97),u=function(e,t){localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("token",t)},m=function(){var e=localStorage.getItem("role");return e?JSON.parse(e):null},d=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null};function k(e){var t=e.component,a=Object(c.a)(e,["component"]);return l.a.createElement(r.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?l.a.createElement(t,e):l.a.createElement(r.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}a(108),a(109);var p=a(4),v=a(199);function h(){var e,t=Object(n.useState)(!1),a=Object(p.a)(t,2),s=a[0],o=a[1],c=Object(r.g)(),u=function(){var e="";e=s?"0":!s&&d()?"100px":"150px",document.getElementById("dropMenu").style.height=e,o(!s)};return e=d()?l.a.createElement(l.a.Fragment,null,l.a.createElement(i.b,{style:{color:"white",width:"200px"},className:"nav-link",to:"/userpage"},"Omat sivut"),l.a.createElement("p",{onClick:function(){window.confirm("Haluatko kirjautua ulos?")&&(c.push("/"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("role"),window.location.reload())},style:{color:"white",width:"250px",cursor:"pointer"},className:"nav-link"},"Kirjaudu ulos")):l.a.createElement(l.a.Fragment,null,l.a.createElement(i.b,{style:{color:"white",width:"200px"},className:"nav-link",to:"/"},"Etusivu"),l.a.createElement(i.b,{style:{color:"white",width:"200px"},className:"nav-link",to:"/login"},"Kirjaudu"),l.a.createElement(i.b,{style:{color:"white",width:"100px"},className:"nav-link",to:"/register"},"Rekister\xf6idy")),l.a.createElement("div",{className:"navbar navbar-expand",style:b,onClick:u},l.a.createElement("p",{className:"MenuText mt-2 ml-5"},"Menu",l.a.createElement(v.a,{size:30,className:"ml-3 fa-5x"})),l.a.createElement("div",{id:"dropMenu",style:y,onClick:u},s?l.a.createElement(l.a.Fragment,null,e):l.a.createElement(l.a.Fragment,null)))}var f,E,y={marginTop:"75px",fontFamily:"Lato, sans-serif",height:"0%",width:"100%",position:"absolute",zIndex:"1",top:"0",left:"0",backgroundColor:"rgba(44,62,80, 0.9)",transition:"0.5s"},b={color:"white",backgroundColor:"rgba(44,62,80, 0.9)",height:"75px",padding:"10px",position:"relative",width:"100vw !important",marginLeft:"calc(-50vw + 50%)"},g=function(){return l.a.createElement("div",{className:"col-md-10 mx-auto mt-5"},l.a.createElement("div",{className:"jumbotron"},l.a.createElement("h1",{className:"display-3"},"Hello, world!"),l.a.createElement("p",{className:"lead"},"T\xe4h\xe4n tulisi tehd\xe4 sovelluksen etusivu."),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("p",null,"Se voi kuvailla projektin ideaa, syit\xe4 miksi se on tehty, mit\xe4 sill\xe4 voi tehd\xe4 ja mit\xe4 sen toteutuksessa on k\xe4ytetty. Voisin laittaa vaikka linkin my\xf6s kirjautumiseen ja ehk\xe4 my\xf6s rekister\xf6itymiseen."),l.a.createElement("hr",null),l.a.createElement(i.b,{to:"/login",className:"btn btn-outline-primary"},"Kirjaudu")))},j=a(17),N=a(46),O=a.n(N),w=a(13),S=a.n(w),x="http://localhost/kokousapi/",_=function(e){return S.a.post("".concat(x,"data.php"),e,{withCredentials:!0}).then((function(e){return e}))},C=function(e){return S.a.post("".concat(x,"auth.php"),e).then((function(e){return e}))},D=function(e){return S.a.post("".concat(x,"auth.php"),e,{withCredentials:!0}).then((function(e){return e}))},L=function(e){return S.a.post("".concat(x,"assoc.php"),e).then((function(e){return e}))},F=function(e){return S.a.post("".concat(x,"kokous.php"),e).then((function(e){return e}))},K=function(e){return S.a.post("".concat(x,"osallistujat.php"),e).then((function(e){return e}))},T=function(e){return S.a.post("".concat(x,"documents.php"),e).then((function(e){return e}))},P=a(95),M=a(57),J=a(96),I=function(e){var t=e.text,a=e.placement,n=e.heading,s=e.btnText,o=e.variant,i=e.style;return l.a.createElement(l.a.Fragment,null,l.a.createElement(P.a,{trigger:"click",key:a,placement:a,overlay:l.a.createElement(M.a,{id:"popover-positioned-".concat(a)},l.a.createElement(M.a.Title,{as:"h3"},n),l.a.createElement(M.a.Content,{className:"text-justify p-3"},t))},l.a.createElement(J.a,{variant:o,style:i},s)))},R=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)(""),c=Object(p.a)(o,2),m=c[0],d=c[1],k=Object(r.g)(),v=function(e){"email"===e.target.name?s(e.target.value):"password"===e.target.name&&d(e.target.value)};return l.a.createElement("div",{className:"col-md-6 m-auto"},l.a.createElement("div",{className:"card card-body mt-5"},l.a.createElement("h2",{className:"text-center"},"Kirjaudu"),l.a.createElement("form",{className:"ml-2 mt-4",onSubmit:function(e){if(e.preventDefault(),""===a||""===m)alert("Anna k\xe4ytt\xe4j\xe4tunnus ja salasana!");else{var t=JSON.stringify({call:"applogin",email:a,password:m});D(t).then((function(e){var t={firstname:e.data.firstname,lastname:e.data.lastname,email:a};u(t,e.data.token),k.push({pathname:"/userpage",state:{login:!0}})})).catch((function(e){alert(e)}))}}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"S\xe4hk\xf6posti"),l.a.createElement("input",{type:"email",className:"form-control",name:"email",onChange:v})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Salasana"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:v})),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Kirjaudu"))),l.a.createElement("div",{className:"text-right"},l.a.createElement("p",null,l.a.createElement(O.a,{appId:"1500476053466452",autoLoad:!1,fields:"first_name, last_name,email,picture",callback:function(e){if(e){var t=JSON.stringify({call:"fblogin",email:e.email,fb_id:e.id});C(t).then((function(t){var a={firstname:e.first_name,lastname:e.last_name,email:e.email};u(a,t.data.token),k.push({pathname:"/userpage",state:{login:!0}})})).catch((function(e){alert(e.response.data.message)}))}else alert("Kirjautuminen ep\xe4onnistui")},render:function(e){return l.a.createElement("button",{onClick:e.onClick,className:"btn btn-outline"},"Kirjaudu Facebook-tunnuksilla ",l.a.createElement(j.c,null))}})),l.a.createElement("hr",null),l.a.createElement("p",{className:"mr-3",style:{lineHeight:"25px"}},"Haluatko rekister\xf6ity\xe4 k\xe4ytt\xe4j\xe4ksi? ",l.a.createElement(i.b,{to:"/register",className:"ml-1"},"Rekister\xf6idy"),l.a.createElement("br",null),"  "),l.a.createElement("p",{style:{marginTop:"-20px"}}," Tarvitsetko apua? ",l.a.createElement(I,{heading:"Kirjautuminen",text:"Kirjaudu j\xe4rjestelm\xe4\xe4n s\xe4hk\xf6postin ja salasanan avulla mik\xe4li k\xe4ytit niit\xe4 rekister\xf6ityess\xe4si. Jos rekister\xf6idyit Facebook-tunnuksilla, k\xe4yt\xe4 niit\xe4 my\xf6s kirjautumiseen. Mik\xe4li unohdit tunnuksesi, voit saada ne paikasta x.",btnText:"Klikkaa t\xe4st\xe4!",placement:"left",variant:"link",style:{marginBottom:"3px",marginLeft:"-10px"}})," "),l.a.createElement("p",{className:"mr-3"}))))},H=function(e){var t=e.fbRes,a=Object(n.useState)(t.first_name),s=Object(p.a)(a,2),o=s[0],c=s[1],u=Object(n.useState)(t.last_name),m=Object(p.a)(u,2),d=m[0],k=m[1],v=Object(n.useState)(t.email),h=Object(p.a)(v,2),f=h[0],E=h[1],y=Object(r.g)(),b=function(e){"firstname"===e.target.name?c(e.target.value):"lastname"===e.target.name?k(e.target.value):"email"===e.target.name&&E(e.target.value)};return l.a.createElement("div",{className:"col-md-8 mx-auto mt-5"},l.a.createElement("h4",null,"Terve ",o,"!"),l.a.createElement("p",null,"Tarkasta ennen rekister\xf6itymist\xe4 ovatko henkil\xf6tietosi ja s\xe4hk\xf6postiosoitteesi oikein."),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=t.id;if(""!==o&&""!==d&&""!==f&&""!==a){var n=JSON.stringify({call:"fbreg",firstname:o,lastname:d,email:f,fb_id:a});C(n).then((function(e){alert("Rekister\xf6ityminen onnistui! Kirjauduttuasi voit liitty\xe4 yhdistyksen alueelle ja tarkastella yhdistyksen kokousasioita."),y.push("/login")})).catch((function(e){alert(e.response.data.message),window.location.reload()}))}else alert("Tarkasta ett\xe4 kaikki kent\xe4t on t\xe4ytetty!")}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Etunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"firstname",onChange:b,value:o})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Sukunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"lastname",onChange:b,value:d})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"S\xe4hk\xf6posti"),l.a.createElement("input",{type:"email",className:"form-control",name:"email",onChange:b,value:f})),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Rekister\xf6idy")),l.a.createElement("p",{className:"text-right"},"Haluatko valita rekister\xf6itymistavan uudelleen?",l.a.createElement(i.b,{className:"ml-1",to:"/register",onClick:function(){return window.location.reload()}},"Takaisin"),l.a.createElement("br",null),"Onko sinulla jo k\xe4ytt\xe4j\xe4 tili?",l.a.createElement(i.b,{to:"/login",className:"ml-1"},"Kirjaudu"))))},A=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)(""),c=Object(p.a)(o,2),u=c[0],m=c[1],d=Object(n.useState)(""),k=Object(p.a)(d,2),v=k[0],h=k[1],f=Object(n.useState)(""),E=Object(p.a)(f,2),y=E[0],b=E[1],g=Object(n.useState)(""),j=Object(p.a)(g,2),N=j[0],O=j[1],w=Object(r.g)(),S=function(e){"firstname"===e.target.name?s(e.target.value):"lastname"===e.target.name?m(e.target.value):"email"===e.target.name?h(e.target.value):"password"===e.target.name?b(e.target.value):"password2"===e.target.name&&O(e.target.value)};return l.a.createElement("div",{className:"col-md-6 m-auto"},l.a.createElement("div",{className:"card card-body mt-5"},l.a.createElement("h4",{className:"text-center mb-4"},"Rekister\xf6idy k\xe4ytt\xe4j\xe4ksi"),l.a.createElement("p",null,"Lis\xe4\xe4 alle henkil\xf6tietosi, s\xe4hk\xf6postiosoitteesi ja salasana."),l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),""===a||""===u||""===v||""===y||""===N)alert("T\xe4yt\xe4 kaikki kent\xe4t!");else if(y!==N)alert("Tarkasta salasanat!");else{var t=JSON.stringify({call:"appreg",firstname:a,lastname:u,email:v,password:y});D(t).then((function(e){alert("Rekister\xf6ityminen onnistui! Kirjauduttuasi voit liitty\xe4 yhdistyksen alueelle ja tarkastella yhdistyksen kokousasioita."),w.push("/login")})).catch((function(e){alert(e.response.data.message),window.location.reload()}))}}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Etunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"firstname",onChange:S,value:a})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Sukunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"lastname",onChange:S,value:u})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"S\xe4hk\xf6posti"),l.a.createElement("input",{type:"email",className:"form-control",name:"email",onChange:S,value:v})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Salasana"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:S,value:y})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Salasana uudelleen"),l.a.createElement("input",{type:"password",className:"form-control",name:"password2",onChange:S,value:N})),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Rekister\xf6idy")),l.a.createElement("p",{className:"text-right"},"Haluatko valita rekister\xf6itymistavan uudelleen?",l.a.createElement(i.b,{className:"ml-1",to:"/register",onClick:function(){return window.location.reload()}},"Takaisin"),l.a.createElement("br",null),"Onko sinulla jo k\xe4ytt\xe4j\xe4 tili? ",l.a.createElement(i.b,{to:"/login",className:"ml-1"},"Kirjaudu")))))},B=function(){return l.a.createElement("div",{style:{marginTop:"15%"},className:"row h-100 justify-content-center"},l.a.createElement("div",{className:"loader"}))},U=function(){var e=Object(n.useState)(),t=Object(p.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)({}),r=Object(p.a)(o,2),c=r[0],u=r[1];return a?a?l.a.createElement(l.a.Fragment,null," ","fb"===a?l.a.createElement(H,{fbRes:c}):l.a.createElement(A,null)):l.a.createElement(B,null):l.a.createElement("div",{className:"col-md-6 mx-auto mt-5"},l.a.createElement("div",{className:"card card-body mt-5"},l.a.createElement("h4",{className:"text-center mb-4"},"Rekister\xf6idy k\xe4ytt\xe4j\xe4ksi"),l.a.createElement("p",{className:" text-justify "},"Palvelua voi k\xe4ytt\xe4\xe4 luomalla sovelluskohtaisen tunnuksen tai rekister\xf6itym\xe4ll\xe4 Facebook-tunnuksien avulla.",l.a.createElement("br",null),l.a.createElement("br",null),"Jos olet jo rekister\xf6itynyt ja haluat kirjautua, p\xe4\xe4set kirjautumissivulle  ",l.a.createElement(i.b,{to:"/login"},"t\xe4st\xe4.")),l.a.createElement("hr",null),l.a.createElement("div",{className:"row"},l.a.createElement("button",{onClick:function(e){"app"===e.target.id&&s("app")},id:"app",className:"btn btn-outline mr-2"},"Rekister\xf6i sovelluskohtainen tunnus"),l.a.createElement(O.a,{appId:"1500476053466452",autoLoad:!1,fields:"first_name, last_name,email,picture",callback:function(e){u(e),s("fb")},render:function(e){return l.a.createElement("button",{onClick:e.onClick,className:"btn btn-outline"},"Rekister\xf6idy Facebook-tunnuksilla  ",l.a.createElement(j.c,null))}}))))},V=a(92),Y=(a(128),function(e){var t=e.yhdistykset,a=e.setShowForm,s=Object(n.useState)(""),o=Object(p.a)(s,2),i=o[0],r=o[1],c=Object(n.useState)(""),u=Object(p.a)(c,2),m=u[0],k=u[1],v=function(e){"yhdistys"===e.target.name?r(e.target.value):"password"===e.target.name&&k(e.target.value)},h=function(){var e=d(),t=JSON.stringify({call:"joinyhdistys",email:e.email,yhdistys:i});console.log("body",t),L(t).then((function(e){console.log("(setnewmember: ",e.data),alert(e.data.message),window.location.reload()})).catch((function(e){alert(e.response.data.message),e.response.data.message.includes("Olet jo yhdistyksen")&&window.location.reload()}))};return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),i&&m){var t=JSON.stringify({call:"checkyhdistystiedot",name:i,password:m});L(t).then((function(e){h()})).catch((function(e){alert(e.response.data.message)}))}else alert("T\xe4yt\xe4 molemmat kent\xe4t!")}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Yhdistyksen nimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"yhdistys",onChange:v,value:i})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Yhdistyksen tunnus"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:v,value:m})),l.a.createElement("div",{className:"form-group text-right"},t.length>0?l.a.createElement("button",{type:"button",onClick:function(){return a(!0)},className:"btn btn-outline-secondary mt-3 mx-2"},"Palaa takaisin"):l.a.createElement(l.a.Fragment,null),l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Rekister\xf6idy"))))}),z=function(e){var t=e.yhdistykset,a=e.setShowForm;return l.a.createElement("div",null,l.a.createElement("button",{className:"mb-4 btn btn-outline-primary mx-3",onClick:function(){return a(!1)}},"Liity yhdistykseen"),l.a.createElement("table",{className:"table table-hover mt-4"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Yhdistys"))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement(i.b,{className:"mt-4 text-left text-dark",style:{textDecoration:"none"},to:{pathname:"/assoc/".concat(e.name),state:{id:e.id}}},l.a.createElement("div",{className:"yhdistysLink"},e.name)))})))))},q=function(e){var t,a=d(),s=Object(n.useState)(!(void 0===e.location.state||!e.location.state.login)),o=Object(p.a)(s,2),i=o[0],r=o[1],c=Object(n.useState)([]),u=Object(p.a)(c,2),m=u[0],k=u[1],v=Object(n.useState)(!0),h=Object(p.a)(v,2),f=h[0],E=h[1];return console.log("isModalOpen",i),Object(n.useEffect)((function(){var e=JSON.stringify({call:"getmemberships",email:a.email});L(e).then((function(e){console.log("res.data",e.data),k(e.data)})).catch((function(e){e.response.data&&console.log("err.response.data",e.response.data)}))}),[a.email]),t=m.length>0&&f?"Alla n\xe4et yhdistykset, joiden kokoustilaan olet liittynyt. Painamalla nappia saat n\xe4kyviisi kaavakkeen, jolla voit lis\xe4t\xe4 itsesi yhdistyksen kokoustilan k\xe4ytt\xe4j\xe4ksi.":m.length>0&&!f?"Voit liitt\xe4\xe4 itsesi yhdistyksen kokoustilaan antamalla yhdistyksen nimen ja sovelluskohtaisen salasanan. Saat tarvittavan tunnuksen sovelluksen p\xe4\xe4k\xe4ytt\xe4j\xe4lt\xe4.":"Et ole viel\xe4 rekister\xf6itynyt yhdistysten kokoustilan k\xe4ytt\xe4j\xe4ksi. Alla olevan kent\xe4n avulla voit liitt\xe4\xe4 itsesi yhdistyksen kokoustilaan antamalla yhdistyksen nimen ja sovelluskohtaisen salasanan. Saat tarvittavan tunnuksen sovelluksen p\xe4\xe4k\xe4ytt\xe4j\xe4lt\xe4.",l.a.createElement("div",{style:{width:"100%",maxWidth:"1100px",padding:"0",marginTop:"50px"}},l.a.createElement("h4",{className:"px-3"},"Moi ",a.firstname,"!"),l.a.createElement("hr",null),l.a.createElement("p",{className:"px-3"},t),l.a.createElement("hr",null),m.length>0&&f?l.a.createElement(z,{yhdistykset:m,setShowForm:E}):l.a.createElement(Y,{yhdistykset:m,setShowForm:E}),l.a.createElement(W,{isModalOpen:i,setIsModalOpen:r}))},W=function(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=d();return console.log("user",n),l.a.createElement(V.a,{visible:t,onClose:function(){return a(!1)},animation:"door",duration:400,height:150,width:300},l.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"},onClick:function(){return a(!1)}},l.a.createElement("h5",{style:{position:"absolute",top:"40%",left:"25%"}},"Tervetuloa ",n.firstname,"! ")))},Z=a(39),$=function(e){var t=e.pvm,a=void 0===t?null:t,n=e.alku,s=void 0===n?"false":n,o=e.kk,i=void 0===o?"1":o,r=e.pv,c=void 0===r?"1":r;null!=a&&(i=(a=new Date(a)).getMonth()+1,c=a.getDate());var u=["Tammi","Helmi","Maalis","Huhti","Touko","Kes\xe4","Hein\xe4","Elo","Syys","Loka","Marras","Joulu"][parseInt(i-1)]+"kuu";return l.a.createElement("div",{className:s?"paivays_alku paivays":"paivays_loppu paivays"},l.a.createElement("div",{className:"kk"},u),l.a.createElement("div",{className:"paivays_nro"},c))},G=function(e){var t=e.kokous,a=e.yhdistys,s=e.yhdistys_id,o={year:"numeric"},r=Object(n.useState)(!1),c=Object(p.a)(r,2),u=c[0],m=c[1];return u?l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... "):l.a.createElement("div",{className:"bg"},l.a.createElement("div",null,t.map((function(e){return l.a.createElement(i.b,{key:e.id,className:"text-primary",style:{pointerEvents:"1"===e.avoinna||"puheenjohtaja"===e.role?"auto":"none",textDecoration:"none"},to:{pathname:"/kokous/".concat(a,"/").concat(e.id),state:{id_y:s}},title:"Tarkastele kokouksen tietoja"},l.a.createElement("div",{className:"1"===e.avoinna||"puheenjohtaja"===e.role?"taulu":"taulu disable",key:e.kokousnro},l.a.createElement($,{pvm:e.startDate,alku:!1}),l.a.createElement($,{pvm:e.endDate,alku:!1}),l.a.createElement("div",{className:"tauluAlku tauluotsikko"},e.otsikko),l.a.createElement("div",{className:"taulukokousnro"},e.kokousnro,"/",new Date(e.endDate).toLocaleDateString("fi-FI",o)),"1"===e.avoinna?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"taulutila"},"kokoustila on suljettu"),"puheenjohtaja"===e.role?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"taulunapit"},l.a.createElement("div",{style:{whiteSpace:"nowrap"}},l.a.createElement("button",{onClick:function(t){t.preventDefault(),function(e){if(window.confirm("Haluatko avata kokoustilan osallistujille?")){m(!0);var t=JSON.stringify({call:"openkokous",id:e});console.log("body",t),F(t).then((function(e){alert(e.data.message),window.location.reload()})).catch((function(e){alert(e.response.data.message)}))}}(e.id)},id:e.id,title:"Avaa kokoustila",className:"btn btn-outline-primary",style:{marginLeft:"5px"}},l.a.createElement(j.f,null))))):l.a.createElement(l.a.Fragment,null))))}))))},Q=function(e){var t,a=e.kokoukset,s=e.showComponent,o=e.yhdistys,i=e.yhdistys_id,r=Object(n.useState)([]),c=Object(p.a)(r,2),u=c[0],m=c[1],d=Object(n.useState)([]),k=Object(p.a)(d,2),v=k[0],h=k[1],f=Object(n.useState)([]),E=Object(p.a)(f,2),y=E[0],b=E[1];return console.log("kokoukset",a),Object(n.useEffect)((function(){a&&a.map((function(e){return Date.parse(e.endDate)<new Date?b((function(t){return[].concat(Object(Z.a)(t),[e])})):Date.parse(e.endDate)>new Date&&Date.parse(e.startDate)<new Date?h((function(t){return[].concat(Object(Z.a)(t),[e])})):m((function(t){return[].concat(Object(Z.a)(t),[e])})),null}))}),[a]),t="kaynnissa"===s?l.a.createElement(l.a.Fragment,null,0===v.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Yhdistyksell\xe4 ei ole k\xe4ynniss\xe4 olevia kokouksia")):l.a.createElement(l.a.Fragment,null,l.a.createElement(G,{kokous:v,yhdistys:o,status:"kaynnissa",yhdistys_id:i}))):"menneet"===s?l.a.createElement(l.a.Fragment,null,0===y.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Yhdistyksell\xe4 ei ole menneit\xe4 kokouksia")):l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"mt-4"},"P\xe4\xe4ttyneet kokoukset"),l.a.createElement(G,{kokous:y,yhdistys:o,status:"paattynyt",yhdistys_id:i}))):"tulevat"===s?l.a.createElement(l.a.Fragment,null,0===u.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Yhdistyksell\xe4 ei ole tulevia kokouksia")):l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"mt-4"},"Tulevat kokoukset"),l.a.createElement(G,{kokous:u,yhdistys:o,status:"tuleva",yhdistys_id:i}))):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{className:"mt-2"},t)},X=function(e){var t=e.members;return l.a.createElement("div",{style:{marginTop:"4px"}},l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("td",null,"Etunimi"),l.a.createElement("td",null,"Sukunimi"),l.a.createElement("td",null,"S\xe4hk\xf6postiosoite"))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email))})))))},ee=function(e){var t,a=e.kokoukset,s=e.members,o=e.yhdistys,i=e.yhdistys_id,c=Object(r.g)(),u=Object(n.useState)("kaynnissa"),d=Object(p.a)(u,2),k=d[0],v=d[1],h=l.a.createElement("p",null,"Valikon kautta voit valita haluamasi n\xe4kym\xe4n. Voit luoda uuden kokouksen painamalla uusi kokous -n\xe4pp\xe4int\xe4. N\xe4et my\xf6s tulevat ja k\xe4ynniss\xe4 olevat kokoukset sek\xe4 menneiden kokouksien asiat valikon n\xe4pp\xe4imien kautta. Palveluun rekister\xf6ityneet j\xe4senet saat n\xe4kyville yhdistyksen j\xe4senet -n\xe4pp\xe4int\xe4 painamalla. "),f=function(e){for(var t=e.target.parentNode.querySelectorAll("button"),a=0;a<t.length;a++)t[a].classList.remove("valittu_menu");v(e.target.name),e.target.classList.add("valittu_menu")};return t="tulevat"===k||"menneet"===k||"kaynnissa"===k?l.a.createElement(Q,{kokoukset:a,showComponent:k,yhdistys:o,yhdistys_id:i}):"jasenet"===k?l.a.createElement(X,{members:s}):l.a.createElement(l.a.Fragment,null),m()&&m().yhdistys===o&&a?l.a.createElement("div",null,l.a.createElement("div",{className:"d-sm-flex justify-content-center second_nav"},l.a.createElement("button",{className:"text-primary valittu_menu",name:"kaynnissa",onClick:f},"Kokoukset"),l.a.createElement("button",{className:"text-primary ",name:"tulevat",onClick:f},"Tulevat kokoukset"),l.a.createElement("button",{className:"text-primary ",name:"menneet",onClick:f},"P\xe4\xe4ttyneet kokoukset"),l.a.createElement("button",{className:"text-primary ",name:"jasenet",onClick:f},"J\xe4senlista"),l.a.createElement(I,{heading:"Yhdistyksen etusivu",text:h,btnText:"Selityst\xe4",placement:"left",variant:"btn btn-outline-danger btn-sm mx-1"})),t):m()?(c.push("/userpage"),null):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... ")},te=function(e){var t,a=Object(n.useState)(),s=Object(p.a)(a,2),o=s[0],c=s[1],u=Object(n.useState)([]),k=Object(p.a)(u,2),v=k[0],h=k[1],f=Object(r.h)().yhdistys,E=Object(n.useState)(""),y=Object(p.a)(E,2),b=y[0],g=y[1],j=d(),N=Object(r.g)();return void 0===e.location.state?N.push("/userpage"):t=e.location.state.id_y,Object(n.useEffect)((function(){var e=JSON.stringify({call:"checkmember",email:j.email,name:f});if(L(e).then((function(e){g(e.data.role),function(e){localStorage.setItem("role",JSON.stringify(e))}({yhdistys:f,role:e.data.role})})).catch((function(){return N.push("/userpage")})),b){var t=JSON.stringify({call:"getkokoukset",yhdistys:f,email:j.email});F(t).then((function(e){c(e.data.filter((function(e){return"1"===e.valmis})))})).catch((function(e){return console.log("err.response",e.response)}));var a=JSON.stringify({call:"getallmembers",yhdistys:f});L(a).then((function(e){h(e.data)})).catch((function(e){return console.log("err.response",e.response)}))}}),[N,j.email,f,b]),m()&&o?l.a.createElement("div",{style:{width:"100%",maxWidth:"1100px",padding:"0",marginTop:"50px"}},l.a.createElement("h2",{className:"px-3"},f),l.a.createElement("h4",{className:"px-3"},"Yhdistyksen sivu"),"admin"===m().role?l.a.createElement(i.b,{className:"px-3",to:{pathname:"/uusikokous/".concat(f),state:{id_y:t}}},"Luo uusi kokous"):l.a.createElement(l.a.Fragment,null),l.a.createElement("hr",null),l.a.createElement(ee,{kokoukset:o,members:v,yhdistys:f,yhdistys_id:t})):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... ")},ae=a(16),ne=a(7),le=a(30),se=a.n(le),oe=(a(59),a(53)),ie=function(e){var t=e.setShowComponent,a=e.handlePerustiedotChange,n=e.saveKokousDraft,s=e.perustiedot,o=e.setPerustiedot;Object(le.registerLocale)("fi",oe.a);var i=s.avoinna?"Avoinna":"Kiinni";return s?l.a.createElement("div",{className:"col-md-6  m-auto"},l.a.createElement("h5",{className:"mb-4"},"Kokouksen perustiedot"),l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Otsikko"),l.a.createElement("input",{type:"text",className:"form-control",name:"otsikko",onChange:a,value:s.otsikko})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kokouksen numero"),l.a.createElement("input",{type:"text",className:"form-control",name:"kokousnro",onChange:a,value:s.kokousNro||""})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kokous alkaa"),l.a.createElement("br",null),l.a.createElement(se.a,{name:"startdate",locale:"fi",dateFormat:"dd/MM/yyyy",className:"form-control",selected:s.startDate,onChange:function(e){return o(Object(ne.a)(Object(ne.a)({},s),{},{startDate:e}))},selectsStart:!0,startDate:s.startDate,endDate:s.endDate})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kokous p\xe4\xe4ttyy"),l.a.createElement("br",null),l.a.createElement(se.a,{locale:"fi",dateFormat:"dd/MM/yyyy",className:"form-control",selected:s.endDate,onChange:function(e){return o(Object(ne.a)(Object(ne.a)({},s),{},{endDate:e}))},selectsEnd:!0,startDate:s.startDate,endDate:s.endDate,minDate:s.startDate})),l.a.createElement("div",{className:"form-group custom-control custom-switch"},l.a.createElement("input",{type:"checkbox",className:"custom-control-input",onChange:a,id:"avaa",value:s.avoinna,checked:s.avoinna}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"avaa"},"Avaa kokoustila heti osallistujille")),l.a.createElement("p",null,"Tila: ",i),l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{onClick:function(){t("esityslista"),n()},className:"btn btn-outline-primary mt-3"},"Seuraava"))),l.a.createElement("hr",null)):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... ")},re=function(e){var t=e.puheenjohtaja,a=e.osallistujat,s=e.setOsallistujat,o=e.saveOsallistujat,i=e.varalla,r=e.setVaralla,c=e.setShowComponent;Object(n.useEffect)((function(){o()}),[a]);var u=function(e){var t=a.filter((function(t){return t.email===e.target.name}));r(i.concat(t)),s(a.filter((function(t){return t.email!==e.target.name})))},m=function(e){var t=i.filter((function(t){return t.email===e.target.name}));s(a.concat(t)),r(i.filter((function(t){return t.email!==e.target.name})))};return l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Osallistujat"),l.a.createElement("h6",null,"Puheenjohtaja:"," "," ",t[0].firstname," ",t[0].lastname," (",t[0].email,")"),l.a.createElement("div",{className:"mt-1"},a.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"mt-4"},"Kokousosallistujat"),l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,a.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),l.a.createElement("td",null,l.a.createElement("button",{onClick:u,className:"btn btn-outline-primary btn-sm",name:e.email},"Poista osallistujalistalta")))}))))):l.a.createElement("h6",null,"Kokouksessa ei ole osallistujia"),i.length>1?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"mt-4"},"Muut yhdistyksen j\xe4senet"),l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,i.filter((function(e){return e.email!==t[0].email})).map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),l.a.createElement("td",null,l.a.createElement("button",{onClick:m,className:"btn btn-outline-primary btn-sm",name:e.email},"Siirr\xe4 kokousosallistujaksi")))}))))):l.a.createElement("h6",null,"Kaikki yhdistyksen j\xe4senet ovat osallistujalistalla")),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{onClick:function(){c("paatosvaltaisuus"),o()},type:"submit",className:"btn btn-outline-primary mt-3"},"Seuraava")),l.a.createElement("hr",null))},ce=function(e){var t=e.setShowComponent,a=e.handlePaatosvaltaChange,n=e.saveKokousDraft,s=e.paatosvaltaisuus;return l.a.createElement("div",{className:"mt-5"},l.a.createElement("div",{className:"col-md-6  m-auto"},l.a.createElement("div",{className:"mb-2"},l.a.createElement("h5",null,"Kokouksen p\xe4\xe4t\xf6svaltaisuus"),l.a.createElement("p",{style:{marginTop:"-5px"}},l.a.createElement(I,{heading:"P\xe4\xe4t\xf6svaltaisuus",text:"Kokouksen p\xe4\xe4t\xf6svaltaisuuden voi m\xe4\xe4ritell\xe4 t\xe4ytt\xe4m\xe4ll\xe4 valitsemasi kent\xe4t. Tyhj\xe4ksi j\xe4tetty\xe4 kentt\xe4\xe4 ei huomioida kokouksen p\xe4\xe4t\xf6svaltaisuuden m\xe4\xe4rittelyss\xe4.",btnText:"Selite",placement:"bottom",variant:"link",style:{marginBottom:"3px",marginLeft:"-10px"}}))),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Esityslista"),l.a.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",name:"esityslista",onChange:a,value:s.esityslista}),l.a.createElement("small",{className:"form-text text-muted"},"Kuinka monen kokousosallistujan on avattava esityslista kokouksen p\xe4\xe4t\xf6svaltaisuuden t\xe4yttymiseksi?")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Aktiivisuus"),l.a.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",name:"aktiivisuus",onChange:a,value:s.aktiivisuus}),l.a.createElement("small",{className:"form-text text-muted"},"Kuinka monen k\xe4ytt\xe4j\xe4n on kommentoitava jotakin kohtaa tai kannatettava jotakin, jotta kokouksen p\xe4\xe4t\xf6svaltaisuus t\xe4yttyy?")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kesto"),l.a.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",name:"kesto",onChange:a,value:s.kesto}),l.a.createElement("small",{className:"form-text text-muted"},"Kuinka monta vuorokautta kokouksen on kestett\xe4v\xe4, jotta kokous on p\xe4\xe4t\xf6svaltainen?")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Muu kriteeri"),l.a.createElement("textarea",{className:"form-control",rows:"3",name:"muu",onChange:a,value:s.muu}),l.a.createElement("small",{className:"form-text text-muted"},"Kirjoita haluamasi p\xe4\xe4t\xf6svaltaisuuskriteeri kentt\xe4\xe4n"))),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{onClick:function(){t("yhteenveto"),n()},type:"submit",className:"btn btn-outline-primary mt-3"},"Seuraava"))))},ue=a(54),me=function(e){var t=e.editorContentChange,a=e.teksti;return l.a.createElement("div",{style:{contenteditable:"true",zIndex:"100 !important"}},l.a.createElement(ue.a,{apiKey:"urwv8bzlykfj70dret95jacecjm8fyzt8cznu85prhxftrs2",onEditorChange:t,value:a,init:{height:750,plugins:["advlist lists link image print","charmap print preview anchor help","searchreplace visualblocks","insertdatetime table paste preview"],toolbar:["preview print | undo redo | formatselect | bold italic |  alignleft aligncenter alignright |  bullist numlist outdent indent | help | insertdatetime"],insertdatetime_dateformat:["%HH:%M","%d-%m-%Y"],setup:function(e){e.on("keydown",(function(t){if(9===t.keyCode)return e.execCommand("mceInsertRawHTML",!1,"&emsp;&emsp;"),t.preventDefault(),t.stopPropagation(),!1}))}}}))},de=function(e){var t=e.perustiedot,a=e.esityslista_otsakkeet,s=e.osallistujat,o=e.paatosvaltaisuus,i=e.yhdistys,c=e.id_y,u=Object(n.useState)(!1),m=Object(p.a)(u,2),k=m[0],v=m[1],h=Object(r.g)(),f=d(),E={month:"numeric",day:"numeric"},y=new Date(t.startDate).toLocaleDateString("fi-FI",E),b=new Date(t.endDate).toLocaleDateString("fi-FI",E),g=""===t.otsikko?"":"<h3>".concat(t.otsikko,"</h3>"),j=s.map((function(e){return"<li>"+e.firstname+" "+e.lastname+"</li>"})).join(" "),N=a.map((function(e){return"<li>"+e.otsikko+"</li>"})).join(" ");console.log("otsikot.length",N.length),N=0===N.length?"<p>Kokoukselle ei ole m\xe4\xe4ritelty esityslistaa</p>":N;var O="";""===o.esityslista&&""===o.aktiivisuus&&""===o.kesto&&""===o.muu?O+="<p>Kokouksen p\xe4\xe4t\xf6svaltaisuutta ei ole m\xe4\xe4ritelty.</p>":(""!==o.esityslista&&(O+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos v\xe4hint\xe4\xe4n ".concat(o.esityslista," kpl kokousosallistujista on avannut esityslistan.</p>")),""!==o.aktiivisuus&&(O+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos v\xe4hint\xe4\xe4n ".concat(o.aktiivisuus," kpl kokousosallistujista on ottanut asioihin kantaa.</p>")),""!==o.kesto&&(O+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos kokous kest\xe4\xe4 v\xe4hint\xe4\xe4n ".concat(o.kesto," vuorokautta.</p>")),""!==o.muu&&(O+="<p>".concat(o.muu,"</p>")));var w=Object(n.useState)("<h3>Esityslista ".concat(t.kokousNro," kokous alkaa ").concat(y," ja p\xe4\xe4ttyy ").concat(b,"</h3>").concat(g,"<h4>Kokouksen avaus ").concat(y,"</h4><h4>Esityslista</h4><ol>").concat(N,"</ol><h4>Osallistujat</h4><ul>").concat(j.substring(0,j.length-5),"</ul><h4>Kokouksen p\xe4\xe4t\xf6svaltaisuus</h4>").concat(O,"<h4>Kokous p\xe4\xe4ttyy ").concat(b,"</h4><p>Terveisin <br/>").concat(f.firstname," ").concat(f.lastname,"<br/><small>").concat(i,"</small></p>")),S=Object(p.a)(w,2),x=S[0],_=S[1],C=function(){var e=JSON.stringify({call:"luokokous",id_y:c,kokousid:t.kokousid,otsikko:t.otsikko,kokousnro:t.kokousNro.substring(0,t.kokousNro.length-5),startDate:t.startDate,endDate:t.endDate,avoinna:t.avoinna,paatosvaltaisuus:o,valmis:!0});console.log("uusiKokous",e),F(e).then((function(e){console.log("Kokous tallennettu ",e.data),D()})).catch((function(e){alert(e.response.data.message)}))},D=function(){var e=JSON.stringify({call:"postdoc",id_y:c,kokousnro:t.kokousNro.substring(0,t.kokousNro.length-5),type:"kokouskutsu",draft:"false",content:x});T(e).then((function(e){console.log("res.data",e.data),L()})).catch((function(e){alert(e.response.data.message)}))},L=function(){var e;e=s.map((function(e){return Object(ne.a)({rooli:"osallistuja"},e)})),f=Object.assign({rooli:"puheenjohtaja"},f);var a={call:"postosallistujat",id_y:c,kokousid:t.kokousid};e=[f].concat(e),e=[a].concat(e);var n=JSON.stringify(e);K(n).then((function(e){P(),console.log("Osallistujatiedot tallennettu ",e.data)})).catch((function(e){return alert(e.response.data.message)}))},P=function(){var e=x.substring(4,x.indexOf("</h3>")),t=x.substring(x.indexOf("</h3>")+5),a=[f].concat(s),n=JSON.stringify({call:"sendkokousinvite",yhdistys:i,aihe:e,viesti:t,osallistujat:a});console.log("invite",n),F(n).then((function(e){alert(e.data.message),v(!1),h.push({pathname:"/assoc/".concat(i),state:{id_y:c}})})).catch((function(e){return alert(e.response.data.message)}))};return t.startDate&&t.endDate?0===s.length?l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Kokouksessa ei ole osallistujia. Lis\xe4\xe4 kokousosallistujat osallistujat-v\xe4lilehdell\xe4.")):k?k?l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Pyynt\xf6\xe4 k\xe4sitell\xe4\xe4n, odota hetki...."),l.a.createElement(B,null)):void 0:l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Yhteenveto"),l.a.createElement("p",{className:"mb-4"},"Tarkasta kokouksen tiedot. Painamalla ruudun pohjalla olevaa n\xe4pp\xe4int\xe4 kokous tallentuu ja j\xe4rjestelm\xe4 l\xe4hett\xe4\xe4 kutsun osallistujille kokoukseen s-postitse."),l.a.createElement(me,{editorContentChange:function(e){_(e)},teksti:x}),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{className:"btn btn-outline-primary mt-3",onClick:function(){window.confirm("Haluatko tallentaa kokouksen ja l\xe4hett\xe4\xe4 kutsun osallistujille?")&&(v(!0),C())}},"Tallenna ja l\xe4het\xe4 kokouskutsu"))):l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"P\xe4iv\xe4m\xe4\xe4r\xe4tiedot ovat puutteelliset. T\xe4yt\xe4 tarvittavat tiedot perustiedot-v\xe4lilehdell\xe4."))},ke=(a(89),function(e){var t,a=e.sisus,s=e.id,o=void 0===s?0:s,i=e.save,r=e.placeholder,c=void 0===r?"":r,u=e.edit,m=void 0!==u&&u,d=(e.avaa,e.alku,e.loppu,Object(n.useRef)(null)),k=function(e){i(o,e.target.value,500,"otsake")};return Object(n.useEffect)((function(){d.current.style.minHeight="auto",d.current.style.minHeight=d.current.scrollHeight-15+"px"}),[a,m]),t=m?l.a.createElement("textarea",{ref:d,className:"areaText",id:o,spellCheck:"false",onChange:k,onInput:k,value:a,placeholder:c}):l.a.createElement("div",{ref:d,tabIndex:"0",style:{paddingBottom:15},className:"areaText",id:o,spellCheck:"false"},a),l.a.createElement("div",null,t)}),pe=function(e){e.type,e.kokous_id;var t=e.kohta_id,a=e.tila,s=e.paatos,o=e.save,i="",r=Object(n.useState)(!1),c=Object(p.a)(r,2),u=c[0],m=c[1];i=s;return l.a.createElement("div",null,l.a.createElement("div",{className:"paatos"+a},l.a.createElement("div",{className:"nuija",onClick:function(){m(!u)}},l.a.createElement("div",{className:"nuija2"},l.a.createElement(j.d,null))," "),l.a.createElement("div",{className:"paatos_editori"},l.a.createElement(ke,{edit:3!=a,id:t,sisus:s,save:function(e,a,n){i=a,o(t,[a,2],n)}})),u?3==a?l.a.createElement("div",{className:"paatos_valinnat"},l.a.createElement("div",{className:"avaa",onClick:function(){m(!1),o(t,[s,2],100)}},"AVAA")):l.a.createElement("div",{className:"paatos_valinnat"},l.a.createElement("div",{onClick:function(){m(!1),o(t,[i,3],100)}},"Hyv\xe4ksy!"),l.a.createElement("div",null,"Lis\xe4aikaa"),l.a.createElement("div",null,"Hylk\xe4\xe4")):""))},ve=(a(184),function(e){var t,a=e.tila,n=e.maara,s=void 0===n?0:n,o=e.edit,i=e.id,r=e.nimi,c=e.arvo,u=e.check,m=e.remove,d=e.save,k=e.summa,p=void 0===k?0:k;return t=l.a.createElement("div",{tabIndex:"0",onKeyDown:function(e){" "===e.key&&(e.preventDefault(),u(i))},className:c?"green ruutu":"ruutu",onClick:function(){u(i)}}),l.a.createElement("div",{className:"3"==a?"":"valintahover"},l.a.createElement("div",{className:"valinta"},s>0?l.a.createElement("div",{className:"valinta_maara"},(parseFloat(s)/parseFloat(p)*100).toFixed(1),"% (",s,")"):"",p>0?l.a.createElement("div",{style:{marginLeft:"40px",width:parseFloat(s)/parseFloat(p)*90+"%",backgroundColor:"#ddd",height:"5px",marginTop:"30px",position:"absolute"}}):"",t,0==o&&0==s?l.a.createElement("input",{onChange:function(e){d(i,e.target.value)},spellCheck:"false",className:"ruutuvalinta",type:"text",value:r,autofocus:!0}):l.a.createElement("div",{spellCheck:"false",className:"ruutuvalinta"},r),0==o&&0==s?l.a.createElement("div",{className:"remove",onClick:function(){m(i)}}):""))}),he=function(e){e.edit;var t=e.arvot,a=void 0===t?[]:t,n=e.checkValue,s=void 0===n?[]:n,o=e.check,i=e.remove,r=e.save,c=e.uusi,u=e.multi,m=void 0===u?0:u,d=e.type,k=void 0===d?"3":d,p=e.tila;f=0,a.map((function(e){return f+=parseInt(e.maara)}));var v,h=function(e){"3"!=p&&i(e)},E=function(e,t){"3"!=p&&r(e,t)},y=function(e){"3"!=p&&o(e,m)};return!1,"3"==k&&"3"!=p&&(v=l.a.createElement("button",{className:"uusi add",onClick:c},"Valinta")),l.a.createElement("div",null,a.map((function(e){return l.a.createElement("div",null,l.a.createElement(ve,{arvo:s&&s.includes(e.id),summa:f,tila:p,maara:e.maara,edit:e.tekija,remove:h,save:E,check:y,nimi:e.nimi,key:e.id,id:e.id}))})),v,l.a.createElement("br",null))},fe=(a(185),0),Ee=0,ye="",be=function(e){var t=e.tila,a=e.id,s=e.save,o=(e.edit,e.arvot),i=void 0===o?[]:o,r=e.kuvaus,c=e.positio,u=Object(n.useState)(""),m=Object(p.a)(u,2),d=m[0],k=m[1],v=Object(n.useState)(""),h=Object(p.a)(v,2),f=h[0],E=h[1],y=Object(n.useState)(!1),b=Object(p.a)(y,2),g=b[0],j=b[1],N=function(){var e=document.getElementById("send_mielipide"+a);null!=e&&(ye.length>0?e.classList.add("msend2"):e.classList.remove("msend2"))};Object(n.useEffect)((function(e){document.addEventListener("selectionchange",(function(e){var t=window.getSelection();if(t.rangeCount){var n=t.getRangeAt(0).commonAncestorContainer;if(n&&null!==n.parentNode&&n.parentNode.id==="kuvaus"+a){fe=t.anchorOffset;var l=t.focusOffset;l<fe?(Ee=fe,fe=l):Ee=l,N(),j(fe!=Ee),k(window.getSelection().toString())}}}))}),[]);var O="";return g&&3!=t&&(O=l.a.createElement("div",null,l.a.createElement("div",{className:"mteksti"},"Mielipide asiasta:",l.a.createElement("br",null),l.a.createElement("b",null," ",d," ")),l.a.createElement("div",{className:"perustelu",onMouseDown:function(){c(fe,Ee)}},l.a.createElement(ke,{edit:!0,sisus:f,save:function(e,t){E(t),ye=t,s(e,[t,fe,Ee,0]),N()}})),l.a.createElement("div",{className:"msend",id:"send_mielipide"+a,onClick:function(){return s(a,[ye,fe,Ee,1]),fe=0,Ee=0,ye="",E(""),c(fe,Ee),void j(fe!=Ee)}},"L\xe4het\xe4"))),l.a.createElement("div",null,O,i.length>0?l.a.createElement("div",{className:"MielipideHeader"},"Mielipiteet(",i.length,")"):"",i.map((function(e){return l.a.createElement("div",{className:"mielipide_container",onClick:function(t){j(!1),c(e.alku,e.loppu)}},l.a.createElement("div",{className:"kelloaika"},e.aika),l.a.createElement("div",{className:"nimipallo"},e.firstname[0],e.lastname[0]),l.a.createElement("div",{className:"mielipide_otsake"},function(e,t){var a=r.toString().substring(e,t);return a.length>100?a.slice(0,80)+"...":a}(e.alku,e.loppu)),l.a.createElement("div",{className:"mielipide_teksti"},e.mielipide))})))},ge=(a(186),function(e){e.id;var t=e.save,a=e.sisus;return l.a.createElement("div",{className:"asiakohta_hyvaksy"},l.a.createElement(je,{check:function(){},nimi:"hyv\xe4ksyn"}),l.a.createElement("div",{className:"asiakohta_perustelu"},l.a.createElement(ke,{edit:!0,sisus:a,save:function(e,a){t(e,a)},placeholder:"Ehdota muutosta"})))}),je=function(e){var t,a=e.id,n=e.nimi,s=e.arvo,o=e.check;return t=l.a.createElement("div",{className:s?"green ruutu":"ruutu",onClick:function(e){o(a)}}),l.a.createElement("div",{className:"valinta"},t,l.a.createElement("input",{onChange:function(){},spellCheck:"false",className:"ruutuvalinta",type:"text",value:n}))},Ne=(a(187),function(e){var t,a=e.kokous_id,s=(e.edit,e.arvot),o=e.checkValue,i=void 0===o?[]:o,r=e.check,c=e.remove,u=e.save,m=e.uusi,d=(e.type,e.tila),k=Object(n.useState)([]),v=Object(p.a)(k,2),h=v[0],f=v[1],E=Object(n.useState)([]),y=Object(p.a)(E,2),b=y[0],g=y[1],j=Object(n.useState)([]),N=Object(p.a)(j,2),O=N[0],w=N[1],S=Object(n.useState)(!1),x=Object(p.a)(S,2),_=x[0],C=x[1],D=new Map;return Object(n.useEffect)((function(){var e=JSON.stringify({call:"getosallistujat",id:a});K(e).then((function(e){f(e.data);h.map((function(e){D.set(e.id,e.firstname+" "+e.lastname)})),w(s.filter((function(e){return D.has(e.nimi)})).map((function(e){var t={};return t.id=e.id,t.maara=e.maara,parseInt(e.maara),t.nimi=D.get(e.nimi),D.delete(e.nimi),t}))),g(h.filter((function(e){return D.has(e.id)})))})).catch((function(e){return alert(e)}))}),[s]),"3"!=d&&(t=l.a.createElement("div",null,b.length>0?l.a.createElement("button",{onClick:function(){return C(!_)},className:"pj_ehdota"},_?"pienenn\xe4":"Lis\xe4\xe4 ehdokas"):"",_?b.map((function(e){return l.a.createElement("div",{className:"pj_ehdokkaita",onClick:function(){return m(e.id)}},e.firstname," ",e.lastname)})):"")),l.a.createElement("div",{className:"PJ"},O.length>0?l.a.createElement(he,{type:"6",tila:d,edit:!1,arvot:O,check:r,checkValue:i,remove:c,save:u,uusi:m}):"",t)}),Oe=(a(188),"http://localhost/kokousapi/"),we=function(e){var t=e.id,a=e.save,s=e.type,o=e.kokous_id,i=e.edit,r=void 0!==i&&i,c=e.tila,u=Object(n.useState)([]),m=Object(p.a)(u,2),d=m[0],k=m[1],v=Object(n.useState)([]),h=Object(p.a)(v,2),f=h[0],E=h[1],y=Object(n.useState)([]),b=Object(p.a)(y,2),g=b[0],j=b[1],N=Object(n.useState)([]),O=Object(p.a)(N,2),w=O[0],x=O[1],_=Object(n.useState)([]),C=Object(p.a)(_,2),D=C[0],L=C[1],F=Object(n.useState)([]),K=Object(p.a)(F,2),T=K[0],P=K[1],M=Object(n.useState)([]),J=Object(p.a)(M,2),I=J[0],R=J[1],H=Object(n.useState)(2==s&&0==r?1:0),A=Object(p.a)(H,2),B=A[0],U=A[1],V=Object(n.useState)(""),Y=Object(p.a)(V,2),z=Y[0],q=Y[1],W=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new URLSearchParams;n.append("check_valitse",e),n.append("kokous_id",o),n.append("kohta",t),n.append("multi",a),S.a.post(Oe+"data.php",n,{withCredentials:!0}).then((function(e){return G()}))},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=new URLSearchParams;a.append("check_uusi",e),a.append("kohta",t),a.append("kokous_id",o),S.a.post(Oe+"data.php",a,{withCredentials:!0}).then((function(e){G(1)}))},$=function(e,t,n){a(e,t,500,"check"),k(d.map((function(a){return a.id===e?Object(ne.a)(Object(ne.a)({},a),{},{nimi:t}):a})))},G=function(){var e=new URLSearchParams;e.append("avaakohta",t),e.append("kokous_id",o),S.a.post(Oe+"data.php",e,{withCredentials:!0}).then((function(e){-1!=e.data[2]?E(JSON.parse(e.data[2])):E([]),-1!=e.data[1]?k(JSON.parse(e.data[1])):k([]),-1!=e.data[0]?j(JSON.parse(e.data[0])):j(""),P(""),L(""),-1!=e.data[3]?R(JSON.parse(e.data[3])):R([])}))},Q=function(e,t){return g.toString().substring(e,t)};Object(n.useEffect)((function(){G();var e=document.getElementById("s"+t).parentNode.querySelector(".nro").getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:e,behavior:"smooth"}),window.setTimeout((function(){var e=document.getElementById("s"+t).parentNode.parentNode.querySelector(".nro").getBoundingClientRect().top+window.pageYOffset+-40;window.scrollTo({top:e,behavior:"smooth"})}),100)}),[]);var X=["","",l.a.createElement("div",null,l.a.createElement(be,{tila:c,edit:r,id:t,arvot:I,save:function(e,t){a(e,t,500,"mielipide")},positio:function(e,t){x(Q(0,e)),L(Q(e,t)),P(Q(t,parseInt(g.toString().length))),U(2)},kuvaus:g})),l.a.createElement("div",null,l.a.createElement(ge,{tila:c,id:t,save:function(e,t){q(t)},sisus:z})),l.a.createElement("div",null,l.a.createElement(he,{tila:c,edit:!0,arvot:d,check:W,checkValue:f,remove:function(e){var a=new URLSearchParams;a.append("check_remove",e),a.append("kohta",t),a.append("kokous_id",o),S.a.post(Oe+"data.php",a,{withCredentials:!0}).then((function(e){G()}))},save:$,uusi:Z})),l.a.createElement("div",null,l.a.createElement(Ne,{tila:c,kohtaid:t,kokous_id:o,arvot:d,check:W,checkValue:f,save:$,uusi:Z})),l.a.createElement("div",null,l.a.createElement(Ne,{tila:c,type:6,kohtaid:t,kokous_id:o,arvot:d,check:W,checkValue:f,save:$,uusi:Z}))][s];return l.a.createElement("div",{id:"s"+t},l.a.createElement("div",{id:"sisalto"},[l.a.createElement("div",{className:"kuvaus"},l.a.createElement(ke,{edit:!0,id:"id",sisus:g,save:function(e,t){a(e,t,500,"kuvaus"),j(t)},placeholder:"kuvaus"})),l.a.createElement("div",{className:"kuvaus"},l.a.createElement("div",{id:"kuvaus"+t,className:"areaText"},g)),l.a.createElement("div",{className:"kuvaus"},l.a.createElement("div",{id:"kuvaus"+t,onMouseDown:function(){return U(1)},className:"areaText"},w,l.a.createElement("span",{className:"korostus"},D),T))][B],X))},Se=function(e){var t,a,s=e.vaihda_tyyppi,o=e.kokous_id,i=e.type,r=e.title,c=e.id,u=e.alkaa,m=e.loppuu,d=e.auki,k=void 0!==d&&d,v=e.avaa,h=e.save,f=(e.poista,e.paatos),E=e.tila,y=Object(n.useState)("0000-00-00"!==u?new Date(u):""),b=Object(p.a)(y,2),g=b[0],N=(b[1],Object(n.useState)("0000-00-00"!==m?new Date(u):"")),O=Object(p.a)(N,2),w=(O[0],O[1],function(e,t,a,n){h(e,t,a,n,c)}),S=function(){v(c)},x=function(e){i==e&&(e=0),s(c,e)},_=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=document.getElementById("info"+c);switch(e){case 3:t="Hyv\xe4ksy asiakohta";break;case 4:t="\xc4\xe4nestys</b>";break;case 2:t="Mielipiteit\xe4 asiasta";break;case 5:t="Nimitys";break;case 6:t="Puheenjohtajan valinta";break;default:t="Tiedoksi"}if(1==a)return t;n.innerHTML=t};3!=E&&null!=g&&""!==g&&(a=l.a.createElement($,{pv:g.getDate(),kk:g.getMonth()+1,alku:!1}));var C=["",l.a.createElement(j.a,{onMouseEnter:function(){return _(1)},onClick:function(){return x(1)},className:1==i?"kohta_valittu p_k":"p_k"}),l.a.createElement(j.b,{onMouseEnter:function(){return _(2)},onClick:function(){return x(2)},className:2==i?"kohta_valittu p_k":"p_k"}),l.a.createElement(j.e,{onMouseEnter:function(){return _(3)},onClick:function(){return x(3)},className:3==i?"kohta_valittu p_k":"p_k"}),l.a.createElement("svg",{onMouseEnter:function(){return _(4)},className:4==i?"kohta_valittu p_k":"p_k",onClick:function(){return x(4)},xmlns:"http://www.w3.org/2000/svg",viewBox:"-100 -100 700 700"},l.a.createElement("path",{d:"M26.42,180.11v350h350v-350Zm130.83,290.6L73.7,363.27l18.6-13.76,66.42,83.93L306.18,258.7l18.05,16Z",transform:"translate(-21.42 -25.11)"}),l.a.createElement("path",{d:"M101.42,105.11v0h350v350h0v-350Z",transform:"translate(-21.42 -25.11)"}),l.a.createElement("path",{d:"M176.42,30.11v0h350v350h0v-350Z",transform:"translate(-21.42 -25.11)"})),l.a.createElement(j.g,{onMouseEnter:function(){return _(5)},onClick:function(){return x(5)},className:5==i?"kohta_valittu p_k":"p_k"}),l.a.createElement(j.d,{onMouseEnter:function(){return _(6)},className:"kohta_valittu p_k"})],D=0==i?l.a.createElement("div",{className:"valinta_iconit"},C[1],C[2],C[3],C[4],C[5],l.a.createElement("div",{className:"kohta_info",id:"info"+c},_(i,1))):l.a.createElement("div",{className:"valinta_iconit2"},C[i],l.a.createElement("div",{className:"kohta_info",id:"info"+c},_(i,1)));return t=k?l.a.createElement(we,{key:c,kokous_id:o,id:c,type:i,save:w,tila:E}):"",l.a.createElement("div",{className:"esitys_item"},void 0,a,l.a.createElement("div",{onClick:S,className:"otsake"},l.a.createElement(ke,{edit:!0,id:c,sisus:r,save:w})),l.a.createElement("div",null,D,0!=parseInt(E)&&1!=parseInt(i)?l.a.createElement(pe,{tila:E,kokous_id:o,kohta_id:c,paatos:f,save:function(e,t,a){h(c,t,a,"paatos",c)}}):"",t,l.a.createElement("div",{className:"nro"}),3!=parseInt(E)?"":l.a.createElement("div",{className:"nro_"+parseInt(E)})),3!=parseInt(E)?l.a.createElement("div",{onClick:S,className:"raahaa",id:"r"+c}):"")},xe=(a(189),new URLSearchParams),_e=(new Map,"http://localhost/kokousapi/"),Ce={37:1,38:1,39:1,40:1};function De(e){e.preventDefault()}function Le(e){if(Ce[e.keyCode])return De(e),!1}var Fe=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Fe=!0}}))}catch(Xe){}var Ke,Te,Pe,Me=!!Fe&&{passive:!1},Je="onwheel"in document.createElement("div")?"wheel":"mousewheel";function Ie(e){if(!Te){Pe=-1,Ke=document.getElementsByClassName("raahaa");for(var t=0;t<Ke.length;t++)if(Ke[t].contains(e.target)){window.addEventListener("DOMMouseScroll",De,!1),window.addEventListener(Je,De,Me),window.addEventListener("touchmove",De,Me),window.addEventListener("keydown",Le,!1),Te=Ke[t],window.setTimeout((function(){null!=Te&&Te.parentNode.classList.add("harmaa")}),100,this),document.body.classList.add("disable-select");break}}}function Re(e){if(null!=Te)for(var t=e.touches?e.touches[0].clientY:e.clientY,a=!1,n=Te.parentNode.getBoundingClientRect().height,l=0;l<Ke.length;l++)if(Ke[l]===Te)a=!0;else{var s=Ke[l].parentNode.getBoundingClientRect().y,o=Ke[l].parentNode.getBoundingClientRect().height;if(o>n&&(o=n),t>=s&&o+s>t){var i=Te.parentNode.parentNode;a?(Pe=l+1,i.insertBefore(Te.parentNode,Ke[l].parentNode.nextSibling)):(Pe=l+1,i.insertBefore(Te.parentNode,Ke[l].parentNode));break}}}function He(e){if(window.removeEventListener("DOMMouseScroll",De,!1),window.removeEventListener(Je,De,Me),window.removeEventListener("touchmove",De,Me),window.removeEventListener("keydown",Le,!1),null!=Te){if(-1!==Pe){var t=new URLSearchParams;t.append("NODE",Te.id),t.append("KOHDE",Pe),S.a.post(_e+"data.php",t).then((function(e){}))}Te.parentNode.classList.remove("harmaa"),Te=null,document.body.classList.remove("disable-select")}}window.addEventListener("touchstart",Ie),window.addEventListener("mousedown",Ie),window.addEventListener("touchend",He),window.addEventListener("mouseup",He),window.addEventListener("mousemove",Re),window.addEventListener("touchmove",Re);var Ae=function(e){e.setEsityslista,e.esityslista;var t=e.kokousid,a=void 0===t?"-1":t,s=e.edit,o=void 0===s?"true":s,i=e.saveKokousDraft,r=e.setShowComponent,c=void 0===r?null:r,u=Object(n.useState)([]),m=Object(p.a)(u,2),d=m[0],k=m[1],v=Object(n.useState)(new Array),h=Object(p.a)(v,2),f=h[0],y=h[1];console.log("Esityslista.js --- kokousid",a),Object(n.useEffect)((function(){if(-1!=a){var e=new URLSearchParams;e.append("kokous_id",a),S.a.post(_e+"data.php",e,{withCredentials:!0}).then((function(e){k(e.data[0])}))}}),[a]);var b,g=function(){var e=xe;xe=new URLSearchParams,S.a.post(_e+"data.php",e,{withCredentials:!0}).then((function(e){}))},j=function(e,t,n,l,s){xe.get("id")===e&&xe.get("type")===l||g(),"otsake"===l&&k(d.map((function(a){return a.id===e?Object(ne.a)(Object(ne.a)({},a),{},{n:t}):a}))),xe=new URLSearchParams,"mielipide"===l?(xe.append("param",t[0]),xe.append("alku",t[1]),xe.append("loppu",t[2]),xe.append("draft",t[3])):"paatos"===l?(k(d.map((function(a){return a.id===e?Object(ne.a)(Object(ne.a)({},a),{},{paatos:t[0],tila:t[1]}):a}))),xe.append("param",t[0]),xe.append("tila",t[1])):(xe.append("param",t),xe.append("param",t)),xe.append("id",e),xe.append("kohta",s),xe.append("kokous_id",a),xe.append("save",l),window.clearTimeout(E),E=setTimeout((function(){g()}),n)},N=function(e,t){var n=new URLSearchParams;n.append("paatos_valitse",t),n.append("kohta",e),n.append("kokous_id",a),S.a.post(_e+"data.php",n,{withCredentials:!0}).then((function(e){k(e.data[0])}))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Uusi",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";g();var n=new URLSearchParams;n.append(e,t),n.append("kokous_id",a),S.a.post(_e+"data.php",n,{withCredentials:!0}).then((function(t){k(t.data[0]),"Uusi"==e&&document.getElementById(t.data[0][t.data[0].length-1].id).focus()}))},w=function(e){g(),E&&(window.clearTimeout(E),g()),y(f.includes(e)?f.filter((function(t){return t!=e})):[].concat(Object(Z.a)(f),[e]))};return o&&(b=l.a.createElement("button",{className:"lisaa_esitysitem",onClick:function(){return O()}},"Asiakohta")),console.log("items",d),l.a.createElement("div",null,l.a.createElement("div",{id:"esitys_container"},d.map((function(e){var t;return l.a.createElement(Se,(t={kokous_id:a,vaihda_tyyppi:N,avaa:w,save:j,type:e.type,auki:f.includes(e.id),owner:e.o},Object(ae.a)(t,"type",e.type),Object(ae.a)(t,"title",e.n),Object(ae.a)(t,"id",e.id),Object(ae.a)(t,"key",e.id),Object(ae.a)(t,"alkaa",e.s),Object(ae.a)(t,"loppuu",e.e),Object(ae.a)(t,"poista",O),Object(ae.a)(t,"tila",e.tila),Object(ae.a)(t,"paatos",e.paatos),t))})),b),c?l.a.createElement("div",{className:"text-right"},l.a.createElement("button",{onClick:function(){c("osallistujat"),i()},className:"btn btn-outline-primary mt-3"},"Seuraava")):l.a.createElement(l.a.Fragment,null))},Be=function(e){var t,a=d(),s=Object(r.h)().yhdistys,o=Object(n.useState)(),c=Object(p.a)(o,2),u=c[0],k=c[1],v=Object(n.useState)("perustiedot"),h=Object(p.a)(v,2),f=h[0],E=h[1],y=Object(r.g)(),b=Object(n.useState)({otsikko:"",kokousNro:"",kokousid:"",startDate:"",endDate:"",avoinna:!1}),g=Object(p.a)(b,2),j=g[0],N=g[1],O=Object(n.useState)(),w=Object(p.a)(O,2),S=w[0],x=w[1],C=Object(n.useState)(),D=Object(p.a)(C,2),T=D[0],P=D[1],M=Object(n.useState)(),J=Object(p.a)(M,2),R=J[0],H=J[1],A=Object(n.useState)([]),B=Object(p.a)(A,2),U=B[0],V=B[1],Y=Object(n.useState)({esityslista:"",aktiivisuus:"",kesto:"",muu:""}),z=Object(p.a)(Y,2),q=z[0],W=z[1],Z=Object(n.useState)(e.location.state.id_y),$=Object(p.a)(Z,2),G=$[0],Q=$[1],X=Object(n.useState)(-1),ee=Object(p.a)(X,2),te=ee[0],le=ee[1];Object(n.useEffect)((function(){var e={year:"numeric"},t=Date(),a=JSON.stringify({call:"getkokousdraft",name:s});if(j.kokousNro||u||F(a).then((function(a){if("Ei kesken olevia kokouskutsuja"!==a.data.message)if(window.confirm("Yhdistyksell\xe4 on tallentamaton kokous. Haluatko jatkaa kokoustietojen t\xe4ytt\xe4mist\xe4 vai aloittaa uudelleen?")){var n="0"!==a.data.avoinna,l="1970-01-01"===a.data.startDate?"":new Date(a.data.startDate),o="1970-01-01"===a.data.endDate?"":new Date(a.data.endDate);console.log("res.data.startDate",a.data.startDate),N({otsikko:a.data.otsikko,kokousNro:a.data.kokousnro+"/"+new Date(t).toLocaleDateString("fi-FI",e),kokousid:a.data.id,startDate:l,endDate:o,avoinna:n});var i="0"===a.data.pv_esityslista?"":a.data.pv_esityslista,r="0"===a.data.pv_aktiivisuus?"":a.data.pv_aktiivisuus,c="0"===a.data.pv_kesto?"":a.data.pv_kesto;W({esityslista:i,aktiivisuus:r,kesto:c,muu:a.data.pv_muu}),Q(a.data.id_y);var u=JSON.stringify({call:"getosallistujat",id:a.data.id});K(u).then((function(e){console.log("res.data",e.data),P(e.data),H(e.data.filter((function(e){return"puheenjohtaja"===e.role})))})).catch((function(e){return console.log("err.response.data",e.response.data)}));var m=JSON.stringify({call:"getallmembers",yhdistys:s});L(m).then((function(e){k(e.data)})).catch((function(e){return console.log("err.response",e.response)}))}else{var d=JSON.stringify({call:"deletedraft",kokousid:a.data.id});F(d).then((function(e){console.log("res.data ---- delReq ",e.data),le(e.data.id),oe()})).catch((function(e){return console.log("err.response.data",e.response.data)}))}else oe()})).catch((function(e){return console.log("err.response.data",e.response.data)})),u&&T&&R)V(u.filter((function(e){return!T.find((function(t){var a=t.email;return e.email===a}))}))),P(T.filter((function(e){return"puheenjohtaja"!==e.role})));else if(!u&&0===U.length&&!R){var n=JSON.stringify({call:"getallmembers",yhdistys:s});L(n).then((function(e){k(e.data),P(e.data.filter((function(e){return e.email!==d().email}))),H(e.data.filter((function(e){return e.email===d().email})))})).catch((function(e){return console.log("err.response",e.response)}))}}),[u,j]);var se,oe=function(){var e={year:"numeric"},t=Date(),a=JSON.stringify({call:"kokousnro",yhdistys:s});console.log("body",a),F(a).then((function(a){console.log("res.data --- getkokousnro",a.data),N(Object(ne.a)(Object(ne.a)({},j),{},{kokousNro:a.data.kokousnro+"/"+new Date(t).toLocaleDateString("fi-FI",e)})),Q(a.data.id_y)}))},ue=function(e){if(ke(f),"yhteenveto"===e.target.name){var t=e.target.name,a=new URLSearchParams;a.append("otsakkeet",j.kokousid),_(a).then((function(e){console.log("esityskohta_otsakkeet",e.data),x(e.data),E(t)}))}else{for(var n=e.target.parentNode.querySelectorAll("button"),l=0;l<n.length;l++)n[l].classList.remove("valittu_menu");E(e.target.name),e.target.classList.add("valittu_menu")}},me=function(){var e=j.kokousNro.indexOf("/");return-1===e?j.kokousNro:j.kokousNro.substring(0,e)},ke=function(e){console.log("saveKokousDraft()");var t=JSON.stringify({call:"luokokous",id_y:G,kokousid:j.kokousid,otsikko:j.otsikko,kokousnro:me(),startDate:j.startDate,endDate:j.endDate,avoinna:j.avoinna,paatosvaltaisuus:q,valmis:!1});F(t).then((function(e){N(Object(ne.a)(Object(ne.a)({},j),{},{kokousid:e.data.kokousid})),pe(),le(e.data.kokousid)})).catch((function(e){alert(e.response.data.message)}))},pe=function(){if(""!==j.kokousid){var e;e=T.map((function(e){return Object(ne.a)({rooli:"osallistuja"},e)})),a=Object.assign({rooli:"puheenjohtaja"},a);var t={call:"postosallistujat",id_y:G,kokousid:j.kokousid};e=[a].concat(e),e=[t].concat(e);var n=JSON.stringify(e);K(n).then((function(e){console.log("res.data",e.data)})).catch((function(e){return console.log("Error res.data ",e.response.data)})),console.log("saveOsallistujat() ---- osallistujat ",T)}};return se="perustiedot"===f?l.a.createElement(ie,{setShowComponent:E,handlePerustiedotChange:function(e){"otsikko"===e.target.name?N(Object(ne.a)(Object(ne.a)({},j),{},{otsikko:e.target.value})):"kokousnro"===e.target.name?N(Object(ne.a)(Object(ne.a)({},j),{},{kokousNro:e.target.value})):"avaa"===e.target.id&&N(Object(ne.a)(Object(ne.a)({},j),{},{avoinna:!j.avoinna}))},saveKokousDraft:ke,perustiedot:j,setPerustiedot:N}):"esityslista"===f?l.a.createElement(Ae,(t={setShowComponent:E,setEsityslista:x,esityslista:S,kokousid:te},Object(ae.a)(t,"setShowComponent",E),Object(ae.a)(t,"saveKokousDraft",ke),t)):"osallistujat"===f?l.a.createElement(re,{puheenjohtaja:R,osallistujat:T,setOsallistujat:P,saveOsallistujat:pe,varalla:U,setVaralla:V,setShowComponent:E}):"paatosvaltaisuus"===f?l.a.createElement(ce,{setShowComponent:E,handlePaatosvaltaChange:function(e){"esityslista"===e.target.name?W(Object(ne.a)(Object(ne.a)({},q),{},{esityslista:e.target.value})):"aktiivisuus"===e.target.name?W(Object(ne.a)(Object(ne.a)({},q),{},{aktiivisuus:e.target.value})):"kesto"===e.target.name?W(Object(ne.a)(Object(ne.a)({},q),{},{kesto:e.target.value})):"muu"===e.target.name&&W(Object(ne.a)(Object(ne.a)({},q),{},{muu:e.target.value}))},paatosvaltaisuus:q,saveKokousDraft:ke}):"yhteenveto"===f?l.a.createElement(de,{esityslista_otsakkeet:S,perustiedot:j,osallistujat:T,paatosvaltaisuus:q,yhdistys:s,id_y:G}):l.a.createElement(l.a.Fragment,null),m()&&"admin"===m().role&&m().yhdistys===s?l.a.createElement("div",{style:{width:"100%",maxWidth:"1100px",padding:"0",marginTop:"50px"}},l.a.createElement("div",{className:"px-3"},l.a.createElement("h2",null,s),l.a.createElement("h4",null,"Luo uusi kokous"),l.a.createElement(i.b,{to:{pathname:"/assoc/".concat(s),state:{id:G}}},"Yhdistyksen p\xe4\xe4sivu")),l.a.createElement("hr",null),l.a.createElement("div",null,l.a.createElement("div",{className:"d-sm-flex justify-content-center second_nav"},l.a.createElement("button",{className:"text-primary valittu_menu",name:"perustiedot",onClick:ue},"Perustiedot"),l.a.createElement("button",{className:"text-primary ",name:"esityslista",onClick:ue},"Esityslista"),l.a.createElement("button",{className:"text-primary ",name:"osallistujat",onClick:ue},"Osallistujat"),l.a.createElement("button",{className:"text-primary ",name:"paatosvaltaisuus",onClick:ue},"P\xe4\xe4t\xf6svaltaisuus"),l.a.createElement("button",{className:"text-primary ",name:"yhteenveto",onClick:ue},"Kutsu kokous"),l.a.createElement(I,{heading:"Kokouksen luominen",text:"Aloita kokous antamalla sille otsikko sek\xe4 alku- ja loppup\xe4iv\xe4m\xe4\xe4r\xe4t. Kun olet valmis, paina seuraava-n\xe4pp\xe4int\xe4, niin voit luoda esityslistan ja p\xe4\xe4tt\xe4\xe4 voiko yhdistyksen j\xe4senet liitt\xe4\xe4 omia esityksi\xe4\xe4n esityslistalle. Seuraavaksi voit m\xe4\xe4ritell\xe4 kokouksen osallistujat ja p\xe4\xe4t\xf6svaltaisuuden. Lopuksi n\xe4et kutsu kokous -v\xe4lilehdelt\xe4 luomasi kokouksen tiedot, miss\xe4 voit tallentaa ja l\xe4hett\xe4\xe4 kutsun kokoukseen osallistujille.",btnText:"Selityst\xe4",placement:"left",variant:"btn btn-outline-danger btn-sm mx-1"}))),l.a.createElement("div",{className:"mt-5"},se)):(y.push("/userpage"),l.a.createElement(l.a.Fragment,null))},Ue=function(e){var t=e.setShowTable,a=e.document;return l.a.createElement("div",null,l.a.createElement("div",{className:"text-right"},"0"===a.draft?l.a.createElement(l.a.Fragment,null):l.a.createElement("button",{className:"btn btn-outline-primary btn-sm"},"Muokkaa"),l.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){return window.tinymce.activeEditor.execCommand("mcePrint",!0)}},"Tulosta"),l.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){return t(!0)}},"Sulje")),l.a.createElement("div",{style:{zIndex:"100 !important"}},l.a.createElement(ue.a,{apiKey:"urwv8bzlykfj70dret95jacecjm8fyzt8cznu85prhxftrs2",disabled:!0,value:a.content,init:{menubar:!1,toolbar:!1,selector:"textarea",plugins:["autoresize print"]}})))},Ve=function(e){var t=e.upload,a=Object(n.useState)(),s=Object(p.a)(a,2),o=s[0],i=s[1];return Object(n.useEffect)((function(){var e=JSON.stringify({call:"getpdf",polku:t.polku,nimi:t.nimi});T(e,{method:"post",responseType:"arraybuffer"}).then((function(e){console.log("typeof res.data",typeof e.data),console.log("res.data",e.data);var t=new Blob([e.data],{type:"application/pdf"});console.log("file",t);var a=URL.createObjectURL(t);window.open(a),i(a)})).catch((function(e){return console.log("err.response",e.response)}))}),[t]),console.log("pdf",o),t?l.a.createElement("div",null,l.a.createElement("p",null,"UPLOADED DOCUMENT"),t.nimi,l.a.createElement("div",null,l.a.createElement("embed",{src:o,type:"application/pdf",height:"100%",width:"100%"}),l.a.createElement("object",{style:{height:"85vh"},data:o,type:"application/pdf",width:"100%",height:"100%"},"alt : ",l.a.createElement("a",{href:"test.pdf"})))):l.a.createElement("p",null,"Loading... ")},Ye=function(e){var t=e.kokous,a=e.yhdistys,s=e.setShowTable,o=e.showTable,i=Object(n.useState)([]),r=Object(p.a)(i,2),c=r[0],u=r[1],m=Object(n.useState)([]),k=Object(p.a)(m,2),v=k[0],h=k[1],f=Object(n.useState)([]),E=Object(p.a)(f,2),y=E[0],b=E[1],g=Object(n.useState)([]),j=Object(p.a)(g,2),N=j[0],O=j[1],w=Object(n.useState)(!0),S=Object(p.a)(w,2),x=S[0],_=S[1];Object(n.useEffect)((function(){var e=JSON.stringify({call:"getdocuments",kokousid:t.id});T(e).then((function(e){u(e.data)})).catch((function(e){console.log("err.response.data.message",e.response.data.message),console.log("err",e)}));var n=JSON.stringify({call:"getuploads",kokousid:t.id,yhdistys:a});T(n).then((function(e){console.log("res.data",e.data),b(e.data)})).catch((function(e){return console.log("getuploads error: ",e)}))}),[t.id,a]);var C=function(e){h(e),s(!o),_(!1)},D=function(e){O(e),s(!o),_(!0)},L=function(e){var n=new FormData;n.append("kokousid",t.id),n.append("user",d().email),n.append("yhdistys",a),n.append("file",e),T(n).then((function(){alert("Tiedosto tallennettu!"),window.location.reload()})).catch((function(e){return console.log("savedocument error: ",e)}))};return x?l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,c.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return C(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.type))})))):x||l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,y.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return D(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.nimi.substring(10)))}))))),l.a.createElement("div",{className:"m-auto"},o?l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,c.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return C(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.type))})))):x?l.a.createElement(l.a.Fragment,null):l.a.createElement(Ue,{setShowTable:s,document:v}),o?l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,y.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return D(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.nimi.substring(10)))}))))):x?l.a.createElement(Ve,{setShowTable:s,upload:N}):l.a.createElement(l.a.Fragment,null),o?l.a.createElement("div",{class:"float-right mx-2"},l.a.createElement("form",{method:"POST"},l.a.createElement("label",{for:"inputFile",className:"btn btn-outline-primary"},"Lis\xe4\xe4 asiakirja"),l.a.createElement("input",{type:"file",name:"file",class:"form-control-file",id:"inputFile","aria-describedby":"fileHelp",onChange:function(e){"application/pdf"===e.target.files[0].type?window.confirm('Haluatko lis\xe4t\xe4 tiedoston "'.concat(e.target.files[0].name,'" tietokantaan?'))&&L(e.target.files[0]):alert("Tiedoston tulee olla pdf-muodossa")},style:{display:"none"}}),l.a.createElement("small",{id:"fileHelp",class:"form-text text-muted"},"Lataa haluamasi asiakirja pdf-muodossa."))):l.a.createElement(l.a.Fragment,null))},ze=function(e){var t=e.osallistujat,a=e.jasenet,n=e.puheenjohtaja,s=e.kokousRooli,o=e.handleOsallistujatClick;return a=(a=a.filter((function(e){return!t.find((function(t){var a=t.email;return e.email===a}))}))).filter((function(e){return!n.find((function(t){var a=t.email;return e.email===a}))})),l.a.createElement("div",{style:{marginTop:"4px"}},l.a.createElement("table",{className:"table table-hover table-responsive-sm"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),"puheenjohtaja"===s?l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-outline-danger btn-sm",name:e.email,id:"varalle",onClick:o},"Poista kokouksesta")):l.a.createElement("td",null))})))),0!==a.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"mx-2"},"Muut yhdistyksen j\xe4senet"),l.a.createElement("table",{className:"table table-hover  table-responsive-sm"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,a.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),"puheenjohtaja"===s?l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-outline-success btn-sm",name:e.email,id:"osallistujaksi",onClick:o},"Siirr\xe4 kokoukseen")):l.a.createElement("td",null))}))))," "):l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement("p",{className:"ml-2"},"Kaikki yhdistyksen j\xe4senet osallistuvat kokoukseen.")))},qe=function(e){var t=e.kokous,a=e.handleVaihdaKokousaika,s=Object(n.useState)(Date.parse(t.endDate)),o=Object(p.a)(s,2),i=o[0],r=o[1],c=Date.parse(t.startDate);return Object(le.registerLocale)("fi",oe.a),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5 m-auto"},l.a.createElement("div",{className:"card card-body mt-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"mb-3"},"Vaihda kokouksen p\xe4\xe4ttymisajankohta: "),l.a.createElement("br",null),l.a.createElement(se.a,{locale:"fi",dateFormat:"dd/MM/yyyy",className:"form-control",selected:i,onChange:function(e){return r(e)},selectsEnd:!0,endDate:i,minDate:c}),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){return a(i)},className:"btn btn-outline-primary btn-sm mt-4"},"Tallenna")))))},We=function(e){var t,a,n=e.kokous,s="Ei p\xe4\xe4t\xf6svaltainen.",o="Ei p\xe4\xe4t\xf6svaltainen.";return"0"!==n.pv_kesto&&"true"===n.pv_kesto_toteutunut&&(o="P\xe4\xe4t\xf6svaltainen."),"0"===n.pv_esityslista&&"0"===n.pv_aktiivisuus&&"0"===n.pv_kesto&&""===n.pv_muu?(t="Ei p\xe4\xe4t\xf6svaltaisuuskriteerej\xe4.",a=""):"0"===n.pv_esityslista&&"0"===n.pv_aktiivisuus&&"0"===n.pv_kesto&&""!==n.pv_muu?(t="",a="P\xe4\xe4t\xf6svaltaisuuskriteeri"):(t="Kokous on p\xe4\xe4t\xf6svaltainen,",a="Muut kokouksen p\xe4\xe4t\xf6svaltaisuudelle asetetut kriteerit:"),l.a.createElement("div",{className:"col-sm-10 mt-3 mx-auto"},l.a.createElement("h6",null,t),"0"===n.pv_esityslista?l.a.createElement(l.a.Fragment,null):l.a.createElement("li",{className:"text-sm-nowrap"},"jos v\xe4hint\xe4\xe4n ",n.pv_esityslista," osallistujista on avannut esityslistan.",l.a.createElement("span",null,"\xa0"),"Tila: ",s),"0"===n.pv_aktiivisuus?l.a.createElement(l.a.Fragment,null):l.a.createElement("li",{className:"text-sm-nowrap"},"jos v\xe4hint\xe4\xe4n ",n.pv_aktiivisuus," osallistujista on ottanut asioihin kantaa.",l.a.createElement("span",null,"\xa0\xa0"),"Tila: ",s),"0"===n.pv_kesto?l.a.createElement(l.a.Fragment,null):l.a.createElement("li",{className:"text-sm-nowrap"},"jos kokous kest\xe4\xe4 v\xe4hint\xe4\xe4n  ",n.pv_kesto," vuorokautta. ",l.a.createElement("span",null,"\xa0\xa0"),"Tila: ",o),""===n.pv_muu?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"mt-3"},a),l.a.createElement("li",null,n.pv_muu)))},Ze=function(e){var t=e.kokous,a=e.yhdistys,s=e.osallistujat,o=e.puheenjohtaja;console.log("kokous",t);var i={month:"numeric",day:"numeric",year:"numeric"},r=t.kokousnro+"/"+new Date(t.startDate).toLocaleDateString("fi-FI",{year:"numeric"}),c=""!==t.otsikko?"<h2>".concat(t.otsikko,"</h2>"):"",u=new Date(t.startDate).toLocaleDateString("fi-FI",i)+" - "+new Date(t.endDate).toLocaleDateString("fi-FI",i),m=s.map((function(e){return"<li>"+e.firstname+" "+e.lastname+"</li>"})).join(" "),d="";"0"===t.pv_aktiivisuus&&"0"===t.pv_esityslista&&"0"===t.pv_kesto&&""===t.pv_muu?d+="<p>Kokouksen p\xe4\xe4t\xf6svaltaisuutta ei ole m\xe4\xe4ritelty.</p>":("0"!==t.pv_esityslista&&(d+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos v\xe4hint\xe4\xe4n ".concat(t.pv_esityslista," kpl kokousosallistujista on avannut esityslistan.</p>")),"0"!==t.pv_aktiivisuus&&(d+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos v\xe4hint\xe4\xe4n ".concat(t.pv_aktiivisuus," kpl kokousosallistujista on ottanut asioihin kantaa.</p>")),"0"!==t.pv_kesto&&(d+="true"===t.pv_kesto_toteutunut?"<p>Kokoukselle m\xe4\xe4ritelty minimikesto ".concat(t.pv_kesto," vuorokautta toteutui.</p>"):"<p>Kokoukselle m\xe4\xe4ritelty minimikesto ".concat(t.pv_kesto," vuorokautta ei toteutunut.</p>")),""!==t.pv_muu&&(d+="<p>".concat(t.pv_muu,"</p>")));var k=0!==o.length?o[0].firstname+o[0].lastname:"kokouksessa ei ole puheenjohtajaa",v=Object(n.useState)("<h1>".concat(a,"</h1>").concat(c,"<h2>").concat(r,"</h2><h2>").concat(u,"</h2><h2>Osallistujat</h2><ul>").concat(m,"</ul><p>Puheenjohtaja: ").concat(k,"<h2>P\xe4\xe4t\xf6svaltaisuus</h2>").concat(d)),h=Object(p.a)(v,2),f=h[0],E=h[1];return f?l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement(me,{editorContentChange:function(e){E(e)},teksti:f}),l.a.createElement("button",{className:"float-right btn-outline-primary btn-lg mt-1"},"Tee jotain nappi")):l.a.createElement("p",null,"Loading....")},$e=function(e){var t,a=Object(r.g)(),s=d(),o={month:"numeric",day:"numeric",year:"numeric"},c=Object(r.h)().yhdistys,u=Object(r.h)().kokousId,k=Object(n.useState)(),v=Object(p.a)(k,2),h=v[0],f=v[1],E=Object(n.useState)(),y=Object(p.a)(E,2),b=y[0],g=y[1],j=Object(n.useState)(),N=Object(p.a)(j,2),O=N[0],w=N[1],S=Object(n.useState)(),x=Object(p.a)(S,2),_=x[0],C=x[1],D=Object(n.useState)(),T=Object(p.a)(D,2),P=T[0],M=T[1],J=Object(n.useState)("asiat"),I=Object(p.a)(J,2),R=I[0],H=I[1],A=Object(n.useState)(!0),B=Object(p.a)(A,2),U=B[0],V=B[1];void 0===e.location.state?a.push("/assoc/".concat(c)):t=e.location.state.id_y,Object(n.useEffect)((function(){if(m()){var e=JSON.stringify({call:"getkokous",id:u});F(e).then((function(e){g(e.data)})).catch((function(e){return console.log("err.response.data",e.response.data)}));var n=JSON.stringify({call:"getosallistujat",id:u});K(n).then((function(e){C(e.data.filter((function(e){return"osallistuja"===e.role}))),w(e.data.filter((function(e){return"puheenjohtaja"===e.role})));var n=e.data.filter((function(e){return e.email===s.email}));n[0]?f(n[0].role):a.push({pathname:"/assoc/".concat(c),state:{yhdistys_id:t}})})).catch((function(e){return console.log("err.response.data",e.response.data)}));var l=JSON.stringify({call:"getallmembers",yhdistys:c});L(l).then((function(e){M(e.data)})).catch((function(e){return console.log("err.response",e.response)}))}}),[u,c,s.email,a]);var Y,z,q=function(e){for(var t=e.target.parentNode.querySelectorAll("button"),a=0;a<t.length;a++)t[a].classList.remove("valittu_menu");e.target.classList.add("valittu_menu"),H(e.target.name),"asiakirjat"===e.target.name&&V(!0)},W=function(e){var t,a=P.find((function(t){return t.email===e.target.name})),n=!1;"varalle"===e.target.id?window.confirm("Haluatko perua osallistujan ".concat(a.firstname," ").concat(a.lastname," osallistumisoikeuden kokoukseen?"))&&(C(_.filter((function(t){return t.email!==e.target.name}))),t=JSON.stringify({call:"poistaosallistuja",kokousid:u,email:e.target.name}),n=!0):"osallistujaksi"===e.target.id?window.confirm("Haluatko siirt\xe4\xe4 henkil\xf6n ".concat(a.firstname," ").concat(a.lastname," kokousosallistujaksi?"))&&(C(_.concat(a)),t=JSON.stringify({call:"lisaaosallistuja",kokousid:u,yhdistys:c,email:e.target.name}),n=!0):"poistu"===e.target.id&&(C(_.filter((function(e){return e.email!==s.email}))),t=JSON.stringify({call:"poistaosallistuja",kokousid:u,email:s.email}),n=!0,window.location.reload()),n&&(console.log("body",t),K(t).then((function(e){alert(e.data.message)})).catch((function(e){alert(e.response.data.message),console.log("err.response",e.response)})))};return m()&&m().yhdistys===c?b&&h?"1"===b.avoinna||"puheenjohtaja"===h?(Y="asiakirjat"===R?l.a.createElement(Ye,{kokous:b,yhdistys:c,setShowComponent:H,setShowTable:V,showTable:U}):"asiat"===R?l.a.createElement(Ae,{kokousid:u}):"osallistujat"===R?l.a.createElement(ze,{osallistujat:_,jasenet:P,puheenjohtaja:O,kokousRooli:h,handleOsallistujatClick:W}):"kokousaika"===R?l.a.createElement(qe,{kokous:b,handleVaihdaKokousaika:function(e){if("object"===typeof e&&Date.parse(e)!==Date.parse(b.endDate)){var t=e.toISOString().split("T")[0];if(window.confirm("Haluatko vaihtaa kokouksen uudeksi p\xe4\xe4ttymisp\xe4iv\xe4ksi ".concat(new Date(t).toLocaleDateString("fi-FI",{month:"numeric",day:"numeric",year:"numeric"}),"?"))){g(Object(ne.a)(Object(ne.a)({},b),{},{endDate:t}));var a=JSON.stringify({call:"vaihdapvm",kokousid:u,enddate:e});F(a).then((function(e){alert(e.data.message)})).catch((function(e){return alert(e.response.data.message)}))}}else alert("M\xe4\xe4rit\xe4 uusi p\xe4\xe4ttymisp\xe4iv\xe4 ennen tallentamista")}}):"paatosvaltaisuus"===R?l.a.createElement(We,{kokous:b}):"poytakirja"===R?l.a.createElement(Ze,{kokous:b,yhdistys:c,osallistujat:_,puheenjohtaja:O}):l.a.createElement("p",null,"error... "),z=Date.parse(b.endDate)<new Date?"Kokous on p\xe4\xe4ttynyt":Date.parse(b.endDate)>new Date&&Date.parse(b.startDate)<new Date?"Kokous on k\xe4ynniss\xe4":"Kokous ei ole viel\xe4 alkanut",l.a.createElement("div",{className:"mx-auto mt-5"},l.a.createElement("div",{className:"mx-3"},l.a.createElement("h2",null,c),l.a.createElement(i.b,{to:{pathname:"/assoc/".concat(c),state:{id_y:t}}},"Yhdistyksen p\xe4\xe4sivu"),l.a.createElement("hr",null),l.a.createElement("div",{className:"mb-3"},l.a.createElement("h4",null,b.otsikko," ")),l.a.createElement("div",{className:"float-left",style:{display:"grid",gridTemplateColumns:"1fr 2fr",lineHeight:"8px",whiteSpace:"nowrap"}},l.a.createElement("p",null,"Puheenjohtaja:"),0!==O.length?l.a.createElement("p",null,O[0].firstname," ",O[0].lastname," "):l.a.createElement("p",null,"Kokoukselle ei ole asetettu puheenjohtajaa. "),l.a.createElement("p",{style:{marginRight:"10px"}},"Kokouksen numero: "),l.a.createElement("p",null," ",b.kokousnro,"/",new Date(b.startDate).toLocaleDateString("fi-FI",{year:"numeric"})),l.a.createElement("p",null,"Kokouksen alku:"),l.a.createElement("p",null,new Date(b.startDate).toLocaleDateString("fi-FI",o)),l.a.createElement("p",null,"Kokouksen p\xe4\xe4t\xf6s:"),l.a.createElement("p",null,new Date(b.endDate).toLocaleDateString("fi-FI",o)),l.a.createElement("small",null,"(",z,")")),l.a.createElement("div",{className:"mt-4 float-right"},l.a.createElement("button",{className:"btn btn-danger mb-2 ml-2",type:"button",title:"Peru osallistumisesi kokoukseen",id:"poistu","data-toggle":"modal","data-target":"#poistuModal"},"Peru osallistumisesi"),l.a.createElement(Ge,{handlePJPoistuuKokouksesta:function(e){C(_.filter((function(e){return e.email!==s.email})));var t=JSON.stringify({call:"poistaosallistuja",kokousid:u,email:s.email});K(t).then((function(e){alert("Poistuit kokouksesta")})).catch((function(e){alert(e.response.data.message),console.log("err.response",e.response)}));var a=JSON.stringify({call:"pjpoistui",kokousid:u,syy:e,pv:10});console.log("body2",a),K(a).then((function(e){window.location.reload()})).catch((function(e){return console.log("err.response",e.response)}))},handleOsallistujatClick:W,kokousRooli:h})),l.a.createElement("div",{className:"clearfix"})),l.a.createElement("hr",null),l.a.createElement("div",{className:"d-sm-flex second_nav"},l.a.createElement("button",{className:"text-primary valittu_menu",onClick:q,name:"asiat"},"Asiakohdat"),l.a.createElement("button",{className:"text-primary",onClick:q,name:"asiakirjat"},"Asiakirjat"),l.a.createElement("button",{className:"text-primary",onClick:q,name:"osallistujat"},"Osallistujat"),"puheenjohtaja"===h?l.a.createElement(l.a.Fragment,null,"     ",l.a.createElement("button",{className:"text-primary",onClick:q,name:"kokousaika"},"Kokousaika")):l.a.createElement(l.a.Fragment,null),l.a.createElement("button",{className:"text-primary",onClick:q,name:"paatosvaltaisuus"},"P\xe4\xe4t\xf6svaltaisuus"),l.a.createElement("button",{className:"text-primary",onClick:q,name:"poytakirja"},"P\xf6yt\xe4kirja")),Y)):(a.push("/assoc/".concat(c)),l.a.createElement(l.a.Fragment,null)):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... "):(a.push("/assoc/".concat(c)),l.a.createElement(l.a.Fragment,null))},Ge=function(e){var t=e.handlePJPoistuuKokouksesta,a=e.handleOsallistujatClick,s=e.kokousRooli,o=Object(n.useState)(""),i=Object(p.a)(o,2),r=i[0],c=i[1];return l.a.createElement("div",{className:"modal fade",id:"poistuModal",tabIndex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"ModalLabel"},"Poistu kokouksesta"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("p",null,"Haluatko poistua kokouksesta?"),"puheenjohtaja"===s?l.a.createElement("div",{className:"form-group"},l.a.createElement("textarea",{className:"form-control",rows:"2",name:"syy",onChange:function(e){c(e.target.value)},value:r}),l.a.createElement("small",{className:"form-text text-muted"},"Voit kirjoittaa kentt\xe4\xe4n syyn kokouksesta poistumiseen.")):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"modal-footer"},"puheenjohtaja"===s?l.a.createElement("button",{type:"button",className:"btn btn-outline-primary","data-dismiss":"modal",id:"poistu",onClick:function(){return t(r)}},"Poistu kokouksesta"):l.a.createElement("button",{type:"button",className:"btn btn-outline-primary","data-dismiss":"modal",id:"poistu",onClick:a},"Poistu kokouksesta"),l.a.createElement("button",{type:"button",className:"btn btn-outline-secondary","data-dismiss":"modal"},"Peruuta")))))};var Qe=function(){return l.a.createElement("div",null,l.a.createElement(i.a,null,l.a.createElement(h,null),l.a.createElement("div",{className:"container",style:{width:"1100px",maxWidth:"100%",margin:"0 auto",padding:"0"}},l.a.createElement(r.d,null,l.a.createElement(r.b,{exact:!0,path:"/",component:g}),l.a.createElement(r.b,{path:"/login",component:R}),l.a.createElement(r.b,{path:"/register",component:U}),l.a.createElement(k,{path:"/userpage",component:q}),l.a.createElement(k,{path:"/assoc/:yhdistys",component:te}),l.a.createElement(k,{path:"/uusikokous/:yhdistys",component:Be}),l.a.createElement(k,{path:"/kokous/:yhdistys/:kokousId",component:$e})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Qe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e,t,a){},99:function(e,t,a){e.exports=a(190)}},[[99,1,2]]]);
//# sourceMappingURL=main.a9273508.chunk.js.map