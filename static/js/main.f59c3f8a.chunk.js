(this["webpackJsonpkokousfront_0.2"]=this["webpackJsonpkokousfront_0.2"]||[]).push([[0],{108:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){},190:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(19),i=a.n(s),o=a(8),r=a(13),c=a(98),u=function(e,t){localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("token",t)},m=function(){var e=localStorage.getItem("role");return e?JSON.parse(e):null},d=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null};function k(e){var t=e.component,a=Object(c.a)(e,["component"]);return l.a.createElement(r.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?l.a.createElement(t,e):l.a.createElement(r.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}a(108),a(109);var p=a(4),v=a(200);function h(){var e,t=Object(n.useState)(!1),a=Object(p.a)(t,2),s=a[0],i=a[1],c=Object(r.g)(),u=function(){var e="";e=s?"0":!s&&d()?"100px":"150px",document.getElementById("dropMenu").style.height=e,i(!s)};return e=d()?l.a.createElement(l.a.Fragment,null,l.a.createElement(o.b,{style:{color:"white",width:"200px"},className:"nav-link",to:"/userpage"},"Omat sivut"),l.a.createElement("p",{onClick:function(){window.confirm("Haluatko kirjautua ulos?")&&(c.push("/"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("role"),window.location.reload())},style:{color:"white",width:"250px",cursor:"pointer"},className:"nav-link"},"Kirjaudu ulos")):l.a.createElement(l.a.Fragment,null,l.a.createElement(o.b,{style:{color:"white",width:"200px"},className:"nav-link",to:"/"},"Etusivu"),l.a.createElement(o.b,{style:{color:"white",width:"200px"},className:"nav-link",to:"/login"},"Kirjaudu"),l.a.createElement(o.b,{style:{color:"white",width:"100px"},className:"nav-link",to:"/register"},"Rekister\xf6idy")),l.a.createElement("div",{className:"navbar navbar-expand",style:b,onClick:u},l.a.createElement("p",{className:"MenuText mt-2 ml-5"},"Menu",l.a.createElement(v.a,{size:30,className:"ml-3 fa-5x"})),l.a.createElement("div",{id:"dropMenu",style:y,onClick:u},s?l.a.createElement(l.a.Fragment,null,e):l.a.createElement(l.a.Fragment,null)))}var f,E,y={marginTop:"75px",fontFamily:"Lato, sans-serif",height:"0%",width:"100%",position:"absolute",zIndex:"1",top:"0",left:"0",backgroundColor:"rgba(44,62,80, 0.9)",transition:"0.5s"},b={color:"white",backgroundColor:"rgba(44,62,80, 0.9)",height:"75px",padding:"10px",position:"relative",width:"100vw !important",marginLeft:"calc(-50vw + 50%)"},g=function(){return l.a.createElement("div",{className:"col-md-10 mx-auto mt-5"},l.a.createElement("div",{className:"jumbotron"},l.a.createElement("h1",{className:"display-3"},"Hello, world!"),l.a.createElement("p",{className:"lead"},"T\xe4h\xe4n tulisi tehd\xe4 sovelluksen etusivu."),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("p",null,"Se voi kuvailla projektin ideaa, syit\xe4 miksi se on tehty, mit\xe4 sill\xe4 voi tehd\xe4 ja mit\xe4 sen toteutuksessa on k\xe4ytetty. Voisin laittaa vaikka linkin my\xf6s kirjautumiseen ja ehk\xe4 my\xf6s rekister\xf6itymiseen."),l.a.createElement("hr",null),l.a.createElement(o.b,{to:"/login",className:"btn btn-outline-primary"},"Kirjaudu")))},j=a(17),N=a(46),O=a.n(N),w=a(10),S=a.n(w),_="https://samik.azurewebsites.net/api/",x=function(e){return S.a.post("".concat(_,"data.php"),e,{withCredentials:!0}).then((function(e){return e}))},C=function(e){return S.a.post("".concat(_,"auth.php"),e).then((function(e){return e}))},D=function(e){return S.a.post("".concat(_,"auth.php"),e,{withCredentials:!0}).then((function(e){return e}))},L=function(e){return S.a.post("".concat(_,"assoc.php"),e).then((function(e){return e}))},K=function(e){return S.a.post("".concat(_,"kokous.php"),e).then((function(e){return e}))},F=function(e){return S.a.post("".concat(_,"osallistujat.php"),e).then((function(e){return e}))},T=function(e){return S.a.post("".concat(_,"documents.php"),e).then((function(e){return e}))},P=a(96),M=a(57),I=a(97),J=function(e){var t=e.text,a=e.placement,n=e.heading,s=e.btnText,i=e.variant,o=e.style;return l.a.createElement(l.a.Fragment,null,l.a.createElement(P.a,{trigger:"click",key:a,placement:a,overlay:l.a.createElement(M.a,{id:"popover-positioned-".concat(a)},l.a.createElement(M.a.Title,{as:"h3"},n),l.a.createElement(M.a.Content,{className:"text-justify p-3"},t))},l.a.createElement(I.a,{variant:i,style:o},s)))},R=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)(""),c=Object(p.a)(i,2),m=c[0],d=c[1],k=Object(r.g)(),v=function(e){"email"===e.target.name?s(e.target.value):"password"===e.target.name&&d(e.target.value)};return l.a.createElement("div",{className:"col-md-6 m-auto"},l.a.createElement("div",{className:"card card-body mt-5"},l.a.createElement("h2",{className:"text-center"},"Kirjaudu"),l.a.createElement("form",{className:"ml-2 mt-4",onSubmit:function(e){if(e.preventDefault(),""===a||""===m)alert("Anna k\xe4ytt\xe4j\xe4tunnus ja salasana!");else{var t=JSON.stringify({call:"applogin",email:a,password:m});D(t).then((function(e){var t={firstname:e.data.firstname,lastname:e.data.lastname,email:a};u(t,e.data.token),k.push({pathname:"/userpage",state:{login:!0}})})).catch((function(e){alert(e)}))}}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"S\xe4hk\xf6posti"),l.a.createElement("input",{type:"email",className:"form-control",name:"email",onChange:v})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Salasana"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:v})),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Kirjaudu"))),l.a.createElement("div",{className:"text-right"},l.a.createElement("p",null,l.a.createElement(O.a,{appId:"1500476053466452",autoLoad:!1,fields:"first_name, last_name,email,picture",callback:function(e){if(e){var t=JSON.stringify({call:"fblogin",email:e.email,fb_id:e.id});C(t).then((function(t){var a={firstname:e.first_name,lastname:e.last_name,email:e.email};u(a,t.data.token),k.push({pathname:"/userpage",state:{login:!0}})})).catch((function(e){alert(e.response.data.message)}))}else alert("Kirjautuminen ep\xe4onnistui")},render:function(e){return l.a.createElement("button",{onClick:e.onClick,className:"btn btn-outline"},"Kirjaudu Facebook-tunnuksilla ",l.a.createElement(j.c,null))}})),l.a.createElement("hr",null),l.a.createElement("p",{className:"mr-3",style:{lineHeight:"25px"}},"Haluatko rekister\xf6ity\xe4 k\xe4ytt\xe4j\xe4ksi? ",l.a.createElement(o.b,{to:"/register",className:"ml-1"},"Rekister\xf6idy"),l.a.createElement("br",null),"  "),l.a.createElement("p",{style:{marginTop:"-20px"}}," Tarvitsetko apua? ",l.a.createElement(J,{heading:"Kirjautuminen",text:"Kirjaudu j\xe4rjestelm\xe4\xe4n s\xe4hk\xf6postin ja salasanan avulla mik\xe4li k\xe4ytit niit\xe4 rekister\xf6ityess\xe4si. Jos rekister\xf6idyit Facebook-tunnuksilla, k\xe4yt\xe4 niit\xe4 my\xf6s kirjautumiseen. Mik\xe4li unohdit tunnuksesi, voit saada ne paikasta x.",btnText:"Klikkaa t\xe4st\xe4!",placement:"left",variant:"link",style:{marginBottom:"3px",marginLeft:"-10px"}})," "),l.a.createElement("p",{className:"mr-3"}))))},H=function(e){var t=e.fbRes,a=Object(n.useState)(t.first_name),s=Object(p.a)(a,2),i=s[0],c=s[1],u=Object(n.useState)(t.last_name),m=Object(p.a)(u,2),d=m[0],k=m[1],v=Object(n.useState)(t.email),h=Object(p.a)(v,2),f=h[0],E=h[1],y=Object(r.g)(),b=function(e){"firstname"===e.target.name?c(e.target.value):"lastname"===e.target.name?k(e.target.value):"email"===e.target.name&&E(e.target.value)};return l.a.createElement("div",{className:"col-md-8 mx-auto mt-5"},l.a.createElement("h4",null,"Terve ",i,"!"),l.a.createElement("p",null,"Tarkasta ennen rekister\xf6itymist\xe4 ovatko henkil\xf6tietosi ja s\xe4hk\xf6postiosoitteesi oikein."),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=t.id;if(""!==i&&""!==d&&""!==f&&""!==a){var n=JSON.stringify({call:"fbreg",firstname:i,lastname:d,email:f,fb_id:a});C(n).then((function(e){alert("Rekister\xf6ityminen onnistui! Kirjauduttuasi voit liitty\xe4 yhdistyksen alueelle ja tarkastella yhdistyksen kokousasioita."),y.push("/login")})).catch((function(e){alert(e.response.data.message),window.location.reload()}))}else alert("Tarkasta ett\xe4 kaikki kent\xe4t on t\xe4ytetty!")}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Etunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"firstname",onChange:b,value:i})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Sukunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"lastname",onChange:b,value:d})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"S\xe4hk\xf6posti"),l.a.createElement("input",{type:"email",className:"form-control",name:"email",onChange:b,value:f})),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Rekister\xf6idy")),l.a.createElement("p",{className:"text-right"},"Haluatko valita rekister\xf6itymistavan uudelleen?",l.a.createElement(o.b,{className:"ml-1",to:"/register",onClick:function(){return window.location.reload()}},"Takaisin"),l.a.createElement("br",null),"Onko sinulla jo k\xe4ytt\xe4j\xe4 tili?",l.a.createElement(o.b,{to:"/login",className:"ml-1"},"Kirjaudu"))))},A=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)(""),c=Object(p.a)(i,2),u=c[0],m=c[1],d=Object(n.useState)(""),k=Object(p.a)(d,2),v=k[0],h=k[1],f=Object(n.useState)(""),E=Object(p.a)(f,2),y=E[0],b=E[1],g=Object(n.useState)(""),j=Object(p.a)(g,2),N=j[0],O=j[1],w=Object(r.g)(),S=function(e){"firstname"===e.target.name?s(e.target.value):"lastname"===e.target.name?m(e.target.value):"email"===e.target.name?h(e.target.value):"password"===e.target.name?b(e.target.value):"password2"===e.target.name&&O(e.target.value)};return l.a.createElement("div",{className:"col-md-6 m-auto"},l.a.createElement("div",{className:"card card-body mt-5"},l.a.createElement("h4",{className:"text-center mb-4"},"Rekister\xf6idy k\xe4ytt\xe4j\xe4ksi"),l.a.createElement("p",null,"Lis\xe4\xe4 alle henkil\xf6tietosi, s\xe4hk\xf6postiosoitteesi ja salasana."),l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),""===a||""===u||""===v||""===y||""===N)alert("T\xe4yt\xe4 kaikki kent\xe4t!");else if(y!==N)alert("Tarkasta salasanat!");else{var t=JSON.stringify({call:"appreg",firstname:a,lastname:u,email:v,password:y});D(t).then((function(e){alert("Rekister\xf6ityminen onnistui! Kirjauduttuasi voit liitty\xe4 yhdistyksen alueelle ja tarkastella yhdistyksen kokousasioita."),w.push("/login")})).catch((function(e){alert(e.response.data.message),window.location.reload()}))}}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Etunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"firstname",onChange:S,value:a})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Sukunimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"lastname",onChange:S,value:u})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"S\xe4hk\xf6posti"),l.a.createElement("input",{type:"email",className:"form-control",name:"email",onChange:S,value:v})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Salasana"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:S,value:y})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Salasana uudelleen"),l.a.createElement("input",{type:"password",className:"form-control",name:"password2",onChange:S,value:N})),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Rekister\xf6idy")),l.a.createElement("p",{className:"text-right"},"Haluatko valita rekister\xf6itymistavan uudelleen?",l.a.createElement(o.b,{className:"ml-1",to:"/register",onClick:function(){return window.location.reload()}},"Takaisin"),l.a.createElement("br",null),"Onko sinulla jo k\xe4ytt\xe4j\xe4 tili? ",l.a.createElement(o.b,{to:"/login",className:"ml-1"},"Kirjaudu")))))},B=function(){return l.a.createElement("div",{style:{marginTop:"15%"},className:"row h-100 justify-content-center"},l.a.createElement("div",{className:"loader"}))},U=function(){var e=Object(n.useState)(),t=Object(p.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)({}),r=Object(p.a)(i,2),c=r[0],u=r[1];return a?a?l.a.createElement(l.a.Fragment,null," ","fb"===a?l.a.createElement(H,{fbRes:c}):l.a.createElement(A,null)):l.a.createElement(B,null):l.a.createElement("div",{className:"col-md-6 mx-auto mt-5"},l.a.createElement("div",{className:"card card-body mt-5"},l.a.createElement("h4",{className:"text-center mb-4"},"Rekister\xf6idy k\xe4ytt\xe4j\xe4ksi"),l.a.createElement("p",{className:" text-justify "},"Palvelua voi k\xe4ytt\xe4\xe4 luomalla sovelluskohtaisen tunnuksen tai rekister\xf6itym\xe4ll\xe4 Facebook-tunnuksien avulla.",l.a.createElement("br",null),l.a.createElement("br",null),"Jos olet jo rekister\xf6itynyt ja haluat kirjautua, p\xe4\xe4set kirjautumissivulle  ",l.a.createElement(o.b,{to:"/login"},"t\xe4st\xe4.")),l.a.createElement("hr",null),l.a.createElement("div",{className:"row"},l.a.createElement("button",{onClick:function(e){"app"===e.target.id&&s("app")},id:"app",className:"btn btn-outline mr-2"},"Rekister\xf6i sovelluskohtainen tunnus"),l.a.createElement(O.a,{appId:"1500476053466452",autoLoad:!1,fields:"first_name, last_name,email,picture",callback:function(e){u(e),s("fb")},render:function(e){return l.a.createElement("button",{onClick:e.onClick,className:"btn btn-outline"},"Rekister\xf6idy Facebook-tunnuksilla  ",l.a.createElement(j.c,null))}}))))},V=a(92),Y=(a(128),function(e){var t=e.yhdistykset,a=e.setShowForm,s=Object(n.useState)(""),i=Object(p.a)(s,2),o=i[0],r=i[1],c=Object(n.useState)(""),u=Object(p.a)(c,2),m=u[0],k=u[1],v=function(e){"yhdistys"===e.target.name?r(e.target.value):"password"===e.target.name&&k(e.target.value)},h=function(){var e=d(),t=JSON.stringify({call:"joinyhdistys",email:e.email,yhdistys:o});console.log("body",t),L(t).then((function(e){console.log("(setnewmember: ",e.data),alert(e.data.message),window.location.reload()})).catch((function(e){alert(e.response.data.message),e.response.data.message.includes("Olet jo yhdistyksen")&&window.location.reload()}))};return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),o&&m){var t=JSON.stringify({call:"checkyhdistystiedot",name:o,password:m});L(t).then((function(e){h()})).catch((function(e){alert(e.response.data.message)}))}else alert("T\xe4yt\xe4 molemmat kent\xe4t!")}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Yhdistyksen nimi"),l.a.createElement("input",{type:"text",className:"form-control",name:"yhdistys",onChange:v,value:o})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Yhdistyksen tunnus"),l.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:v,value:m})),l.a.createElement("div",{className:"form-group text-right"},t.length>0?l.a.createElement("button",{type:"button",onClick:function(){return a(!0)},className:"btn btn-outline-secondary mt-3 mx-2"},"Palaa takaisin"):l.a.createElement(l.a.Fragment,null),l.a.createElement("button",{type:"submit",className:"btn btn-outline-primary mt-3"},"Rekister\xf6idy"))))}),z=function(e){var t=e.yhdistykset,a=e.setShowForm;return l.a.createElement("div",null,l.a.createElement("button",{className:"mb-4 btn btn-outline-primary mx-3",onClick:function(){return a(!1)}},"Liity yhdistykseen"),l.a.createElement("table",{className:"table table-hover mt-4"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Yhdistys"))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement(o.b,{className:"mt-4 text-left text-dark",style:{textDecoration:"none"},to:{pathname:"/assoc/".concat(e.name),state:{id:e.id}}},l.a.createElement("div",{className:"yhdistysLink"},e.name)))})))))},q=function(e){var t,a=d(),s=Object(n.useState)(!(void 0===e.location.state||!e.location.state.login)),i=Object(p.a)(s,2),o=i[0],r=i[1],c=Object(n.useState)([]),u=Object(p.a)(c,2),m=u[0],k=u[1],v=Object(n.useState)(!0),h=Object(p.a)(v,2),f=h[0],E=h[1];return Object(n.useEffect)((function(){var e=JSON.stringify({call:"getmemberships",email:a.email});L(e).then((function(e){k(e.data)})).catch((function(e){e.response.data&&console.log("err.response.data",e.response.data)}))}),[a.email]),t=m.length>0&&f?"Alla n\xe4et yhdistykset, joiden kokoustilaan olet liittynyt. Painamalla nappia saat n\xe4kyviisi kaavakkeen, jolla voit lis\xe4t\xe4 itsesi yhdistyksen kokoustilan k\xe4ytt\xe4j\xe4ksi.":m.length>0&&!f?"Voit liitt\xe4\xe4 itsesi yhdistyksen kokoustilaan antamalla yhdistyksen nimen ja sovelluskohtaisen salasanan. Saat tarvittavan tunnuksen sovelluksen p\xe4\xe4k\xe4ytt\xe4j\xe4lt\xe4.":"Et ole viel\xe4 rekister\xf6itynyt yhdistysten kokoustilan k\xe4ytt\xe4j\xe4ksi. Alla olevan kent\xe4n avulla voit liitt\xe4\xe4 itsesi yhdistyksen kokoustilaan antamalla yhdistyksen nimen ja sovelluskohtaisen salasanan. Saat tarvittavan tunnuksen sovelluksen p\xe4\xe4k\xe4ytt\xe4j\xe4lt\xe4.",l.a.createElement("div",{style:{width:"100%",maxWidth:"1100px",padding:"0",marginTop:"50px"}},l.a.createElement("h4",{className:"px-3"},"Moi ",a.firstname,"!"),l.a.createElement("hr",null),l.a.createElement("p",{className:"px-3"},t),l.a.createElement("hr",null),m.length>0&&f?l.a.createElement(z,{yhdistykset:m,setShowForm:E}):l.a.createElement(Y,{yhdistykset:m,setShowForm:E}),l.a.createElement(W,{isModalOpen:o,setIsModalOpen:r}))},W=function(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=d();return l.a.createElement(V.a,{visible:t,onClose:function(){return a(!1)},animation:"door",duration:400,height:150,width:300},l.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"},onClick:function(){return a(!1)}},l.a.createElement("h5",{style:{position:"absolute",top:"40%",left:"25%"}},"Tervetuloa ",n.firstname,"! ")))},Z=a(39),$=function(e){var t=e.pvm,a=void 0===t?null:t,n=e.alku,s=void 0===n?"false":n,i=e.kk,o=void 0===i?"1":i,r=e.pv,c=void 0===r?"1":r;null!=a&&(o=(a=new Date(a)).getMonth()+1,c=a.getDate());var u=["Tammi","Helmi","Maalis","Huhti","Touko","Kes\xe4","Hein\xe4","Elo","Syys","Loka","Marras","Joulu"][parseInt(o-1)]+"kuu";return l.a.createElement("div",{className:s?"paivays_alku paivays":"paivays_loppu paivays"},l.a.createElement("div",{className:"kk"},u),l.a.createElement("div",{className:"paivays_nro"},c))},G=function(e){var t=e.kokous,a=e.yhdistys,s=e.yhdistys_id,i={year:"numeric"},r=Object(n.useState)(!1),c=Object(p.a)(r,2),u=c[0],m=c[1];return u?l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... "):l.a.createElement("div",{className:"bg"},l.a.createElement("div",null,t.map((function(e){return l.a.createElement(o.b,{key:e.id,className:"text-primary",style:{pointerEvents:"1"===e.avoinna||"puheenjohtaja"===e.role?"auto":"none",textDecoration:"none"},to:{pathname:"/kokous/".concat(a,"/").concat(e.id),state:{id_y:s}},title:"Tarkastele kokouksen tietoja"},l.a.createElement("div",{className:"1"===e.avoinna||"puheenjohtaja"===e.role?"taulu":"taulu disable",key:e.kokousnro},l.a.createElement($,{pvm:e.startDate,alku:!1}),l.a.createElement($,{pvm:e.endDate,alku:!1}),l.a.createElement("div",{className:"tauluAlku tauluotsikko"},e.otsikko),l.a.createElement("div",{className:"taulukokousnro"},e.kokousnro,"/",new Date(e.endDate).toLocaleDateString("fi-FI",i)),"1"===e.avoinna?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"taulutila"},"kokoustila on suljettu"),"puheenjohtaja"===e.role?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"taulunapit"},l.a.createElement("div",{style:{whiteSpace:"nowrap"}},l.a.createElement("button",{onClick:function(t){t.preventDefault(),function(e){if(window.confirm("Haluatko avata kokoustilan osallistujille?")){m(!0);var t=JSON.stringify({call:"openkokous",id:e});console.log("body",t),K(t).then((function(e){alert(e.data.message),window.location.reload()})).catch((function(e){alert(e.response.data.message)}))}}(e.id)},id:e.id,title:"Avaa kokoustila",className:"btn btn-outline-primary",style:{marginLeft:"5px"}},l.a.createElement(j.f,null))))):l.a.createElement(l.a.Fragment,null))))}))))},Q=function(e){var t,a=e.kokoukset,s=e.showComponent,i=e.yhdistys,o=e.yhdistys_id,r=Object(n.useState)([]),c=Object(p.a)(r,2),u=c[0],m=c[1],d=Object(n.useState)([]),k=Object(p.a)(d,2),v=k[0],h=k[1],f=Object(n.useState)([]),E=Object(p.a)(f,2),y=E[0],b=E[1];return Object(n.useEffect)((function(){a&&a.map((function(e){return Date.parse(e.endDate)<new Date?b((function(t){return[].concat(Object(Z.a)(t),[e])})):Date.parse(e.endDate)>new Date&&Date.parse(e.startDate)<new Date?h((function(t){return[].concat(Object(Z.a)(t),[e])})):m((function(t){return[].concat(Object(Z.a)(t),[e])})),null}))}),[a]),t="kaynnissa"===s?l.a.createElement(l.a.Fragment,null,0===v.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Yhdistyksell\xe4 ei ole k\xe4ynniss\xe4 olevia kokouksia")):l.a.createElement(l.a.Fragment,null,l.a.createElement(G,{kokous:v,yhdistys:i,status:"kaynnissa",yhdistys_id:o}))):"menneet"===s?l.a.createElement(l.a.Fragment,null,0===y.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Yhdistyksell\xe4 ei ole menneit\xe4 kokouksia")):l.a.createElement(l.a.Fragment,null,l.a.createElement(G,{kokous:y,yhdistys:i,status:"paattynyt",yhdistys_id:o}))):"tulevat"===s?l.a.createElement(l.a.Fragment,null,0===u.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Yhdistyksell\xe4 ei ole tulevia kokouksia")):l.a.createElement(l.a.Fragment,null,l.a.createElement(G,{kokous:u,yhdistys:i,status:"tuleva",yhdistys_id:o}))):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{className:"mt-2"},t)},X=function(e){var t=e.members;return l.a.createElement("div",{style:{marginTop:"4px"}},l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("td",null,"Etunimi"),l.a.createElement("td",null,"Sukunimi"),l.a.createElement("td",null,"S\xe4hk\xf6postiosoite"))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email))})))))},ee=function(e){var t,a=e.kokoukset,s=e.members,i=e.yhdistys,o=e.yhdistys_id,c=Object(r.g)(),u=Object(n.useState)("kaynnissa"),d=Object(p.a)(u,2),k=d[0],v=d[1],h=l.a.createElement("p",null,"Valikon kautta voit valita haluamasi n\xe4kym\xe4n. Voit luoda uuden kokouksen painamalla uusi kokous -n\xe4pp\xe4int\xe4. N\xe4et my\xf6s tulevat ja k\xe4ynniss\xe4 olevat kokoukset sek\xe4 menneiden kokouksien asiat valikon n\xe4pp\xe4imien kautta. Palveluun rekister\xf6ityneet j\xe4senet saat n\xe4kyville yhdistyksen j\xe4senet -n\xe4pp\xe4int\xe4 painamalla. "),f=function(e){for(var t=e.target.parentNode.querySelectorAll("button"),a=0;a<t.length;a++)t[a].classList.remove("valittu_menu");v(e.target.name),e.target.classList.add("valittu_menu")};return t="tulevat"===k||"menneet"===k||"kaynnissa"===k?l.a.createElement(Q,{kokoukset:a,showComponent:k,yhdistys:i,yhdistys_id:o}):"jasenet"===k?l.a.createElement(X,{members:s}):l.a.createElement(l.a.Fragment,null),m()&&m().yhdistys===i&&a?l.a.createElement("div",null,l.a.createElement("div",{className:"d-sm-flex justify-content-center second_nav"},l.a.createElement("button",{className:"text-primary valittu_menu",name:"kaynnissa",onClick:f},"Kokoukset"),l.a.createElement("button",{className:"text-primary ",name:"tulevat",onClick:f},"Tulevat kokoukset"),l.a.createElement("button",{className:"text-primary ",name:"menneet",onClick:f},"P\xe4\xe4ttyneet kokoukset"),l.a.createElement("button",{className:"text-primary ",name:"jasenet",onClick:f},"J\xe4senlista"),l.a.createElement(J,{heading:"Yhdistyksen etusivu",text:h,btnText:"Selityst\xe4",placement:"left",variant:"btn btn-outline-danger btn-sm mx-1"})),t):m()?(c.push("/userpage"),null):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... ")},te=function(e){var t,a=Object(n.useState)(),s=Object(p.a)(a,2),i=s[0],c=s[1],u=Object(n.useState)([]),k=Object(p.a)(u,2),v=k[0],h=k[1],f=Object(r.h)().yhdistys,E=Object(n.useState)(""),y=Object(p.a)(E,2),b=y[0],g=y[1],j=d(),N=Object(r.g)();return void 0===e.location.state?N.push("/userpage"):t=e.location.state.id_y,Object(n.useEffect)((function(){var e=JSON.stringify({call:"checkmember",email:j.email,name:f});if(L(e).then((function(e){g(e.data.role),function(e){localStorage.setItem("role",JSON.stringify(e))}({yhdistys:f,role:e.data.role})})).catch((function(){return N.push("/userpage")})),b){var t=JSON.stringify({call:"getkokoukset",yhdistys:f,email:j.email});K(t).then((function(e){c(e.data.filter((function(e){return"1"===e.valmis})))})).catch((function(e){return console.log("err.response",e.response)}));var a=JSON.stringify({call:"getallmembers",yhdistys:f});L(a).then((function(e){h(e.data)})).catch((function(e){return console.log("err.response",e.response)}))}}),[N,j.email,f,b]),m()&&i?l.a.createElement("div",{style:{width:"100%",maxWidth:"1100px",padding:"0",marginTop:"50px"}},l.a.createElement("h2",{className:"px-3"},f),l.a.createElement("h4",{className:"px-3"},"Yhdistyksen sivu"),"admin"===m().role?l.a.createElement(o.b,{className:"px-3",to:{pathname:"/uusikokous/".concat(f),state:{id_y:t}}},"Luo uusi kokous"):l.a.createElement(l.a.Fragment,null),l.a.createElement("hr",null),l.a.createElement(ee,{kokoukset:i,members:v,yhdistys:f,yhdistys_id:t})):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... ")},ae=a(16),ne=a(7),le=a(29),se=a.n(le),ie=(a(59),a(53)),oe=function(e){e.setShowComponent;var t=e.handlePerustiedotChange,a=(e.saveKokousDraft,e.perustiedot),n=e.setPerustiedot;Object(le.registerLocale)("fi",ie.a);var s=a.avoinna?"Avoinna":"Kiinni";return a?l.a.createElement("div",{className:"col-md-6  m-auto"},l.a.createElement("h5",{className:"mb-4"},"Kokouksen perustiedot"),l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Otsikko"),l.a.createElement("input",{type:"text",className:"form-control",name:"otsikko",onChange:t,value:a.otsikko})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kokouksen numero"),l.a.createElement("input",{type:"text",className:"form-control",name:"kokousnro",onChange:t,value:a.kokousNro||""})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kokous alkaa"),l.a.createElement("br",null),l.a.createElement(se.a,{name:"startdate",locale:"fi",dateFormat:"dd/MM/yyyy",className:"form-control",selected:a.startDate,onChange:function(e){return n(Object(ne.a)(Object(ne.a)({},a),{},{startDate:e}))},selectsStart:!0,startDate:a.startDate,endDate:a.endDate})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kokous p\xe4\xe4ttyy"),l.a.createElement("br",null),l.a.createElement(se.a,{locale:"fi",dateFormat:"dd/MM/yyyy",className:"form-control",selected:a.endDate,onChange:function(e){return n(Object(ne.a)(Object(ne.a)({},a),{},{endDate:e}))},selectsEnd:!0,startDate:a.startDate,endDate:a.endDate,minDate:a.startDate})),l.a.createElement("div",{className:"form-group custom-control custom-switch"},l.a.createElement("input",{type:"checkbox",className:"custom-control-input",onChange:t,id:"avaa",value:a.avoinna,checked:a.avoinna}),l.a.createElement("label",{className:"custom-control-label",htmlFor:"avaa"},"Avaa kokoustila heti osallistujille")),l.a.createElement("p",null,"Tila: ",s)),l.a.createElement("hr",null)):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... ")},re=function(e){var t=e.puheenjohtaja,a=e.osallistujat,s=e.setOsallistujat,i=e.saveOsallistujat,o=e.varalla,r=e.setVaralla;e.setShowComponent;Object(n.useEffect)((function(){i()}),[a]);var c=function(e){var t=a.filter((function(t){return t.email===e.target.name}));r(o.concat(t)),s(a.filter((function(t){return t.email!==e.target.name})))},u=function(e){var t=o.filter((function(t){return t.email===e.target.name}));s(a.concat(t)),r(o.filter((function(t){return t.email!==e.target.name})))};return l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Osallistujat"),l.a.createElement("h6",null,"Puheenjohtaja:"," "," ",t[0].firstname," ",t[0].lastname," (",t[0].email,")"),l.a.createElement("div",{className:"mt-1"},a.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"mt-4"},"Kokousosallistujat"),l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,a.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),l.a.createElement("td",null,l.a.createElement("button",{onClick:c,className:"btn btn-outline-primary btn-sm",name:e.email},"Poista osallistujalistalta")))}))))):l.a.createElement("h6",null,"Kokouksessa ei ole osallistujia"),o.length>1?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"mt-4"},"Muut yhdistyksen j\xe4senet"),l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,o.filter((function(e){return e.email!==t[0].email})).map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),l.a.createElement("td",null,l.a.createElement("button",{onClick:u,className:"btn btn-outline-primary btn-sm",name:e.email},"Siirr\xe4 kokousosallistujaksi")))}))))):l.a.createElement("h6",null,"Kaikki yhdistyksen j\xe4senet ovat osallistujalistalla")),l.a.createElement("hr",null))},ce=function(e){e.setShowComponent;var t=e.handlePaatosvaltaChange,a=(e.saveKokousDraft,e.paatosvaltaisuus);return l.a.createElement("div",{className:"mt-5"},l.a.createElement("div",{className:"col-md-6  m-auto"},l.a.createElement("div",{className:"mb-2"},l.a.createElement("h5",null,"Kokouksen p\xe4\xe4t\xf6svaltaisuus"),l.a.createElement("p",{style:{marginTop:"-5px"}},l.a.createElement(J,{heading:"P\xe4\xe4t\xf6svaltaisuus",text:"Kokouksen p\xe4\xe4t\xf6svaltaisuuden voi m\xe4\xe4ritell\xe4 t\xe4ytt\xe4m\xe4ll\xe4 valitsemasi kent\xe4t. Tyhj\xe4ksi j\xe4tetty\xe4 kentt\xe4\xe4 ei huomioida kokouksen p\xe4\xe4t\xf6svaltaisuuden m\xe4\xe4rittelyss\xe4.",btnText:"Selite",placement:"bottom",variant:"link",style:{marginBottom:"3px",marginLeft:"-10px"}}))),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Esityslista"),l.a.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",name:"esityslista",onChange:t,value:a.esityslista}),l.a.createElement("small",{className:"form-text text-muted"},"Kuinka monen kokousosallistujan on avattava esityslista kokouksen p\xe4\xe4t\xf6svaltaisuuden t\xe4yttymiseksi?")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Aktiivisuus"),l.a.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",name:"aktiivisuus",onChange:t,value:a.aktiivisuus}),l.a.createElement("small",{className:"form-text text-muted"},"Kuinka monen k\xe4ytt\xe4j\xe4n on kommentoitava jotakin kohtaa tai kannatettava jotakin, jotta kokouksen p\xe4\xe4t\xf6svaltaisuus t\xe4yttyy?")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Kesto"),l.a.createElement("input",{type:"number",min:"0",step:"1",className:"form-control",name:"kesto",onChange:t,value:a.kesto}),l.a.createElement("small",{className:"form-text text-muted"},"Kuinka monta vuorokautta kokouksen on kestett\xe4v\xe4, jotta kokous on p\xe4\xe4t\xf6svaltainen?")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Muu kriteeri"),l.a.createElement("textarea",{className:"form-control",rows:"3",name:"muu",onChange:t,value:a.muu}),l.a.createElement("small",{className:"form-text text-muted"},"Kirjoita haluamasi p\xe4\xe4t\xf6svaltaisuuskriteeri kentt\xe4\xe4n")))))},ue=a(54),me=function(e){var t=e.editorContentChange,a=e.teksti;return l.a.createElement("div",{style:{contenteditable:"true",zIndex:"100 !important"}},l.a.createElement(ue.a,{apiKey:"125nsf0ndxttm5fjgwyhk2ngplw4q3unbfbd18msydg603bp",onEditorChange:t,value:a,init:{height:750,plugins:["advlist lists link image print","charmap print preview anchor help","searchreplace visualblocks","insertdatetime table paste preview"],toolbar:["preview print | undo redo | formatselect | bold italic |  alignleft aligncenter alignright |  bullist numlist outdent indent | help | insertdatetime"],insertdatetime_dateformat:["%HH:%M","%d-%m-%Y"],setup:function(e){e.on("keydown",(function(t){if(9===t.keyCode)return e.execCommand("mceInsertRawHTML",!1,"&emsp;&emsp;"),t.preventDefault(),t.stopPropagation(),!1}))}}}))},de=function(e){var t=e.perustiedot,a=e.esityslista_otsakkeet,s=e.osallistujat,i=e.paatosvaltaisuus,o=e.yhdistys,c=e.id_y,u=Object(n.useState)(!1),m=Object(p.a)(u,2),k=m[0],v=m[1],h=Object(r.g)(),f=d(),E={month:"numeric",day:"numeric"},y=new Date(t.startDate).toLocaleDateString("fi-FI",E),b=new Date(t.endDate).toLocaleDateString("fi-FI",E),g=""===t.otsikko?"":"<h3>".concat(t.otsikko,"</h3>"),j=s.map((function(e){return"<li>"+e.firstname+" "+e.lastname+"</li>"})).join(" "),N=a.map((function(e){return"<li>"+e.otsikko+"</li>"})).join(" ");N=0===N.length?"<p>Kokoukselle ei ole m\xe4\xe4ritelty esityslistaa</p>":N;var O="";""===i.esityslista&&""===i.aktiivisuus&&""===i.kesto&&""===i.muu?O+="<p>Kokouksen p\xe4\xe4t\xf6svaltaisuutta ei ole m\xe4\xe4ritelty.</p>":(""!==i.esityslista&&(O+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos v\xe4hint\xe4\xe4n ".concat(i.esityslista," kpl kokousosallistujista on avannut esityslistan.</p>")),""!==i.aktiivisuus&&(O+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos v\xe4hint\xe4\xe4n ".concat(i.aktiivisuus," kpl kokousosallistujista on ottanut asioihin kantaa.</p>")),""!==i.kesto&&(O+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos kokous kest\xe4\xe4 v\xe4hint\xe4\xe4n ".concat(i.kesto," vuorokautta.</p>")),""!==i.muu&&(O+="<p>".concat(i.muu,"</p>")));var w=Object(n.useState)("<h3>Esityslista ".concat(t.kokousNro," kokous alkaa ").concat(y," ja p\xe4\xe4ttyy ").concat(b,"</h3>").concat(g,"<h4>Kokouksen avaus ").concat(y,"</h4><h4>Esityslista</h4><ol>").concat(N,"</ol><h4>Osallistujat</h4><ul>").concat(j.substring(0,j.length-5),"</ul><h4>Kokouksen p\xe4\xe4t\xf6svaltaisuus</h4>").concat(O,"<h4>Kokous p\xe4\xe4ttyy ").concat(b,"</h4><p>Terveisin <br/>").concat(f.firstname," ").concat(f.lastname,"<br/><small>").concat(o,"</small></p>")),S=Object(p.a)(w,2),_=S[0],x=S[1],C=function(){var e=JSON.stringify({call:"luokokous",id_y:c,kokousid:t.kokousid,otsikko:t.otsikko,kokousnro:t.kokousNro.substring(0,t.kokousNro.length-5),startDate:t.startDate,endDate:t.endDate,avoinna:t.avoinna,paatosvaltaisuus:i,valmis:!0});K(e).then((function(e){D()})).catch((function(e){alert(e.response.data.message)}))},D=function(){var e=JSON.stringify({call:"postdoc",id_y:c,kokousnro:t.kokousNro.substring(0,t.kokousNro.length-5),type:"kokouskutsu",draft:"false",content:_});T(e).then((function(e){L()})).catch((function(e){alert(e.response.data.message)}))},L=function(){var e;e=s.map((function(e){return Object(ne.a)({rooli:"osallistuja"},e)})),f=Object.assign({rooli:"puheenjohtaja"},f);var a={call:"postosallistujat",id_y:c,kokousid:t.kokousid};e=[f].concat(e),e=[a].concat(e);var n=JSON.stringify(e);F(n).then((function(e){P(),console.log("Osallistujatiedot tallennettu ",e.data)})).catch((function(e){return alert(e.response.data.message)}))},P=function(){var e=_.substring(4,_.indexOf("</h3>")),t=_.substring(_.indexOf("</h3>")+5),a=[f].concat(s),n=JSON.stringify({call:"sendkokousinvite",yhdistys:o,aihe:e,viesti:t,osallistujat:a});console.log("invite",n),K(n).then((function(e){alert(e.data.message),v(!1),h.push({pathname:"/assoc/".concat(o),state:{id_y:c}})})).catch((function(e){return alert(e.response.data.message)}))};return t.startDate&&t.endDate?0===s.length?l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Kokouksessa ei ole osallistujia. Lis\xe4\xe4 kokousosallistujat osallistujat-v\xe4lilehdell\xe4.")):k?k?l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Pyynt\xf6\xe4 k\xe4sitell\xe4\xe4n, odota hetki...."),l.a.createElement(B,null)):void 0:l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"Yhteenveto"),l.a.createElement("p",{className:"mb-4"},"Tarkasta kokouksen tiedot. Painamalla ruudun pohjalla olevaa n\xe4pp\xe4int\xe4 kokous tallentuu ja j\xe4rjestelm\xe4 l\xe4hett\xe4\xe4 kutsun osallistujille kokoukseen s-postitse."),l.a.createElement(me,{editorContentChange:function(e){x(e)},teksti:_}),l.a.createElement("div",{className:"form-group text-right"},l.a.createElement("button",{className:"btn btn-outline-primary mt-3",onClick:function(){window.confirm("Haluatko tallentaa kokouksen ja l\xe4hett\xe4\xe4 kutsun osallistujille?")&&(v(!0),C())}},"Tallenna ja l\xe4het\xe4 kokouskutsu"))):l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement("h5",{className:"mb-4"},"P\xe4iv\xe4m\xe4\xe4r\xe4tiedot ovat puutteelliset. T\xe4yt\xe4 tarvittavat tiedot perustiedot-v\xe4lilehdell\xe4."))},ke=(a(89),function(e){var t,a=e.sisus,s=e.id,i=void 0===s?0:s,o=e.save,r=e.placeholder,c=void 0===r?"":r,u=e.edit,m=void 0!==u&&u,d=(e.avaa,e.alku,e.loppu,Object(n.useRef)(null)),k=function(e){o(i,e.target.value,500,"otsake")};return Object(n.useEffect)((function(){d.current.style.minHeight="auto",d.current.style.minHeight=d.current.scrollHeight-15+"px"}),[a,m]),t=m?l.a.createElement("textarea",{ref:d,className:"areaText",id:i,spellCheck:"false",onChange:k,onInput:k,value:a,placeholder:c}):l.a.createElement("div",{ref:d,tabIndex:"0",style:{paddingBottom:15},className:"areaText",id:i,spellCheck:"false"},a),l.a.createElement("div",null,t)}),pe=function(e){e.type,e.kokous_id;var t=e.kohta_id,a=e.tila,s=e.paatos,i=e.save,o="",r=Object(n.useState)(!1),c=Object(p.a)(r,2),u=c[0],m=c[1];o=s;return l.a.createElement("div",null,l.a.createElement("div",{className:"paatos"+a},l.a.createElement("div",{className:"nuija",onClick:function(){m(!u)}},l.a.createElement("div",{className:"nuija2"},l.a.createElement(j.d,null))," "),l.a.createElement("div",{className:"paatos_editori"},l.a.createElement(ke,{edit:3!=a,id:t,sisus:s,save:function(e,a,n){o=a,i(t,[a,2],n)}}))),u?3==a?l.a.createElement("div",{className:"paatos_valinnat"},l.a.createElement("div",{className:"avaa",onClick:function(){m(!1),i(t,[s,2],100)}},"AVAA")):l.a.createElement("div",{className:"paatos_valinnat"},l.a.createElement("div",{onClick:function(){m(!1),i(t,[o,3],100)}},"Hyv\xe4ksy!"),l.a.createElement("div",null,"Lis\xe4aikaa"),l.a.createElement("div",null,"Hylk\xe4\xe4")):"")},ve=(a(184),function(e){var t,a=e.tila,n=e.maara,s=void 0===n?0:n,i=e.edit,o=e.id,r=e.nimi,c=e.arvo,u=e.check,m=e.remove,d=e.save,k=e.summa,p=void 0===k?0:k;return t=l.a.createElement("div",{tabIndex:"0",onKeyDown:function(e){" "===e.key&&(e.preventDefault(),u(o))},className:c?"green ruutu":"ruutu",onClick:function(){u(o)}}),l.a.createElement("div",{className:"3"==a?"":"valintahover"},l.a.createElement("div",{className:"valinta"},s>0?l.a.createElement("div",{className:"valinta_maara"},(parseFloat(s)/parseFloat(p)*100).toFixed(1),"% (",s,")"):"",p>0?l.a.createElement("div",{style:{marginLeft:"40px",width:parseFloat(s)/parseFloat(p)*90+"%",backgroundColor:"#ddd",height:"5px",marginTop:"30px",position:"absolute"}}):"",t,0==i&&0==s?l.a.createElement("input",{onChange:function(e){d(o,e.target.value)},spellCheck:"false",className:"ruutuvalinta",type:"text",value:r,autoFocus:!0}):l.a.createElement("div",{spellCheck:"false",className:"ruutuvalinta"},r),0==i&&0==s?l.a.createElement("div",{className:"remove",onClick:function(){m(o)}}):""))}),he=function(e){e.edit;var t=e.arvot,a=void 0===t?[]:t,n=e.checkValue,s=void 0===n?[]:n,i=e.check,o=e.remove,r=e.save,c=e.uusi,u=e.multi,m=void 0===u?0:u,d=e.type,k=void 0===d?"3":d,p=e.tila;f=0,a.map((function(e){return f+=parseInt(e.maara)}));var v,h=function(e){"3"!=p&&o(e)},E=function(e,t){"3"!=p&&r(e,t)},y=function(e){"3"!=p&&i(e,m)};return!1,"3"==k&&"3"!=p&&(v=l.a.createElement("button",{className:"uusi add",onClick:function(){c(0)}},"Valinta")),l.a.createElement("div",null,a.map((function(e){return l.a.createElement(ve,{arvo:s&&s.includes(e.id),summa:f,tila:p,maara:e.maara,edit:e.tekija,remove:h,save:E,check:y,nimi:e.nimi,key:e.id,id:e.id})})),v,l.a.createElement("br",null))},fe=(a(185),function(e){var t=e.thread_id,a=e.kohta_id,s=e.maara,i=e.kokous_id,o=e.tyyppi,r=void 0===o?"mielipide":o,c=Object(n.useState)(!1),u=Object(p.a)(c,2),m=u[0],d=u[1],k=Object(n.useState)(""),v=Object(p.a)(k,2),h=v[0],f=v[1],E=Object(n.useState)([]),y=Object(p.a)(E,2),b=y[0],g=y[1],j=Object(n.useState)(s),N=Object(p.a)(j,2),O=N[0],w=N[1],_=function(){var e=new URLSearchParams;e.append("hae_kommentit",r),e.append("kokous_id",i),e.append("kohta",a),e.append("thread",t),S.a.post("https://samik.azurewebsites.net/api/data.php",e,{withCredentials:!0}).then((function(e){g(e.data[0]),w(e.data[0].length)}))},x=function(e){for(var t=0,a=0;a<e.length;a++)t+=parseInt(e.charCodeAt(a));return console.log("Numba",e,t),"#dddddd77"};return l.a.createElement("div",{className:"kommentti"},l.a.createElement("div",{className:"kommenttimaara",onClick:function(){_(),d(!m)}},l.a.createElement("svg",{style:{height:"15px",width:"15px"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",fill:"none","stroke-width":"4",stroke:"#000"},l.a.createElement("path",{d:"M66.72,12.5H33.28C17.66,12.5,5,24.91,5,40.22H5A27.93,27.93,0,0,0,30.25,67.77l-7,19.73,24-19.57H66.72C82.34,67.93,95,55.52,95,40.22h0C95,24.91,82.34,12.5,66.72,12.5Z"})),"\xa0",O),m?l.a.createElement("div",null,b.map((function(e){return l.a.createElement("div",{key:e.mid,className:"kommentti_container"},l.a.createElement("div",null,l.a.createElement("div",{className:"kommentoija",style:{background:x(e.firstname+e.lastname),color:"black"}},e.firstname[0],e.lastname[0]),l.a.createElement("div",{className:"KommentoijaFullname"},l.a.createElement("b",null,e.firstname," ",e.lastname)),l.a.createElement("div",{className:"kommenttiaika"},e.aika," "),l.a.createElement("div",{className:"kommenttikommentti"},e.kommentti)),l.a.createElement("div",{className:"kommenttilikepeukku"},"PEUKKU"))})),l.a.createElement(ke,{edit:!0,placeholder:"kirjoita kommentti",sisus:h,save:function(e,t){f(t);var n=document.getElementById("send_kommentti"+a);null!=n&&(t.length>0?n.classList.add("sendilite"):n.classList.remove("sendilite"))}}),l.a.createElement("div",{className:"sendibutton",id:"send_kommentti"+a,onClick:function(){return function(){var e=new URLSearchParams;e.append("save","kommentti_"+r),e.append("param",h),e.append("kohta",a),e.append("kokous_id",i),e.append("thread",t),S.a.post("https://samik.azurewebsites.net/api/data.php",e,{withCredentials:!0}).then((function(e){console.log("sdfdsf",e.data),_()}))}()}},"send")):"")}),Ee=function(){return l.a.createElement("div",{className:"kannata"},"kannata")},ye=0,be=0,ge="",je=function(e){var t=e.kokous_id,a=e.kohta_id,s=e.tila,i=e.save,o=(e.edit,e.arvot),r=void 0===o?[]:o,c=e.kuvaus,u=e.positio;console.log("ARVOT",r);var m=Object(n.useState)(""),d=Object(p.a)(m,2),k=d[0],v=d[1],h=Object(n.useState)(""),f=Object(p.a)(h,2),E=f[0],y=f[1],b=Object(n.useState)(!1),g=Object(p.a)(b,2),j=g[0],N=g[1],O=function(){var e=document.getElementById("send_mielipide"+a);null!=e&&(ge.length>0?e.classList.add("sendilite"):e.classList.remove("sendilite"))};Object(n.useEffect)((function(e){document.addEventListener("selectionchange",(function(e){var t=window.getSelection();if(t.rangeCount){var n=t.getRangeAt(0).commonAncestorContainer;if(n&&null!==n.parentNode&&n.parentNode.id==="kuvaus"+a){ye=t.anchorOffset;var l=t.focusOffset;l<ye?(be=ye,ye=l):be=l,O(),N(ye!=be),v(window.getSelection().toString())}}}))}),[]);var w="";return j&&3!=s&&(w=l.a.createElement("div",null,l.a.createElement("div",{className:"mteksti  disable-select"},"Mielipide asiasta:",l.a.createElement("br",null),l.a.createElement("b",null," ",k," ")),l.a.createElement("div",{className:"perustelu",onMouseDown:function(){u(ye,be)}},l.a.createElement(ke,{edit:!0,sisus:E,save:function(e,t){y(t),ge=t,i(e,[t,ye,be,0]),O()}})),l.a.createElement("div",{className:"sendibutton disable-select",id:"send_mielipide"+a,onClick:function(){return i(a,[ge,ye,be,1]),ye=0,be=0,ge="",y(""),u(ye,be),void N(ye!=be)}},"L\xe4het\xe4"))),l.a.createElement("div",null,w,r.length>0?l.a.createElement("div",{className:"MielipideHeader disable-select"},"Mielipiteet(",r.length,")"):"",r.map((function(e){return l.a.createElement("div",null,l.a.createElement("div",{key:e.id,className:"mielipide_container",onClick:function(t){N(!1),u(e.alku,e.loppu)}},l.a.createElement("div",{className:"kelloaika"},e.aika),l.a.createElement("div",{className:"nimipallo",style:{background:"#ddd",color:"black"}},e.firstname[0],e.lastname[0]),l.a.createElement("div",{className:"mielipide_otsake"},l.a.createElement("b",null,function(e,t){var a=c.toString().substring(e,t);return a.length>100?a.slice(0,80)+"...":a}(e.alku,e.loppu))),l.a.createElement("div",{className:"mielipide_teksti"},e.mielipide),l.a.createElement(Ee,null),l.a.createElement(fe,{thread_id:e.id,kohta_id:a,kokous_id:t,maara:e.kommentit})))})))},Ne=(a(186),function(e){e.id;var t=e.save,a=e.sisus;return l.a.createElement("div",{className:"asiakohta_hyvaksy"},l.a.createElement(Oe,{check:function(){},nimi:"hyv\xe4ksyn"}),l.a.createElement("div",{className:"asiakohta_perustelu"},l.a.createElement(ke,{edit:!0,sisus:a,save:function(e,a){t(e,a)},placeholder:"Ehdota muutosta"})))}),Oe=function(e){var t,a=e.id,n=e.nimi,s=e.arvo,i=e.check;return t=l.a.createElement("div",{className:s?"green ruutu":"ruutu",onClick:function(e){i(a)}}),l.a.createElement("div",{className:"valinta"},t,l.a.createElement("input",{onChange:function(){},spellCheck:"false",className:"ruutuvalinta",type:"text",value:n}))},we=(a(187),function(e){var t,a=e.kokous_id,s=(e.edit,e.arvot),i=e.checkValue,o=void 0===i?[]:i,r=e.check,c=e.remove,u=e.save,m=e.uusi,d=(e.type,e.tila),k=Object(n.useState)([]),v=Object(p.a)(k,2),h=v[0],f=v[1],E=Object(n.useState)([]),y=Object(p.a)(E,2),b=y[0],g=y[1],j=Object(n.useState)([]),N=Object(p.a)(j,2),O=N[0],w=N[1],S=Object(n.useState)(!1),_=Object(p.a)(S,2),x=_[0],C=_[1],D=new Map;return Object(n.useEffect)((function(){var e=JSON.stringify({call:"getosallistujat",id:a});F(e).then((function(e){f(e.data);h.map((function(e){D.set(e.id,e.firstname+" "+e.lastname)})),w(s.filter((function(e){return D.has(e.nimi)})).map((function(e){var t={};return t.id=e.id,t.maara=e.maara,parseInt(e.maara),t.nimi=D.get(e.nimi),D.delete(e.nimi),t}))),g(h.filter((function(e){return D.has(e.id)})))})).catch((function(e){return alert(e)}))}),[s]),"3"!=d&&(t=l.a.createElement("div",null,b.length>0?l.a.createElement("button",{onClick:function(){return C(!x)},className:"pj_ehdota"},x?"pienenn\xe4":"Lis\xe4\xe4 ehdokas"):"",x?b.map((function(e){return l.a.createElement("div",{className:"pj_ehdokkaita",onClick:function(){return m(e.id)}},e.firstname," ",e.lastname)})):"")),l.a.createElement("div",{className:"PJ"},O.length>0?l.a.createElement(he,{type:"6",tila:d,edit:!1,arvot:O,check:r,checkValue:o,remove:c,save:u,uusi:m}):"",t)}),Se=(a(188),"https://samik.azurewebsites.net/api/"),_e=function(e){var t=e.id,a=e.save,s=e.type,i=e.kokous_id,o=e.edit,r=void 0!==o&&o,c=e.tila,u=Object(n.useState)(),m=Object(p.a)(u,2),d=(m[0],m[1],Object(n.useState)([])),k=Object(p.a)(d,2),v=k[0],h=k[1],f=Object(n.useState)([]),E=Object(p.a)(f,2),y=E[0],b=E[1],g=Object(n.useState)([]),j=Object(p.a)(g,2),N=j[0],O=j[1],w=Object(n.useState)([]),_=Object(p.a)(w,2),x=_[0],C=_[1],D=Object(n.useState)([]),L=Object(p.a)(D,2),K=L[0],F=L[1],T=Object(n.useState)([]),P=Object(p.a)(T,2),M=P[0],I=P[1],J=Object(n.useState)([]),R=Object(p.a)(J,2),H=R[0],A=R[1],B=Object(n.useState)(2==s&&0==r?1:0),U=Object(p.a)(B,2),V=U[0],Y=U[1],z=Object(n.useState)(""),q=Object(p.a)(z,2),W=q[0],Z=q[1],$=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new URLSearchParams;n.append("check_valitse",e),n.append("kokous_id",i),n.append("kohta",t),n.append("multi",a),S.a.post(Se+"data.php",n,{withCredentials:!0}).then((function(e){return X()}))},G=function(e){var a=new URLSearchParams;a.append("check_uusi",e),a.append("kohta",t),a.append("kokous_id",i),S.a.post(Se+"data.php",a,{withCredentials:!0}).then((function(e){return X()}))},Q=function(e,t,n){a(e,t,500,"check"),h(v.map((function(a){return a.id===e?Object(ne.a)(Object(ne.a)({},a),{},{nimi:t}):a})))},X=function(){var e=new URLSearchParams;e.append("avaakohta",t),e.append("kokous_id",i),S.a.post(Se+"data.php",e,{withCredentials:!0}).then((function(e){-1!=e.data[2]?b(JSON.parse(e.data[2])):b([]),-1!=e.data[1]?h(JSON.parse(e.data[1])):h([]),-1!=e.data[0]?O(JSON.parse(e.data[0])):O(""),I(""),F(""),-1!=e.data[3]?(A(JSON.parse(e.data[3])),Y(1)):A([])}))},ee=function(e,t){return N.toString().substring(e,t)};Object(n.useEffect)((function(){X();var e=document.getElementById("s"+t).parentNode.querySelector(".nro").getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:e,behavior:"smooth"}),window.setTimeout((function(){var e=document.getElementById("s"+t).parentNode.parentNode.querySelector(".nro").getBoundingClientRect().top+window.pageYOffset+-40;window.scrollTo({top:e,behavior:"smooth"})}),100)}),[]);var te=["","",l.a.createElement("div",null,l.a.createElement(je,{tila:c,edit:r,kohta_id:t,kokous_id:i,arvot:H,save:function(e,n){if(0==n[3])a(e,n,500,"mielipide");else{var l=new URLSearchParams;l.append("param",n[0]),l.append("save","mielipide"),l.append("alku",n[1]),l.append("loppu",n[2]),l.append("draft",1),l.append("thread",e),l.append("kohta",t),l.append("kokous_id",i),S.a.post(Se+"data.php",l,{withCredentials:!0}).then((function(e){return X()}))}},positio:function(e,t){C(ee(0,e)),F(ee(e,t)),I(ee(t,parseInt(N.toString().length))),Y(2)},kuvaus:N})),l.a.createElement("div",null,l.a.createElement(Ne,{tila:c,id:t,save:function(e,t){Z(t)},sisus:W})),l.a.createElement("div",null,l.a.createElement(he,{tila:c,edit:!0,arvot:v,check:$,checkValue:y,remove:function(e){var a=new URLSearchParams;a.append("check_remove",e),a.append("kohta",t),a.append("kokous_id",i),S.a.post(Se+"data.php",a,{withCredentials:!0}).then((function(e){X()}))},save:Q,uusi:G})),l.a.createElement("div",null,l.a.createElement(we,{tila:c,kohtaid:t,kokous_id:i,arvot:v,check:$,checkValue:y,save:Q,uusi:G})),l.a.createElement("div",null,l.a.createElement(we,{tila:c,type:6,kohtaid:t,kokous_id:i,arvot:v,check:$,checkValue:y,save:Q,uusi:G}))][s];return l.a.createElement("div",{id:"s"+t},l.a.createElement("div",{id:"sisalto"},[l.a.createElement("div",{className:"kuvaus"},l.a.createElement(ke,{edit:!0,id:"id",sisus:N,save:function(e,t){a(e,t,500,"kuvaus"),O(t)},placeholder:"kuvaus"})),l.a.createElement("div",{className:"kuvaus"},l.a.createElement("div",{id:"kuvaus"+t,className:"areaText"},N)),l.a.createElement("div",{className:"kuvaus"},l.a.createElement("div",{id:"kuvaus"+t,onMouseDown:function(){return Y(1)},className:"areaText"},x,l.a.createElement("span",{className:"korostus"},K),M))][V],te))},xe=function(e){var t,a,s=e.vaihda_tyyppi,i=e.kokous_id,o=e.type,r=e.title,c=e.id,u=e.alkaa,m=e.loppuu,d=e.auki,k=void 0!==d&&d,v=e.avaa,h=e.save,f=(e.poista,e.paatos),E=e.tila,y=Object(n.useState)("0000-00-00"!==u?new Date(u):""),b=Object(p.a)(y,2),g=b[0],N=(b[1],Object(n.useState)("0000-00-00"!==m?new Date(u):"")),O=Object(p.a)(N,2),w=(O[0],O[1],function(e,t,a,n){h(e,t,a,n,c)}),S=function(){v(c)},_=function(e){o==e&&(e=0),s(c,e)},x=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=document.getElementById("info"+c);switch(e){case 3:t="Hyv\xe4ksy asiakohta";break;case 4:t="\xc4\xe4nestys</b>";break;case 2:t="Mielipiteit\xe4 asiasta";break;case 5:t="Nimitys";break;case 6:t="Puheenjohtajan valinta";break;default:t="Tiedoksi"}if(1==a)return t;n.innerHTML=t};3!=E&&null!=g&&""!==g&&(a=l.a.createElement($,{pv:g.getDate(),kk:g.getMonth()+1,alku:!1}));var C=["",l.a.createElement(j.a,{onMouseEnter:function(){return x(1)},onClick:function(){return _(1)},className:1==o?"kohta_valittu p_k":"p_k"}),l.a.createElement(j.b,{onMouseEnter:function(){return x(2)},onClick:function(){return _(2)},className:2==o?"kohta_valittu p_k":"p_k"}),l.a.createElement(j.e,{onMouseEnter:function(){return x(3)},onClick:function(){return _(3)},className:3==o?"kohta_valittu p_k":"p_k"}),l.a.createElement("svg",{onMouseEnter:function(){return x(4)},className:4==o?"kohta_valittu p_k":"p_k",onClick:function(){return _(4)},xmlns:"http://www.w3.org/2000/svg",viewBox:"-100 -100 700 700"},l.a.createElement("path",{d:"M26.42,180.11v350h350v-350Zm130.83,290.6L73.7,363.27l18.6-13.76,66.42,83.93L306.18,258.7l18.05,16Z",transform:"translate(-21.42 -25.11)"}),l.a.createElement("path",{d:"M101.42,105.11v0h350v350h0v-350Z",transform:"translate(-21.42 -25.11)"}),l.a.createElement("path",{d:"M176.42,30.11v0h350v350h0v-350Z",transform:"translate(-21.42 -25.11)"})),l.a.createElement(j.g,{onMouseEnter:function(){return x(5)},onClick:function(){return _(5)},className:5==o?"kohta_valittu p_k":"p_k"}),l.a.createElement(j.d,{onMouseEnter:function(){return x(6)},className:"kohta_valittu p_k"})],D=0==o?l.a.createElement("div",{className:"valinta_iconit"},C[1],C[2],C[3],C[4],C[5],l.a.createElement("div",{className:"kohta_info",id:"info"+c},x(o,1))):l.a.createElement("div",{className:"valinta_iconit2"},C[o],l.a.createElement("div",{className:"kohta_info",id:"info"+c},x(o,1)));return t=k?l.a.createElement(_e,{key:c,kokous_id:i,id:c,type:o,save:w,tila:E}):"",l.a.createElement("div",{className:"esitys_item"},void 0,a,l.a.createElement("div",{onClick:S,className:"otsake"},l.a.createElement(ke,{edit:!0,id:c,sisus:r,save:w})),l.a.createElement("div",null,D,0!=parseInt(E)&&1!=parseInt(o)?l.a.createElement(pe,{tila:E,kokous_id:i,kohta_id:c,paatos:f,save:function(e,t,a){h(c,t,a,"paatos",c)}}):"",t,l.a.createElement("div",{className:"nro"}),3!=parseInt(E)?"":l.a.createElement("div",{className:"nro_"+parseInt(E)})),3!=parseInt(E)?l.a.createElement("div",{onClick:S,className:"raahaa",id:"r"+c}):"")},Ce=(a(189),new URLSearchParams),De=(new Map,"https://samik.azurewebsites.net/api/"),Le={37:1,38:1,39:1,40:1};function Ke(e){e.preventDefault()}function Fe(e){if(Le[e.keyCode])return Ke(e),!1}var Te=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Te=!0}}))}catch(at){}var Pe,Me,Ie,Je=!!Te&&{passive:!1},Re="onwheel"in document.createElement("div")?"wheel":"mousewheel";function He(e){if(!Me){Ie=-1,Pe=document.getElementsByClassName("raahaa");for(var t=0;t<Pe.length;t++)if(Pe[t].contains(e.target)){window.addEventListener("DOMMouseScroll",Ke,!1),window.addEventListener(Re,Ke,Je),window.addEventListener("touchmove",Ke,Je),window.addEventListener("keydown",Fe,!1),Me=Pe[t],window.setTimeout((function(){null!=Me&&Me.parentNode.classList.add("harmaa")}),100,this),document.body.classList.add("disable-select");break}}}function Ae(e){if(null!=Me)for(var t=e.touches?e.touches[0].clientY:e.clientY,a=!1,n=Me.parentNode.getBoundingClientRect().height,l=0;l<Pe.length;l++)if(Pe[l]===Me)a=!0;else{var s=Pe[l].parentNode.getBoundingClientRect().y,i=Pe[l].parentNode.getBoundingClientRect().height;if(i>n&&(i=n),t>=s&&i+s>t){var o=Me.parentNode.parentNode;a?(Ie=l+1,o.insertBefore(Me.parentNode,Pe[l].parentNode.nextSibling)):(Ie=l+1,o.insertBefore(Me.parentNode,Pe[l].parentNode));break}}}function Be(e){if(window.removeEventListener("DOMMouseScroll",Ke,!1),window.removeEventListener(Re,Ke,Je),window.removeEventListener("touchmove",Ke,Je),window.removeEventListener("keydown",Fe,!1),null!=Me){if(-1!==Ie){var t=new URLSearchParams;t.append("NODE",Me.id),t.append("KOHDE",Ie),S.a.post(De+"data.php",t).then((function(e){}))}Me.parentNode.classList.remove("harmaa"),Me=null,document.body.classList.remove("disable-select")}}window.addEventListener("touchstart",He),window.addEventListener("mousedown",He),window.addEventListener("touchend",Be),window.addEventListener("mouseup",Be),window.addEventListener("mousemove",Ae),window.addEventListener("touchmove",Ae);var Ue=function(e){e.setEsityslista,e.esityslista;var t=e.kokousid,a=void 0===t?"-1":t,s=e.edit,i=void 0===s?"true":s,o=(e.saveKokousDraft,e.setShowComponent,Object(n.useState)([])),r=Object(p.a)(o,2),c=r[0],u=r[1],m=Object(n.useState)(new Array),d=Object(p.a)(m,2),k=d[0],v=d[1];console.log("Esityslista.js --- kokousid",a),Object(n.useEffect)((function(){if(-1!=a){var e=new URLSearchParams;e.append("kokous_id",a),S.a.post(De+"data.php",e,{withCredentials:!0}).then((function(e){return u(e.data[0])}))}}),[a]);var h,f=function(){var e=Ce;Ce=new URLSearchParams,S.a.post(De+"data.php",e,{withCredentials:!0}).then((function(e){}))},y=function(e,t,n,l,s){Ce.get("kohta")===s&&Ce.get("type")===l||f(),"otsake"===l&&u(c.map((function(e){return e.id===s?Object(ne.a)(Object(ne.a)({},e),{},{n:t}):e}))),Ce=new URLSearchParams,"mielipide"===l?(Ce.append("param",t[0]),Ce.append("alku",t[1]),Ce.append("loppu",t[2]),Ce.append("draft",t[3])):"paatos"===l?(u(c.map((function(e){return e.id===s?Object(ne.a)(Object(ne.a)({},e),{},{paatos:t[0],tila:t[1]}):e}))),Ce.append("param",t[0]),Ce.append("tila",t[1])):(Ce.append("param",t),Ce.append("param",t)),Ce.append("thread",e),Ce.append("kohta",s),Ce.append("kokous_id",a),Ce.append("save",l),window.clearTimeout(E),E=setTimeout((function(){f()}),n)},b=function(e,t){var n=new URLSearchParams;n.append("paatos_valitse",t),n.append("kohta",e),n.append("kokous_id",a),S.a.post(De+"data.php",n,{withCredentials:!0}).then((function(e){u(e.data[0])}))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Uusi",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";f();var n=new URLSearchParams;n.append(e,t),n.append("kokous_id",a),S.a.post(De+"data.php",n,{withCredentials:!0}).then((function(t){u(t.data[0]),"Uusi"==e&&document.getElementById(t.data[0][t.data[0].length-1].id).focus()}))},j=function(e){f(),E&&(window.clearTimeout(E),f()),v(k.includes(e)?k.filter((function(t){return t!=e})):[].concat(Object(Z.a)(k),[e]))};return i&&(h=l.a.createElement("button",{className:"lisaa_esitysitem",onClick:function(){return g()}},"Asiakohta")),console.log("items",c),l.a.createElement("div",null,l.a.createElement("div",{id:"esitys_container"},c.map((function(e){var t;return l.a.createElement(xe,(t={kokous_id:a,vaihda_tyyppi:b,avaa:j,save:y,type:e.type,auki:k.includes(e.id),owner:e.o},Object(ae.a)(t,"type",e.type),Object(ae.a)(t,"title",e.n),Object(ae.a)(t,"id",e.id),Object(ae.a)(t,"key",e.id),Object(ae.a)(t,"alkaa",e.s),Object(ae.a)(t,"loppuu",e.e),Object(ae.a)(t,"poista",g),Object(ae.a)(t,"tila",e.tila),Object(ae.a)(t,"paatos",e.paatos),t))})),h))},Ve=function(e){var t,a=d(),s=Object(r.h)().yhdistys,i=Object(n.useState)(),c=Object(p.a)(i,2),u=c[0],k=c[1],v=Object(n.useState)("perustiedot"),h=Object(p.a)(v,2),f=h[0],E=h[1],y=Object(r.g)(),b=Object(n.useState)({otsikko:"",kokousNro:"",kokousid:"",startDate:"",endDate:"",avoinna:!1}),g=Object(p.a)(b,2),j=g[0],N=g[1],O=Object(n.useState)(),w=Object(p.a)(O,2),S=w[0],_=w[1],C=Object(n.useState)(),D=Object(p.a)(C,2),T=D[0],P=D[1],M=Object(n.useState)(),I=Object(p.a)(M,2),R=I[0],H=I[1],A=Object(n.useState)([]),B=Object(p.a)(A,2),U=B[0],V=B[1],Y=Object(n.useState)({esityslista:"",aktiivisuus:"",kesto:"",muu:""}),z=Object(p.a)(Y,2),q=z[0],W=z[1],Z=Object(n.useState)(e.location.state.id_y),$=Object(p.a)(Z,2),G=$[0],Q=$[1],X=Object(n.useState)(-1),ee=Object(p.a)(X,2),te=ee[0],le=ee[1];Object(n.useEffect)((function(){var e={year:"numeric"},t=Date(),a=JSON.stringify({call:"getkokousdraft",name:s});if(j.kokousNro||u||K(a).then((function(a){if("Ei kesken olevia kokouskutsuja"!==a.data.message)if(window.confirm("Yhdistyksell\xe4 on tallentamaton kokous. Haluatko jatkaa kokoustietojen t\xe4ytt\xe4mist\xe4 vai aloittaa uudelleen?")){var n="0"!==a.data.avoinna,l="1970-01-01"===a.data.startDate?"":new Date(a.data.startDate),i="1970-01-01"===a.data.endDate?"":new Date(a.data.endDate);N({otsikko:a.data.otsikko,kokousNro:a.data.kokousnro+"/"+new Date(t).toLocaleDateString("fi-FI",e),kokousid:a.data.id,startDate:l,endDate:i,avoinna:n});var o="0"===a.data.pv_esityslista?"":a.data.pv_esityslista,r="0"===a.data.pv_aktiivisuus?"":a.data.pv_aktiivisuus,c="0"===a.data.pv_kesto?"":a.data.pv_kesto;W({esityslista:o,aktiivisuus:r,kesto:c,muu:a.data.pv_muu}),Q(a.data.id_y);var u=JSON.stringify({call:"getosallistujat",id:a.data.id});F(u).then((function(e){P(e.data),H(e.data.filter((function(e){return"puheenjohtaja"===e.role})))})).catch((function(e){return console.log("err.response",e.response)}));var m=JSON.stringify({call:"getallmembers",yhdistys:s});L(m).then((function(e){k(e.data)})).catch((function(e){return console.log("err.response",e.response)}))}else{var d=JSON.stringify({call:"deletedraft",kokousid:a.data.id});K(d).then((function(e){le(e.data.id),ie()})).catch((function(e){return console.log("err.response",e.response)}))}else ie()})).catch((function(e){return console.log("err.response.data",e.response.data)})),u&&T&&R)V(u.filter((function(e){return!T.find((function(t){var a=t.email;return e.email===a}))}))),P(T.filter((function(e){return"puheenjohtaja"!==e.role})));else if(!u&&0===U.length&&!R){var n=JSON.stringify({call:"getallmembers",yhdistys:s});L(n).then((function(e){k(e.data),P(e.data.filter((function(e){return e.email!==d().email}))),H(e.data.filter((function(e){return e.email===d().email})))})).catch((function(e){return console.log("err.response",e.response)}))}}),[u,j]);var se,ie=function(){var e={year:"numeric"},t=Date(),a=JSON.stringify({call:"kokousnro",yhdistys:s});K(a).then((function(a){N(Object(ne.a)(Object(ne.a)({},j),{},{kokousNro:a.data.kokousnro+"/"+new Date(t).toLocaleDateString("fi-FI",e)})),Q(a.data.id_y)}))},ue=function(e){if(ke(f),"yhteenveto"===e.target.name){var t=e.target.name,a=new URLSearchParams;a.append("otsakkeet",j.kokousid),x(a).then((function(e){_(e.data),E(t)}))}else{for(var n=e.target.parentNode.querySelectorAll("button"),l=0;l<n.length;l++)n[l].classList.remove("valittu_menu");E(e.target.name),e.target.classList.add("valittu_menu")}},me=function(){var e=j.kokousNro.indexOf("/");return-1===e?j.kokousNro:j.kokousNro.substring(0,e)},ke=function(e){var t=JSON.stringify({call:"luokokous",id_y:G,kokousid:j.kokousid,otsikko:j.otsikko,kokousnro:me(),startDate:j.startDate,endDate:j.endDate,avoinna:j.avoinna,paatosvaltaisuus:q,valmis:!1});K(t).then((function(e){N(Object(ne.a)(Object(ne.a)({},j),{},{kokousid:e.data.kokousid})),pe(),le(e.data.kokousid)})).catch((function(e){alert(e.response.data.message)}))},pe=function(){if(""!==j.kokousid){var e;e=T.map((function(e){return Object(ne.a)({rooli:"osallistuja"},e)})),a=Object.assign({rooli:"puheenjohtaja"},a);var t={call:"postosallistujat",id_y:G,kokousid:j.kokousid};e=[a].concat(e),e=[t].concat(e);var n=JSON.stringify(e);F(n).then((function(e){console.log("res.data",e.data)})).catch((function(e){return console.log("Error res.data ",e.response.data)}))}};return se="perustiedot"===f?l.a.createElement(oe,{setShowComponent:E,handlePerustiedotChange:function(e){"otsikko"===e.target.name?N(Object(ne.a)(Object(ne.a)({},j),{},{otsikko:e.target.value})):"kokousnro"===e.target.name?N(Object(ne.a)(Object(ne.a)({},j),{},{kokousNro:e.target.value})):"avaa"===e.target.id&&N(Object(ne.a)(Object(ne.a)({},j),{},{avoinna:!j.avoinna}))},saveKokousDraft:ke,perustiedot:j,setPerustiedot:N}):"esityslista"===f?l.a.createElement(Ue,(t={setShowComponent:E,setEsityslista:_,esityslista:S,kokousid:te},Object(ae.a)(t,"setShowComponent",E),Object(ae.a)(t,"saveKokousDraft",ke),t)):"osallistujat"===f?l.a.createElement(re,{puheenjohtaja:R,osallistujat:T,setOsallistujat:P,saveOsallistujat:pe,varalla:U,setVaralla:V,setShowComponent:E}):"paatosvaltaisuus"===f?l.a.createElement(ce,{setShowComponent:E,handlePaatosvaltaChange:function(e){"esityslista"===e.target.name?W(Object(ne.a)(Object(ne.a)({},q),{},{esityslista:e.target.value})):"aktiivisuus"===e.target.name?W(Object(ne.a)(Object(ne.a)({},q),{},{aktiivisuus:e.target.value})):"kesto"===e.target.name?W(Object(ne.a)(Object(ne.a)({},q),{},{kesto:e.target.value})):"muu"===e.target.name&&W(Object(ne.a)(Object(ne.a)({},q),{},{muu:e.target.value}))},paatosvaltaisuus:q,saveKokousDraft:ke}):"yhteenveto"===f?l.a.createElement(de,{esityslista_otsakkeet:S,perustiedot:j,osallistujat:T,paatosvaltaisuus:q,yhdistys:s,id_y:G}):l.a.createElement(l.a.Fragment,null),m()&&"admin"===m().role&&m().yhdistys===s?l.a.createElement("div",{style:{width:"100%",maxWidth:"1100px",padding:"0",marginTop:"50px"}},l.a.createElement("div",{className:"px-3"},l.a.createElement("h2",null,s),l.a.createElement("h4",null,"Luo uusi kokous"),l.a.createElement(o.b,{to:{pathname:"/assoc/".concat(s),state:{id:G}}},"Yhdistyksen p\xe4\xe4sivu")),l.a.createElement("hr",null),l.a.createElement("div",null,l.a.createElement("div",{className:"d-sm-flex justify-content-center second_nav"},l.a.createElement("button",{className:"text-primary valittu_menu",name:"perustiedot",onClick:ue},"Perustiedot"),l.a.createElement("button",{className:"text-primary ",name:"esityslista",onClick:ue},"Esityslista"),l.a.createElement("button",{className:"text-primary ",name:"osallistujat",onClick:ue},"Osallistujat"),l.a.createElement("button",{className:"text-primary ",name:"paatosvaltaisuus",onClick:ue},"P\xe4\xe4t\xf6svaltaisuus"),l.a.createElement("button",{className:"text-primary ",name:"yhteenveto",onClick:ue},"Kutsu kokous"),l.a.createElement(J,{heading:"Kokouksen luominen",text:"Aloita kokous antamalla sille otsikko sek\xe4 alku- ja loppup\xe4iv\xe4m\xe4\xe4r\xe4t. Kun olet valmis, paina seuraava-n\xe4pp\xe4int\xe4, niin voit luoda esityslistan ja p\xe4\xe4tt\xe4\xe4 voiko yhdistyksen j\xe4senet liitt\xe4\xe4 omia esityksi\xe4\xe4n esityslistalle. Seuraavaksi voit m\xe4\xe4ritell\xe4 kokouksen osallistujat ja p\xe4\xe4t\xf6svaltaisuuden. Lopuksi n\xe4et kutsu kokous -v\xe4lilehdelt\xe4 luomasi kokouksen tiedot, miss\xe4 voit tallentaa ja l\xe4hett\xe4\xe4 kutsun kokoukseen osallistujille.",btnText:"Selityst\xe4",placement:"left",variant:"btn btn-outline-danger btn-sm mx-1"}))),l.a.createElement("div",{className:"mt-5"},se)):(y.push("/userpage"),l.a.createElement(l.a.Fragment,null))},Ye=function(e){var t=e.setShowTable,a=e.document;return l.a.createElement("div",null,l.a.createElement("div",{className:"text-right"},"0"===a.draft?l.a.createElement(l.a.Fragment,null):l.a.createElement("button",{className:"btn btn-outline-primary btn-sm"},"Muokkaa"),l.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){return window.tinymce.activeEditor.execCommand("mcePrint",!0)}},"Tulosta"),l.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){return t(!0)}},"Sulje")),l.a.createElement("div",{style:{zIndex:"100 !important"}},l.a.createElement(ue.a,{apiKey:"125nsf0ndxttm5fjgwyhk2ngplw4q3unbfbd18msydg603bp",disabled:!0,value:a.content,init:{menubar:!1,toolbar:!1,selector:"textarea",plugins:["autoresize print"]}})))},ze=a(95),qe=a.n(ze),We=function(e){var t=e.kokous,a=e.yhdistys,s=e.setShowTable,i=e.showTable,o=Object(n.useState)([]),r=Object(p.a)(o,2),c=r[0],u=r[1],m=Object(n.useState)([]),d=Object(p.a)(m,2),k=d[0],v=d[1],h=Object(n.useState)([]),f=Object(p.a)(h,2),E=f[0],y=(f[1],Object(n.useState)([])),b=Object(p.a)(y,2),g=b[0],j=b[1],N=Object(n.useState)(!0),O=Object(p.a)(N,2),w=O[0],S=O[1];Object(n.useEffect)((function(){var e=JSON.stringify({call:"getdocuments",kokousid:t.id});T(e).then((function(e){u(e.data)})).catch((function(e){console.log("error: ",e.response)}))}),[t.id,a]);var _=function(e){v(e),s(!i),S(!1)},x=function(e){j(e),s(!i),S(!0)};return w?l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,c.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return _(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.type))})))):w||l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,E.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return x(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.nimi.substring(10)))}))))),l.a.createElement("div",{className:"m-auto"},i?l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,c.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return _(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.type))})))):w?l.a.createElement(l.a.Fragment,null):l.a.createElement(Ye,{setShowTable:s,document:k}),i?l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"table table-hover table-borderless mt-2"},l.a.createElement("tbody",null,E.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){return x(e)},style:{cursor:"pointer"}},l.a.createElement("td",null,e.nimi.substring(10)))}))))):w?l.a.createElement(qe.a,{setShowTable:s,upload:g}):l.a.createElement(l.a.Fragment,null))},Ze=function(e){var t=e.osallistujat,a=e.jasenet,n=e.puheenjohtaja,s=e.kokousRooli,i=e.handleOsallistujatClick,o=e.kokous;return a=(a=a.filter((function(e){return!t.find((function(t){var a=t.email;return e.email===a}))}))).filter((function(e){return!n.find((function(t){var a=t.email;return e.email===a}))})),l.a.createElement("div",{style:{marginTop:"4px"}},l.a.createElement("table",{className:"table table-hover table-responsive-sm"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),"puheenjohtaja"===s&&"0"===o.loppu?l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-outline-danger btn-sm",name:e.email,id:"varalle",onClick:i},"Poista kokouksesta")):l.a.createElement("td",null))})))),0!==a.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"mx-2"},"Muut yhdistyksen j\xe4senet"),l.a.createElement("table",{className:"table table-hover  table-responsive-sm"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-primary"},l.a.createElement("th",null,"Etunimi"),l.a.createElement("th",null,"Sukunimi"),l.a.createElement("th",null,"S\xe4hk\xf6postiosoite"),l.a.createElement("th",null))),l.a.createElement("tbody",null,a.map((function(e,t){return l.a.createElement("tr",{key:t+e.firstname},l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.email),"puheenjohtaja"===s&&"0"===o.loppu?l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-outline-success btn-sm",name:e.email,id:"osallistujaksi",onClick:i},"Siirr\xe4 kokoukseen")):l.a.createElement("td",null))}))))," "):l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement("p",{className:"ml-2"},"Kaikki yhdistyksen j\xe4senet osallistuvat kokoukseen.")))},$e=function(e){var t=e.kokous,a=e.handleVaihdaKokousaika,s=Object(n.useState)(Date.parse(t.endDate)),i=Object(p.a)(s,2),o=i[0],r=i[1],c=Date.parse(t.startDate);return Object(le.registerLocale)("fi",ie.a),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-5 m-auto"},l.a.createElement("div",{className:"card card-body mt-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"mb-3"},"Vaihda kokouksen p\xe4\xe4ttymisajankohta: "),l.a.createElement("br",null),l.a.createElement(se.a,{locale:"fi",dateFormat:"dd/MM/yyyy",className:"form-control",selected:o,onChange:function(e){return r(e)},selectsEnd:!0,endDate:o,minDate:c}),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){return a(o)},className:"btn btn-outline-primary btn-sm mt-4"},"Tallenna")))))},Ge=function(e){var t,a,n=e.kokous,s=e.osallistujat,i="Ei p\xe4\xe4t\xf6svaltainen.",o="Ei P\xe4\xe4t\xf6svaltainen.",r=e.puheenjohtaja.concat(s).map((function(e){return e.pv_avannut})).reduce((function(e,t){return"1"===t?e+1:e}),0);return"0"!==n.pv_kesto&&"true"===n.pv_kesto_toteutunut&&(i="P\xe4\xe4t\xf6svaltainen."),"0"!==n.pv_esityslista&&n.pv_esityslista<=r&&(o="P\xe4\xe4t\xf6svaltainen."),"0"===n.pv_esityslista&&"0"===n.pv_aktiivisuus&&"0"===n.pv_kesto&&""===n.pv_muu?(t="Ei p\xe4\xe4t\xf6svaltaisuuskriteerej\xe4.",a=""):"0"===n.pv_esityslista&&"0"===n.pv_aktiivisuus&&"0"===n.pv_kesto&&""!==n.pv_muu?(t="",a="P\xe4\xe4t\xf6svaltaisuuskriteeri"):(t="Kokous on p\xe4\xe4t\xf6svaltainen,",a="Muut kokouksen p\xe4\xe4t\xf6svaltaisuudelle asetetut kriteerit:"),l.a.createElement("div",{className:"col-sm-10 mt-3 mx-auto"},l.a.createElement("h6",null,t),"0"===n.pv_esityslista?l.a.createElement(l.a.Fragment,null):l.a.createElement("li",{className:"text-sm-nowrap"},"jos v\xe4hint\xe4\xe4n ",n.pv_esityslista," osallistujista on avannut esityslistan.",l.a.createElement("span",null,"\xa0"),"Tila: ",o),"0"===n.pv_aktiivisuus?l.a.createElement(l.a.Fragment,null):l.a.createElement("li",{className:"text-sm-nowrap"},"jos v\xe4hint\xe4\xe4n ",n.pv_aktiivisuus," osallistujista on ottanut asioihin kantaa.",l.a.createElement("span",null,"\xa0\xa0"),"Tila: ","Ei p\xe4\xe4t\xf6svaltainen."),"0"===n.pv_kesto?l.a.createElement(l.a.Fragment,null):l.a.createElement("li",{className:"text-sm-nowrap"},"jos kokous kest\xe4\xe4 v\xe4hint\xe4\xe4n  ",n.pv_kesto," vuorokautta. ",l.a.createElement("span",null,"\xa0\xa0"),"Tila: ",i),""===n.pv_muu?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{className:"mt-3"},a),l.a.createElement("li",null,n.pv_muu)))},Qe=function(e){var t=e.kokous,a=e.yhdistys,s=e.osallistujat,i=e.puheenjohtaja,o=e.paatokset,r=i.concat(s).map((function(e){return e.pv_avannut})).reduce((function(e,t){return"1"===t?e+1:e}),0),c={month:"numeric",day:"numeric",year:"numeric"},u=t.kokousnro+"/"+new Date(t.startDate).toLocaleDateString("fi-FI",{year:"numeric"}),m=""!==t.otsikko?"<h2>".concat(t.otsikko,"</h2>"):"",d=new Date(t.startDate).toLocaleDateString("fi-FI",c)+" - "+new Date(t.endDate).toLocaleDateString("fi-FI",c),k=s.map((function(e){return"<li>"+e.firstname+" "+e.lastname+"</li>"})).join(" "),v="";"0"===t.pv_aktiivisuus&&"0"===t.pv_esityslista&&"0"===t.pv_kesto&&""===t.pv_muu?v+="<p>Kokouksen p\xe4\xe4t\xf6svaltaisuutta ei ole m\xe4\xe4ritelty.</p>":("0"!==t.pv_esityslista&&(v+=t.pv_esityslista<=r?"<p>Kokouksen asialistan tuli avata v\xe4hint\xe4\xe4n ".concat(t.pv_esityslista," kpl osallistujista. Kokous p\xe4\xe4t\xf6svaltainen, koska osallistujista ").concat(r," kpl avasi esityslistan.</p>"):"<p>Kokouksen esityslistaa ei avannut riitt\xe4v\xe4 m\xe4\xe4r\xe4 (".concat(t.pv_esityslista," kpl) osallistujista.</p>")),"0"!==t.pv_aktiivisuus&&(v+="<p>Kokous on p\xe4\xe4t\xf6svaltainen jos v\xe4hint\xe4\xe4n ".concat(t.pv_aktiivisuus," kpl kokousosallistujista on ottanut asioihin kantaa.</p>")),"0"!==t.pv_kesto&&(v+="true"===t.pv_kesto_toteutunut?"<p>Kokoukselle m\xe4\xe4ritelty minimikesto ".concat(t.pv_kesto," vuorokautta toteutui.</p>"):"<p>Kokoukselle m\xe4\xe4ritelty minimikesto ".concat(t.pv_kesto," vuorokautta ei toteutunut.</p>")),""!==t.pv_muu&&(v+="<p>".concat(t.pv_muu,"</p>")));var h=0!==(o=o.filter((function(e){return"3"===e.tila}))).length?o.map((function(e){return""!==e.paatos?"<h3>"+e.title+'</h3><p style="margin-top: -10px;">'+e.paatos+"</p>":"<h3>"+e.title+"</h3>"})).join(" "):"Kokouksessa ei tehty p\xe4\xe4t\xf6ksi\xe4.",f=0!==i.length?i[0].firstname+" "+i[0].lastname:"kokouksessa ei ole puheenjohtajaa",E=Object(n.useState)("<h1>".concat(a,"</h1>").concat(m,"<h2>Kokous ").concat(u,"</h2><h2>").concat(d,"</h2><h2>Osallistujat</h2><ul>").concat(k,"</ul><p>Puheenjohtaja: ").concat(f,"<h2>P\xe4\xe4t\xf6svaltaisuus</h2>").concat(v,"<h2>Asiakohdat</h2>").concat(h)),y=Object(p.a)(E,2),b=y[0],g=y[1],j=function(){var e=JSON.stringify({call:"postdoc",id_y:t.id_y,kokousnro:t.kokousnro,type:"poytakirja",content:b,draft:0});T(e).then((function(e){alert("Kokous on p\xe4\xe4tetty ja p\xf6yt\xe4kirja tallennettu!"),window.location.reload()})).catch((function(e){return console.log("err.response",e.response)}))};return b?l.a.createElement("div",{className:"mt-5 mx-auto col-md-10"},l.a.createElement(me,{editorContentChange:function(e){g(e)},teksti:b,className:"mb-2"}),l.a.createElement("button",{className:"float-right btn btn-outline-primary mt-1",onClick:function(){return function(){if(window.confirm("Haluatko p\xe4\xe4tt\xe4\xe4 kokouksen? Tietojen muuttaminen ei ole en\xe4\xe4 kokouksen p\xe4\xe4tetty\xe4si mahdollista")){var e=JSON.stringify({call:"paatakokous",kokousid:t.id});K(e).then((function(e){j()})).catch((function(e){return console.log("err.response",e.response)}))}}()}},"P\xe4\xe4t\xe4 kokous ja tallenna p\xf6yt\xe4kirja"),l.a.createElement("br",null)):l.a.createElement("p",null,"Loading....")},Xe=function(e){var t,a=Object(r.g)(),s=d(),i={month:"numeric",day:"numeric",year:"numeric"},c=Object(r.h)().yhdistys,u=Object(r.h)().kokousId,k=Object(n.useState)(),v=Object(p.a)(k,2),h=v[0],f=v[1],E=Object(n.useState)(),y=Object(p.a)(E,2),b=y[0],g=y[1],j=Object(n.useState)(),N=Object(p.a)(j,2),O=N[0],w=N[1],S=Object(n.useState)(),_=Object(p.a)(S,2),x=_[0],C=_[1],D=Object(n.useState)(),T=Object(p.a)(D,2),P=T[0],M=T[1],I=Object(n.useState)(),J=Object(p.a)(I,2),R=J[0],H=J[1],A=Object(n.useState)("asiat"),B=Object(p.a)(A,2),U=B[0],V=B[1],Y=Object(n.useState)(!0),z=Object(p.a)(Y,2),q=z[0],W=z[1];void 0===e.location.state?a.push("/assoc/".concat(c)):t=e.location.state.id_y,Object(n.useEffect)((function(){if(m()){var e=JSON.stringify({call:"getkokous",id:u});K(e).then((function(e){g(e.data)})).catch((function(e){return console.log("err.response",e.response)}));var n=JSON.stringify({call:"getosallistujat",id:u,email:s.email});F(n).then((function(e){C(e.data.filter((function(e){return"osallistuja"===e.role}))),w(e.data.filter((function(e){return"puheenjohtaja"===e.role})));var n=e.data.filter((function(e){return e.email===s.email}));n[0]?f(n[0].role):a.push({pathname:"/assoc/".concat(c),state:{yhdistys_id:t}})})).catch((function(e){return console.log("err.response",e.response)}));var l=JSON.stringify({call:"getallmembers",yhdistys:c});L(l).then((function(e){M(e.data)})).catch((function(e){return console.log("err.response",e.response)}));var i=JSON.stringify({call:"getpaatokset",kokousid:u});K(i).then((function(e){H(e.data)})).catch((function(e){return console.log("err.response",e.response)}))}}),[u,c,s.email,a]);var Z,$,G=function(e){for(var t=e.target.parentNode.querySelectorAll("button"),a=0;a<t.length;a++)t[a].classList.remove("valittu_menu");e.target.classList.add("valittu_menu"),V(e.target.name),"asiakirjat"===e.target.name&&W(!0)},Q=function(e){var t,a=P.find((function(t){return t.email===e.target.name})),n=!1;"varalle"===e.target.id?window.confirm("Haluatko perua osallistujan ".concat(a.firstname," ").concat(a.lastname," osallistumisoikeuden kokoukseen?"))&&(C(x.filter((function(t){return t.email!==e.target.name}))),t=JSON.stringify({call:"poistaosallistuja",kokousid:u,email:e.target.name}),n=!0):"osallistujaksi"===e.target.id?window.confirm("Haluatko siirt\xe4\xe4 henkil\xf6n ".concat(a.firstname," ").concat(a.lastname," kokousosallistujaksi?"))&&(C(x.concat(a)),t=JSON.stringify({call:"lisaaosallistuja",kokousid:u,yhdistys:c,email:e.target.name}),n=!0):"poistu"===e.target.id&&(C(x.filter((function(e){return e.email!==s.email}))),t=JSON.stringify({call:"poistaosallistuja",kokousid:u,email:s.email}),n=!0,window.location.reload()),n&&(console.log("body",t),F(t).then((function(e){alert(e.data.message)})).catch((function(e){alert(e.response.data.message),console.log("err.response",e.response)})))};return m()&&m().yhdistys===c?b&&h?"1"===b.avoinna||"puheenjohtaja"===h?(Z="asiakirjat"===U?l.a.createElement(We,{kokous:b,yhdistys:c,setShowComponent:V,setShowTable:W,showTable:q}):"asiat"===U?l.a.createElement(Ue,{kokousid:u}):"osallistujat"===U?l.a.createElement(Ze,{osallistujat:x,jasenet:P,puheenjohtaja:O,kokousRooli:h,handleOsallistujatClick:Q,kokous:b}):"kokousaika"===U?l.a.createElement($e,{kokous:b,handleVaihdaKokousaika:function(e){if("object"===typeof e&&Date.parse(e)!==Date.parse(b.endDate)){var t=e.toISOString().split("T")[0];if(window.confirm("Haluatko vaihtaa kokouksen uudeksi p\xe4\xe4ttymisp\xe4iv\xe4ksi ".concat(new Date(t).toLocaleDateString("fi-FI",{month:"numeric",day:"numeric",year:"numeric"}),"?"))){g(Object(ne.a)(Object(ne.a)({},b),{},{endDate:t}));var a=JSON.stringify({call:"vaihdapvm",kokousid:u,enddate:e});K(a).then((function(e){alert(e.data.message)})).catch((function(e){return alert(e.response.data.message)}))}}else alert("M\xe4\xe4rit\xe4 uusi p\xe4\xe4ttymisp\xe4iv\xe4 ennen tallentamista")}}):"paatosvaltaisuus"===U?l.a.createElement(Ge,{kokous:b,osallistujat:x,puheenjohtaja:O}):"poytakirja"===U?l.a.createElement(Qe,{kokous:b,yhdistys:c,osallistujat:x,puheenjohtaja:O,paatokset:R}):l.a.createElement("p",null,"error... "),$=Date.parse(b.endDate)<new Date||"1"===b.loppu?"Kokous on p\xe4\xe4ttynyt":Date.parse(b.endDate)>new Date&&Date.parse(b.startDate)<new Date?"Kokous on k\xe4ynniss\xe4":"Kokous ei ole viel\xe4 alkanut",l.a.createElement("div",{className:"mx-auto mt-5"},l.a.createElement("div",{className:"mx-3"},l.a.createElement("h2",null,c),l.a.createElement(o.b,{to:{pathname:"/assoc/".concat(c),state:{id_y:t}}},"Yhdistyksen p\xe4\xe4sivu"),l.a.createElement("hr",null),l.a.createElement("div",{className:"mb-3"},l.a.createElement("h4",null,b.otsikko," ")),l.a.createElement("div",{className:"float-left",style:{display:"grid",gridTemplateColumns:"1fr 2fr",lineHeight:"8px",whiteSpace:"nowrap"}},l.a.createElement("p",null,"Puheenjohtaja:"),0!==O.length?l.a.createElement("p",null,O[0].firstname," ",O[0].lastname," "):l.a.createElement("p",null,"Kokoukselle ei ole asetettu puheenjohtajaa. "),l.a.createElement("p",{style:{marginRight:"10px"}},"Kokouksen numero: "),l.a.createElement("p",null," ",b.kokousnro,"/",new Date(b.startDate).toLocaleDateString("fi-FI",{year:"numeric"})),l.a.createElement("p",null,"Kokouksen alku:"),l.a.createElement("p",null,new Date(b.startDate).toLocaleDateString("fi-FI",i)),l.a.createElement("p",null,"Kokouksen p\xe4\xe4t\xf6s:"),l.a.createElement("p",null,new Date(b.endDate).toLocaleDateString("fi-FI",i)),l.a.createElement("small",null,"(",$,")")),l.a.createElement("div",{className:"mt-4 float-right"},"0"===b.loppu?l.a.createElement("button",{className:"btn btn-danger mb-2 ml-2",type:"button",title:"Peru osallistumisesi kokoukseen",id:"poistu","data-toggle":"modal","data-target":"#poistuModal"},"Peru osallistumisesi"):l.a.createElement(l.a.Fragment,null),l.a.createElement(et,{handlePJPoistuuKokouksesta:function(e){C(x.filter((function(e){return e.email!==s.email})));var t=JSON.stringify({call:"poistaosallistuja",kokousid:u,email:s.email});F(t).then((function(e){alert("Poistuit kokouksesta")})).catch((function(e){alert(e.response.data.message),console.log("err.response",e.response)}));var a=JSON.stringify({call:"pjpoistui",kokousid:u,syy:e,pv:10});console.log("body2",a),F(a).then((function(e){window.location.reload()})).catch((function(e){return console.log("err.response",e.response)}))},handleOsallistujatClick:Q,kokousRooli:h})),l.a.createElement("div",{className:"clearfix"})),l.a.createElement("hr",null),l.a.createElement("div",{className:"d-sm-flex second_nav"},l.a.createElement("button",{className:"text-primary valittu_menu",onClick:G,name:"asiat"},"Asiakohdat"),l.a.createElement("button",{className:"text-primary",onClick:G,name:"asiakirjat"},"Asiakirjat"),l.a.createElement("button",{className:"text-primary",onClick:G,name:"osallistujat"},"Osallistujat"),"puheenjohtaja"===h&&"0"===b.loppu?l.a.createElement(l.a.Fragment,null,"     ",l.a.createElement("button",{className:"text-primary",onClick:G,name:"kokousaika"},"Kokousaika")):l.a.createElement(l.a.Fragment,null),l.a.createElement("button",{className:"text-primary",onClick:G,name:"paatosvaltaisuus"},"P\xe4\xe4t\xf6svaltaisuus"),"0"===b.loppu&&"puheenjohtaja"===h?l.a.createElement("button",{className:"text-primary",onClick:G,name:"poytakirja"},"P\xf6yt\xe4kirja"):l.a.createElement(l.a.Fragment,null)),Z)):(a.push("/assoc/".concat(c)),l.a.createElement(l.a.Fragment,null)):l.a.createElement("p",{className:"mt-4 mx-4"},"Ladataan tietoja .... "):(a.push("/assoc/".concat(c)),l.a.createElement(l.a.Fragment,null))},et=function(e){var t=e.handlePJPoistuuKokouksesta,a=e.handleOsallistujatClick,s=e.kokousRooli,i=Object(n.useState)(""),o=Object(p.a)(i,2),r=o[0],c=o[1];return l.a.createElement("div",{className:"modal fade",id:"poistuModal",tabIndex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"ModalLabel"},"Poistu kokouksesta"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("p",null,"Haluatko poistua kokouksesta?"),"puheenjohtaja"===s?l.a.createElement("div",{className:"form-group"},l.a.createElement("textarea",{className:"form-control",rows:"2",name:"syy",onChange:function(e){c(e.target.value)},value:r}),l.a.createElement("small",{className:"form-text text-muted"},"Voit kirjoittaa kentt\xe4\xe4n syyn kokouksesta poistumiseen.")):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"modal-footer"},"puheenjohtaja"===s?l.a.createElement("button",{type:"button",className:"btn btn-outline-primary","data-dismiss":"modal",id:"poistu",onClick:function(){return t(r)}},"Poistu kokouksesta"):l.a.createElement("button",{type:"button",className:"btn btn-outline-primary","data-dismiss":"modal",id:"poistu",onClick:a},"Poistu kokouksesta"),l.a.createElement("button",{type:"button",className:"btn btn-outline-secondary","data-dismiss":"modal"},"Peruuta")))))};var tt=function(){return l.a.createElement("div",null,l.a.createElement(o.a,null,l.a.createElement(h,null),l.a.createElement("div",{className:"container",style:{width:"1100px",maxWidth:"100%",margin:"0 auto",padding:"0"}},l.a.createElement(r.d,null,l.a.createElement(r.b,{exact:!0,path:"/",component:g}),l.a.createElement(r.b,{path:"/login",component:R}),l.a.createElement(r.b,{path:"/register",component:U}),l.a.createElement(k,{path:"/userpage",component:q}),l.a.createElement(k,{path:"/assoc/:yhdistys",component:te}),l.a.createElement(k,{path:"/uusikokous/:yhdistys",component:Ve}),l.a.createElement(k,{path:"/kokous/:yhdistys/:kokousId",component:Xe})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(tt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e,t,a){},95:function(e,t){},99:function(e,t,a){e.exports=a(190)}},[[99,1,2]]]);
//# sourceMappingURL=main.f59c3f8a.chunk.js.map