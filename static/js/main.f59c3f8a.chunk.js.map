{"version":3,"sources":["Components/Auth/Sessions.js","Components/Auth/PrivateRoute.js","Components/Shared/Navbar.js","Components/UusiKokous/Esityslista/CheckboxArea.js","Components/UusiKokous/Esityslista/Esityslista.js","Views/Home.js","Components/Shared/HttpRequests.js","Components/Shared/HelpPop.js","Views/Auth/Login.js","Components/Auth/FbRegister.js","Components/Auth/AppRegister.js","Components/Shared/Loading.js","Views/Auth/Register.js","Components/User/JoinAssoc.js","Components/User/AssocTable.js","Views/User/UserPage.js","Components/UusiKokous/Esityslista/Kalenteri.js","Components/Assoc/KokousTable.js","Components/Assoc/Kokouslistat.js","Components/Assoc/Jasenlista.js","Components/Assoc/AssocContent.js","Views/Assoc/AssocMain.js","Components/UusiKokous/Perustiedot.js","Components/UusiKokous/Osallistujat.js","Components/UusiKokous/Paatosvaltaisuus.js","Components/Document/TextEditor.js","Components/UusiKokous/Yhteenveto.js","Components/UusiKokous/Esityslista/ResizeTextArea.js","Components/UusiKokous/Esityslista/Paatos.js","Components/UusiKokous/Esityslista/Kommentit.js","Components/UusiKokous/Esityslista/Kannata.js","Components/UusiKokous/Esityslista/Mielipide.js","Components/UusiKokous/Esityslista/Hyvaksy.js","Components/UusiKokous/Esityslista/Henkilovalinta.js","Components/UusiKokous/Esityslista/Sisalto.js","Components/UusiKokous/Esityslista/EsitysKohta.js","Views/Kokous/UusiKokous.js","Components/Document/DocumentReadOnly.js","Components/Kokous/KokousDocs.js","Components/Kokous/KokousOsallistujat.js","Components/Kokous/Kokousaika.js","Components/Kokous/KokousPaatosvalta.js","Components/Kokous/KokousPoytakirja.js","Views/Kokous/KokousDetails.js","App.js","serviceWorker.js","index.js"],"names":["setUserSession","user","accessToken","localStorage","setItem","JSON","stringify","getSessionRole","userrole","getItem","parse","getUser","userStr","PrivateRoute","Component","component","rest","render","props","to","pathname","state","from","location","Navbar","menuItems","useState","showMenu","setShowMenu","history","useHistory","toggleMenu","px","document","getElementById","style","height","color","width","className","onClick","window","confirm","push","removeItem","reload","cursor","navbar","size","id","overlay","summa","timer","marginTop","fontFamily","position","zIndex","top","left","backgroundColor","transition","padding","marginLeft","Home","url","process","body","axios","post","withCredentials","then","res","HelpPop","text","placement","heading","btnText","variant","OverlayTrigger","trigger","key","Popover","Title","as","Content","Button","Login","email","setEmail","password","setPassword","handleInputChange","ev","target","name","value","onSubmit","preventDefault","alert","login","call","request","firstname","data","lastname","token","catch","err","type","onChange","appId","autoLoad","fields","callback","fbres","fb_id","first_name","last_name","response","message","renderProps","lineHeight","marginBottom","FbRegister","fbRes","setFirstname","setLastname","AppRegister","password2","setPassword2","Loading","Register","regSelect","setRegSelect","setFbRes","JoinAssoc","yhdistykset","setShowForm","yhdistys","setYhdistys","yhdistysPassword","setYhdistysPassword","setNewMember","console","log","includes","length","AssocTable","map","item","textDecoration","UserPage","undefined","isModalOpen","setIsModalOpen","setYhdistykset","showForm","useEffect","maxWidth","TervetuloaModal","visible","onClose","animation","duration","Kalenteri","pvm","alku","kk","pv","Date","getMonth","getDate","kuu","parseInt","KokousTable","kokous","yhdistys_id","pvmYear","year","loading","setLoading","pointerEvents","avoinna","role","id_y","title","kokousnro","startDate","endDate","otsikko","toLocaleDateString","whiteSpace","event","openKokous","Kokouslistat","kokoukset","showComponent","tulevat","setTulevat","kaynnissa","setKaynnissa","menneet","setMenneet","status","Jasenlista","members","AssocAdmin","setShowComponent","helpText","handleMenuClick","napit","parentNode","querySelectorAll","i","classList","remove","add","AssocMain","setKokoukset","setMembers","useParams","setRole","member","setSessionRole","filter","x","valmis","req","AssocContent","Perustiedot","handlePerustiedotChange","perustiedot","saveKokousDraft","setPerustiedot","registerLocale","fi","kokousNro","locale","dateFormat","selected","date","selectsStart","selectsEnd","minDate","checked","htmlFor","Osallistujat","puheenjohtaja","osallistujat","setOsallistujat","saveOsallistujat","varalla","setVaralla","handleVaralleClick","vara","concat","handleOsallistuuClick","osallistuja","Paatosvaltaisuus","handlePaatosvaltaChange","paatosvaltaisuus","min","step","esityslista","aktiivisuus","kesto","rows","muu","TextEditor","editorContentChange","teksti","contenteditable","apiKey","onEditorChange","init","plugins","toolbar","insertdatetime_dateformat","setup","ed","on","evt","keyCode","execCommand","stopPropagation","Yhteenveto","esityslista_otsakkeet","pvmForm","month","day","start","end","nimi","osallistuu","join","otsikot","paatosvalta","substring","kokouskutsu","setKokouskutsu","saveNewKokous","uusiKokous","kokousid","saveDocumentKokouskutsu","kokouskutsuDocument","draft","content","kokousosallistujat","rooli","Object","assign","sendInviteEmail","aihe","indexOf","runko","invite","viesti","ResizeTextArea","sisusta","sisus","save","placeholder","edit","Tarea","avaa","loppu","useRef","updatethis","current","minHeight","scrollHeight","ref","spellCheck","onInput","tabIndex","paddingBottom","Paatos","kokous_id","kohta_id","tila","paatos","thisdata","nappiBool","setnappibool","_id","delay","EditableCheckbox","ruutu","maara","arvo","check","onKeyDown","parseFloat","toFixed","autoFocus","CheckboxArea","arvot","checkValue","uusi","multi","lisaa","this_remove","this_save","nnimi","this_check","tekija","Kommentit","thread_id","tyyppi","kommenttiBool","setKommenttiBool","kommentti","setKommentti","kommentit","setKommentit","kommenttimaara","setMaara","params","URLSearchParams","append","vari","txt","nro","charCodeAt","xmlns","viewBox","fill","stroke-width","stroke","d","mid","background","aika","sendi","julkaise","Kannata","Mielipide","kuvaus","positio","kohta","setKohta","perustelu","setPerustelu","mbool","setMielibool","laheta_setup","paivitaKohta","addEventListener","sel","getSelection","rangeCount","element","getRangeAt","commonAncestorContainer","anchorOffset","offset","focusOffset","toString","mielipide","onMouseDown","otsake","slice","osa","Hyvaksy","Checkbox","Henkilovalinta","jasenlista","users","setUsers","ei_ehdokkaat","setEiEhdokkaat","ehdokkaat","setEhdokkaat","ehdokasBool","setEhdokasBool","hash","Map","body2","set","has","obj","get","delete","error","Sisalto","valinnat","setValinnat","valintaArvot","setValintaArvot","setKuvaus","k_alku","set_k_Alku","k_valittu","set_k_Valittu","k_loppu","set_k_Loppu","mielipiteet","setMielipiteet","setTyyppi","vid","check_uusi","check_save","s","e","y","querySelector","getBoundingClientRect","pageYOffset","scrollTo","behavior","setTimeout","setti","a","l","kohtaid","EsitysKohta","sisalto","vaihda_tyyppi","alkaa","loppuu","auki","poista","this_avaa","thisvaihda_tyyppi","param","thisinfo","palaa","elem","innerHTML","nappeja","onMouseEnter","transform","nappit","updateParams","keys","37","38","39","40","preventDefaultForScrollKeys","supportsPassive","defineProperty","raahattavat","raahattava","tar","wheelOpt","passive","wheelEvent","createElement","raahausalku","getElementsByClassName","contains","this","raahausmove","dy","touches","clientY","after","h","y2","y3","parent","insertBefore","nextSibling","raahausloppu","removeEventListener","Esityslista","setEsityslista","items","setItems","Array","setKohdat","axiosSave","updateParams2","thread","n","clearTimeout","id_kohta","lisaa_ja_poista","focus","avaaItem","owner","o","UusiKokous","setPuheenjohtaja","setPaatosvaltaisuus","setId_y","id_k","setId_k","now","getDraft","avoin","esitys","pv_esityslista","aktiv","pv_aktiivisuus","pv_kesto","pv_muu","delReq","getKokousNro","find","params2","parse_kokousnro","DocumentReadOnly","setShowTable","tinymce","activeEditor","disabled","menubar","selector","KokousDocs","showTable","kokousDocuments","setKokousDocuments","setDocument","uploadedDocs","upload","setUpload","uploadOrNot","setUploadOrNot","handleOpenDocumentClick","handleOpenUploadedDoc","KokousOsallistujat","jasenet","kokousRooli","handleOsallistujatClick","jasen","Kokousaika","handleVaihdaKokousaika","pickerDate","setPickerDate","KokousPaatosvalta","paatosvaltaMaaritys","muuKriteeriTeksti","tila_kesto","tila_esityslista","avannutEsityslistan","pv_avannut","reduce","v","pv_kesto_toteutunut","KokousPoytakirja","paatokset","kokousnumero","ajat","paatostiedot","pj","poytakirja","setPoytakirja","savePoytakirja","handlePaataKokousClick","KokousDetails","kokousId","setKokousRooli","setKokous","setJasenet","setPaatokset","osal","body3","henkilo","runRequest","uusiPvm","toISOString","split","enddate","display","gridTemplateColumns","marginRight","data-toggle","data-target","handlePJPoistuuKokouksesta","syy","PoistuModal","setSyy","aria-labelledby","aria-hidden","data-dismiss","aria-label","App","margin","exact","path","Boolean","hostname","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f59c3f8a.chunk.js","sourcesContent":["export const setUserSession = (user, accessToken) => {\r\n    localStorage.setItem('user', JSON.stringify(user))\r\n    localStorage.setItem('token', accessToken)\r\n}\r\nexport const setSessionRole = (role) => {\r\n    localStorage.setItem('role', JSON.stringify(role))    //  yhdistyksen nimi ja rooli {yhdistys:yhdistys, role: role}\r\n}\r\nexport const getSessionRole = () => {\r\n    const userrole = localStorage.getItem('role')\r\n    if(userrole) return JSON.parse(userrole)\r\n    else return null \r\n}\r\nexport const removeRole = () => {   // onko tämä käytössä? \r\n    localStorage.removeItem('role')\r\n}\r\nexport const getToken = () => {\r\n    return localStorage.getItem('token') || null;\r\n}\r\nexport const getUser = () => {\r\n    const userStr = localStorage.getItem('user');\r\n    if (userStr) return JSON.parse(userStr);\r\n    else return null;\r\n}\r\nexport const removeUserSession = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('role');\r\n    window.location.reload()            // reload on workaround console.loggerin erroriin: \"You are overriding current access token, that means some other app is expecting different access token and you will probably break things.\"\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { getToken } from './Sessions'\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }) {\r\n    return (\r\n        <Route {...rest}\r\n            render={(props) => getToken() ? <Component {...props} />\r\n                : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />}\r\n        />\r\n    )\r\n}","import React, { useState } from 'react'\r\nimport * as Icon from 'react-bootstrap-icons';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { getUser, removeUserSession } from '../Auth/Sessions';\r\n\r\nexport default function Navbar() {\r\n\r\n    const [showMenu, setShowMenu] = useState(false);\r\n    let history = useHistory()\r\n\r\n    const toggleMenu = () => {\r\n        let px = \"\";\r\n        if (showMenu) px = \"0\";\r\n        else if (!showMenu && getUser()) px = \"100px\";\r\n        else px = \"150px\"\r\n        document.getElementById(\"dropMenu\").style.height = px;\r\n        setShowMenu(!showMenu);\r\n    }\r\n    const handleLogOut = () => {\r\n        if (window.confirm(`Haluatko kirjautua ulos?`)) {\r\n            history.push('/')\r\n            removeUserSession()\r\n        }\r\n    }\r\n    let menuItems\r\n    if (getUser()) {\r\n        menuItems = (<>\r\n            <Link style={{ color: \"white\", width: '200px' }} className=\"nav-link\" to=\"/userpage\">Omat sivut</Link>\r\n            <p onClick={handleLogOut} style={{ color: \"white\", width: '250px', cursor: 'pointer' }} className=\"nav-link\" >Kirjaudu ulos</p>\r\n        </>)\r\n    } else {\r\n        menuItems = (<>\r\n            <Link style={{ color: \"white\", width: '200px' }} className=\"nav-link\" to=\"/\">Etusivu</Link>\r\n            <Link style={{ color: \"white\", width: '200px' }} className=\"nav-link\" to=\"/login\">Kirjaudu</Link>\r\n            <Link style={{ color: \"white\", width: '100px' }} className=\"nav-link\" to=\"/register\">Rekisteröidy</Link>\r\n        </>)\r\n    }\r\n    return (\r\n        <div className=\"navbar navbar-expand\" style={navbar} onClick={toggleMenu}>\r\n            <p className=\"MenuText mt-2 ml-5\" >\r\n                Menu\r\n                <Icon.Justify size={30} className=\"ml-3 fa-5x\" />\r\n            </p>\r\n            <div id=\"dropMenu\" style={overlay} onClick={toggleMenu}>\r\n                {showMenu\r\n                    ? <>\r\n                        {menuItems}\r\n                    </>\r\n                    : <></>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nconst overlay = {\r\n    marginTop: '75px',\r\n    fontFamily: 'Lato, sans-serif',\r\n    height: '0%',\r\n    width: '100%',\r\n    position: 'absolute',\r\n    zIndex: '1',\r\n    top: '0',\r\n    left: '0',\r\n    backgroundColor: 'rgba(44,62,80, 0.9)',\r\n    // overflow: 'hidden',\r\n    transition: '0.5s',\r\n}\r\nconst navbar = {\r\n    color: 'white',\r\n    backgroundColor: 'rgba(44,62,80, 0.9)',\r\n    height: '75px',\r\n    padding: '10px',\r\n    position: 'relative',\r\n    width: '100vw !important',\r\n /*   marginRight: '-50vw',*/\r\n    marginLeft: 'calc(-50vw + 50%)' \r\n}\r\n","import React, { useState  } from 'react';\r\nimport '../../../Style/CheckboxArea.css';\r\nimport ReactDatePicker from 'react-datepicker';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\n\r\nvar summa;\r\nconst CheckboxArea = ({edit=true, arvot=[], checkValue=[], check, remove, save, uusi,multi=0,type=\"3\",tila}) => {\r\n    summa=0; \r\n    arvot.map(x=> summa+=parseInt(x.maara))\r\n    \r\n    \r\n    \r\n    \r\n    const thisuusi = () => {\r\n        \r\n        uusi(0)\r\n    }\r\n    \r\n    const this_remove = (id) => {if(tila!=\"3\")remove(id)}\r\n    const this_save = (id,nnimi) => {if(tila!=\"3\")save(id,nnimi)}\r\n    const this_check = (id) => {if(tila!=\"3\")check(id,multi)}\r\n    edit=false;\r\n    let lisaa;\r\n    if (type==\"3\" && tila !=\"3\") lisaa = <button className=\"uusi add\" onClick={()=>thisuusi()}>Valinta</button>\r\n\r\n    return (\r\n        <div>\r\n            {arvot.map(arvot => \r\n                 <EditableCheckbox\r\n                 arvo={(checkValue && checkValue.includes(arvot.id))} \r\n                 summa={summa} \r\n                 tila={tila}\r\n                 maara={arvot.maara} \r\n                 edit={arvot.tekija}\r\n                 remove={this_remove}\r\n                 save={this_save}\r\n                 check={this_check}\r\n                 nimi={arvot.nimi}\r\n                 key={arvot.id}\r\n                 id={arvot.id} />\r\n                  )}    \r\n            {lisaa}\r\n         <br/>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst EditableCheckbox = ({tila,maara=0,edit,id,nimi,arvo,check,remove,save,summa=0}) => {\r\n    \r\n    const thischeck = () => {check(id)}\r\n    const thisremove = () => {remove(id)}\r\n    const this_save = (event) => {save(id,event.target.value)}\r\n    const thiskey = (event) => {\r\n        if (event.key === ' '){\r\n            event.preventDefault();\r\n            check(id);\r\n        }\r\n    }\r\n   let ruutu;\r\n   ruutu = <div tabIndex=\"0\" onKeyDown={thiskey} className={(arvo)?\"green ruutu\":\"ruutu\"} onClick={thischeck}></div>\r\n    \r\n    return (\r\n        <div className={(tila==\"3\")?\"\":\"valintahover\"}>\r\n        <div className=\"valinta\" >\r\n             {(maara>0)?<div className=\"valinta_maara\">{(parseFloat(maara)/parseFloat(summa)*100).toFixed(1)}% ({maara})</div>:\"\"}\r\n             \r\n             {(summa>0)?<div style={{marginLeft:\"40px\",width:(parseFloat(maara)/parseFloat(summa)*90)+\"%\",backgroundColor:\"#ddd\",height:\"5px\",marginTop:\"30px\",position:\"absolute\"}}></div>:\"\"}\r\n            {ruutu}\r\n            {(edit==0 && maara ==0)?\r\n            \r\n            <input onChange={this_save} spellCheck=\"false\" className=\"ruutuvalinta\" type=\"text\" value={nimi} autoFocus></input>:\r\n            \r\n            <div spellCheck=\"false\" className=\"ruutuvalinta\">{nimi}</div>}\r\n            {(edit==0 && maara==0)?<div className=\"remove\" onClick={thisremove}></div>:\"\"}\r\n            </div>\r\n            </div>\r\n      )\r\n}\r\n\r\n\r\n\r\n\r\nexport default CheckboxArea","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport EsitysKohta from './EsitysKohta'\r\nimport '../../../Style/Esityslista.css'\r\n\r\nvar timer;\r\nvar updateParams = new URLSearchParams();\r\nlet auki = new Map();\r\nconst url = process.env.REACT_APP_HOST_URL\r\nconst Esityslista = ({ setEsityslista, esityslista, kokousid = \"-1\", edit = \"true\", saveKokousDraft, setShowComponent = null}) => {\r\n  const [items, setItems] = useState([])\r\n  \r\n  const [avaa, setKohdat] = useState(new Array());\r\n  console.log('Esityslista.js --- kokousid', kokousid)\r\n  \r\n  useEffect(() => {\r\n    if (kokousid == -1) return;\r\n    let params = new URLSearchParams();\r\n    params.append(\"kokous_id\", kokousid)\r\n    axios.post(url + 'data.php', params, { withCredentials: true }).then((response) => setItems(response.data[0]))}, [kokousid])\r\n\r\n  const axiosSave = () => {      \r\n      let updateParams2 = updateParams;\r\n      updateParams = new URLSearchParams();  \r\n      axios.post(url + 'data.php', updateParams2, { withCredentials: true }).then((response) => {}) }\r\n\r\n\r\n  const save = (thread, data, delay, type, kohta) => {\r\n    if (updateParams.get(\"kohta\") !== kohta || updateParams.get(\"type\") !== type) axiosSave();\r\n    if (type === \"otsake\")\r\n      setItems(items.map(items => (items.id === kohta) ? { ...items, n: data } : items))\r\n    updateParams = new URLSearchParams();\r\n    if (type === \"mielipide\") {\r\n      updateParams.append(\"param\", data[0])\r\n      updateParams.append(\"alku\", data[1])\r\n      updateParams.append(\"loppu\", data[2])\r\n      updateParams.append(\"draft\", data[3]) /* 0 = draft , 1= julkaise */\r\n    } else if (type === \"paatos\"){\r\n      setItems(items.map(items => (items.id === kohta) ? { ...items, paatos: data[0],tila:data[1] } : items))\r\n      updateParams.append(\"param\", data[0])\r\n      updateParams.append(\"tila\", data[1])\r\n    } else {  updateParams.append(\"param\", data)\r\n      updateParams.append(\"param\", data)\r\n    }\r\n    updateParams.append(\"thread\", thread);\r\n    updateParams.append(\"kohta\", kohta);\r\n    updateParams.append(\"kokous_id\", kokousid)\r\n    updateParams.append(\"save\", type)\r\n    window.clearTimeout(timer);\r\n    timer = setTimeout(function () { axiosSave() }, delay)\r\n\r\n  }\r\n\r\n\r\n  const vaihda_tyyppi = (id_kohta, param) => {\r\n    var params = new URLSearchParams()\r\n    params.append(\"paatos_valitse\", param)\r\n    params.append(\"kohta\", id_kohta)\r\n    params.append(\"kokous_id\", kokousid)\r\n    axios.post(url + 'data.php', params, { withCredentials: true }).then((response) => {\r\n      setItems(response.data[0])\r\n        \r\n    })\r\n  }\r\n\r\n  const lisaa_ja_poista = (param=\"Uusi\",kohta=\"0\") => {\r\n    axiosSave();\r\n    var params = new URLSearchParams();\r\n    params.append(param, kohta);\r\n    params.append(\"kokous_id\", kokousid)\r\n    axios.post(url + 'data.php', params, { withCredentials: true })\r\n      .then((response) => {\r\n        \r\n        setItems(response.data[0])\r\n        if(param==\"Uusi\")document.getElementById(response.data[0][response.data[0].length - 1].id).focus();\r\n      })}\r\n\r\n  const avaaItem = (id) => {\r\n    axiosSave();\r\n    if (timer) {\r\n      window.clearTimeout(timer);\r\n      axiosSave();\r\n    }\r\n    setKohdat ((avaa.includes(id))?avaa.filter(x=> (x!=id)):[...avaa, id]);\r\n  }\r\n  \r\n  let lisaa;\r\n  if (edit) lisaa = <button className=\"lisaa_esitysitem\" onClick={()=>lisaa_ja_poista()}>Asiakohta</button>\r\n  console.log('items', items)\r\n  return (\r\n    <div>\r\n      <div id=\"esitys_container\">\r\n        {items.map(items =>\r\n          <EsitysKohta\r\n            kokous_id={kokousid}\r\n            vaihda_tyyppi={vaihda_tyyppi}\r\n            avaa={avaaItem}\r\n            save={save}\r\n            type={items.type}\r\n            auki={avaa.includes(items.id)}\r\n            owner={items.o}\r\n            type={items.type}\r\n            title={items.n}\r\n            id={items.id}\r\n            key={items.id}\r\n            alkaa={items.s}\r\n            loppuu={items.e}\r\n            poista={lisaa_ja_poista}\r\n            tila={items.tila}\r\n            paatos={items.paatos}\r\n             />\r\n    \r\n             )}\r\n        {lisaa}\r\n      </div>\r\n      {/* { setShowComponent ? \r\n        <div className=\"text-right\">\r\n        <button onClick={() => { setShowComponent('osallistujat'); saveKokousDraft() }} className=\"btn btn-outline-primary mt-3\">Seuraava</button>\r\n      </div>\r\n      :<></>} */}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar keys = { 37: 1, 38: 1, 39: 1, 40: 1 };\r\n\r\nfunction preventDefault(e) {\r\n  e.preventDefault();\r\n}\r\n\r\nfunction preventDefaultForScrollKeys(e) {\r\n  if (keys[e.keyCode]) {\r\n    preventDefault(e);\r\n    return false;\r\n  }\r\n}\r\n\r\n\r\nvar supportsPassive = false;\r\ntry {\r\n  window.addEventListener(\"test\", null, Object.defineProperty({}, 'passive', {\r\n    get: function () { supportsPassive = true; }\r\n  }));\r\n} catch (e) { }\r\n\r\nvar wheelOpt = supportsPassive ? { passive: false } : false;\r\nvar wheelEvent = 'onwheel' in document.createElement('div') ? 'wheel' : 'mousewheel';\r\n\r\n// call this to Disable\r\nfunction disableScroll() {\r\n  window.addEventListener('DOMMouseScroll', preventDefault, false); // older FF\r\n  window.addEventListener(wheelEvent, preventDefault, wheelOpt); // modern desktop\r\n  window.addEventListener('touchmove', preventDefault, wheelOpt); // mobile\r\n  window.addEventListener('keydown', preventDefaultForScrollKeys, false);\r\n}\r\n\r\n// call this to Enable\r\nfunction enableScroll() {\r\n  window.removeEventListener('DOMMouseScroll', preventDefault, false);\r\n  window.removeEventListener(wheelEvent, preventDefault, wheelOpt);\r\n  window.removeEventListener('touchmove', preventDefault, wheelOpt);\r\n  window.removeEventListener('keydown', preventDefaultForScrollKeys, false);\r\n}\r\nvar raahattavat, raahattava, tar;\r\nwindow.addEventListener('touchstart', raahausalku);\r\nwindow.addEventListener('mousedown', raahausalku);\r\nwindow.addEventListener('touchend', raahausloppu);\r\nwindow.addEventListener('mouseup', raahausloppu);\r\nwindow.addEventListener('mousemove', raahausmove);\r\nwindow.addEventListener('touchmove', raahausmove);\r\nfunction raahausalku(event) {\r\n\r\n  if (raahattava) return;\r\n  tar = -1;\r\n  raahattavat = document.getElementsByClassName(\"raahaa\");\r\n  for (var i = 0; i < raahattavat.length; i++) {\r\n    if (raahattavat[i].contains(event.target)) {\r\n      disableScroll();\r\n      raahattava = raahattavat[i];\r\n      window.setTimeout(() => {\r\n        if (raahattava != null) raahattava.parentNode.classList.add(\"harmaa\");\r\n      }, 100, this);\r\n      document.body.classList.add(\"disable-select\");\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nfunction raahausmove(event) {\r\n  if (raahattava != null) {\r\n    var dy = (event.touches) ? event.touches[0].clientY : event.clientY;\r\n    var after = false;\r\n    var h = raahattava.parentNode.getBoundingClientRect().height;\r\n    for (var i = 0; i < raahattavat.length; i++) {\r\n      if (raahattavat[i] === raahattava)\r\n        after = true;\r\n      else {\r\n        var y2 = raahattavat[i].parentNode.getBoundingClientRect().y;\r\n        var y3 = raahattavat[i].parentNode.getBoundingClientRect().height\r\n        if (y3 > h) y3 = h;\r\n        if (dy >= y2 && y3 + y2 > dy) {\r\n\r\n          var parent = raahattava.parentNode.parentNode;\r\n          if (after) {\r\n            tar = i + 1;\r\n            parent.insertBefore(raahattava.parentNode, raahattavat[i].parentNode.nextSibling);\r\n          }\r\n          else {\r\n            tar = i + 1;\r\n            parent.insertBefore(raahattava.parentNode, raahattavat[i].parentNode);\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction raahausloppu(event) {\r\n  enableScroll();\r\n  if (raahattava != null) {\r\n    if (tar !== -1) {\r\n      var params = new URLSearchParams();\r\n      params.append('NODE', raahattava.id);\r\n      params.append('KOHDE', tar);\r\n\r\n      axios.post(url + 'data.php', params)\r\n        .then((response) => {\r\n\r\n\r\n        });\r\n    }\r\n\r\n\r\n\r\n    raahattava.parentNode.classList.remove(\"harmaa\");\r\n    raahattava = null;\r\n    document.body.classList.remove(\"disable-select\");\r\n  }\r\n}\r\n\r\nexport default Esityslista","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst Home = () => {\r\n    return (\r\n        <div className=\"col-md-10 mx-auto mt-5\">\r\n            <div className=\"jumbotron\">\r\n                <h1 className=\"display-3\">Hello, world!</h1>\r\n                <p className=\"lead\">Tähän tulisi tehdä sovelluksen etusivu.</p>\r\n                <hr className=\"my-4\" />\r\n                <p>Se voi kuvailla projektin ideaa, syitä miksi se on tehty, mitä sillä voi tehdä ja mitä sen toteutuksessa on käytetty. Voisin laittaa vaikka linkin myös kirjautumiseen ja ehkä myös rekisteröitymiseen.</p>\r\n                <hr/>\r\n                <Link to=\"/login\" className=\"btn btn-outline-primary\">Kirjaudu</Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Home\r\n","import axios from 'axios'\r\n\r\nconst url = process.env.REACT_APP_HOST_URL\r\n\r\n\r\nconst fbUser = body => axios.post(`${url}auth.php`, body).then(res => res)\r\nconst appUser = body => axios.post(`${url}auth.php`, body, {withCredentials: true}).then(res => res)\r\nconst assoc = body => axios.post(`${url}assoc.php`, body).then(res => res)\r\nconst kokous = body => axios.post(`${url}kokous.php`, body).then(res => res)\r\nconst osallistujat = body => axios.post(`${url}osallistujat.php`, body).then(res => res)\r\nconst documents = body => axios.post(`${url}documents.php`, body).then(res => res)\r\n/*const esityslista = body => axios.post(`${url}data.php`, body).then(res => res)*/\r\nconst data = body => axios.post(`${url}data.php`, body, {withCredentials: true} ).then(res => res)\r\n\r\nexport default { data, fbUser, appUser, assoc, kokous, osallistujat, documents }","import React from 'react'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Popover from 'react-bootstrap/Popover'\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nconst HelpPop = ({ text, placement, heading, btnText, variant, style }) => {\r\n\r\n\r\n    return (\r\n        <>\r\n            <OverlayTrigger\r\n                trigger=\"click\"\r\n                key={placement}\r\n                placement={placement}\r\n                overlay={\r\n                    <Popover id={`popover-positioned-${placement}`}>\r\n                        <Popover.Title as=\"h3\">{heading}</Popover.Title>\r\n                        <Popover.Content className=\"text-justify p-3\">\r\n                            {text}\r\n                        </Popover.Content>\r\n                    </Popover>\r\n                }\r\n            >\r\n                <Button variant={variant} style={style}>{btnText}</Button>\r\n            </OverlayTrigger>\r\n        </>\r\n    )\r\n}\r\nexport default HelpPop\r\n","import React, { useState } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { FaFacebook } from 'react-icons/fa';\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\r\nimport { setUserSession } from '../../Components/Auth/Sessions'\r\nimport request from '../../Components/Shared/HttpRequests'\r\nimport HelpPop from '../../Components/Shared/HelpPop'\r\n\r\nconst Login = () => {\r\n\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n\r\n    const appId = process.env.REACT_APP_FB_APP_ID\r\n    let history = useHistory()\r\n\r\n    const FaceBookResponse = (fbres) => {\r\n\r\n        if (fbres) {\r\n            const body = JSON.stringify({ call: 'fblogin', email: fbres.email, fb_id: fbres.id })\r\n\r\n            request.fbUser(body).then(res => {\r\n                const user = {\r\n                    firstname: fbres.first_name,\r\n                    lastname: fbres.last_name,\r\n                    email: fbres.email,\r\n                }\r\n                setUserSession(user, res.data.token)\r\n                history.push({pathname:'/userpage', state:{login:true}})\r\n\r\n            }).catch(err => {\r\n                alert(err.response.data.message)\r\n            })\r\n        } else {\r\n            alert('Kirjautuminen epäonnistui')\r\n        }\r\n    }\r\n    const handleInputChange = (ev) => {\r\n        if (ev.target.name === 'email') setEmail(ev.target.value)\r\n        else if (ev.target.name === 'password') setPassword(ev.target.value)\r\n    }\r\n    const handleLoginSubmit = (ev) => {\r\n\r\n        ev.preventDefault()\r\n\r\n        if (email === '' || password === '') alert(\"Anna käyttäjätunnus ja salasana!\")\r\n        else {\r\n            const login = JSON.stringify({ call: 'applogin', email, password })\r\n\r\n            request.appUser(login)\r\n                .then(res => {\r\n           \r\n                    const user = {\r\n                        firstname: res.data.firstname,\r\n                        lastname: res.data.lastname,\r\n                        email: email,\r\n                    }\r\n                    setUserSession(user, res.data.token)\r\n                    history.push({pathname:'/userpage', state:{login:true}})\r\n\r\n                }).catch((err) => {\r\n                    alert(err)\r\n                })\r\n        }\r\n    }\r\n\r\n    const helpText = \"Kirjaudu järjestelmään sähköpostin ja salasanan avulla mikäli käytit niitä rekisteröityessäsi. Jos rekisteröidyit Facebook-tunnuksilla, käytä niitä myös kirjautumiseen. Mikäli unohdit tunnuksesi, voit saada ne paikasta x.\"\r\n\r\n    return (\r\n        <div className=\"col-md-6 m-auto\">\r\n            <div className=\"card card-body mt-5\">\r\n                <h2 className=\"text-center\">Kirjaudu</h2>\r\n                <form className=\"ml-2 mt-4\" onSubmit={handleLoginSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <label>Sähköposti</label>\r\n                        <input type=\"email\" className=\"form-control\" name=\"email\" onChange={handleInputChange} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Salasana</label>\r\n                        <input type=\"password\" className=\"form-control\" name=\"password\" onChange={handleInputChange} />\r\n                    </div>\r\n                    <div className=\"form-group text-right\">\r\n                        <button type=\"submit\" className=\"btn btn-outline-primary mt-3\">Kirjaudu</button>\r\n                    </div>\r\n                </form>\r\n\r\n                <div className=\"text-right\">\r\n                    <p>\r\n                        <FacebookLogin\r\n                            appId={appId}\r\n                            autoLoad={false}\r\n                            fields=\"first_name, last_name,email,picture\"\r\n                            callback={FaceBookResponse} render={renderProps => (\r\n                                <button onClick={renderProps.onClick} className=\"btn btn-outline\">Kirjaudu Facebook-tunnuksilla <FaFacebook /></button>\r\n                            )}\r\n                        />\r\n                    </p>\r\n                    <hr />\r\n                    <p className=\"mr-3\" style={{ lineHeight: '25px' }}>\r\n                        Haluatko rekisteröityä käyttäjäksi? <Link to=\"/register\" className=\"ml-1\">Rekisteröidy</Link><br />  </p>\r\n                    <p style={{ marginTop: \"-20px\" }}> Tarvitsetko apua? <HelpPop heading=\"Kirjautuminen\" text={helpText} btnText=\"Klikkaa tästä!\" placement=\"left\" variant=\"link\" style={{ marginBottom: \"3px\", marginLeft: \"-10px\" }} /> </p>\r\n                    <p className=\"mr-3\"></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Login\r\n","import React, { useState } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport request from '../Shared/HttpRequests'\r\n\r\nconst FbRegister = ({ fbRes }) => {\r\n\r\n    const [firstname, setFirstname] = useState(fbRes.first_name)\r\n    const [lastname, setLastname] = useState(fbRes.last_name)\r\n    const [email, setEmail] = useState(fbRes.email)\r\n    let history = useHistory()\r\n\r\n    const handleInputChange = (ev) => {\r\n        if (ev.target.name === 'firstname') setFirstname(ev.target.value)\r\n        else if (ev.target.name === 'lastname') setLastname(ev.target.value)\r\n        else if (ev.target.name === 'email') setEmail(ev.target.value)\r\n    }\r\n\r\n    const handleSubmit = (ev) => {\r\n\r\n        ev.preventDefault()\r\n        const fb_id = fbRes.id\r\n        if (firstname !== '' && lastname !== '' && email !== '' && fb_id !== '') {\r\n\r\n            let user = JSON.stringify({ call: 'fbreg', firstname, lastname, email, fb_id })\r\n            \r\n            request.fbUser(user).then(res => {\r\n                alert('Rekisteröityminen onnistui! Kirjauduttuasi voit liittyä yhdistyksen alueelle ja tarkastella yhdistyksen kokousasioita.')\r\n                history.push('/login')\r\n            }).catch(err => {\r\n                alert(err.response.data.message)\r\n                window.location.reload() \r\n            })\r\n\r\n        } else {\r\n            alert('Tarkasta että kaikki kentät on täytetty!')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"col-md-8 mx-auto mt-5\">\r\n            <h4>Terve {firstname}!</h4>\r\n            <p>Tarkasta ennen rekisteröitymistä ovatko henkilötietosi ja sähköpostiosoitteesi oikein.</p>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label>Etunimi</label>\r\n                    <input type=\"text\" className=\"form-control\" name=\"firstname\" onChange={handleInputChange} value={firstname} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Sukunimi</label>\r\n                    <input type=\"text\" className=\"form-control\" name=\"lastname\" onChange={handleInputChange} value={lastname} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Sähköposti</label>\r\n                    <input type=\"email\" className=\"form-control\" name=\"email\" onChange={handleInputChange} value={email} />\r\n                </div>\r\n                <div className=\"form-group text-right\">\r\n                    <button type=\"submit\" className=\"btn btn-outline-primary mt-3\">Rekisteröidy</button>\r\n                </div>\r\n                <p className=\"text-right\">\r\n                    Haluatko valita rekisteröitymistavan uudelleen?<Link className=\"ml-1\" to='/register' onClick={() => window.location.reload()}>Takaisin</Link><br />\r\n                    Onko sinulla jo käyttäjä tili?<Link to=\"/login\" className=\"ml-1\">Kirjaudu</Link>\r\n                </p>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FbRegister\r\n","import React, { useState } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport request from '../Shared/HttpRequests'\r\n\r\nconst AppRegister = () => {\r\n\r\n    const [firstname, setFirstname] = useState('')\r\n    const [lastname, setLastname] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [password2, setPassword2] = useState('')\r\n    let history = useHistory()\r\n\r\n    const handleInputChange = (ev) => {\r\n        if (ev.target.name === 'firstname') setFirstname(ev.target.value)\r\n        else if (ev.target.name === 'lastname') setLastname(ev.target.value)\r\n        else if (ev.target.name === 'email') setEmail(ev.target.value)\r\n        else if (ev.target.name === 'password') setPassword(ev.target.value)\r\n        else if (ev.target.name === 'password2') setPassword2(ev.target.value)\r\n    }\r\n    const handleSubmit = (ev) => {\r\n        ev.preventDefault()\r\n        if (firstname === '' || lastname === '' || email === '' || password === '' || password2 === '') {\r\n            alert(\"Täytä kaikki kentät!\")\r\n        } else if (password !== password2) {\r\n            alert(\"Tarkasta salasanat!\")\r\n        } else {\r\n\r\n            const user = JSON.stringify({ call: 'appreg', firstname, lastname, email, password })\r\n            \r\n            request.appUser(user)\r\n                .then(res => {\r\n                    alert('Rekisteröityminen onnistui! Kirjauduttuasi voit liittyä yhdistyksen alueelle ja tarkastella yhdistyksen kokousasioita.')\r\n                    history.push('/login')\r\n                }).catch(err => {\r\n                    alert(err.response.data.message)\r\n                    window.location.reload() \r\n                })\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"col-md-6 m-auto\">\r\n            <div className=\"card card-body mt-5\">\r\n                <h4 className=\"text-center mb-4\">Rekisteröidy käyttäjäksi</h4>\r\n                <p>Lisää alle henkilötietosi, sähköpostiosoitteesi ja salasana.</p>\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <label>Etunimi</label>\r\n                        <input type=\"text\" className=\"form-control\" name=\"firstname\" onChange={handleInputChange} value={firstname} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Sukunimi</label>\r\n                        <input type=\"text\" className=\"form-control\" name=\"lastname\" onChange={handleInputChange} value={lastname} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Sähköposti</label>\r\n                        <input type=\"email\" className=\"form-control\" name=\"email\" onChange={handleInputChange} value={email} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Salasana</label>\r\n                        <input type=\"password\" className=\"form-control\" name=\"password\" onChange={handleInputChange} value={password} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Salasana uudelleen</label>\r\n                        <input type=\"password\" className=\"form-control\" name=\"password2\" onChange={handleInputChange} value={password2} />\r\n                    </div>\r\n                    <div className=\"form-group text-right\">\r\n                        <button type=\"submit\" className=\"btn btn-outline-primary mt-3\">Rekisteröidy</button>\r\n                    </div>\r\n                    <p className=\"text-right\">\r\n                        Haluatko valita rekisteröitymistavan uudelleen?<Link className=\"ml-1\" to='/register' onClick={() => window.location.reload()}>Takaisin</Link><br />\r\n                        Onko sinulla jo käyttäjä tili? <Link to=\"/login\" className=\"ml-1\">Kirjaudu</Link>\r\n                    </p>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default AppRegister\r\n","import React from 'react'\r\n\r\nconst Loading = () => {\r\n    return (\r\n        <div style={{marginTop:\"15%\"}} className=\"row h-100 justify-content-center\">\r\n             <div className=\"loader\"></div>   \r\n        </div>\r\n    )\r\n}\r\nexport default Loading","import React, { useState } from 'react'\r\nimport FbRegister from '../../Components/Auth/FbRegister'\r\nimport AppRegister from '../../Components/Auth/AppRegister'\r\nimport { FaFacebook } from 'react-icons/fa';\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\r\nimport { Link } from 'react-router-dom'\r\nimport Loading from '../../Components/Shared/Loading';\r\n\r\n\r\nconst Register = () => {\r\n    const appId = process.env.REACT_APP_FB_APP_ID\r\n    const [regSelect, setRegSelect] = useState()\r\n    const [fbRes, setFbRes] = useState({})\r\n\r\n    const handleClick = (ev) => {\r\n        if (ev.target.id === 'app') setRegSelect('app')\r\n    }\r\n    const handleFbClick = (res) => {\r\n        setFbRes(res)\r\n        setRegSelect('fb')\r\n    }\r\n    if (!regSelect) {\r\n        return (\r\n            <div className=\"col-md-6 mx-auto mt-5\">\r\n                <div className=\"card card-body mt-5\">\r\n                    <h4 className=\"text-center mb-4\">Rekisteröidy käyttäjäksi</h4>\r\n                    <p className=\" text-justify \">Palvelua voi käyttää luomalla sovelluskohtaisen tunnuksen tai rekisteröitymällä Facebook-tunnuksien avulla.\r\n                    <br/><br/>Jos olet jo rekisteröitynyt ja haluat kirjautua, pääset kirjautumissivulle  <Link to=\"/login\">tästä.</Link></p>\r\n                    <hr />\r\n                    <div className=\"row\">\r\n                        <button onClick={handleClick} id='app' className=\"btn btn-outline mr-2\">Rekisteröi sovelluskohtainen tunnus</button>\r\n                        <FacebookLogin\r\n                            appId={appId}\r\n                            autoLoad={false}\r\n                            fields=\"first_name, last_name,email,picture\"\r\n                            callback={handleFbClick}\r\n                            render={renderProps => (\r\n                                <button onClick={renderProps.onClick} className=\"btn btn-outline\">Rekisteröidy Facebook-tunnuksilla  <FaFacebook /></button>\r\n                            )}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    } else if (regSelect) {\r\n        return (\r\n            <> {regSelect === 'fb'\r\n                ? <FbRegister fbRes={fbRes} />\r\n                : <AppRegister />}</>)\r\n    } else {\r\n        return <Loading />\r\n    }\r\n}\r\nexport default Register","import React, { useState } from 'react'\r\nimport request from '../Shared/HttpRequests'\r\nimport { getUser } from '../Auth/Sessions'\r\n\r\nconst JoinAssoc = ({ yhdistykset, setShowForm }) => {\r\n    const [yhdistys, setYhdistys] = useState('')\r\n    const [yhdistysPassword, setYhdistysPassword] = useState('')\r\n\r\n    const handleInputChange = (ev) => {\r\n        if (ev.target.name === 'yhdistys') setYhdistys(ev.target.value)\r\n        else if (ev.target.name === 'password') setYhdistysPassword(ev.target.value)\r\n    }\r\n\r\n    const handleSubmit = (ev) => {\r\n\r\n        ev.preventDefault()\r\n\r\n        if (yhdistys && yhdistysPassword) {\r\n            const body = JSON.stringify({ call: 'checkyhdistystiedot', name: yhdistys, password: yhdistysPassword })\r\n            request.assoc(body)\r\n                .then((res) => { \r\n                    setNewMember()\r\n                })\r\n                .catch((err) => {\r\n                    alert(err.response.data.message)\r\n                })\r\n        } else {\r\n            alert(\"Täytä molemmat kentät!\")\r\n        }\r\n    }\r\n\r\n    const setNewMember = () => {\r\n\r\n        const user = getUser()\r\n        const body = JSON.stringify({ call: 'joinyhdistys', email: user.email, yhdistys: yhdistys })\r\n        console.log('body', body)\r\n\r\n        request.assoc(body).then((res) => {\r\n            console.log('(setnewmember: ', res.data)\r\n            alert(res.data.message)\r\n            window.location.reload()\r\n\r\n        }).catch(err => {\r\n            alert(err.response.data.message)  \r\n            if(err.response.data.message.includes('Olet jo yhdistyksen')) window.location.reload() \r\n        })\r\n    }\r\n    return (\r\n        <div>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label>Yhdistyksen nimi</label>\r\n                    <input type=\"text\" className=\"form-control\" name=\"yhdistys\" onChange={handleInputChange} value={yhdistys} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Yhdistyksen tunnus</label>\r\n                    <input type=\"password\" className=\"form-control\" name=\"password\" onChange={handleInputChange} value={yhdistysPassword} />\r\n                </div>\r\n                <div className=\"form-group text-right\">\r\n                    {yhdistykset.length > 0 ? <button type=\"button\" onClick={() => setShowForm(true)} className=\"btn btn-outline-secondary mt-3 mx-2\">Palaa takaisin</button> : <></>}\r\n                    <button type=\"submit\" className=\"btn btn-outline-primary mt-3\">Rekisteröidy</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\nexport default JoinAssoc","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\n\r\n\r\n\r\nconst AssocTable = ({yhdistykset, setShowForm}) => {\r\n    return (\r\n        <div>\r\n            <button className=\"mb-4 btn btn-outline-primary mx-3\" onClick={() => setShowForm(false)}>Liity yhdistykseen</button>\r\n            <table className=\"table table-hover mt-4\">\r\n                <thead>\r\n                    <tr className=\"table-primary\"><th>Yhdistys</th></tr>\r\n                </thead>\r\n                <tbody>\r\n                    {yhdistykset.map((item) =>\r\n                        <div key={item.id} >\r\n                            {/*<td className=\"mr-5\">{item.name}</td><td className=\"text-right\"><Link className=\"btn btn-outline-primary btn-sm\" to={`/assoc/${item.name}`}>Siirry yhdistyksen sivuille</Link></td>*/}\r\n                            <Link className=\"mt-4 text-left text-dark\" style={{textDecoration:\"none\"}} to={{pathname:`/assoc/${item.name}`, state:{id:item.id}}}>\r\n                                <div className=\"yhdistysLink\">{item.name}</div>\r\n                            </Link>\r\n                        </div>)}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\nexport default AssocTable\r\n","import React, { useState, useEffect } from 'react'\r\nimport Rodal from 'rodal'\r\nimport 'rodal/lib/rodal.css';\r\nimport JoinAssoc from '../../Components/User/JoinAssoc'\r\nimport AssocTable from '../../Components/User/AssocTable'\r\nimport { getUser } from '../../Components/Auth/Sessions'\r\nimport request from '../../Components/Shared/HttpRequests'\r\n\r\nconst UserPage = (props) => {\r\n\r\n    const user = getUser()\r\n    const [isModalOpen, setIsModalOpen] = useState(props.location.state !== undefined && props.location.state.login ? true : false)\r\n    const [yhdistykset, setYhdistykset] = useState([])\r\n    const [showForm, setShowForm] = useState(true)\r\n\r\n    useEffect(() => {\r\n\r\n        const body = JSON.stringify({ call: 'getmemberships', email: user.email })\r\n        request.assoc(body).then(res => {\r\n            setYhdistykset(res.data)\r\n        }).catch(err => {\r\n            if (err.response.data) console.log('err.response.data', err.response.data)\r\n        })\r\n\r\n    }, [user.email])\r\n\r\n    let text\r\n    if (yhdistykset.length > 0 && showForm) text = \"Alla näet yhdistykset, joiden kokoustilaan olet liittynyt. Painamalla nappia saat näkyviisi kaavakkeen, jolla voit lisätä itsesi yhdistyksen kokoustilan käyttäjäksi.\"\r\n    else if (yhdistykset.length > 0 && !showForm) text = \"Voit liittää itsesi yhdistyksen kokoustilaan antamalla yhdistyksen nimen ja sovelluskohtaisen salasanan. Saat tarvittavan tunnuksen sovelluksen pääkäyttäjältä.\"\r\n    else text = \"Et ole vielä rekisteröitynyt yhdistysten kokoustilan käyttäjäksi. Alla olevan kentän avulla voit liittää itsesi yhdistyksen kokoustilaan antamalla yhdistyksen nimen ja sovelluskohtaisen salasanan. Saat tarvittavan tunnuksen sovelluksen pääkäyttäjältä.\"\r\n\r\n    return (\r\n        <div style={{ width: \"100%\", maxWidth: \"1100px\", padding: \"0\", marginTop: \"50px\" }}>\r\n            <h4 className=\"px-3\">Moi {user.firstname}!</h4>\r\n            <hr />\r\n            <p className=\"px-3\">\r\n                {text}\r\n            </p>\r\n            <hr />\r\n\r\n            {yhdistykset.length > 0 && showForm\r\n                ? <AssocTable yhdistykset={yhdistykset} setShowForm={setShowForm} />\r\n                : <JoinAssoc yhdistykset={yhdistykset} setShowForm={setShowForm} />\r\n            }\r\n            <TervetuloaModal isModalOpen={isModalOpen} setIsModalOpen={setIsModalOpen} />\r\n        </div>\r\n    )\r\n}\r\nexport default UserPage\r\n\r\n\r\nconst TervetuloaModal = ({ isModalOpen, setIsModalOpen }) => {\r\n\r\n    const user = getUser()\r\n\r\n    return (\r\n        <Rodal visible={isModalOpen} onClose={() => setIsModalOpen(false)} animation={'door'} duration={400} height={150} width={300}>\r\n            <div style={{width:\"100%\", height:\"100%\", position:\"relative\"}} onClick={() => setIsModalOpen(false)}>\r\n                <h5  style={{position:\"absolute\", top:\"40%\", left:\"25%\"}}>Tervetuloa {user.firstname}! </h5>\r\n            </div>\r\n        </Rodal>\r\n    )\r\n}\r\n","import React from 'react';\r\n\r\nconst Kalenteri = ({pvm=null, alku=\"false\",kk=\"1\",pv=\"1\"}) => {\r\n    if (pvm!=null){\r\n      pvm = new Date(pvm);\r\n      kk = pvm.getMonth()+1;\r\n      pv = pvm.getDate();\r\n    }\r\n    const kuu = [\"Tammi\",\"Helmi\",\"Maalis\",\"Huhti\",\"Touko\",\"Kesä\",\"Heinä\",\"Elo\",\"Syys\",\"Loka\",\"Marras\",\"Joulu\"][parseInt(kk-1)]+\"kuu\"\r\n    return (\r\n      <div className={(alku)?\"paivays_alku paivays\":\"paivays_loppu paivays\"}>\r\n        <div className=\"kk\">{kuu}</div>\r\n        <div className=\"paivays_nro\">{pv}</div>\r\n      </div>\r\n    )\r\n    \r\n  }\r\n\r\n  export default Kalenteri","import React, { useState } from 'react'\r\nimport request from '../Shared/HttpRequests'\r\nimport { Link } from 'react-router-dom'\r\nimport { FaKey } from 'react-icons/fa';\r\nimport Kalenteri from '../UusiKokous/Esityslista/Kalenteri'\r\n\r\nconst KokousTable = ({ kokous, yhdistys, yhdistys_id }) => {\r\n\r\n    const pvmYear = { year: 'numeric' };\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const openKokous = (id) => {\r\n\r\n        if (window.confirm('Haluatko avata kokoustilan osallistujille?')) {\r\n            setLoading(true)\r\n            const body = JSON.stringify({ call: 'openkokous', id: id })\r\n            console.log('body', body)\r\n            request.kokous(body).then(res => {\r\n                alert(res.data.message)\r\n                window.location.reload()\r\n            }).catch(err => {\r\n                alert(err.response.data.message)\r\n            })\r\n            // TODO luo asiakohta nimeltään ”Avaus” - ”Puheenjohtaja etunimi sukunimi avasi kokouksen pp.kk.vvvvv, klo hh:mm.”\r\n            // axios.post --> id_k, user.firstname, user.lastname, timestamp\r\n            // huom: kokous aukeaa myös automaattisesti jolloin speksien teksti on hieman harhaanjohtava? Vaihtoehtoisesti: \"Kokoustila avattiin käyttäjille pp.kk.vvvv, klo hh:mm\" ???  \r\n        }\r\n    }\r\n    \r\n    if (!loading) {\r\n        return (\r\n            <div className=\"bg\">\r\n                <div >\r\n                    {kokous.map((item) =>\r\n                        <Link key={item.id} className=\"text-primary\" style={{ pointerEvents: (item.avoinna === '1' || item.role === 'puheenjohtaja') ? \"auto\" : \"none\", textDecoration: \"none\" }}\r\n                            to={{ pathname: `/kokous/${yhdistys}/${item.id}`, state: { id_y: yhdistys_id } }}\r\n                            title=\"Tarkastele kokouksen tietoja\">\r\n                            <div className={(item.avoinna === '1' || item.role === 'puheenjohtaja') ? \"taulu\" : \"taulu disable\"} key={item.kokousnro}>\r\n                                <Kalenteri pvm={item.startDate} alku={false} />\r\n                                <Kalenteri pvm={item.endDate} alku={false} />\r\n                                <div className=\"tauluAlku tauluotsikko\">{item.otsikko}</div>\r\n                                <div className=\"taulukokousnro\">{item.kokousnro}/{(new Date(item.endDate)).toLocaleDateString('fi-FI', pvmYear)}</div>\r\n                                {item.avoinna === '1'\r\n                                    ? <></>\r\n                                    : <>\r\n                                        <div className=\"taulutila\">kokoustila on suljettu</div>\r\n                                        {item.role === 'puheenjohtaja' ? <>\r\n                                            <div className=\"taulunapit\">\r\n                                                <div style={{ whiteSpace: \"nowrap\" }}>\r\n                                                    {<button onClick={(event) => { event.preventDefault(); openKokous(item.id) }} id={item.id} title=\"Avaa kokoustila\" className=\"btn btn-outline-primary\" style={{ marginLeft: '5px' }}><FaKey /></button>}\r\n                                                </div>\r\n                                            </div></>\r\n                                            : <></>}\r\n                                    </>\r\n                                }\r\n                            </div>\r\n                        </Link>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        )\r\n    } else {\r\n       return <p className=\"mt-4 mx-4\">Ladataan tietoja .... </p>\r\n    }\r\n}\r\nexport default KokousTable\r\n","import React, { useState, useEffect } from 'react'\r\nimport KokousTable from './KokousTable'\r\n\r\nconst Kokouslistat = ({ kokoukset, showComponent, yhdistys, yhdistys_id }) => {\r\n\r\n    const [tulevat, setTulevat] = useState([]);\r\n    const [kaynnissa, setKaynnissa] = useState([]);\r\n    const [menneet, setMenneet] = useState([]);\r\n    \r\n    useEffect(() => {\r\n        if (kokoukset) {\r\n            kokoukset.map((item) => {\r\n                if (Date.parse(item.endDate) < new Date()) setMenneet(menneet => [...menneet, item])\r\n                else if (Date.parse(item.endDate) > new Date() && Date.parse(item.startDate) < new Date()) {\r\n                    setKaynnissa(kaynnissa => [...kaynnissa, item])\r\n                }\r\n                else setTulevat(tulevat => [...tulevat, item])\r\n                return null;\r\n            })\r\n        }\r\n    }, [kokoukset])\r\n\r\n    let component\r\n\r\n    if (showComponent === 'kaynnissa') {\r\n        component =\r\n            (<>\r\n                {kaynnissa.length === 0\r\n                    ? <><h5>Yhdistyksellä ei ole käynnissä olevia kokouksia</h5></>\r\n                    : <>{/*<h5>Käynnissä olevat kokoukset</h5>*/}\r\n                        <KokousTable kokous={kaynnissa} yhdistys={yhdistys} status=\"kaynnissa\" yhdistys_id={yhdistys_id} />\r\n                    </>}\r\n            </>)\r\n    } else if (showComponent === 'menneet') {\r\n        component =\r\n            (<>\r\n                {menneet.length === 0\r\n                    ? <><h5>Yhdistyksellä ei ole menneitä kokouksia</h5></>\r\n                    : <>\r\n                        <KokousTable kokous={menneet} yhdistys={yhdistys} status=\"paattynyt\" yhdistys_id={yhdistys_id}/>\r\n                    </>}\r\n            </>)\r\n    } else if (showComponent === 'tulevat') {\r\n        component =\r\n            (<>\r\n                {tulevat.length === 0\r\n                    ? <><h5>Yhdistyksellä ei ole tulevia kokouksia</h5></>\r\n                    : <>\r\n                        <KokousTable kokous={tulevat}  yhdistys={yhdistys} status=\"tuleva\" yhdistys_id={yhdistys_id}/>\r\n                    </>}\r\n            </>)\r\n    } else component = <></>\r\n\r\n    return <div className=\"mt-2\">{component}</div>\r\n\r\n}\r\n\r\nexport default Kokouslistat\r\n\r\n","import React from 'react'\r\n\r\nconst Jasenlista = ({members}) => {\r\n    return (   \r\n        <div style={{marginTop:\"4px\"}} >\r\n            <table className=\"table table-hover\">\r\n                <thead>\r\n                    <tr className=\"table-primary\"><td>Etunimi</td><td>Sukunimi</td><td>Sähköpostiosoite</td></tr>\r\n                </thead>\r\n                <tbody>\r\n                    {members.map((item, key) =>\r\n                        <tr key={key + item.firstname}>\r\n                            <td>{item.firstname}</td>\r\n                            <td>{item.lastname}</td>\r\n                            <td>{item.email}</td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\nexport default Jasenlista\r\n","import React, { useState} from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport Kokouslistat from './Kokouslistat'\r\nimport Jasenlista from './Jasenlista'\r\nimport HelpPop from '../Shared/HelpPop'\r\nimport { getSessionRole } from '../Auth/Sessions'\r\n\r\nconst AssocAdmin = ({ kokoukset, members, yhdistys, yhdistys_id }) => {\r\n    \r\n    let history = useHistory()\r\n    const [showComponent, setShowComponent] = useState('kaynnissa')\r\n    const helpText = <p >Valikon kautta voit valita haluamasi näkymän. Voit luoda uuden kokouksen painamalla uusi kokous -näppäintä. Näet myös tulevat ja käynnissä olevat kokoukset sekä menneiden kokouksien asiat valikon näppäimien kautta. Palveluun rekisteröityneet jäsenet saat näkyville yhdistyksen jäsenet -näppäintä painamalla. </p>\r\n\r\n    const handleMenuClick = (ev) => {\r\n        let napit = ev.target.parentNode.querySelectorAll(\"button\");\r\n        for (let i = 0; i < napit.length; i++) {\r\n            napit[i].classList.remove(\"valittu_menu\");\r\n          }\r\n        setShowComponent(ev.target.name)\r\n        ev.target.classList.add(\"valittu_menu\");\r\n    }\r\n\r\n    let component\r\n    if (showComponent === 'tulevat' || showComponent === 'menneet' || showComponent === 'kaynnissa') component = <Kokouslistat kokoukset={kokoukset} showComponent={showComponent} yhdistys={yhdistys} yhdistys_id={yhdistys_id} />\r\n    else if (showComponent === 'jasenet') component = <Jasenlista members={members} />\r\n    else component = <></>\r\n\r\n    if (getSessionRole() && getSessionRole().yhdistys === yhdistys && kokoukset)  {\r\n\r\n        return (\r\n            <div >\r\n                    <div className=\"d-sm-flex justify-content-center second_nav\">\r\n                        <button className=\"text-primary valittu_menu\" name=\"kaynnissa\" onClick={handleMenuClick}>Kokoukset</button>\r\n                        <button className=\"text-primary \" name=\"tulevat\" onClick={handleMenuClick}>Tulevat kokoukset</button>\r\n                        <button className=\"text-primary \" name=\"menneet\" onClick={handleMenuClick}>Päättyneet kokoukset</button>\r\n                        <button className=\"text-primary \" name=\"jasenet\" onClick={handleMenuClick}>Jäsenlista</button> \r\n                        <HelpPop heading=\"Yhdistyksen etusivu\" text={helpText} btnText=\"Selitystä\" placement=\"left\" variant=\"btn btn-outline-danger btn-sm mx-1\" />\r\n                    </div>    \r\n                {component}\r\n            </div>\r\n        )\r\n    } else if (!getSessionRole()) {\r\n        return <p className=\"mt-4 mx-4\">Ladataan tietoja .... </p>\r\n    }\r\n    else {\r\n        history.push('/userpage')\r\n        return null\r\n    }\r\n}\r\nexport default AssocAdmin","import React, { useState, useEffect } from 'react'\r\nimport { useParams, useHistory, Link } from 'react-router-dom'\r\nimport { getUser } from '../../Components/Auth/Sessions'\r\nimport request from '../../Components/Shared/HttpRequests'\r\nimport AssocContent from '../../Components/Assoc/AssocContent'\r\nimport { setSessionRole, getSessionRole } from '../../Components/Auth/Sessions'\r\n\r\nconst AssocMain = (props) => {\r\n\r\n    const [kokoukset, setKokoukset] = useState()\r\n    const [members, setMembers] = useState([])\r\n    const { yhdistys } = useParams()\r\n\r\n    const [role, setRole] = useState('')\r\n    const user = getUser()\r\n    let history = useHistory()\r\n    let yhdistys_id\r\n    if (props.location.state === undefined) history.push('/userpage')\r\n    else yhdistys_id = props.location.state.id_y;\r\n\r\n    useEffect(() => {\r\n\r\n        const member = JSON.stringify({ call: 'checkmember', email: user.email, name: yhdistys })\r\n\r\n        request.assoc(member).then(res => {\r\n            setRole(res.data.role)\r\n            const userRole = { yhdistys: yhdistys, role: res.data.role }\r\n            setSessionRole(userRole)\r\n        }).catch(() => history.push('/userpage'))\r\n\r\n        if (role) {\r\n\r\n            const body = JSON.stringify({ call: 'getkokoukset', yhdistys: yhdistys, email: user.email });\r\n            request.kokous(body).then(res => {\r\n                setKokoukset(res.data.filter(x => x.valmis === \"1\"))\r\n            }).catch(err => console.log('err.response', err.response))\r\n\r\n            const req = JSON.stringify({ call: 'getallmembers', yhdistys: yhdistys })\r\n            request.assoc(req).then(res => {\r\n                setMembers(res.data)\r\n            }).catch(err => console.log('err.response', err.response))\r\n\r\n        }\r\n\r\n    }, [history, user.email, yhdistys, role]); /* tekee monta kertaa*/\r\n\r\n    if (getSessionRole() && kokoukset) {\r\n        let component\r\n        return (\r\n            <div style={{ width: \"100%\", maxWidth: \"1100px\", padding: \"0\", marginTop: \"50px\" }}>\r\n                {/*<div className=\"mx-auto mt-5\">*/}\r\n                <h2 className=\"px-3\">{yhdistys}</h2>\r\n                <h4 className=\"px-3\">Yhdistyksen sivu</h4>\r\n                {getSessionRole().role === 'admin' ? <Link className=\"px-3\"\r\n                    to={{ pathname: `/uusikokous/${yhdistys}`, state: { id_y: yhdistys_id } }}>Luo uusi kokous</Link> : <></>}\r\n                <hr />\r\n                <AssocContent kokoukset={kokoukset} members={members} yhdistys={yhdistys} yhdistys_id={yhdistys_id} />\r\n            </div>\r\n        )\r\n    } else {\r\n        return <p className=\"mt-4 mx-4\">Ladataan tietoja .... </p>\r\n    }\r\n}\r\n\r\nexport default AssocMain\r\n","import React from 'react'\r\nimport DatePicker, { registerLocale } from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport fi from 'date-fns/locale/fi';\r\n\r\nconst Perustiedot = ({ setShowComponent, handlePerustiedotChange, saveKokousDraft, perustiedot, setPerustiedot }) => {\r\n\r\n    registerLocale('fi', fi)\r\n    let x = perustiedot.avoinna ? \"Avoinna\" : \"Kiinni\"\r\n    if (perustiedot) {\r\n        return (\r\n            <div className=\"col-md-6  m-auto\">\r\n                <h5 className=\"mb-4\">Kokouksen perustiedot</h5>\r\n                <div >\r\n                    <div className=\"form-group\">\r\n                        <label>Otsikko</label>\r\n                        <input type=\"text\" className=\"form-control\" name=\"otsikko\" onChange={handlePerustiedotChange} value={perustiedot.otsikko} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Kokouksen numero</label>\r\n                        <input type=\"text\" className=\"form-control\" name=\"kokousnro\" onChange={handlePerustiedotChange} value={perustiedot.kokousNro || ''} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Kokous alkaa</label><br />\r\n                        <DatePicker\r\n                            name='startdate'\r\n                            locale=\"fi\"\r\n                            dateFormat=\"dd/MM/yyyy\"\r\n                            className=\"form-control\"\r\n                            selected={perustiedot.startDate}\r\n                            onChange={date => setPerustiedot({ ...perustiedot, startDate: date })}\r\n                            selectsStart\r\n                            startDate={perustiedot.startDate}\r\n                            endDate={perustiedot.endDate}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Kokous päättyy</label><br />\r\n                        <DatePicker\r\n                            locale=\"fi\"\r\n                            dateFormat=\"dd/MM/yyyy\"\r\n                            className=\"form-control\"\r\n                            selected={perustiedot.endDate}\r\n                            onChange={date => setPerustiedot({ ...perustiedot, endDate: date })}\r\n                            selectsEnd\r\n                            startDate={perustiedot.startDate}\r\n                            endDate={perustiedot.endDate}\r\n                            minDate={perustiedot.startDate}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group custom-control custom-switch\">\r\n                        <input type=\"checkbox\" className=\"custom-control-input\" onChange={handlePerustiedotChange} id=\"avaa\" value={perustiedot.avoinna} checked={perustiedot.avoinna} />\r\n                        <label className=\"custom-control-label\" htmlFor=\"avaa\">Avaa kokoustila heti osallistujille</label>\r\n                    </div><p>Tila: {x}</p>\r\n                    {/* <div className=\"text-right\">\r\n                        <button onClick={() => { setShowComponent('esityslista'); saveKokousDraft() }} className=\"btn btn-outline-primary mt-3\">Seuraava</button>\r\n                    </div> */}\r\n                </div>\r\n                <hr />\r\n            </div>\r\n        )\r\n    }else {\r\n        return <p className=\"mt-4 mx-4\">Ladataan tietoja .... </p>\r\n    }\r\n}\r\nexport default Perustiedot\r\n","import React, { useEffect } from 'react'\r\n\r\nconst Osallistujat = ({ puheenjohtaja, osallistujat, setOsallistujat, saveOsallistujat, varalla, setVaralla, setShowComponent }) => {\r\n\r\n    useEffect(() => {\r\n        saveOsallistujat()\r\n    }, [osallistujat])\r\n\r\n    const handleVaralleClick = (ev) => {\r\n        const vara = osallistujat.filter(x => x.email === ev.target.name)\r\n        setVaralla(varalla.concat(vara))\r\n        setOsallistujat(osallistujat.filter(x => x.email !== ev.target.name))\r\n    }\r\n    const handleOsallistuuClick = (ev) => {\r\n        const osallistuja = varalla.filter(x => x.email === ev.target.name)\r\n        setOsallistujat(osallistujat.concat(osallistuja))\r\n        setVaralla(varalla.filter(x => x.email !== ev.target.name))\r\n    }\r\n\r\n    return (\r\n        <div className=\"mt-5 mx-auto col-md-10\">\r\n            <h5 className=\"mb-4\">Osallistujat</h5>\r\n            <h6>Puheenjohtaja:{' '} {puheenjohtaja[0].firstname} {puheenjohtaja[0].lastname} ({puheenjohtaja[0].email})</h6>\r\n            <div className=\"mt-1\">\r\n                {osallistujat.length > 0\r\n                    ? <>\r\n                        <h5 className=\"mt-4\">Kokousosallistujat</h5>\r\n                        < table className=\"table table-hover\">\r\n                            <thead>\r\n                                <tr className=\"table-primary\"><th>Etunimi</th><th>Sukunimi</th><th>Sähköpostiosoite</th><th></th></tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {osallistujat.map((item, key) =>\r\n                                    <tr key={key + item.firstname}>\r\n                                        <td>{item.firstname}</td>\r\n                                        <td>{item.lastname}</td>\r\n                                        <td>{item.email}</td>\r\n                                        <td><button onClick={handleVaralleClick} className=\"btn btn-outline-primary btn-sm\" name={item.email}>Poista osallistujalistalta</button></td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table></>\r\n                    :\r\n                    <h6>Kokouksessa ei ole osallistujia</h6>\r\n                }\r\n                {varalla.length > 1\r\n                    ? <>\r\n                        <h5 className=\"mt-4\">Muut yhdistyksen jäsenet</h5>\r\n                        < table className=\"table table-hover\">\r\n                            <thead>\r\n                                <tr className=\"table-primary\"><th>Etunimi</th><th>Sukunimi</th><th>Sähköpostiosoite</th><th></th></tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {varalla.filter(x => x.email !== puheenjohtaja[0].email).map((item, key) =>\r\n                                    <tr key={key + item.firstname}>\r\n                                        <td>{item.firstname}</td>\r\n                                        <td>{item.lastname}</td>\r\n                                        <td>{item.email}</td>\r\n                                        <td><button onClick={handleOsallistuuClick} className=\"btn btn-outline-primary btn-sm\" name={item.email} >Siirrä kokousosallistujaksi</button></td>\r\n                                    </tr>\r\n                                )}\r\n                            </tbody>\r\n                        </table></>\r\n                    :\r\n                    <h6>Kaikki yhdistyksen jäsenet ovat osallistujalistalla</h6>\r\n                }\r\n            </div>\r\n            {/* <div className=\"form-group text-right\">\r\n                <button onClick={() => { setShowComponent('paatosvaltaisuus'); saveOsallistujat() }} type=\"submit\" className=\"btn btn-outline-primary mt-3\">Seuraava</button>\r\n            </div> */}\r\n            <hr />\r\n        </div >\r\n\r\n    )\r\n}\r\nexport default Osallistujat\r\n","import React from 'react'\r\nimport HelpPop from '../Shared/HelpPop'\r\n\r\nconst Paatosvaltaisuus = ({ setShowComponent, handlePaatosvaltaChange, saveKokousDraft, paatosvaltaisuus }) => {\r\n\r\n    const helpText = \"Kokouksen päätösvaltaisuuden voi määritellä täyttämällä valitsemasi kentät. Tyhjäksi jätettyä kenttää ei huomioida kokouksen päätösvaltaisuuden määrittelyssä.\"\r\n    const handleClick =() => {\r\n       setShowComponent('yhteenveto')\r\n       saveKokousDraft() \r\n    }\r\n\r\n    return (\r\n        <div className=\"mt-5\">\r\n            <div className=\"col-md-6  m-auto\">\r\n                <div className=\"mb-2\">\r\n                    <h5>Kokouksen päätösvaltaisuus</h5>\r\n                    <p style={{ marginTop: \"-5px\" }}>\r\n                        <HelpPop heading=\"Päätösvaltaisuus\" text={helpText} btnText=\"Selite\" placement=\"bottom\" variant=\"link\" style={{ marginBottom: \"3px\", marginLeft: \"-10px\" }} />\r\n                    </p>\r\n                </div>\r\n                <form>\r\n                    <div className=\"form-group\">\r\n                        <label>Esityslista</label>\r\n                        <input type=\"number\" min=\"0\" step=\"1\" className=\"form-control\" name=\"esityslista\" onChange={handlePaatosvaltaChange} value={paatosvaltaisuus.esityslista} />\r\n                        <small className=\"form-text text-muted\">Kuinka monen kokousosallistujan on avattava esityslista kokouksen päätösvaltaisuuden täyttymiseksi?</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Aktiivisuus</label>\r\n                        <input type=\"number\" min=\"0\" step=\"1\" className=\"form-control\" name=\"aktiivisuus\" onChange={handlePaatosvaltaChange} value={paatosvaltaisuus.aktiivisuus} />\r\n                        <small className=\"form-text text-muted\">Kuinka monen käyttäjän on kommentoitava jotakin kohtaa tai kannatettava jotakin, jotta kokouksen päätösvaltaisuus täyttyy?</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Kesto</label>\r\n                        <input type=\"number\" min=\"0\" step=\"1\" className=\"form-control\" name=\"kesto\" onChange={handlePaatosvaltaChange} value={paatosvaltaisuus.kesto} />\r\n                        <small className=\"form-text text-muted\">Kuinka monta vuorokautta kokouksen on kestettävä, jotta kokous on päätösvaltainen?</small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Muu kriteeri</label>\r\n                        <textarea className=\"form-control\" rows=\"3\" name=\"muu\" onChange={handlePaatosvaltaChange} value={paatosvaltaisuus.muu} />\r\n                        <small className=\"form-text text-muted\">Kirjoita haluamasi päätösvaltaisuuskriteeri kenttään</small>\r\n                    </div>\r\n                </form>\r\n                {/* <div className=\"form-group text-right\">\r\n                <button onClick={() => { setShowComponent('yhteenveto'); saveKokousDraft() }} type=\"submit\" className=\"btn btn-outline-primary mt-3\" >Seuraava</button>\r\n                </div> */}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Paatosvaltaisuus","import React from 'react'\r\nimport { Editor } from \"@tinymce/tinymce-react\"\r\n\r\nexport const TextEditor = ({ editorContentChange, teksti }) => {\r\n\r\n\r\n    return (\r\n        <div style={{ contenteditable: 'true', zIndex: '100 !important' }}>\r\n\r\n            <Editor apiKey={process.env.REACT_APP_TINYAPI_KEY}\r\n                onEditorChange={editorContentChange}\r\n                value={teksti}\r\n                init={{\r\n                    height: 750,\r\n                    plugins: [\r\n                        'advlist lists link image print',\r\n                        'charmap print preview anchor help',\r\n                        'searchreplace visualblocks',\r\n                        'insertdatetime table paste preview'\r\n                    ],\r\n                    toolbar: [\r\n                        'preview print | undo redo | formatselect | bold italic |  alignleft aligncenter alignright |  bullist numlist outdent indent | help | insertdatetime'],\r\n                    insertdatetime_dateformat: [\"%HH:%M\", \"%d-%m-%Y\"],\r\n\r\n                    setup: function (ed) {\r\n                        ed.on('keydown', function (evt) {\r\n                            if (evt.keyCode === 9) {\r\n                                ed.execCommand('mceInsertRawHTML', false, '&emsp;&emsp;');\r\n                                evt.preventDefault();\r\n                                evt.stopPropagation();\r\n                                return false;\r\n                            }\r\n                        })\r\n\r\n                    }\r\n                }}\r\n            />\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { TextEditor } from '../Document/TextEditor';\r\nimport { getUser } from '../Auth/Sessions'\r\nimport request from '../Shared/HttpRequests'\r\nimport Loading from '../Shared/Loading';\r\n\r\nconst Yhteenveto = ({ perustiedot, esityslista_otsakkeet, osallistujat, paatosvaltaisuus, yhdistys, id_y }) => {\r\n    const [loading, setLoading] = useState(false)\r\n    let history = useHistory()\r\n    let user = getUser()\r\n    const pvmForm = { month: 'numeric', day: 'numeric' };\r\n    const start = (new Date(perustiedot.startDate)).toLocaleDateString('fi-FI', pvmForm)\r\n    const end = (new Date(perustiedot.endDate)).toLocaleDateString('fi-FI', pvmForm)\r\n    const nimi = perustiedot.otsikko === '' ? '' : `<h3>${perustiedot.otsikko}</h3>`\r\n    const osallistuu = osallistujat.map(x => '<li>' + x.firstname + ' ' + x.lastname + '</li>').join(' ')\r\n    let otsikot = esityslista_otsakkeet.map(x => '<li>'+x.otsikko+'</li>').join(' ')\r\n    otsikot = otsikot.length === 0 ? '<p>Kokoukselle ei ole määritelty esityslistaa</p>' : otsikot \r\n    let paatosvalta = ''\r\n    if (paatosvaltaisuus.esityslista === '' && paatosvaltaisuus.aktiivisuus === '' && paatosvaltaisuus.kesto === '' && paatosvaltaisuus.muu === '') paatosvalta += '<p>Kokouksen päätösvaltaisuutta ei ole määritelty.</p>'\r\n    else {\r\n        if (paatosvaltaisuus.esityslista !== '') paatosvalta += `<p>Kokous on päätösvaltainen jos vähintään ${paatosvaltaisuus.esityslista} kpl kokousosallistujista on avannut esityslistan.</p>`\r\n        if (paatosvaltaisuus.aktiivisuus !== '') paatosvalta += `<p>Kokous on päätösvaltainen jos vähintään ${paatosvaltaisuus.aktiivisuus} kpl kokousosallistujista on ottanut asioihin kantaa.</p>`\r\n        if (paatosvaltaisuus.kesto !== '') paatosvalta += `<p>Kokous on päätösvaltainen jos kokous kestää vähintään ${paatosvaltaisuus.kesto} vuorokautta.</p>`\r\n        if (paatosvaltaisuus.muu !== '') paatosvalta += `<p>${paatosvaltaisuus.muu}</p>`\r\n    }\r\n    // substringit sekoo jos jaat useammalle riville pelkällä enter+spacella\r\n    const [kokouskutsu, setKokouskutsu] = useState(`<h3>Esityslista ${perustiedot.kokousNro} kokous alkaa ${start} ja päättyy ${end}</h3>${nimi}<h4>Kokouksen avaus ${start}</h4><h4>Esityslista</h4><ol>${otsikot}</ol><h4>Osallistujat</h4><ul>${osallistuu.substring(0, osallistuu.length - 5)}</ul><h4>Kokouksen päätösvaltaisuus</h4>${paatosvalta}<h4>Kokous päättyy ${end}</h4><p>Terveisin <br/>${user.firstname} ${user.lastname}<br/><small>${yhdistys}</small></p>`)\r\n\r\n\r\n    const editorContentChange = (kokouskutsu) => {\r\n        setKokouskutsu(kokouskutsu)\r\n    }\r\n    const handleClickSaveAndSend = () => {\r\n        if (window.confirm('Haluatko tallentaa kokouksen ja lähettää kutsun osallistujille?')) {\r\n            setLoading(true)\r\n            saveNewKokous() // POST:t \"ketjutettu\" koska muuten bäkkipuoli ei toiminut toivotusti\r\n        }\r\n    }\r\n    const saveNewKokous = () => {\r\n\r\n        const uusiKokous = JSON.stringify({\r\n            call: 'luokokous',\r\n            id_y: id_y,\r\n            kokousid: perustiedot.kokousid,\r\n            otsikko: perustiedot.otsikko,\r\n            kokousnro: perustiedot.kokousNro.substring(0, perustiedot.kokousNro.length - 5),\r\n            startDate: perustiedot.startDate,\r\n            endDate: perustiedot.endDate,\r\n            avoinna: perustiedot.avoinna,\r\n            paatosvaltaisuus: paatosvaltaisuus,\r\n            valmis: true\r\n        })\r\n   \r\n        request.kokous(uusiKokous).then(res => {\r\n            saveDocumentKokouskutsu()   /// ks yllä\r\n        }).catch(err => {\r\n            alert(err.response.data.message)\r\n        })\r\n    }\r\n    const saveDocumentKokouskutsu = () => {\r\n\r\n        const kokouskutsuDocument = JSON.stringify({\r\n            call: 'postdoc',\r\n            id_y: id_y,\r\n            kokousnro: perustiedot.kokousNro.substring(0, perustiedot.kokousNro.length - 5),\r\n            type: 'kokouskutsu',\r\n            draft: 'false',\r\n            content: kokouskutsu\r\n        })\r\n\r\n        request.documents(kokouskutsuDocument).then((res) => {\r\n            saveOsallistujat() /// ks yllä\r\n        }).catch(err => {\r\n            alert(err.response.data.message)\r\n        })\r\n    }\r\n    const saveOsallistujat = () => {\r\n\r\n        let kokousosallistujat\r\n        kokousosallistujat = osallistujat.map(x => ({ rooli: 'osallistuja', ...x }))\r\n        user = Object.assign({ rooli: 'puheenjohtaja' }, user)\r\n        const call = { call: 'postosallistujat', id_y: id_y, kokousid: perustiedot.kokousid }\r\n        kokousosallistujat = [user].concat(kokousosallistujat)\r\n        kokousosallistujat = [call].concat(kokousosallistujat)\r\n        const body = JSON.stringify(kokousosallistujat)\r\n\r\n        request.osallistujat(body).then(res => {\r\n            sendInviteEmail();\r\n            console.log('Osallistujatiedot tallennettu ', res.data)\r\n        }).catch(err => alert(err.response.data.message))\r\n\r\n    }\r\n    const sendInviteEmail = () => {\r\n\r\n        const aihe = kokouskutsu.substring(4, kokouskutsu.indexOf(\"</h3>\"))\r\n        const runko = kokouskutsu.substring(kokouskutsu.indexOf(\"</h3>\") + 5)\r\n        const kokousosallistujat = [user].concat(osallistujat)\r\n        const invite = JSON.stringify({ call: 'sendkokousinvite', yhdistys: yhdistys, aihe: aihe, viesti: runko, osallistujat: kokousosallistujat })\r\n        console.log('invite', invite)\r\n        request.kokous(invite).then(res => {\r\n            alert(res.data.message)\r\n            setLoading(false)\r\n            history.push({pathname:`/assoc/${yhdistys}`, state:{id_y}})\r\n        }).catch(err => alert(err.response.data.message))\r\n    }\r\n\r\n    if (!perustiedot.startDate || !perustiedot.endDate) {\r\n        return (\r\n            <div className=\"mt-5 mx-auto col-md-10\">\r\n                <h5 className=\"mb-4\">Päivämäärätiedot ovat puutteelliset. Täytä tarvittavat tiedot perustiedot-välilehdellä.</h5>\r\n            </div>\r\n        )\r\n    } else if (osallistujat.length === 0) {\r\n        return (\r\n            <div className=\"mt-5 mx-auto col-md-10\">\r\n                <h5 className=\"mb-4\">Kokouksessa ei ole osallistujia. Lisää kokousosallistujat osallistujat-välilehdellä.</h5>\r\n            </div>\r\n        )\r\n    } else if (!loading) {\r\n        return (\r\n            <div className=\"mt-5 mx-auto col-md-10\">\r\n                <h5 className=\"mb-4\">Yhteenveto</h5>\r\n                <p className=\"mb-4\">Tarkasta kokouksen tiedot. Painamalla ruudun pohjalla olevaa näppäintä kokous tallentuu ja järjestelmä lähettää kutsun osallistujille kokoukseen s-postitse.</p>\r\n                <TextEditor editorContentChange={editorContentChange} teksti={kokouskutsu} />\r\n                <div className=\"form-group text-right\">\r\n                    <button className=\"btn btn-outline-primary mt-3\" onClick={handleClickSaveAndSend}>Tallenna ja lähetä kokouskutsu</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    } else if (loading) {\r\n        return (\r\n            <div className=\"mt-5 mx-auto col-md-10\">\r\n                <h5 className=\"mb-4\">Pyyntöä käsitellään, odota hetki....</h5>\r\n                <Loading/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Yhteenveto\r\n","import React, { useEffect, useRef } from 'react';\r\n\r\nconst ResizeTextArea = ({sisus,id=0,save,placeholder=\"\",edit=false,avaa,alku=0,loppu=0}) => {\r\n    const Tarea = useRef(null); \r\n    const updatethis = (event) => {     \r\n      save(id,event.target.value,500,\"otsake\")\r\n      /*event.target.style.minHeight = 'auto'\r\n      event.target.style.minHeight = (event.target.scrollHeight-15)+'px'*/\r\n    }\r\n\r\n    useEffect(() => {\r\n    \r\n      Tarea.current.style.minHeight = 'auto'\r\n      Tarea.current.style.minHeight = (Tarea.current.scrollHeight-15)+'px'}, [sisus,edit])  \r\n\r\n      let sisusta;\r\n\r\n      if (edit) sisusta = <textarea ref={Tarea} className=\"areaText\" id={id} spellCheck=\"false\" onChange = {updatethis} onInput= {updatethis} value={sisus} placeholder={placeholder}></textarea>\r\n      else sisusta = <div \r\n                      ref={Tarea} tabIndex=\"0\"\r\n                       style={{paddingBottom:15}}\r\n                       className=\"areaText\" id={id}\r\n                       spellCheck=\"false\" >{sisus}</div>\r\n\r\n    return (\r\n      <div>{sisusta}</div>\r\n      \r\n    )\r\n  }\r\n  \r\n  export default ResizeTextArea","import React, { useState, useEffect } from 'react';\r\nimport '../../../Style/Paatos.css'\r\nimport { FaGavel } from 'react-icons/fa';\r\nimport ResizeTextArea from './ResizeTextArea'\r\nimport EsitysKohta from './EsitysKohta';\r\n/**\r\n * tila: 5 -> \r\n * tila: \r\n * \r\n * \r\n * \r\n * \r\n * \r\n * \r\n * \r\n */\r\n\r\n\r\n\r\nexport const Paatos = ({type,kokous_id,kohta_id,tila,paatos,save}) => {\r\n    var thisdata =\"\"\r\n    const [nappiBool, setnappibool] = useState(false) \r\n    thisdata = paatos;\r\n    const this_save = (_id,data,delay) => {\r\n        thisdata = data;\r\n        save(kohta_id,[data,2],delay)\r\n      } \r\n    \r\n    const naytavalinnat = () => {\r\n        \r\n        setnappibool(!nappiBool);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n        <div className={\"paatos\"+tila}>\r\n            <div className=\"nuija\" onClick={()=>naytavalinnat()}><div className=\"nuija2\"><FaGavel/></div> </div>\r\n            <div className=\"paatos_editori\"><ResizeTextArea edit={tila!=3} id={kohta_id} sisus={paatos} save={this_save}/></div>\r\n          </div>\r\n            {nappiBool?\r\n            (tila==3)?<div  className=\"paatos_valinnat\"><div className=\"avaa\" onClick={()=>{setnappibool(false);save(kohta_id,[paatos,2],100)}}>AVAA</div></div>:\r\n            <div  className=\"paatos_valinnat\"><div onClick={()=>{setnappibool(false);save(kohta_id,[thisdata,3],100)}}>Hyväksy!</div><div>Lisäaikaa</div><div>Hylkää</div></div>:\"\"}\r\n            \r\n          \r\n           {\r\n           /* \r\n            <div>\r\n            Ääniä on annettu tähän mennessä.... äänestys aikaa jäljellä vielä 2 päivää.\r\n            </div>\r\n        \r\n            <div>\r\n            Ei tarpeeksi ääniä, valintaa lykätään 5 päivällä.\r\n            </div>\r\n        \r\n            <div>\r\n            Äänestyksessä on tasapeli tilanne\r\n            </div>\r\n        \r\n            <div>\r\n            Olet saanut eniten ääniä puheenjohtaja valinnassa.\r\n            \r\n                <div> Hyväksyn </div> \r\n                <div> En halua </div> \r\n                <div className=\"teepaatos\">\r\n                \r\n                tee päätös</div>\r\n           </div>*/\r\n           }\r\n        </div>\r\n       \r\n        \r\n    )\r\n}\r\n\r\nexport default Paatos","import React, { useState} from 'react';\r\nimport ResizeTextArea from './ResizeTextArea'\r\nimport axios from 'axios';\r\n\r\nconst url = process.env.REACT_APP_HOST_URL\r\nconst Kommentit = ({thread_id,kohta_id,maara,kokous_id,tyyppi=\"mielipide\"}) => {\r\n    const [kommenttiBool,setKommenttiBool] = useState(false);\r\n    const [kommentti,setKommentti] = useState(\"\")\r\n    const [kommentit,setKommentit] = useState([]);\r\n    const [kommenttimaara,setMaara] = useState(maara);\r\n    const this_save = (_id,data) => {\r\n        \r\n        setKommentti(data);\r\n        let sendi = document.getElementById(\"send_kommentti\"+kohta_id);\r\n        if(sendi !=null){\r\n            \r\n            if (data.length > 0)\r\n                sendi.classList.add(\"sendilite\")\r\n            else\r\n                sendi.classList.remove(\"sendilite\")\r\n        }\r\n        \r\n        \r\n    }\r\n    const reload = () => {\r\n        var params = new URLSearchParams()\r\n        params.append (\"hae_kommentit\", tyyppi)\r\n        params.append (\"kokous_id\", kokous_id)\r\n        params.append (\"kohta\", kohta_id)\r\n        params.append (\"thread\", thread_id)\r\n        axios.post(url+'data.php', params, {withCredentials: true}).then((response) => {\r\n            setKommentit(response.data[0]);\r\n           setMaara(response.data[0].length)\r\n        })}\r\n    const julkaise = () => {\r\n        var params = new URLSearchParams()\r\n        params.append (\"save\", \"kommentti_\"+tyyppi)  \r\n        params.append(\"param\", kommentti)\r\n        params.append (\"kohta\", kohta_id)\r\n        params.append(\"kokous_id\", kokous_id)\r\n        params.append (\"thread\",thread_id)\r\n        axios.post(url+'data.php', params, {withCredentials: true}).then((response) => {\r\n        console.log(\"sdfdsf\",response.data)\r\n        reload()}\r\n        )  \r\n    \r\n    }\r\n\r\n    const vari = (txt) => {\r\n        let nro = 0\r\n        for(let i=0;i<txt.length;i++){\r\n            nro += parseInt(txt.charCodeAt(i))\r\n        }\r\n        console.log(\"Numba\",txt,nro);\r\n        return \"#dddddd77\";\r\n        /*return \"rgba(\"+(1344+nro)%255+\",\"+(nro*4)%255+\",\"+(110+nro)%255+\",\"+0+\")\"*/\r\n    }\r\n\r\n    return (\r\n        <div className=\"kommentti\">\r\n            \r\n            <div className=\"kommenttimaara\" onClick={() => {reload();setKommenttiBool(!kommenttiBool)}}>\r\n            \r\n            <svg style={{height:\"15px\",width:\"15px\"}} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" fill=\"none\" stroke-width=\"4\" stroke=\"#000\"><path  d=\"M66.72,12.5H33.28C17.66,12.5,5,24.91,5,40.22H5A27.93,27.93,0,0,0,30.25,67.77l-7,19.73,24-19.57H66.72C82.34,67.93,95,55.52,95,40.22h0C95,24.91,82.34,12.5,66.72,12.5Z\" /></svg> \r\n            &nbsp;{kommenttimaara}\r\n            </div>\r\n        {kommenttiBool?\r\n        <div>\r\n        {kommentit.map(x => <div key={x.mid} className=\"kommentti_container\"><div>\r\n            \r\n         <div className=\"kommentoija\" style={{background: vari(x.firstname+x.lastname),color:\"black\" }} >{x.firstname[0]}{x.lastname[0]}</div>\r\n         <div className=\"KommentoijaFullname\"><b>{x.firstname} {x.lastname}</b></div>\r\n         <div className=\"kommenttiaika\">{x.aika} </div>\r\n         <div className=\"kommenttikommentti\">{x.kommentti}</div></div>\r\n         <div className=\"kommenttilikepeukku\">PEUKKU</div></div>)}\r\n        <ResizeTextArea edit={true} placeholder=\"kirjoita kommentti\" sisus={kommentti} save={this_save}/>\r\n        \r\n        <div className=\"sendibutton\" id={\"send_kommentti\"+kohta_id} onClick={()=>julkaise()}>send</div></div>:\"\"}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Kommentit\r\n","import React from 'react'\r\n\r\nconst Kannata = () => {\r\n    return (\r\n        <div className=\"kannata\">\r\n              kannata\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Kannata\r\n","import React, { useRef, useEffect, useState} from 'react';\r\nimport ResizeTextArea from './ResizeTextArea'\r\nimport '../../../Style/Mielipide.css';\r\nimport Kommentit from './Kommentit';\r\nimport Kannata from './Kannata';\r\n\r\n\r\nvar alku=0;\r\nvar loppu=0;\r\nvar thisdata =\"\"\r\nconst Mielipide = ({kokous_id,kohta_id,tila,save,edit=false, arvot=[],kuvaus,positio}) => {\r\n    console.log(\"ARVOT\",arvot)\r\n    const [kohta,setKohta] = useState(\"\")\r\n    const [perustelu,setPerustelu] = useState(\"\")\r\n    const [mbool,setMielibool] =useState(false);\r\n    \r\n    \r\n    const laheta_setup = () => {\r\n        let sendi = document.getElementById(\"send_mielipide\"+kohta_id);\r\n        if(sendi !=null){\r\n            if (thisdata.length >0)\r\n                sendi.classList.add(\"sendilite\")\r\n            else\r\n                sendi.classList.remove(\"sendilite\")\r\n        }\r\n    }\r\n\r\n    const this_save = (_id,data) => {\r\n        setPerustelu(data);\r\n        thisdata = data;\r\n        save(_id,[data,alku,loppu,0])\r\n        laheta_setup();    \r\n    }\r\n\r\n    const julkaise = () => {\r\n        save(kohta_id,[thisdata,alku,loppu,1])\r\n        alku=0;loppu=0;\r\n        thisdata =\"\"\r\n        setPerustelu(\"\");\r\n        positio(alku,loppu)\r\n        setMielibool(alku!=loppu);\r\n    }\r\n    \r\n    useEffect((paivitaKohta) => {\r\n        document.addEventListener('selectionchange', function(event) {\r\n            let sel = window.getSelection();\r\n            if (sel.rangeCount) {\r\n                let element = sel.getRangeAt(0).commonAncestorContainer;\r\n                if(element && element.parentNode !==null && element.parentNode.id === (\"kuvaus\"+kohta_id)){\r\n                    alku = sel.anchorOffset;\r\n                    let offset = sel.focusOffset;\r\n                    if(offset < alku ){\r\n                        loppu = alku\r\n                        alku = offset;\r\n                    } else {\r\n                        loppu = offset;\r\n                    }\r\n                    laheta_setup()\r\n                    setMielibool(alku!=loppu);\r\n                    setKohta(window.getSelection().toString());\r\n                } \r\n            }\r\n        })\r\n        }, [])  \r\n    const osa = (alku,loppu) => {\r\n        let otsake = kuvaus.toString().substring(alku,loppu)\r\n        if (otsake.length > 100) return otsake.slice(0,80)+\"...\"\r\n        else return otsake;\r\n        \r\n    }\r\n    \r\n    let mielipide = \"\"\r\n    if(mbool && tila!=3) mielipide = <div>\r\n        <div className=\"mteksti  disable-select\">Mielipide asiasta:<br></br><b> {kohta} </b></div>\r\n        <div className=\"perustelu\" onMouseDown={()=>{positio(alku,loppu)}}><ResizeTextArea  edit={true} sisus={perustelu} save={this_save}/></div>\r\n        <div className=\"sendibutton disable-select\" id={\"send_mielipide\"+kohta_id} onClick={() => julkaise()}>Lähetä</div></div>\r\n    \r\n    return (<div>\r\n          \r\n        {mielipide}\r\n        {(arvot.length > 0)?<div className=\"MielipideHeader disable-select\">Mielipiteet({arvot.length})</div>:\"\"}\r\n        \r\n        {arvot.map(arvot =>\r\n        <div>\r\n            <div key={arvot.id} className=\"mielipide_container\" onClick={(ev)=>{setMielibool(false);positio(arvot.alku,arvot.loppu)}}>\r\n                <div className=\"kelloaika\">{arvot.aika}</div>\r\n                <div className=\"nimipallo\" style={{background: \"#ddd\",color:\"black\" }}>{arvot.firstname[0]}{arvot.lastname[0]}</div>\r\n                <div className=\"mielipide_otsake\" ><b>{osa(arvot.alku,arvot.loppu)}</b></div>\r\n                \r\n                <div className=\"mielipide_teksti\">{arvot.mielipide}\r\n             </div>   \r\n                \r\n                <Kannata/>\r\n                <Kommentit \r\n                    thread_id={arvot.id}\r\n                    kohta_id={kohta_id}\r\n                    kokous_id={kokous_id}\r\n                    maara={arvot.kommentit}/>\r\n                </div>\r\n             </div>                   \r\n                                ) }    \r\n        </div>)\r\n}\r\n\r\n\r\nexport default Mielipide\r\n\r\n\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport ResizeTextArea from './ResizeTextArea';\r\nimport '../../../Style/Hyvaksy.css';\r\n/**\r\n * \r\n * Asiakirja kohta \r\n *  -  (\"kuvaus\" löytyy parentista)\r\n *  - ruutu jossa voi hyväksyä esitetyn asian.\r\n *  - tekstiruutu jossa voi ehdottaa muutosta asiaan.\r\n *  - näyttää kuinka monta on hyväksynyt.\r\n *  \r\n * \r\n *  - kommenttiraita.\r\n * \r\n */\r\n\r\n\r\nconst Hyvaksy = ({id,save,sisus}) => {\r\n    const this_save = (id,data) => {\r\n        save(id,data)\r\n    }\r\n    const this_check = () => {\r\n\r\n    }\r\n    return (\r\n        <div className=\"asiakohta_hyvaksy\">\r\n            \r\n            <Checkbox check={this_check} nimi = \"hyväksyn\"/>\r\n                <div className=\"asiakohta_perustelu\">\r\n                \r\n                <ResizeTextArea  edit={true} sisus={sisus} save={this_save} placeholder={\"Ehdota muutosta\"}/>\r\n            </div>\r\n        </div>\r\n    \r\n    )\r\n}\r\n\r\nexport default Hyvaksy\r\nconst Checkbox = ({id,nimi,arvo,check}) => {\r\n    const thischeck = (event) => {check(id)}\r\n    \r\n    const this_save = () => {}\r\n    \r\n\r\n   let ruutu;\r\n   ruutu = <div  className={(arvo)?\"green ruutu\":\"ruutu\"} onClick={thischeck}></div>\r\n\r\n    return (\r\n        <div className=\"valinta\" >\r\n            {ruutu}\r\n           \r\n            <input onChange={this_save} spellCheck=\"false\" className=\"ruutuvalinta\" type=\"text\" value={nimi}></input>\r\n            </div>\r\n      )\r\n}","import React, {useEffect, useState} from 'react'\r\nimport request from \"../../Shared/HttpRequests\"\r\nimport '../../../Style/Henkilovalinta.css'\r\nimport CheckboxArea from './CheckboxArea'\r\n\r\n\r\n\r\nconst Henkilovalinta = ({kokous_id,edit=false, arvot, checkValue=[], check, remove, save, uusi, type=\"5\", tila}) => {\r\n    const [users, setUsers] = useState([])\r\n    const [ei_ehdokkaat,setEiEhdokkaat] = useState([])\r\n    const [ehdokkaat,setEhdokkaat] = useState([])\r\n    \r\n    const [ehdokasBool,setEhdokasBool] = useState(false);\r\n    \r\n        let hash = new Map();\r\n    \r\n    useEffect(() => {\r\n        const body2 = JSON.stringify({ call: 'getosallistujat', id: kokous_id })\r\n        request.osallistujat(body2).then(res => {\r\n            setUsers(res.data);\r\n            let aania = 0;\r\n            users.map(x => {hash.set(x.id,x.firstname+\" \"+x.lastname)})\r\n            setEhdokkaat((arvot.filter(x => hash.has(x.nimi))).map(x => {\r\n                let obj = {}\r\n                obj[\"id\"]=x.id;\r\n                obj[\"maara\"]=x.maara;\r\n                aania+=parseInt(x.maara);\r\n                obj[\"nimi\"] = hash.get(x.nimi)\r\n                hash.delete(x.nimi)\r\n                return obj;}))\r\n            setEiEhdokkaat(users.filter(x => hash.has(x.id) ))\r\n           \r\n            \r\n            \r\n    }).catch(error => alert(error))\r\n    }, [arvot]\r\n    )\r\n    let jasenlista;\r\n    if (tila!=\"3\") jasenlista =\r\n    <div>{ei_ehdokkaat.length>0?<button onClick={()=>setEhdokasBool(!ehdokasBool)} className=\"pj_ehdota\" >{!ehdokasBool?\"Lisää ehdokas\":\"pienennä\"}</button>:\"\"}   \r\n    {ehdokasBool?ei_ehdokkaat.map(x=>  <div className=\"pj_ehdokkaita\" onClick={()=>uusi(x.id)}>{x.firstname} {x.lastname}</div>):\"\"}</div>\r\n\r\n    \r\n    return (\r\n        <div className=\"PJ\">       \r\n            {ehdokkaat.length>0?\r\n            <CheckboxArea type=\"6\" tila={tila} edit={false} arvot={ehdokkaat} check={check} checkValue={checkValue} remove={remove} save={save} uusi={uusi}/>:\"\"}\r\n           \r\n           {jasenlista}\r\n            \r\n        </div>\r\n        \r\n        \r\n    )\r\n}\r\n\r\n\r\nexport default Henkilovalinta","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport CheckboxArea from './CheckboxArea'\r\nimport ResizeTextArea from './ResizeTextArea'\r\nimport Mielipide from './Mielipide'\r\nimport Hyvaksy from './Hyvaksy'\r\nimport Henkilovalinta from './Henkilovalinta'\r\nimport '../../../Style/Sisalto.css'\r\nimport DatePicker, { registerLocale } from \"react-datepicker\";\r\n\r\nconst url = process.env.REACT_APP_HOST_URL\r\n\r\nconst Sisalto = ({id,save,type,kokous_id,edit=false,tila}) => {\r\n  const [pickerDate, setPickerDate] = useState()\r\n  \r\n\r\n\r\n  const [valinnat,setValinnat] =useState([])\r\n  const [valintaArvot,setValintaArvot] = useState([])\r\n  const [kuvaus,setKuvaus] = useState([])\r\n  const [k_alku,set_k_Alku] = useState([])\r\n  const [k_valittu,set_k_Valittu] = useState([])\r\n  const [k_loppu,set_k_Loppu] = useState([])\r\n  const [mielipiteet,setMielipiteet] = useState([]);\r\n  const [tyyppi,setTyyppi] = useState((type==2 && edit==false)?1:0);\r\n  const [perustelu,setPerustelu] = useState (\"\")\r\n  const kuvaus_save = (id,data) => {\r\n    save(id,data,500,\"kuvaus\")\r\n    setKuvaus(data)\r\n\r\n  }\r\n \r\n\r\n  const perustelu_save = (id,data) => {/*save(id,data,500,\"perustelu\")*/setPerustelu(data);}\r\n\r\n  const check = (vid,multi=1) => {\r\n      var params = new URLSearchParams()\r\n      params.append (\"check_valitse\", vid)\r\n      params.append (\"kokous_id\", kokous_id)   \r\n      params.append (\"kohta\", id)\r\n      params.append (\"multi\",multi)\r\n      axios.post(url+'data.php', params, {withCredentials: true}).then((response) => reload())    \r\n  }\r\n  const check_uusi = (data) => {\r\n    var params = new URLSearchParams()\r\n    params.append (\"check_uusi\", data)       \r\n    params.append (\"kohta\", id)\r\n    params.append (\"kokous_id\", kokous_id)\r\n    axios.post(url+'data.php', params, {withCredentials: true}).then((response) => reload())\r\n  }\r\n  const check_remove = (vid) => {\r\n    var params = new URLSearchParams();      \r\n    params.append (\"check_remove\", vid)\r\n    params.append (\"kohta\", id);\r\n    params.append (\"kokous_id\", kokous_id)\r\n    axios.post(url+'data.php', params, {withCredentials: true}).then((response) => {\r\n      reload();\r\n    })    \r\n  }\r\n  const check_save = (id,nnimi, delay) => {\r\n    save(id,nnimi,500,\"check\");\r\n    setValinnat(valinnat.map(arvot => (arvot.id === id)?{ ...arvot, nimi:nnimi}:arvot))\r\n  }\r\n  const mielipide_save = (_id,data) => {\r\n    if(data[3]==0)\r\n      save(_id,data,500,\"mielipide\")\r\n    else {\r\n      \r\n      var params = new URLSearchParams()\r\n      params.append(\"param\", data[0])\r\n      params.append(\"save\", \"mielipide\")\r\n      params.append(\"alku\", data[1])\r\n      params.append(\"loppu\", data[2])\r\n      params.append(\"draft\", 1) \r\n      params.append(\"thread\", _id);\r\n      params.append(\"kohta\", id);\r\n      params.append(\"kokous_id\", kokous_id)\r\n      axios.post(url+'data.php', params, {withCredentials: true}).then((response) =>reload());    \r\n    }\r\n  \r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  const reload = () => {\r\n    var params = new URLSearchParams()\r\n    params.append (\"avaakohta\", id)\r\n    params.append (\"kokous_id\", kokous_id)\r\n    axios.post(url+'data.php', params, {withCredentials: true}).then((response) => {\r\n      if(response.data[2]!=-1)setValintaArvot(JSON.parse(response.data[2]))\r\n        else setValintaArvot([])\r\n      if(response.data[1]!=-1){\r\n        setValinnat(JSON.parse(response.data[1]))   \r\n      }\r\n        else setValinnat([])\r\n      if(response.data[0]!=-1){\r\n        setKuvaus(JSON.parse(response.data[0]))\r\n      }\r\n        else {\r\n          setKuvaus(\"\");\r\n        }\r\n      set_k_Loppu(\"\");\r\n      set_k_Valittu(\"\");\r\n      if(response.data[3]!=-1){setMielipiteet(JSON.parse(response.data[3]))\r\n        setTyyppi(1);\r\n      }\r\n        else setMielipiteet([]);\r\n     \r\n       \r\n    })}\r\n  \r\n  const osa = (s,e) => {\r\n     return kuvaus.toString().substring(s,e);\r\n   }\r\n\r\n  const setPositio = (a,l) => {\r\n    set_k_Alku(osa(0,a));set_k_Valittu(osa(a,l));set_k_Loppu(osa(l,parseInt(kuvaus.toString().length)));setTyyppi(2);\r\n  }  \r\n\r\n  useEffect(() => {\r\n      reload()\r\n      const element = document.getElementById(\"s\"+id).parentNode.querySelector(\".nro\");\r\n        if(true || element.getBoundingClientRect().top<0){\r\n            const y = element.getBoundingClientRect().top + window.pageYOffset;\r\n            window.scrollTo({top: y, behavior: 'smooth'})}\r\n      window.setTimeout(function(){\r\n        const yOffset = -40; \r\n        const element = document.getElementById(\"s\"+id).parentNode.parentNode.querySelector(\".nro\");\r\n        if(true || element.getBoundingClientRect().top<0){\r\n            const y = element.getBoundingClientRect().top + window.pageYOffset + yOffset;\r\n            window.scrollTo({top: y, behavior: 'smooth'})}\r\n        },100)\r\n        \r\n  }, [])  \r\n\r\n\r\n  \r\n  let setti = [\"\",\r\n              \"\", /*tiedoksi*/\r\n              <div><Mielipide tila={tila} edit={edit} kohta_id={id} kokous_id={kokous_id} arvot={mielipiteet} save={mielipide_save} positio={setPositio} kuvaus={kuvaus}/></div>,\r\n              <div><Hyvaksy tila={tila} id={id} save={perustelu_save} sisus={perustelu}/></div>,\r\n              <div><CheckboxArea tila={tila} edit={true} arvot={valinnat} check={check} checkValue={valintaArvot} remove={check_remove} save={check_save} uusi={check_uusi}/></div>,\r\n              <div><Henkilovalinta tila={tila} kohtaid={id} kokous_id={kokous_id}  arvot={valinnat} check={check} checkValue={valintaArvot} save={check_save} uusi={check_uusi}/></div>,\r\n              <div><Henkilovalinta tila={tila} type={6} kohtaid={id} kokous_id={kokous_id}  arvot={valinnat} check={check} checkValue={valintaArvot} save={check_save} uusi={check_uusi}/></div>]\r\n              [type]\r\n\r\n    return (\r\n      <div id={\"s\"+id}>\r\n      <div id=\"sisalto\">  \r\n    \r\n         {\r\n            [<div className=\"kuvaus\"><ResizeTextArea edit={true} id={\"id\"} sisus={kuvaus} save={kuvaus_save} placeholder=\"kuvaus\"/></div>,\r\n              <div className=\"kuvaus\"><div  id={\"kuvaus\"+id} className=\"areaText\">{kuvaus}</div></div>,\r\n              <div className=\"kuvaus\"><div  id={\"kuvaus\"+id} onMouseDown={()=>setTyyppi(1)}className=\"areaText\">\r\n                {k_alku}<span className='korostus'>{k_valittu}</span>{k_loppu}</div></div>]\r\n              [tyyppi]\r\n\r\n         }\r\n\r\n        {setti}\r\n\r\n{/*        <div style={{paddingLeft:\"40px\",zIndex:\"10\"}}><div>deadline: </div>\r\n       <DatePicker\r\n                            name='deadline'\r\n                            locale=\"fi\"\r\n                            dateFormat=\"dd/MM/yyyy\"\r\n                            className=\"form-control\"\r\n                            selected={pickerDate}\r\n                            onChange={date => setPickerDate(date)}\r\n                            selectsStart\r\n                         \r\n            \r\n        \r\n      </div>  />*/}\r\n           \r\n         \r\n      </div>\r\n      \r\n      </div>\r\n    )\r\n  \r\n  }\r\n\r\n\r\n\r\n  export default Sisalto","import React, { useState } from 'react'\r\nimport Kalenteri from './Kalenteri'\r\nimport Paatos from './Paatos'\r\nimport Sisalto from './Sisalto'\r\nimport ResizeTextArea from './ResizeTextArea'\r\nimport '../../../Style/Paatos.css'\r\nimport { FaHands, FaHandsHelping,FaHandshake,FaPenSquare,FaRegCheckSquare,FaUserCheck,FaComment,FaComments,FaGavel } from 'react-icons/fa';\r\nconst url = process.env.REACT_APP_HOST_URL\r\nconst EsitysKohta = ({vaihda_tyyppi,kokous_id,type,title,id,alkaa,loppuu,auki=false,avaa,save,poista,paatos,tila}) => {\r\n  \r\n  const [startDate, setStartDate] = useState((alkaa!==\"0000-00-00\")?new Date(alkaa):\"\")\r\n  const [endDate, setEndDate] = useState((loppuu!==\"0000-00-00\")?new Date(alkaa):\"\")\r\n  var sisalto\r\n  let alku\r\n  let loppu\r\n\r\n  const this_save = (_id,data,delay,type) => {\r\n    save(_id,data,delay,type,id)\r\n  }  \r\n  \r\n  const this_avaa = () => {\r\n    avaa(id)\r\n  }\r\n\r\n  const thisvaihda_tyyppi = (param) => {\r\n    if (type==param) param=0;\r\n    vaihda_tyyppi(id,param)\r\n  } \r\n\r\n  const thisinfo = (param,palaa=0) => {\r\n    let teksti;\r\n    let elem = document.getElementById(\"info\"+id);\r\n    switch(param){\r\n      case 3: teksti = \"Hyväksy asiakohta\";break;\r\n      case 4: teksti = \"Äänestys</b>\";break;\r\n      case 2: teksti = \"Mielipiteitä asiasta\";break;\r\n      case 5: teksti = \"Nimitys\";break;\r\n      case 6: teksti = \"Puheenjohtajan valinta\";break;\r\n      default: teksti = \"Tiedoksi\";break;\r\n    }\r\n    if(palaa==1) return teksti;\r\n    elem.innerHTML=teksti;\r\n  }\r\n\r\n  const paatos_save = (_id,data,delay) => {\r\n    \r\n    save(id,data,delay,\"paatos\",id)\r\n\r\n  }\r\n\r\n  if(tila!=3 && startDate!=null && startDate !==\"\") alku = <Kalenteri pv={startDate.getDate()} kk = {startDate.getMonth()+1} alku={false}/>\r\n  \r\n\r\n  let nappeja = [ \"\",\r\n                  <FaComment onMouseEnter={()=>thisinfo(1)}  onClick={()=>thisvaihda_tyyppi(1)} className ={(type==1)?\"kohta_valittu p_k\":\"p_k\"}/>,\r\n                  <FaComments onMouseEnter={()=>thisinfo(2)}  onClick={()=>thisvaihda_tyyppi(2)} className ={(type==2)?\"kohta_valittu p_k\":\"p_k\"}/>,\r\n                  <FaHandshake  onMouseEnter={()=>thisinfo(3)}    onClick={()=>thisvaihda_tyyppi(3)} className ={(type==3)?\"kohta_valittu p_k\":\"p_k\"}/>, \r\n                  <svg onMouseEnter={()=>thisinfo(4)} className={(type==4)?\"kohta_valittu p_k\":\"p_k\"} onClick={()=>thisvaihda_tyyppi(4)} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-100 -100 700 700\">\r\n                   <path d=\"M26.42,180.11v350h350v-350Zm130.83,290.6L73.7,363.27l18.6-13.76,66.42,83.93L306.18,258.7l18.05,16Z\" transform=\"translate(-21.42 -25.11)\"/><path  d=\"M101.42,105.11v0h350v350h0v-350Z\" transform=\"translate(-21.42 -25.11)\"/><path  d=\"M176.42,30.11v0h350v350h0v-350Z\" transform=\"translate(-21.42 -25.11)\"/></svg>,\r\n                  <FaUserCheck onMouseEnter={()=>thisinfo(5)} onClick={()=>thisvaihda_tyyppi(5)} className ={(type==5)?\"kohta_valittu p_k\":\"p_k\"}/>,\r\n                  <FaGavel onMouseEnter={()=>thisinfo(6)} className =\"kohta_valittu p_k\"/>]\r\n  \r\n  let nappit = (type==0)?\r\n  <div className=\"valinta_iconit\">{nappeja[1]}{nappeja[2]}{nappeja[3]}{nappeja[4]}{nappeja[5]}<div className=\"kohta_info\" id={\"info\"+id}>{thisinfo(type,1)}</div></div>:\r\n  <div className=\"valinta_iconit2\">{nappeja[type]}<div className=\"kohta_info\" id={\"info\"+id}>{thisinfo(type,1)}</div></div>;\r\n  sisalto = (auki)?<Sisalto key={id} kokous_id={kokous_id} id={id} type={type} save={this_save} tila={tila}/>:\"\"; \r\n\r\n  return (\r\n    <div className=\"esitys_item\">\r\n      {loppu}\r\n      {alku}\r\n      <div onClick= {this_avaa} className=\"otsake\"><ResizeTextArea edit={true} id={id} sisus={title} save={this_save}/></div>\r\n      <div>\r\n        {nappit}\r\n        \r\n        {(parseInt(tila)!=0 && parseInt(type)!=1)?<Paatos tila={tila} kokous_id={kokous_id} kohta_id={id} paatos={paatos} save={paatos_save}/>:\"\"}      \r\n        {sisalto}\r\n        <div className={\"nro\"}/>\r\n        {(parseInt(tila)!=3)?\"\":<div className={\"nro_\"+parseInt(tila)}/>}\r\n      </div>\r\n      {(parseInt(tila)!=3)?<div  onClick= {this_avaa} className=\"raahaa\" id={\"r\"+id}></div>:\"\"}\r\n      {/*  <div onClick={()=>poista(\"poista_kohta\",id)}>poista </div> */}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default EsitysKohta","import React, { useState, useEffect } from 'react'\r\nimport { useParams, useHistory } from 'react-router-dom'\r\nimport { Link } from 'react-router-dom'\r\nimport request from '../../Components/Shared/HttpRequests'\r\nimport HelpPop from '../../Components/Shared/HelpPop'\r\nimport Perustiedot from '../../Components/UusiKokous/Perustiedot'\r\nimport Osallistujat from '../../Components/UusiKokous/Osallistujat'\r\nimport Paatosvaltaisuus from '../../Components/UusiKokous/Paatosvaltaisuus'\r\nimport Yhteenveto from '../../Components/UusiKokous/Yhteenveto'\r\nimport { getSessionRole, getUser } from '../../Components/Auth/Sessions'\r\nimport Esityslista from '../../Components/UusiKokous/Esityslista/Esityslista';\r\n\r\nconst UusiKokous = (props) => {\r\n\r\n    let user = getUser()\r\n    const { yhdistys } = useParams()\r\n    const [members, setMembers] = useState()\r\n\r\n    const [showComponent, setShowComponent] = useState('perustiedot')\r\n    let history = useHistory()\r\n\r\n    const [perustiedot, setPerustiedot] = useState({ otsikko: '', kokousNro: '', kokousid: '', startDate: '', endDate: '', avoinna: false })\r\n    const [esityslista_otsakkeet, setEsityslista] = useState()\r\n    const [osallistujat, setOsallistujat] = useState()\r\n    const [puheenjohtaja, setPuheenjohtaja] = useState()\r\n    const [varalla, setVaralla] = useState([])\r\n    const [paatosvaltaisuus, setPaatosvaltaisuus] = useState({ esityslista: '', aktiivisuus: '', kesto: '', muu: '' })\r\n    const [id_y, setId_y] = useState(props.location.state.id_y);\r\n    const [id_k, setId_k] = useState(-1);\r\n\r\n    useEffect(() => {\r\n        const pvmYear = { year: 'numeric' };\r\n        const now = Date();\r\n        const getDraft = JSON.stringify({ call: 'getkokousdraft', name: yhdistys })\r\n\r\n        if (!perustiedot.kokousNro && !members) {\r\n            request.kokous(getDraft).then(res => {\r\n                if (res.data.message !== 'Ei kesken olevia kokouskutsuja') {\r\n                    if (window.confirm('Yhdistyksellä on tallentamaton kokous. Haluatko jatkaa kokoustietojen täyttämistä vai aloittaa uudelleen?')) {\r\n\r\n                        const avoin = res.data.avoinna === \"0\" ? false : true\r\n                        const alkaa = res.data.startDate === \"1970-01-01\" ? '' : new Date(res.data.startDate)\r\n                        const loppuu = res.data.endDate === \"1970-01-01\" ? '' : new Date(res.data.endDate)\r\n\r\n                        setPerustiedot({\r\n                            otsikko: res.data.otsikko,\r\n                            kokousNro: res.data.kokousnro + \"/\" + (new Date(now)).toLocaleDateString('fi-FI', pvmYear),\r\n                            kokousid: res.data.id,\r\n                            startDate: alkaa,\r\n                            endDate: loppuu,\r\n                            avoinna: avoin\r\n                        })\r\n\r\n                        const esitys = res.data.pv_esityslista === \"0\" ? '' : res.data.pv_esityslista\r\n                        const aktiv = res.data.pv_aktiivisuus === \"0\" ? '' : res.data.pv_aktiivisuus\r\n                        const kesto = res.data.pv_kesto === \"0\" ? '' : res.data.pv_kesto\r\n\r\n                        setPaatosvaltaisuus({ esityslista: esitys, aktiivisuus: aktiv, kesto: kesto, muu: res.data.pv_muu })\r\n                        setId_y(res.data.id_y)\r\n\r\n                        const body2 = JSON.stringify({ call: 'getosallistujat', id: res.data.id })\r\n                        request.osallistujat(body2).then(res => {\r\n                            setOsallistujat(res.data)\r\n                            setPuheenjohtaja(res.data.filter(x => x.role === 'puheenjohtaja'))\r\n                        }).catch(err => console.log('err.response', err.response))\r\n\r\n                        const req = JSON.stringify({ call: 'getallmembers', yhdistys: yhdistys })\r\n                        request.assoc(req).then(res => {\r\n                            setMembers(res.data)\r\n                        }).catch(err => console.log('err.response', err.response))\r\n\r\n                    } else {\r\n                        const delReq = JSON.stringify({ call: \"deletedraft\", kokousid: res.data.id })\r\n                        request.kokous(delReq)\r\n                            .then(res => {\r\n                                setId_k(res.data['id'])\r\n                                getKokousNro()\r\n                                return;\r\n                            }).catch(err => console.log('err.response', err.response))\r\n                    }\r\n                } else {\r\n                    getKokousNro()\r\n                }\r\n            }).catch(err => console.log('err.response.data', err.response.data))\r\n        }\r\n        if (members && osallistujat && puheenjohtaja) {\r\n            setVaralla(members.filter(vara => !osallistujat.find(({ email }) => vara.email === email)))\r\n            setOsallistujat(osallistujat.filter(x => x.role !== 'puheenjohtaja'))\r\n\r\n        } else if (!members && varalla.length === 0 && !puheenjohtaja) {\r\n            const req = JSON.stringify({ call: 'getallmembers', yhdistys: yhdistys })\r\n            request.assoc(req).then(res => {\r\n                setMembers(res.data)\r\n                setOsallistujat(res.data.filter(x => x.email !== getUser().email))\r\n                setPuheenjohtaja(res.data.filter(x => x.email === getUser().email))\r\n            }).catch(err => console.log('err.response', err.response))\r\n        }\r\n    }, [members, perustiedot])  // missing dependencies, mutta seurauksena looppi ... refaktoroi? \r\n    // 'getKokousNro', 'osallistujat', 'puheenjohtaja', 'varalla.length', and 'yhdistys'\r\n\r\n    const helpText = \"Aloita kokous antamalla sille otsikko sekä alku- ja loppupäivämäärät. Kun olet valmis, paina seuraava-näppäintä, niin voit luoda esityslistan ja päättää voiko yhdistyksen jäsenet liittää omia esityksiään esityslistalle. Seuraavaksi voit määritellä kokouksen osallistujat ja päätösvaltaisuuden. Lopuksi näet kutsu kokous -välilehdeltä luomasi kokouksen tiedot, missä voit tallentaa ja lähettää kutsun kokoukseen osallistujille.\"\r\n\r\n    const getKokousNro = () => {\r\n        const pvmYear = { year: 'numeric' };\r\n        const now = Date();\r\n        const body = JSON.stringify({ call: 'kokousnro', yhdistys: yhdistys })\r\n     \r\n        request.kokous(body).then(res => {\r\n            setPerustiedot({ ...perustiedot, kokousNro: res.data.kokousnro + \"/\" + (new Date(now)).toLocaleDateString('fi-FI', pvmYear) })\r\n            setId_y(res.data.id_y)\r\n        })\r\n    }\r\n    const handleMenuClick = (ev) => {\r\n\r\n        saveKokousDraft(showComponent);\r\n\r\n        if (ev.target.name === \"yhteenveto\") { // esityslistan otsakkeet tarvitaan yhteenvetoa varten /loput saadaan stateista.\r\n            let x = ev.target.name\r\n            let params2 = new URLSearchParams();\r\n            params2.append(\"otsakkeet\", perustiedot.kokousid)\r\n            request.data(params2).then(res => {\r\n                setEsityslista(res.data)\r\n                setShowComponent(x)\r\n            })\r\n        } else {\r\n            let napit = ev.target.parentNode.querySelectorAll(\"button\");\r\n            for (let i = 0; i < napit.length; i++) {\r\n                napit[i].classList.remove(\"valittu_menu\");\r\n            }\r\n            setShowComponent(ev.target.name)\r\n            ev.target.classList.add(\"valittu_menu\");\r\n        }\r\n    }\r\n\r\n    const parse_kokousnro = () => {\r\n        let i = perustiedot.kokousNro.indexOf('/')\r\n        if (i === -1) return perustiedot.kokousNro\r\n        else return perustiedot.kokousNro.substring(0, i);\r\n    }\r\n\r\n    const saveKokousDraft = (param) => { // -- TODO estä tallennus jos ei muuta dataa kuin kokousnro \r\n\r\n        const uusiKokous = JSON.stringify({\r\n            call: 'luokokous',\r\n            id_y: id_y,\r\n            kokousid: perustiedot.kokousid,\r\n            otsikko: perustiedot.otsikko,\r\n            kokousnro: parse_kokousnro(),\r\n            startDate: perustiedot.startDate,\r\n            endDate: perustiedot.endDate,\r\n            avoinna: perustiedot.avoinna,\r\n            paatosvaltaisuus: paatosvaltaisuus,\r\n            valmis: false\r\n        })\r\n\r\n        request.kokous(uusiKokous).then(res => {\r\n            setPerustiedot({ ...perustiedot, kokousid: res.data.kokousid })\r\n            saveOsallistujat()\r\n            setId_k(res.data.kokousid);\r\n        }).catch(err => {\r\n            alert(err.response.data.message)\r\n        })\r\n\r\n    }\r\n\r\n    const saveOsallistujat = () => {\r\n\r\n        if (perustiedot.kokousid !== '') {\r\n            let kokousosallistujat\r\n            kokousosallistujat = osallistujat.map(x => ({ rooli: 'osallistuja', ...x }))\r\n            user = Object.assign({ rooli: 'puheenjohtaja' }, user)\r\n            const call = { call: 'postosallistujat', id_y: id_y, kokousid: perustiedot.kokousid }\r\n            kokousosallistujat = [user].concat(kokousosallistujat)\r\n            kokousosallistujat = [call].concat(kokousosallistujat)\r\n            const body = JSON.stringify(kokousosallistujat)\r\n\r\n            request.osallistujat(body).then(res => {\r\n                console.log('res.data', res.data)\r\n            }).catch(err => console.log('Error res.data ', err.response.data))\r\n        }\r\n    }\r\n    const handlePerustiedotChange = (ev) => {\r\n        if (ev.target.name === 'otsikko') setPerustiedot({ ...perustiedot, otsikko: ev.target.value })\r\n        else if (ev.target.name === 'kokousnro') setPerustiedot({ ...perustiedot, kokousNro: ev.target.value })\r\n        else if (ev.target.id === 'avaa') setPerustiedot({ ...perustiedot, avoinna: !perustiedot.avoinna })\r\n    }\r\n    const handlePaatosvaltaChange = (ev) => {\r\n        if (ev.target.name === 'esityslista') setPaatosvaltaisuus({ ...paatosvaltaisuus, esityslista: ev.target.value })\r\n        else if (ev.target.name === 'aktiivisuus') setPaatosvaltaisuus({ ...paatosvaltaisuus, aktiivisuus: ev.target.value })\r\n        else if (ev.target.name === 'kesto') setPaatosvaltaisuus({ ...paatosvaltaisuus, kesto: ev.target.value })\r\n        else if (ev.target.name === 'muu') setPaatosvaltaisuus({ ...paatosvaltaisuus, muu: ev.target.value })\r\n    }\r\n\r\n    let component\r\n    if (showComponent === 'perustiedot') component = <Perustiedot setShowComponent={setShowComponent} handlePerustiedotChange={handlePerustiedotChange} saveKokousDraft={saveKokousDraft} perustiedot={perustiedot} setPerustiedot={setPerustiedot} />\r\n    else if (showComponent === 'esityslista') component = <Esityslista setShowComponent={setShowComponent} setEsityslista={setEsityslista} esityslista={esityslista_otsakkeet} kokousid={id_k} setShowComponent={setShowComponent} saveKokousDraft={saveKokousDraft} />\r\n    else if (showComponent === 'osallistujat') component = <Osallistujat puheenjohtaja={puheenjohtaja} osallistujat={osallistujat} setOsallistujat={setOsallistujat} saveOsallistujat={saveOsallistujat} varalla={varalla} setVaralla={setVaralla} setShowComponent={setShowComponent} />\r\n    else if (showComponent === 'paatosvaltaisuus') component = <Paatosvaltaisuus setShowComponent={setShowComponent} handlePaatosvaltaChange={handlePaatosvaltaChange} paatosvaltaisuus={paatosvaltaisuus} saveKokousDraft={saveKokousDraft} />\r\n    else if (showComponent === 'yhteenveto') component = <Yhteenveto esityslista_otsakkeet={esityslista_otsakkeet} perustiedot={perustiedot} osallistujat={osallistujat} paatosvaltaisuus={paatosvaltaisuus} yhdistys={yhdistys} id_y={id_y} />\r\n    else component = <></>\r\n\r\n\r\n    if (getSessionRole() && getSessionRole().role === 'admin' && getSessionRole().yhdistys === yhdistys) {\r\n        return (\r\n            <div style={{ width: \"100%\", maxWidth: \"1100px\", padding: \"0\", marginTop: \"50px\" }}>\r\n                <div className=\"px-3\">\r\n                    <h2>{yhdistys}</h2>\r\n                    <h4>Luo uusi kokous</h4>\r\n                    {/* //  onClick={()=> saveKokousDraft()} --- TODO muokkaa siten ettei tallenusta tapahdu, jos muuta kuin kokousid ei ole asetettu  */}\r\n                    <Link to={{ pathname: `/assoc/${yhdistys}`, state: { id: id_y } }}>Yhdistyksen pääsivu</Link>\r\n                </div>\r\n                <hr />\r\n                <div>\r\n                    <div className=\"d-sm-flex justify-content-center second_nav\">\r\n                        <button className=\"text-primary valittu_menu\" name=\"perustiedot\" onClick={handleMenuClick}>Perustiedot</button>\r\n                        <button className=\"text-primary \" name=\"esityslista\" onClick={handleMenuClick}>Esityslista</button>\r\n                        <button className=\"text-primary \" name=\"osallistujat\" onClick={handleMenuClick}>Osallistujat</button>\r\n                        <button className=\"text-primary \" name=\"paatosvaltaisuus\" onClick={handleMenuClick}>Päätösvaltaisuus</button>\r\n                        <button className=\"text-primary \" name=\"yhteenveto\" onClick={handleMenuClick}>Kutsu kokous</button>\r\n                        <HelpPop heading=\"Kokouksen luominen\" text={helpText} btnText=\"Selitystä\" placement=\"left\" variant=\"btn btn-outline-danger btn-sm mx-1\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"mt-5\">\r\n                    {component}\r\n                </div>\r\n            </div>\r\n        )\r\n    } else {\r\n        history.push('/userpage')\r\n        return <></>\r\n    }\r\n}\r\nexport default UusiKokous\r\n","import React from 'react'\r\nimport { Editor } from \"@tinymce/tinymce-react\"\r\n\r\nconst DocumentReadOnly = ({ setShowTable, document }) => {\r\n\r\n    const print = () => window.tinymce.activeEditor.execCommand(\"mcePrint\", true)\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"text-right\">\r\n                {document.draft === \"0\" ? <></> : <button className=\"btn btn-outline-primary btn-sm\">Muokkaa</button>}\r\n                <button className=\"btn btn-outline-primary btn-sm\" onClick={print}>Tulosta</button>\r\n                <button className=\"btn btn-outline-primary btn-sm\" onClick={() => setShowTable(true)}>Sulje</button>\r\n            </div>\r\n            <div style={{ zIndex: '100 !important' }}>\r\n                <Editor apiKey={process.env.REACT_APP_TINYAPI_KEY}\r\n                    disabled={true}\r\n                    value={document.content}\r\n                    init={{\r\n                        menubar: false,\r\n                        toolbar: false,\r\n                        selector: \"textarea\",\r\n                        plugins: [\"autoresize print\"]\r\n                    }}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default DocumentReadOnly\r\n","import React, { useState, useEffect } from 'react'\r\nimport DocumentReadOnly from '../../Components/Document/DocumentReadOnly'\r\nimport request from '../Shared/HttpRequests'\r\n// import { getUser } from '../Auth/Sessions'\r\nimport UploadedDocs from '../Document/UploadedDocs'\r\n\r\nconst KokousDocs = ({ kokous, yhdistys, setShowTable, showTable }) => {\r\n\r\n    const [kokousDocuments, setKokousDocuments] = useState([])\r\n    const [document, setDocument] = useState([])\r\n    const [uploadedDocs, setUploadedDocs] = useState([])\r\n    const [upload, setUpload] = useState([])\r\n    const [uploadOrNot, setUploadOrNot] = useState(true)\r\n    // const [loading, setLoading] = useState(0)\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        const body = JSON.stringify({ call: 'getdocuments', kokousid: kokous.id })\r\n        request.documents(body).then(res => {\r\n            setKokousDocuments(res.data)\r\n        }).catch(err => {\r\n            console.log('error: ', err.response)\r\n        })\r\n        // const body2 = JSON.stringify({ call: \"getuploads\", kokousid: kokous.id, yhdistys: yhdistys })  // voiko php-metodin tehdä siten että se toimii myös vain yhdistyksen nimellä? \r\n        // request.documents(body2).then(res => {\r\n        //     setUploadedDocs(res.data)\r\n        // }).catch(err => console.log('getuploads error: ', err))\r\n    }, [kokous.id, yhdistys])\r\n\r\n    const handleOpenDocumentClick = (item) => {\r\n        setDocument(item)\r\n        setShowTable(!showTable)\r\n        setUploadOrNot(false)\r\n    }\r\n    const handleOpenUploadedDoc = (item) => {\r\n        setUpload(item)\r\n        setShowTable(!showTable)\r\n        setUploadOrNot(true)\r\n    }\r\n    // const handleFileUpload = (ev) => {\r\n    //     if (ev.target.files[0].type === 'application/pdf') {\r\n    //         if (window.confirm(`Haluatko lisätä tiedoston \"${ev.target.files[0].name}\" tietokantaan?`)) {\r\n    //             saveDocument(ev.target.files[0])\r\n    //         }\r\n    //     } else {\r\n    //         alert(\"Tiedoston tulee olla pdf-muodossa\")\r\n    //     }\r\n    // }\r\n    // const saveDocument = (file) => {\r\n\r\n    //     let data = new FormData()\r\n    //     data.append('kokousid', kokous.id)\r\n    //     data.append('user', getUser().email)\r\n    //     data.append('yhdistys', yhdistys)\r\n    //     data.append('file', file)\r\n\r\n    //     request.documents(data).then(() => {\r\n    //         alert('Tiedosto tallennettu!')\r\n    //         window.location.reload() \r\n    //     }).catch(err => console.log('savedocument error: ', err))\r\n    // }\r\n\r\n    let component\r\n    if (uploadOrNot) {\r\n        component = (\r\n            < table className=\"table table-hover table-borderless mt-2\">\r\n                <tbody>\r\n                    {kokousDocuments.map(item =>\r\n                        <tr key={item.id} onClick={() => handleOpenDocumentClick(item)} style={{ cursor: \"pointer\" }}>\r\n                            <td>{item.type}</td>\r\n                        </tr>)}\r\n                </tbody>\r\n            </table>\r\n\r\n        )\r\n    } else if (!uploadOrNot) {\r\n        component = (\r\n            <>< table className=\"table table-hover table-borderless mt-2\">\r\n                <tbody>\r\n                    {uploadedDocs.map(item =>\r\n                        <tr key={item.id} onClick={() => handleOpenUploadedDoc(item)} style={{ cursor: \"pointer\" }}>\r\n                            <td>{item.nimi.substring(10)}</td>\r\n                        </tr>)}\r\n                </tbody>\r\n            </table>\r\n            </>\r\n        )\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"m-auto\">\r\n            {showTable\r\n                ?\r\n                < table className=\"table table-hover table-borderless mt-2\">\r\n                    <tbody>\r\n                        {kokousDocuments.map(item =>\r\n                            <tr key={item.id} onClick={() => handleOpenDocumentClick(item)} style={{ cursor: \"pointer\" }}>\r\n                                <td>{item.type}</td>\r\n                            </tr>)}\r\n                    </tbody>\r\n                </table>\r\n                : uploadOrNot ? <></> : <DocumentReadOnly setShowTable={setShowTable} document={document} />}\r\n\r\n            {showTable\r\n                ? <>< table className=\"table table-hover table-borderless mt-2\">\r\n                    <tbody>\r\n                        {uploadedDocs.map(item =>\r\n                            <tr key={item.id} onClick={() => handleOpenUploadedDoc(item)} style={{ cursor: \"pointer\" }}>\r\n                                <td>{item.nimi.substring(10)}</td>\r\n                            </tr>)}\r\n                    </tbody>\r\n                </table>\r\n                </>\r\n                : uploadOrNot ? <UploadedDocs setShowTable={setShowTable} upload={upload} /> : <></>}\r\n\r\n            {/* {showTable\r\n                ? <div class=\"float-right mx-2\">\r\n                    <form method=\"POST\" >\r\n                        <label for=\"inputFile\" className=\"btn btn-outline-primary\">Lisää asiakirja</label>\r\n                        <input type=\"file\" name=\"file\" class=\"form-control-file\" id=\"inputFile\" aria-describedby=\"fileHelp\" onChange={handleFileUpload} style={{ display: 'none' }} />\r\n                        <small id=\"fileHelp\" class=\"form-text text-muted\">Lataa haluamasi asiakirja pdf-muodossa.</small>\r\n                    </form>\r\n                </div>\r\n                : <></>\r\n            } */}\r\n            {/* // TODO tämä ei saisi näkyä kuin pj:lle ja vain kun table on näkyvissä: */}\r\n\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default KokousDocs\r\n","import React from 'react'\r\n\r\nconst KokousOsallistujat = ({ osallistujat, jasenet, puheenjohtaja, kokousRooli, handleOsallistujatClick, kokous }) => {\r\n\r\n    jasenet = jasenet.filter(jasen => !osallistujat.find(({ email }) => jasen.email === email))\r\n    jasenet = jasenet.filter(jasen => !puheenjohtaja.find(({ email }) => jasen.email === email))\r\n\r\n    return (\r\n        <div style={{ marginTop: \"4px\" }} >\r\n            < table className=\"table table-hover table-responsive-sm\">\r\n                <thead>\r\n                    <tr className=\"table-primary\"><th>Etunimi</th><th>Sukunimi</th><th>Sähköpostiosoite</th><th></th></tr>\r\n                </thead>\r\n                <tbody>\r\n                    {osallistujat.map((item, key) =>\r\n                        <tr key={key + item.firstname}>\r\n                            <td>{item.firstname}</td>\r\n                            <td>{item.lastname}</td>\r\n                            <td>{item.email}</td>\r\n                            {kokousRooli === 'puheenjohtaja' && kokous.loppu === \"0\" ? <td><button className=\"btn btn-outline-danger btn-sm\" name={item.email} id=\"varalle\" onClick={handleOsallistujatClick}>Poista kokouksesta</button></td> : <td></td>}\r\n                        </tr>)}\r\n                </tbody>\r\n            </ table>\r\n            {jasenet.length !== 0\r\n                ? <>\r\n                    <h5 className=\"mx-2\">Muut yhdistyksen jäsenet</h5>\r\n                    < table className=\"table table-hover  table-responsive-sm\">\r\n                        <thead>\r\n                            <tr className=\"table-primary\"><th>Etunimi</th><th>Sukunimi</th><th>Sähköpostiosoite</th><th></th></tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {jasenet.map((item, key) =>\r\n                                <tr key={key + item.firstname}>\r\n                                    <td>{item.firstname}</td>\r\n                                    <td>{item.lastname}</td>\r\n                                    <td>{item.email}</td>\r\n                                    {kokousRooli === 'puheenjohtaja' && kokous.loppu === \"0\" ? <td><button className=\"btn btn-outline-success btn-sm\" name={item.email} id=\"osallistujaksi\" onClick={handleOsallistujatClick}>Siirrä kokoukseen</button></td> : <td></td>}\r\n                                </tr>)}\r\n\r\n                        </tbody>\r\n                    </ table> </>\r\n                : <><hr /><p className=\"ml-2\">Kaikki yhdistyksen jäsenet osallistuvat kokoukseen.</p></>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default KokousOsallistujat\r\n    // PJ: Voi siirtää kokousosallistujan tilaan “Estynyt” ja voi nostaa nimeämänsä varakokousosallistujan varsinaiseksi kokousosallistujaksi  ????\r\n    // Kokousosallistuja: Voi ilmoittaa esteellisyydestä yksittäiseen kokoukseen ja nimetä varakokousedustajan kokousosallistujaksi tilalleen  ????\r\n","import React, { useState } from 'react'\r\nimport DatePicker, { registerLocale } from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport fi from 'date-fns/locale/fi';\r\n\r\nconst Kokousaika = ({ kokous,  handleVaihdaKokousaika }) => {\r\n\r\n    const [pickerDate, setPickerDate] = useState(Date.parse(kokous.endDate))\r\n    const start = Date.parse(kokous.startDate)\r\n    registerLocale('fi', fi)\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col-md-5 m-auto\">\r\n                <div className=\"card card-body mt-3\">\r\n                    <div className=\"form-group\">\r\n                        <label className=\"mb-3\">Vaihda kokouksen päättymisajankohta: </label><br />\r\n                        <DatePicker\r\n                            locale=\"fi\"\r\n                            dateFormat=\"dd/MM/yyyy\"\r\n                            className=\"form-control\"\r\n                            selected={pickerDate}\r\n                            onChange={date => setPickerDate(date)}\r\n                            selectsEnd\r\n                            endDate={pickerDate}\r\n                            minDate={start}\r\n                        /><br />\r\n                        <button onClick={() => handleVaihdaKokousaika(pickerDate)} className=\"btn btn-outline-primary btn-sm mt-4\">Tallenna</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Kokousaika","import React from 'react'\r\n\r\nconst KokousPaatosvalta = ({ kokous, osallistujat, puheenjohtaja }) => {\r\n\r\n    let tila = \"Ei päätösvaltainen.\"\r\n    let tila_kesto = \"Ei päätösvaltainen.\"\r\n    let tila_esityslista = \"Ei Päätösvaltainen.\"\r\n \r\n    const kaikki = puheenjohtaja.concat(osallistujat)\r\n    const avannutEsityslistan = kaikki.map(x => x.pv_avannut).reduce((a, v) => (v ===\"1\" ? a + 1 : a), 0)\r\n\r\n    if (kokous.pv_kesto !== '0') {\r\n        if (kokous.pv_kesto_toteutunut === 'true') tila_kesto = \"Päätösvaltainen.\"\r\n    } \r\n    if(kokous.pv_esityslista !== '0') {\r\n        if(kokous.pv_esityslista <= avannutEsityslistan) tila_esityslista = \"Päätösvaltainen.\"\r\n    }\r\n\r\n    let paatosvaltaMaaritys\r\n    let muuKriteeriTeksti\r\n\r\n    if (kokous.pv_esityslista === '0' && kokous.pv_aktiivisuus === '0' && kokous.pv_kesto === '0' && kokous.pv_muu === '') {\r\n        paatosvaltaMaaritys = \"Ei päätösvaltaisuuskriteerejä.\"\r\n        muuKriteeriTeksti = \"\"\r\n    } else {\r\n        if (kokous.pv_esityslista === '0' && kokous.pv_aktiivisuus === '0' && kokous.pv_kesto === '0' && kokous.pv_muu !== '') {\r\n            paatosvaltaMaaritys = \"\"\r\n            muuKriteeriTeksti = \"Päätösvaltaisuuskriteeri\"\r\n        } else {\r\n            paatosvaltaMaaritys = \"Kokous on päätösvaltainen,\"\r\n            muuKriteeriTeksti = \"Muut kokouksen päätösvaltaisuudelle asetetut kriteerit:\"\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"col-sm-10 mt-3 mx-auto\">\r\n            <h6>{paatosvaltaMaaritys}</h6>\r\n            {kokous.pv_esityslista === '0' ? <></>\r\n                : <li className=\"text-sm-nowrap\">jos vähintään {kokous.pv_esityslista} osallistujista on avannut esityslistan.<span>&nbsp;</span>Tila: {tila_esityslista}</li>\r\n            }\r\n            {kokous.pv_aktiivisuus === '0' ? <></>\r\n                : <li className=\"text-sm-nowrap\">jos vähintään {kokous.pv_aktiivisuus} osallistujista on ottanut asioihin kantaa.<span>&nbsp;&nbsp;</span>Tila: {tila}</li>\r\n            }\r\n            {kokous.pv_kesto === '0' ? <></>\r\n                : <li className=\"text-sm-nowrap\">jos kokous kestää vähintään  {kokous.pv_kesto} vuorokautta. <span>&nbsp;&nbsp;</span>Tila: {tila_kesto}</li>\r\n            }\r\n            {kokous.pv_muu === '' ? <></>\r\n                : <><h6 className=\"mt-3\">{muuKriteeriTeksti}</h6>\r\n                    <li>{kokous.pv_muu}</li>\r\n                </>}\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default KokousPaatosvalta\r\n\r\n\r\n/*\r\n\r\n  <div className=\"col-md-10 m-auto\">\r\n            <div className=\"mt-4\">\r\n\r\n\r\n                {paatosvaltaMaaritys}\r\n                <p></p>\r\n\r\n\r\n                {kokous.pv_esityslista === '0' ? <></>\r\n                    : <><p>jos vähintään {kokous.pv_esityslista} osallistujista on avannut esityslistan.</p>\r\n                        <p><span>&nbsp;</span>Tila: {tila}</p>\r\n                    </>}\r\n\r\n\r\n                {kokous.pv_aktiivisuus === '0' ? <></>\r\n                    : <div style={{ whiteSpace: 'nowrap' }}>\r\n                        <p>jos vähintään {kokous.pv_aktiivisuus} osallistujista on ottanut asioihin kantaa.<span>&nbsp;&nbsp;</span>Tila: {tila}</p>\r\n                    </div>}\r\n\r\n\r\n\r\n                {kokous.pv_kesto === '0' ? <></>\r\n                    : <div style={{ whiteSpace: 'nowrap' }}><p>jos kokous kestää vähintään  {kokous.pv_kesto} vuorokautta. <span>&nbsp;&nbsp;</span>Tila: {tila_kesto}</p>\r\n                    </div>}\r\n\r\n\r\n\r\n                {kokous.pv_muu === '' ? <></>\r\n                    : <>{muuKriteeriTeksti}\r\n                        <li>{kokous.pv_muu}</li>\r\n                    </>}\r\n            </div>\r\n            <hr />\r\n        </div>\r\n\r\n\r\nKokous on päätösvaltainen,\r\njos vähintään n kpl kokousosallistujista on avannut esityslistan. Tila: Päätösvaltainen / Ei päätösvaltainen\r\njos vähintään n kpl kokousosallistujista on ottanut asioihin kantaa. Tila: Päätösvaltainen / Ei päätösvaltainen\r\njos kokous kestää vähintään n vuorokautta. Tila: Päätösvaltainen / Ei päätösvaltainen\r\nKohdan tai kohtien tila vaihtuu Ei päätösvaltaisesta Päätösvaltaiseksi automaattisesti, kun asetettu kriteeri täyttyy.\r\n*/","import React, { useState, useEffect } from 'react'\r\nimport { TextEditor } from '../Document/TextEditor';\r\nimport request from '../Shared/HttpRequests'\r\n\r\nconst KokousPoytakirja = ({ kokous, yhdistys, osallistujat, puheenjohtaja, paatokset }) => {\r\n    \r\n    const kaikki = puheenjohtaja.concat(osallistujat)\r\n    const avannutEsityslistan = kaikki.map(x => x.pv_avannut).reduce((a, v) => (v ===\"1\" ? a + 1 : a), 0)\r\n\r\n    const pvmForm = { month: 'numeric', day: 'numeric', year: 'numeric' };\r\n    const pvmYear = { year: 'numeric' }\r\n    const kokousnumero = kokous.kokousnro + \"/\" + (new Date(kokous.startDate)).toLocaleDateString('fi-FI', pvmYear)\r\n    const otsikko = kokous.otsikko !== '' ? `<h2>${kokous.otsikko}</h2>` : ''\r\n    const ajat = (new Date(kokous.startDate)).toLocaleDateString('fi-FI', pvmForm) + \" - \" + (new Date(kokous.endDate)).toLocaleDateString('fi-FI', pvmForm)\r\n    const osallistuu = osallistujat.map(x => '<li>' + x.firstname + ' ' + x.lastname + '</li>').join(' ')\r\n    let paatosvalta = ''\r\n    if (kokous.pv_aktiivisuus === '0' && kokous.pv_esityslista === '0' && kokous.pv_kesto === '0' && kokous.pv_muu === '') paatosvalta += '<p>Kokouksen päätösvaltaisuutta ei ole määritelty.</p>'\r\n    else { // TODO keston lisäksi muut päätösvalta kriteerit !!! ---------------------------\r\n        if (kokous.pv_esityslista !== '0') paatosvalta += kokous.pv_esityslista <= avannutEsityslistan ? `<p>Kokouksen asialistan tuli avata vähintään ${kokous.pv_esityslista} kpl osallistujista. Kokous päätösvaltainen, koska osallistujista ${avannutEsityslistan} kpl avasi esityslistan.</p>` : `<p>Kokouksen esityslistaa ei avannut riittävä määrä (${kokous.pv_esityslista} kpl) osallistujista.</p>`\r\n        if (kokous.pv_aktiivisuus !== '0') paatosvalta += `<p>Kokous on päätösvaltainen jos vähintään ${kokous.pv_aktiivisuus} kpl kokousosallistujista on ottanut asioihin kantaa.</p>`\r\n        if (kokous.pv_kesto !== '0') paatosvalta += kokous.pv_kesto_toteutunut === \"true\" ? `<p>Kokoukselle määritelty minimikesto ${kokous.pv_kesto} vuorokautta toteutui.</p>` : `<p>Kokoukselle määritelty minimikesto ${kokous.pv_kesto} vuorokautta ei toteutunut.</p>`\r\n        if (kokous.pv_muu !== '') paatosvalta += `<p>${kokous.pv_muu}</p>`\r\n    }\r\n    paatokset = paatokset.filter(x => x.tila === \"3\")\r\n    const paatostiedot = paatokset.length !== 0 ? paatokset.map(x => x.paatos !== '' ? '<h3>' + x.title + '</h3>' + '<p style=\"margin-top: -10px;\">' + x.paatos + '</p>' : '<h3>' + x.title + '</h3>').join(' ') : 'Kokouksessa ei tehty päätöksiä.'\r\n    const pj = puheenjohtaja.length !== 0 ? puheenjohtaja[0].firstname + \" \" + puheenjohtaja[0].lastname : \"kokouksessa ei ole puheenjohtajaa\"\r\n    const [poytakirja, setPoytakirja] = useState(`<h1>${yhdistys}</h1>${otsikko}<h2>Kokous ${kokousnumero}</h2><h2>${ajat}</h2><h2>Osallistujat</h2><ul>${osallistuu}</ul><p>Puheenjohtaja: ${pj}<h2>Päätösvaltaisuus</h2>${paatosvalta}<h2>Asiakohdat</h2>${paatostiedot}`)\r\n\r\n    const editorContentChange = (poytakirja) => {\r\n        setPoytakirja(poytakirja)\r\n    }\r\n    const handlePaataKokousClick = () => {\r\n        if (window.confirm('Haluatko päättää kokouksen? Tietojen muuttaminen ei ole enää kokouksen päätettyäsi mahdollista')) {\r\n            const body = JSON.stringify({ call: 'paatakokous', kokousid: kokous.id })\r\n            request.kokous(body).then(res => {\r\n                savePoytakirja()\r\n            }).catch(err => console.log('err.response', err.response))\r\n        }\r\n    }\r\n    const savePoytakirja = () => {\r\n\r\n        const body = JSON.stringify({ call: 'postdoc', id_y: kokous.id_y, kokousnro: kokous.kokousnro, type: 'poytakirja', content: poytakirja, draft: 0 })\r\n        request.documents(body).then(res => {\r\n            alert(\"Kokous on päätetty ja pöytäkirja tallennettu!\")\r\n            window.location.reload()\r\n        }).catch(err => console.log('err.response', err.response))\r\n\r\n    }\r\n    if (poytakirja) {\r\n        return (\r\n            <div className=\"mt-5 mx-auto col-md-10\">\r\n                <TextEditor editorContentChange={editorContentChange} teksti={poytakirja} className=\"mb-2\" />\r\n                <button className=\"float-right btn btn-outline-primary mt-1\" onClick={() => handlePaataKokousClick()}>Päätä kokous ja tallenna pöytäkirja</button>\r\n                <br></br>\r\n            </div>\r\n        )\r\n    } else {\r\n        return <p>Loading....</p>\r\n    }\r\n}\r\n\r\nexport default KokousPoytakirja\r\n\r\n// Pöytäkirjaan tulostuvat automaattisesti:\r\n//  Yhdistyksen nimi\r\n//  Kokouksen järjestysnumero / vuosi\r\n//  Kokousajat\r\n//  Kokouksen osallistujat\r\n//  Kokouksen päätösvaltaisuus\r\n//  Asiakohtien otsikot\r\n//  Asiakohtien sisältökentät \r\n\r\n","import React, { useState, useEffect } from 'react'\r\nimport { useParams, useHistory, Link } from 'react-router-dom'\r\nimport { getSessionRole, getUser } from '../../Components/Auth/Sessions'\r\nimport request from '../../Components/Shared/HttpRequests'\r\nimport KokousDocs from '../../Components/Kokous/KokousDocs'\r\nimport KokousOsallistujat from '../../Components/Kokous/KokousOsallistujat'\r\nimport Kokousaika from '../../Components/Kokous/Kokousaika'\r\nimport KokousPaatosvalta from '../../Components/Kokous/KokousPaatosvalta';\r\nimport Esityslista from '../../Components/UusiKokous/Esityslista/Esityslista';\r\nimport KokousPoytakirja from '../../Components/Kokous/KokousPoytakirja'\r\n\r\n\r\nconst KokousDetails = (props) => {\r\n\r\n    let history = useHistory()\r\n    const user = getUser()\r\n    const pvmForm = { month: 'numeric', day: 'numeric', year: 'numeric' };\r\n    const pvmYear = { year: 'numeric' };\r\n    const { yhdistys } = useParams()\r\n    const { kokousId } = useParams()\r\n    const [kokousRooli, setKokousRooli] = useState()\r\n    const [kokous, setKokous] = useState()\r\n    const [puheenjohtaja, setPuheenjohtaja] = useState()\r\n    const [osallistujat, setOsallistujat] = useState()\r\n    const [jasenet, setJasenet] = useState()\r\n    const [paatokset, setPaatokset] = useState()\r\n    const [showComponent, setShowComponent] = useState(\"asiat\")\r\n    const [showTable, setShowTable] = useState(true)\r\n\r\n    let yhdistys_id\r\n    if (props.location.state === undefined) history.push(`/assoc/${yhdistys}`)\r\n    else yhdistys_id = props.location.state.id_y\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if (getSessionRole()) {\r\n            const body = JSON.stringify({ call: 'getkokous', id: kokousId })\r\n            request.kokous(body).then(res => {\r\n                setKokous(res.data)\r\n            }).catch(err => console.log('err.response', err.response))\r\n\r\n            const body2 = JSON.stringify({ call: 'getosallistujat', id: kokousId, email: user.email })\r\n            request.osallistujat(body2).then(res => {\r\n                setOsallistujat(res.data.filter(x => x.role === 'osallistuja'))\r\n                setPuheenjohtaja(res.data.filter(x => x.role === 'puheenjohtaja'))\r\n                const osal = res.data.filter(x => x.email === user.email)\r\n                if (osal[0]) {\r\n                    setKokousRooli(osal[0].role)\r\n                } else history.push({ pathname: `/assoc/${yhdistys}`, state: { yhdistys_id } })\r\n            }).catch(err => console.log('err.response', err.response))\r\n\r\n            const req = JSON.stringify({ call: 'getallmembers', yhdistys: yhdistys })\r\n            request.assoc(req).then(res => {\r\n                setJasenet(res.data)\r\n            }).catch(err => console.log('err.response', err.response))\r\n\r\n            const body3 = JSON.stringify({ call: 'getpaatokset', kokousid: kokousId })\r\n            request.kokous(body3).then(res => {\r\n                setPaatokset(res.data)\r\n            }).catch(err => console.log('err.response', err.response))\r\n        }\r\n\r\n    }, [kokousId, yhdistys, user.email, history])\r\n\r\n    const handleMenuClick = (ev) => {\r\n        let napit = ev.target.parentNode.querySelectorAll(\"button\");\r\n        for (let i = 0; i < napit.length; i++) {\r\n            napit[i].classList.remove(\"valittu_menu\");\r\n        }\r\n\r\n        ev.target.classList.add(\"valittu_menu\");\r\n\r\n        setShowComponent(ev.target.name)\r\n        if (ev.target.name === 'asiakirjat') setShowTable(true)\r\n    }\r\n    const handleOsallistujatClick = (ev) => {\r\n\r\n        const henkilo = jasenet.find(x => x.email === ev.target.name)\r\n        let body\r\n        let runRequest = false\r\n\r\n        if (ev.target.id === 'varalle') {\r\n            if (window.confirm(`Haluatko perua osallistujan ${henkilo.firstname} ${henkilo.lastname} osallistumisoikeuden kokoukseen?`)) {\r\n                setOsallistujat(osallistujat.filter(x => x.email !== ev.target.name))\r\n                body = JSON.stringify({ call: 'poistaosallistuja', kokousid: kokousId, email: ev.target.name })\r\n                runRequest = true\r\n            }\r\n        } else if (ev.target.id === 'osallistujaksi') {\r\n            if (window.confirm(`Haluatko siirtää henkilön ${henkilo.firstname} ${henkilo.lastname} kokousosallistujaksi?`)) {\r\n                setOsallistujat(osallistujat.concat(henkilo))\r\n                body = JSON.stringify({ call: 'lisaaosallistuja', kokousid: kokousId, yhdistys: yhdistys, email: ev.target.name })\r\n                runRequest = true\r\n            }\r\n        } else if (ev.target.id === 'poistu') {     // Kokousosallistuja: Voi ilmoittaa esteellisyydestä yksittäiseen kokoukseen ja nimetä varakokousedustajan kokousosallistujaksi tilalleen  ????\r\n            setOsallistujat(osallistujat.filter(x => x.email !== user.email))\r\n            body = JSON.stringify({ call: 'poistaosallistuja', kokousid: kokousId, email: user.email })\r\n            runRequest = true\r\n            window.location.reload();\r\n        }\r\n        if (runRequest) {\r\n            console.log('body', body)\r\n            request.osallistujat(body).then(res => {\r\n                alert(res.data.message)\r\n            }).catch(err => {\r\n                alert(err.response.data.message)\r\n                console.log('err.response', err.response)\r\n            })\r\n        }\r\n    }\r\n    const handlePJPoistuuKokouksesta = (syy) => {\r\n   \r\n        setOsallistujat(osallistujat.filter(x => x.email !== user.email))\r\n        const body = JSON.stringify({ call: 'poistaosallistuja', kokousid: kokousId, email: user.email })\r\n\r\n        request.osallistujat(body).then(res => {\r\n            alert(\"Poistuit kokouksesta\")\r\n        }).catch(err => {\r\n            alert(err.response.data.message)\r\n            console.log('err.response', err.response)\r\n        })\r\n\r\n        const body2 = JSON.stringify({ call: 'pjpoistui', kokousid: kokousId, syy: syy, pv: 10 })\r\n        console.log('body2', body2)\r\n        request.osallistujat(body2).then(res => {\r\n            window.location.reload();\r\n        }).catch(err => console.log('err.response', err.response))\r\n\r\n\r\n    }\r\n    const handleVaihdaKokousaika = (date) => {\r\n\r\n        if (typeof date === 'object' && Date.parse(date) !== Date.parse(kokous.endDate)) {\r\n            const pvmForm = { month: 'numeric', day: 'numeric', year: 'numeric' };\r\n            const uusiPvm = date.toISOString().split('T')[0]\r\n            if (window.confirm(`Haluatko vaihtaa kokouksen uudeksi päättymispäiväksi ${(new Date(uusiPvm)).toLocaleDateString('fi-FI', pvmForm)}?`)) {\r\n                setKokous({ ...kokous, endDate: uusiPvm })\r\n                const body = JSON.stringify({ call: 'vaihdapvm', kokousid: kokousId, enddate: date })\r\n                request.kokous(body).then(res => {\r\n                    alert(res.data.message)\r\n                }).catch(err => alert(err.response.data.message))\r\n            }\r\n        } else {\r\n            alert(\"Määritä uusi päättymispäivä ennen tallentamista\")\r\n        }\r\n    }\r\n   \r\n    if (getSessionRole() && getSessionRole().yhdistys === yhdistys) {\r\n\r\n        if (kokous && kokousRooli) {\r\n\r\n            if (kokous.avoinna === \"1\" || kokousRooli === \"puheenjohtaja\") {\r\n\r\n                let component\r\n                if (showComponent === 'asiakirjat') component = <KokousDocs kokous={kokous} yhdistys={yhdistys} setShowComponent={setShowComponent} setShowTable={setShowTable} showTable={showTable} />\r\n                else if (showComponent === 'asiat') component = <Esityslista kokousid={kokousId} />\r\n                else if (showComponent === 'osallistujat') component = <KokousOsallistujat osallistujat={osallistujat} jasenet={jasenet} puheenjohtaja={puheenjohtaja} kokousRooli={kokousRooli} handleOsallistujatClick={handleOsallistujatClick} kokous={kokous}/>\r\n                else if (showComponent === 'kokousaika') component = <Kokousaika kokous={kokous} handleVaihdaKokousaika={handleVaihdaKokousaika} />\r\n                else if (showComponent === 'paatosvaltaisuus') component = <KokousPaatosvalta kokous={kokous} osallistujat={osallistujat} puheenjohtaja={puheenjohtaja}/>\r\n                else if (showComponent === 'poytakirja') component = <KokousPoytakirja kokous={kokous} yhdistys={yhdistys} osallistujat={osallistujat} puheenjohtaja={puheenjohtaja} paatokset={paatokset}/>\r\n                else component = <p>error... </p>\r\n\r\n                let text\r\n                if (Date.parse(kokous.endDate) < new Date() || kokous.loppu ===\"1\") text = \"Kokous on päättynyt\"\r\n                else if (Date.parse(kokous.endDate) > new Date() && Date.parse(kokous.startDate) < new Date()) text = \"Kokous on käynnissä\"\r\n                else text = \"Kokous ei ole vielä alkanut\"\r\n\r\n                return (\r\n                    <div className=\"mx-auto mt-5\">\r\n                        <div className=\"mx-3\">\r\n                            <h2 >{yhdistys}</h2>\r\n                            <Link to={{ pathname: `/assoc/${yhdistys}`, state: { id_y: yhdistys_id } }}>Yhdistyksen pääsivu</Link>\r\n                            <hr />\r\n                            <div className=\"mb-3\">\r\n                                <h4>{kokous.otsikko} </h4>\r\n                            </div>\r\n                            <div className=\"float-left\" style={{ display: 'grid', gridTemplateColumns: '1fr 2fr', lineHeight: '8px', whiteSpace: 'nowrap' }}>\r\n                                <p>Puheenjohtaja:</p>\r\n                                {puheenjohtaja.length !== 0\r\n                                    ? <p>{puheenjohtaja[0].firstname} {puheenjohtaja[0].lastname} </p>\r\n                                    : <p>Kokoukselle ei ole asetettu puheenjohtajaa. </p>}\r\n                                <p style={{ marginRight: '10px' }}>Kokouksen numero: </p>\r\n                                <p> {kokous.kokousnro}/{(new Date(kokous.startDate)).toLocaleDateString('fi-FI', pvmYear)}</p>\r\n                                <p>Kokouksen alku:</p>\r\n                                <p>{(new Date(kokous.startDate)).toLocaleDateString('fi-FI', pvmForm)}</p>\r\n                                <p>Kokouksen päätös:</p>\r\n                                <p>{(new Date(kokous.endDate)).toLocaleDateString('fi-FI', pvmForm)}</p>\r\n                                <small>({text})</small>\r\n                            </div>\r\n                            <div className=\"mt-4 float-right\">\r\n                                {kokous.loppu === \"0\" ? <button className=\"btn btn-danger mb-2 ml-2\" type=\"button\" title=\"Peru osallistumisesi kokoukseen\" id=\"poistu\" data-toggle=\"modal\" data-target='#poistuModal' >Peru osallistumisesi</button> : <></>}\r\n                                <PoistuModal handlePJPoistuuKokouksesta={handlePJPoistuuKokouksesta} handleOsallistujatClick={handleOsallistujatClick} kokousRooli={kokousRooli} />\r\n                            </div>\r\n                            <div className=\"clearfix\"></div>\r\n                        </div>\r\n                        <hr />\r\n                        <div className=\"d-sm-flex second_nav\">\r\n                            <button className=\"text-primary valittu_menu\" onClick={handleMenuClick} name=\"asiat\" >Asiakohdat</button>\r\n                            <button className=\"text-primary\" onClick={handleMenuClick} name=\"asiakirjat\">Asiakirjat</button>\r\n                            <button className=\"text-primary\" onClick={handleMenuClick} name=\"osallistujat\">Osallistujat</button>\r\n                            {kokousRooli === 'puheenjohtaja' && kokous.loppu === \"0\"\r\n                                ? <>     <button className=\"text-primary\" onClick={handleMenuClick} name=\"kokousaika\">Kokousaika</button></>\r\n                                : <></>\r\n                            }\r\n                            <button className=\"text-primary\" onClick={handleMenuClick} name=\"paatosvaltaisuus\">Päätösvaltaisuus</button>\r\n                            {/* TODO pöytäkirja näkyville vasta kun päätöksiä on syntynyt ???  */}\r\n                            {kokous.loppu === \"0\" && kokousRooli === 'puheenjohtaja' ? <button className=\"text-primary\" onClick={handleMenuClick} name=\"poytakirja\" >Pöytäkirja</button> : <></>}\r\n                        </div>\r\n                        {component}\r\n                    </div>\r\n                )\r\n            } else {\r\n                history.push(`/assoc/${yhdistys}`)\r\n                return <></>\r\n            }\r\n        } else {\r\n            return <p className=\"mt-4 mx-4\">Ladataan tietoja .... </p>\r\n        }\r\n    } else {\r\n        history.push(`/assoc/${yhdistys}`)\r\n        return <></>\r\n    }\r\n}\r\n\r\nexport default KokousDetails\r\n\r\n\r\nconst PoistuModal = ({ handlePJPoistuuKokouksesta, handleOsallistujatClick, kokousRooli }) => {\r\n    const [syy, setSyy] = useState('')\r\n    const handleSyyChange = (ev) => {\r\n        setSyy(ev.target.value)\r\n    }\r\n    return (\r\n        <div className=\"modal fade\" id=\"poistuModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"ModalLabel\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog\" role=\"document\">\r\n                <div className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <h5 className=\"modal-title\" id=\"ModalLabel\">Poistu kokouksesta</h5>\r\n                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <p>Haluatko poistua kokouksesta?</p>\r\n                        {kokousRooli === 'puheenjohtaja'\r\n                            ? <div className=\"form-group\">\r\n                                <textarea className=\"form-control\" rows=\"2\" name=\"syy\" onChange={handleSyyChange} value={syy} />\r\n                                <small className=\"form-text text-muted\">Voit kirjoittaa kenttään syyn kokouksesta poistumiseen.</small>\r\n                            </div>\r\n                            : <></>}\r\n                    </div>\r\n                    <div className=\"modal-footer\">\r\n                        {kokousRooli === 'puheenjohtaja'\r\n                            ? <button type=\"button\" className=\"btn btn-outline-primary\" data-dismiss=\"modal\" id='poistu' onClick={() => handlePJPoistuuKokouksesta(syy)}>Poistu kokouksesta</button>\r\n                            : <button type=\"button\" className=\"btn btn-outline-primary\" data-dismiss=\"modal\" id='poistu' onClick={handleOsallistujatClick}>Poistu kokouksesta</button>}\r\n                        <button type=\"button\" className=\"btn btn-outline-secondary\" data-dismiss=\"modal\">Peruuta</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\r\nimport PrivateRoute from './Components/Auth/PrivateRoute'\r\nimport './Style/App.css'\r\nimport 'bootswatch/dist/flatly/bootstrap.min.css'; \r\nimport Navbar from './Components/Shared/Navbar'\r\nimport Home from './Views/Home'\r\nimport Login from './Views/Auth/Login';\r\nimport Register from './Views/Auth/Register'\r\nimport UserPage from './Views/User/UserPage';\r\nimport AssocMain from './Views/Assoc/AssocMain';\r\nimport UusiKokous from './Views/Kokous/UusiKokous';\r\nimport KokousDetails from './Views/Kokous/KokousDetails';\r\n\r\n// import { getSessionRole, getUser } from './Components/Auth/Sessions'\r\n\r\nfunction App() {\r\n  \r\n  return (\r\n    <div>\r\n      <Router>\r\n        <Navbar />\r\n        <div className=\"container\" style={{width:\"1100px\",maxWidth:\"100%\",margin:\"0 auto\",padding:\"0\"}}>\r\n          <Switch >\r\n            <Route exact path='/' component={Home}/>\r\n            <Route path='/login' component={Login}/>\r\n            <Route path='/register' component={Register} />\r\n            <PrivateRoute path='/userpage' component={UserPage}/>\r\n            <PrivateRoute path='/assoc/:yhdistys' component={AssocMain}/>      \r\n            <PrivateRoute path='/uusikokous/:yhdistys' component={UusiKokous} />\r\n            <PrivateRoute path='/kokous/:yhdistys/:kokousId' component={KokousDetails} />\r\n          </Switch>\r\n        </div>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}